    2025-12-26 20:07:48,607 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:07:48,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:07:48,610 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:07:48,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:07:48,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:07:48,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:07:48,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:07:48,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:18,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:18,307 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:18,308 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:18,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:48,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:48,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:48,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:48,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:48,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:48,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:09:30,303 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:09:30,304 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:09:30,306 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:09:30,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:09:30,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:09:30,313 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:10:30,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:10:30,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:10:30,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:10:30,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:10:30,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:10:30,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:30,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:30,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:30,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:30,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:30,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:30,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:48,547 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:48,549 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:48,553 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:48,559 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:48,559 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:48,565 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:12:18,240 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:18,240 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:18,242 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:18,244 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:18,244 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:18,246 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:12:48,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:48,609 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:48,610 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:48,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:48,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:48,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:13:18,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:13:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:13:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:13:18,304 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:13:18,304 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:13:18,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:14:19,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:14:19,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:14:19,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:14:19,624 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:14:19,624 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:14:19,626 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:15:20,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:15:20,605 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:15:20,606 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:15:20,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:15:20,610 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:15:20,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:21,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:21,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:21,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:21,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:21,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:21,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:48,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:48,294 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:48,296 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:48,299 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:48,300 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:48,302 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:17:18,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:17:18,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:17:18,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:17:18,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:17:18,607 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:17:18,609 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:18:19,608 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:18:19,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:18:19,611 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:18:19,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:18:19,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:18:19,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:18:19,614 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:18:19,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:19:06,376 - main - INFO - 
2025-12-26 20:19:06,378 - main - INFO - ================================================================================
2025-12-26 20:19:06,410 - main - INFO -   üõë Shutting down application...
2025-12-26 20:19:06,412 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,466 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:19:06,473 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,506 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:19:06,525 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:19:06,539 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:19:06,541 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:19:06,541 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:19:06,542 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:19:06,544 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:19:06,544 - main - INFO - ================================================================================
2025-12-26 20:19:06,544 - main - INFO - 
2025-12-26 20:19:10,918 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:19:10,941 - main - INFO - 
2025-12-26 20:19:10,941 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:19:10,942 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:19:10,942 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:19:10,942 - main - INFO -   Upload Directory: uploads
2025-12-26 20:19:10,942 - main - INFO -   Max File Size: 20MB
2025-12-26 20:19:10,943 - main - INFO - ================================================================================
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:19:10,944 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:10,978 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:19:10,982 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:19:10,983 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:19:10,983 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,984 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,986 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:19:10,986 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:19:11,010 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:19:11,010 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:19:11,010 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:11,024 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:19:11,026 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:19:11,027 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:19:11,027 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:19:11,071 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:19:11,075 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:19:11,076 - main - INFO - 
2025-12-26 20:19:11,076 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:19:11,076 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:19:11,076 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:19:11,076 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:19:11,077 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:19:11,077 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:19:11,077 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:19:11,077 - main - INFO - 
2025-12-26 20:19:11,077 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:19:11,078 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:19:11,078 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:19:11,078 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:19:11,078 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:19:11,078 - main - INFO - 
2025-12-26 20:19:11,078 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:19:11,079 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:19:11,079 - main - INFO -        - No manual section generation
2025-12-26 20:19:11,079 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:19:11,079 - main - INFO - 
2025-12-26 20:19:11,079 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:19:11,079 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:19:11,080 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:19:11,081 - main - INFO -      Main:
2025-12-26 20:19:11,081 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:19:11,081 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -      Retrieval:
2025-12-26 20:19:11,081 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:19:11,082 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:19:11,082 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:19:11,082 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:19:11,082 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:19:11,082 - main - INFO - 
2025-12-26 20:19:11,083 - main - INFO -      Management:
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:19:11,083 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:19:11,084 - main - INFO - 
2025-12-26 20:19:11,084 - main - INFO -      Documents (MongoDB):
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:19:11,085 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:19:11,085 - main - INFO - 
2025-12-26 20:19:11,085 - main - INFO -      Diagnostics & Health:
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:19:11,086 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:19:11,086 - main - INFO - 
2025-12-26 20:19:11,086 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:19:11,087 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:19:11,088 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:19:11,090 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:19:11,090 - main - INFO - 
2025-12-26 20:19:11,090 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:19:11,090 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:19:11,091 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:19:11,091 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:19:11,091 - main - INFO -      4. No re-upload needed!
2025-12-26 20:19:11,091 - main - INFO - 
2025-12-26 20:19:11,091 - main - INFO - ================================================================================
2025-12-26 20:19:11,092 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:19:11,092 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:19:11,092 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:19:11,092 - main - INFO - ================================================================================
2025-12-26 20:19:11,093 - main - INFO - 
2025-12-26 20:19:11,093 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-26 20:19:21,593 - main - INFO - üì• OPTIONS /api/admin/activity-logs
2025-12-26 20:19:21,596 - main - INFO - üì§ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:19:21,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,625 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,628 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,635 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,637 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,643 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 20:19:21,650 - main - INFO - üì• GET /api/admin/activity-logs
2025-12-26 20:19:21,655 - app.api.routes - INFO - üìä Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:19:21,657 - app.api.routes - INFO - ‚úÖ Activity logs service already connected
2025-12-26 20:19:21,658 - app.api.routes - INFO - üîç Calling activity_logs_service.get_activity_logs...
2025-12-26 20:19:21,666 - app.api.routes - INFO - ‚úÖ Retrieved 5 logs (total: 5)
2025-12-26 20:19:21,669 - main - INFO - üì§ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 20:19:21,677 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,678 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,679 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,679 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,686 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,687 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,693 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:19:52,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:52,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:52,299 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,300 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:52,302 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:52,302 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:52,306 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:22,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:20:22,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:20:22,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:20:22,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:20:22,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:20:22,620 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:29,780 - main - INFO - 
2025-12-26 20:20:29,780 - main - INFO - ================================================================================
2025-12-26 20:20:29,780 - main - INFO -   üõë Shutting down application...
2025-12-26 20:20:29,781 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:20:29,782 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:20:29,782 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:20:29,783 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:20:29,784 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:20:29,784 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:20:29,786 - main - INFO - ================================================================================
2025-12-26 20:20:29,786 - main - INFO - 
2025-12-26 20:20:34,207 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:20:34,227 - main - INFO - 
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,228 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:20:34,228 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,229 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:20:34,229 - main - INFO -   Upload Directory: uploads
2025-12-26 20:20:34,229 - main - INFO -   Max File Size: 20MB
2025-12-26 20:20:34,229 - main - INFO - ================================================================================
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:20:34,230 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,261 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:20:34,269 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:20:34,270 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:20:34,270 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,270 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,271 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:20:34,272 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:20:34,279 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:20:34,279 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:20:34,280 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,293 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:20:34,298 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:20:34,298 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:20:34,298 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:20:34,310 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:20:34,313 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:20:34,314 - main - INFO - 
2025-12-26 20:20:34,314 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:20:34,314 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:20:34,315 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:20:34,315 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:20:34,315 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:20:34,315 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:20:34,316 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:20:34,316 - main - INFO - 
2025-12-26 20:20:34,316 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:20:34,316 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:20:34,317 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:20:34,317 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:20:34,318 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:20:34,319 - main - INFO - 
2025-12-26 20:20:34,319 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:20:34,319 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:20:34,320 - main - INFO -        - No manual section generation
2025-12-26 20:20:34,320 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:20:34,320 - main - INFO - 
2025-12-26 20:20:34,321 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:20:34,322 - main - INFO - 
2025-12-26 20:20:34,322 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:20:34,323 - main - INFO -      Main:
2025-12-26 20:20:34,323 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:20:34,323 - main - INFO - 
2025-12-26 20:20:34,323 - main - INFO -      Retrieval:
2025-12-26 20:20:34,323 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:20:34,324 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:20:34,324 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:20:34,324 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:20:34,324 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:20:34,325 - main - INFO - 
2025-12-26 20:20:34,325 - main - INFO -      Management:
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:20:34,325 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:20:34,326 - main - INFO - 
2025-12-26 20:20:34,326 - main - INFO -      Documents (MongoDB):
2025-12-26 20:20:34,326 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:20:34,327 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:20:34,327 - main - INFO - 
2025-12-26 20:20:34,327 - main - INFO -      Diagnostics & Health:
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:20:34,328 - main - INFO - 
2025-12-26 20:20:34,328 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:20:34,329 - main - INFO - 
2025-12-26 20:20:34,330 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:20:34,330 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:20:34,330 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:20:34,330 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:20:34,330 - main - INFO -      4. No re-upload needed!
2025-12-26 20:20:34,331 - main - INFO - 
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,331 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:20:34,331 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:20:34,331 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,332 - main - INFO - 
2025-12-26 20:20:34,332 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-26 20:20:52,856 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:20:52,860 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:20:52,862 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:20:52,862 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:52,865 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:52,871 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:20:52,878 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:20:52,879 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:20:52,883 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 20:21:22,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:21:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:21:22,301 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:21:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:22,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:21:22,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:21:22,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:21:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:21:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:21:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:21:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:21:52,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:21:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:21:52,621 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:21:52,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:22:22,304 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:22:22,305 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:22:22,306 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:22:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:22,308 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:22,309 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:22:22,314 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:22:22,315 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:22:22,316 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:22:52,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:22:52,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:22:52,620 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:22:52,621 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:52,622 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:52,622 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:22:52,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:22:52,629 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:22:52,636 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:23:22,300 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:23:22,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:23:22,302 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:23:22,303 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:22,305 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:23:22,311 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:23:22,312 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:23:22,317 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:23:52,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:23:52,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:23:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:23:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:52,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:23:52,623 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:23:52,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:23:52,625 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:24:22,309 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:24:22,310 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:24:22,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:24:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:22,313 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:22,313 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:24:22,319 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:24:22,320 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:24:22,324 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:24:52,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:24:52,612 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:24:52,612 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:24:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:52,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:24:52,615 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:24:52,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:24:52,617 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:25:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:25:22,306 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:25:22,307 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:25:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:25:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:25:22,308 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:25:22,310 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:25:22,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:25:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:26:23,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:26:23,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:26:23,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:26:23,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:26:23,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:26:23,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:26:23,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:26:23,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:26:23,619 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:27:24,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:27:24,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:27:24,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:27:24,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:27:24,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:27:24,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:27:24,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:27:24,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:27:24,631 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:28:25,616 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:28:25,617 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:28:25,621 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:28:25,622 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:28:25,623 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:28:25,623 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:28:25,624 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:28:25,624 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:28:25,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:28:25,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:28:25,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:29:26,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:29:26,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:29:26,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:29:26,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:29:26,614 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:29:26,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:29:26,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:29:26,617 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:29:26,618 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:30:27,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:30:27,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:30:27,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:30:27,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:30:27,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:30:27,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:30:27,623 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:30:27,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:30:27,626 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:31:28,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:31:28,612 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:31:28,612 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:31:28,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:31:28,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:31:28,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:31:28,615 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:31:28,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:31:28,617 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:32:29,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:32:29,620 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:32:29,621 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:32:29,621 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:32:29,622 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:32:29,623 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:32:29,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:32:29,629 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:32:29,634 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:33:30,631 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:33:30,633 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:33:30,633 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:33:30,634 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:33:30,635 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:33:30,635 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:33:30,638 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:33:30,639 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:33:30,641 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:34:30,304 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:34:30,305 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:34:30,306 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:34:30,306 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:34:30,306 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:34:30,307 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:34:30,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:34:30,309 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:34:30,312 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:35:30,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:35:30,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:35:30,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:35:30,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:35:30,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:35:30,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:35:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:35:30,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:35:30,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:36:30,299 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:36:30,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:36:30,301 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:36:30,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:36:30,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:36:30,302 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:36:30,304 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:36:30,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:36:30,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:37:30,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:37:30,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:37:30,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:37:30,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:37:30,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:37:30,619 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:37:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:37:30,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:37:30,631 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:38:30,309 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:38:30,311 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:38:30,327 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:38:30,328 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:38:30,329 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:38:30,329 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:38:30,331 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:38:30,331 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:38:30,335 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:38:30,335 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:38:30,338 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:39:30,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:39:30,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:39:30,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:39:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:39:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:39:30,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:39:30,622 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:39:30,622 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:39:30,624 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:40:30,314 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:40:30,316 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:40:30,318 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:40:30,319 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:40:30,320 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:40:30,320 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:40:30,324 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:40:30,325 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:40:30,328 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:41:30,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:41:30,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:41:30,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:41:30,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:41:30,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:41:30,617 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:41:30,619 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:41:30,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:41:30,620 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:42:30,308 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:42:30,309 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:42:30,309 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:42:30,309 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:42:30,309 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:42:30,310 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:42:30,312 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:42:30,312 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:42:30,315 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:43:30,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:43:30,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:43:30,613 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:43:30,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:43:30,614 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:43:30,614 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:43:30,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:43:30,617 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:43:30,621 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:44:30,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:44:30,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:44:30,303 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:44:30,303 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:30,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:30,304 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:44:30,308 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:44:30,308 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:44:30,310 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:44:52,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:44:52,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:44:52,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:44:52,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:52,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:52,622 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:44:52,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:44:52,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:44:52,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:45:22,295 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:45:22,296 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:45:22,296 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:45:22,296 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:22,297 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:22,297 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:45:22,299 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:45:22,300 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:45:22,301 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:45:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:45:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:45:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:45:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:45:52,621 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:45:52,622 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:45:52,625 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:46:22,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:46:22,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:46:22,298 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:46:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:22,299 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:22,299 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:46:22,302 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:46:22,302 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:46:22,306 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:46:52,660 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:46:52,661 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:46:52,662 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:46:52,662 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:52,663 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:52,663 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:46:52,669 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:46:52,670 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:46:52,676 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:47:22,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:47:22,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:47:22,302 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:47:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:22,303 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:22,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:47:22,306 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:47:22,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:47:22,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:47:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:47:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:47:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:47:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:47:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:47:52,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:47:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:48:22,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:48:22,293 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:48:22,294 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:48:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:22,295 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:48:22,297 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:48:22,297 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:48:22,300 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:48:52,612 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:48:52,612 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:48:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:48:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:48:52,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:48:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:52,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:52,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:48:52,624 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:48:52,625 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:48:52,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:49:22,307 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:49:22,309 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:49:22,309 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:49:22,310 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:22,311 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:22,312 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:49:22,318 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:49:22,318 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:49:22,322 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:49:52,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:49:52,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:49:52,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:49:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:52,617 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:49:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:49:52,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:49:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:50:22,303 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:50:22,303 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:50:22,304 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:50:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:50:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:50:22,304 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:50:22,306 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:50:22,307 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:50:22,308 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:51:23,602 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:51:23,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:51:23,604 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:51:23,605 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:51:23,605 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:51:23,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:51:23,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:51:23,608 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:51:23,610 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:52:24,605 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:52:24,606 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:52:24,607 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:52:24,607 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:52:24,608 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:52:24,608 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:52:24,612 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:52:24,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:52:24,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:53:25,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:53:25,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:53:25,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:53:25,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:53:25,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:53:25,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:53:25,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:53:25,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:53:25,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:54:26,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:54:26,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:54:26,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:54:26,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:54:26,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:54:26,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:54:26,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:54:26,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:54:26,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:55:27,611 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:55:27,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:55:27,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:55:27,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:55:27,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:55:27,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:55:27,622 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:55:27,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:55:27,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:56:28,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:56:28,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:56:28,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:56:28,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:56:28,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:56:28,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:56:28,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:56:28,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:56:28,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:57:29,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:57:29,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:57:29,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:57:29,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:57:29,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:57:29,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:57:29,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:57:29,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:57:29,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:58:30,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:58:30,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:58:30,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:58:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:58:30,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:58:30,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:58:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:58:30,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:58:30,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:59:30,305 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:59:30,305 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:59:30,310 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:59:30,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:59:30,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:59:30,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:59:30,312 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:59:30,312 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:59:30,315 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:59:30,316 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:59:30,318 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:00:30,607 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:00:30,607 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:00:30,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:00:30,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:00:30,608 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:00:30,608 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:00:30,610 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:00:30,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:00:30,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:01:27,651 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:01:27,659 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:01:27,662 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:01:27,663 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:27,663 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:27,664 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:01:27,675 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:01:27,698 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:01:27,712 - main - INFO - üì§ GET /api/comparisons - 200 - 0.06s
2025-12-26 21:01:52,606 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:01:52,606 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:01:52,607 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:01:52,607 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:52,607 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:52,607 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:01:52,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:01:52,609 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:01:52,611 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:02:22,310 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:02:22,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:02:22,312 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:02:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:22,313 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:22,313 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:02:22,317 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:02:22,317 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:02:22,319 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:02:52,607 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:02:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:02:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:02:52,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:02:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:02:52,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:02:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:03:22,299 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:03:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:03:22,300 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:03:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:22,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:03:22,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:03:22,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:03:22,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:03:52,629 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:03:52,633 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:03:52,649 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:03:52,650 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:52,664 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:52,668 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:03:52,675 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:03:52,677 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:03:52,681 - main - INFO - üì§ GET /api/comparisons - 200 - 0.05s
2025-12-26 21:04:02,769 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:02,774 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:02,775 - main - INFO - üì§ GET /api/posts/ - 404 - 0.01s
2025-12-26 21:04:02,777 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:02,790 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:02,793 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:02,793 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:02,795 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:03,130 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,183 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,197 - main - INFO - üì§ GET /api/posts/ - 404 - 0.07s
2025-12-26 21:04:03,202 - main - INFO - üì§ GET /api/categories/ - 404 - 0.02s
2025-12-26 21:04:03,272 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,312 - main - INFO - üì§ GET /api/posts/ - 404 - 0.04s
2025-12-26 21:04:03,319 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,367 - main - INFO - üì§ GET /api/categories/ - 404 - 0.05s
2025-12-26 21:04:03,578 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,579 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,580 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:03,581 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:03,592 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,593 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:03,596 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,598 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:22,291 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:04:22,292 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:04:22,292 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:04:22,292 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:22,292 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:22,293 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:04:22,295 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:04:22,295 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:04:22,296 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:04:52,631 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:04:52,632 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:04:52,632 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:04:52,632 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:52,633 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:52,633 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:04:52,638 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:04:52,639 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:04:52,642 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:05:22,327 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:05:22,329 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:05:22,330 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:05:22,331 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:22,332 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:22,334 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:05:22,340 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:05:22,346 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:05:22,353 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 21:05:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:05:52,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:05:52,610 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:05:52,610 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:52,610 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:52,611 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:05:52,613 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:05:52,613 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:05:52,615 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:06:22,292 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:06:22,292 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:06:22,293 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:06:22,293 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:22,293 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:22,293 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:06:22,295 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:06:22,295 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:06:22,297 - main - INFO - üì§ GET /api/comparisons - 200 - 0.00s
2025-12-26 21:06:52,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:06:52,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:06:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:06:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:52,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:06:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:06:52,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:06:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:07:22,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:07:22,294 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:07:22,294 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:07:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:22,295 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:22,295 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:07:22,297 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:07:22,297 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:07:22,299 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:07:52,606 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:07:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:07:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:07:52,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:07:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:07:52,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:07:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:08:16,280 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:08:16,281 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:08:22,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:08:22,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:08:22,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:08:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:08:22,314 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:08:22,317 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:08:22,331 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:08:22,343 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:08:22,349 - main - INFO - üì§ GET /api/comparisons - 200 - 0.05s
2025-12-26 21:08:59,946 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:08:59,994 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:08:59,998 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:00,000 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:00,002 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:00,026 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:00,053 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:00,065 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:00,072 - main - INFO - üì§ GET /api/comparisons - 200 - 0.13s
2025-12-26 21:09:22,314 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:09:22,316 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:09:22,316 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:22,316 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:22,317 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:22,317 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:22,325 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:22,327 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:22,332 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 21:09:52,609 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 21:09:52,610 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 21:09:52,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:09:52,616 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:09:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:52,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:52,621 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:10:22,300 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:10:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:10:22,300 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:10:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:22,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:10:22,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:10:22,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:10:22,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:10:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:10:52,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:10:52,611 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:10:52,612 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:52,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:10:52,619 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:10:52,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:10:52,627 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 21:11:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:11:22,306 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:11:22,307 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:11:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:22,307 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:11:22,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:11:22,309 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:11:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:11:52,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:11:52,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:11:52,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:11:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:52,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:11:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:11:52,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:11:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:12:22,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:12:22,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:12:22,298 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:12:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:22,299 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:12:22,301 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:12:22,301 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:12:22,305 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:12:52,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:12:52,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:12:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:12:52,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:52,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:12:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:12:52,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:12:52,621 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:13:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:13:22,307 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:13:22,308 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:13:22,308 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:22,309 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:22,309 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:13:22,313 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:13:22,313 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:13:22,316 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:13:37,166 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:37,166 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:39,913 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:39,914 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:40,322 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:40,323 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:40,514 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:40,515 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:41,418 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:41,419 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:41,593 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:41,594 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:52,603 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:13:52,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:13:52,604 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:13:52,604 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:52,604 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:52,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:13:52,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:13:52,607 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:13:52,609 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:14:30,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:14:30,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:14:30,299 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:14:30,299 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:14:30,300 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:14:30,300 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:14:30,303 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:14:30,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:14:30,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:14:38,656 - main - INFO - üì• GET /api/posts/
2025-12-26 21:14:38,657 - main - INFO - üì• GET /api/categories/
2025-12-26 21:14:38,659 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:14:38,661 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:14:38,673 - main - INFO - üì• GET /api/posts/
2025-12-26 21:14:38,675 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:14:38,677 - main - INFO - üì• GET /api/categories/
2025-12-26 21:14:38,678 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:15:26,616 - main - INFO - 
2025-12-26 21:15:26,618 - main - INFO - ================================================================================
2025-12-26 21:15:26,622 - main - INFO -   üõë Shutting down application...
2025-12-26 21:15:26,625 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 21:15:26,625 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 21:15:26,626 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 21:15:26,629 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 21:15:26,631 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 21:15:26,632 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 21:15:26,642 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 21:15:26,680 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 21:15:26,685 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 21:15:26,719 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 21:15:26,763 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 21:15:26,775 - main - INFO - ================================================================================
2025-12-26 21:15:26,781 - main - INFO - 
2025-12-29 19:06:33,568 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:06:33,585 - main - INFO - 
2025-12-29 19:06:33,585 - main - INFO - ================================================================================
2025-12-29 19:06:33,585 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:06:33,586 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:06:33,586 - main - INFO - ================================================================================
2025-12-29 19:06:33,586 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:06:33,586 - main - INFO -   Upload Directory: uploads
2025-12-29 19:06:33,587 - main - INFO -   Max File Size: 20MB
2025-12-29 19:06:33,587 - main - INFO - ================================================================================
2025-12-29 19:06:33,587 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:06:33,588 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:06:33,588 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:06:34,016 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:06:34,047 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:06:34,049 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:06:34,050 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:06:34,050 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:06:34,051 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:06:34,081 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:06:34,089 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:06:34,096 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:06:34,242 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:06:34,242 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:06:34,242 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:06:34,242 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:06:34,243 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:06:34,286 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:06:34,287 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:06:34,287 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:06:34,321 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:06:34,335 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:06:34,336 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:06:34,337 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:06:34,372 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:06:34,380 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:06:34,380 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:06:34,380 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:06:34,381 - main - INFO - 
2025-12-29 19:06:34,381 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:06:34,381 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:06:34,381 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:06:34,382 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:06:34,382 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:06:34,382 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:06:34,382 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:06:34,383 - main - INFO - 
2025-12-29 19:06:34,383 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:06:34,383 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:06:34,383 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:06:34,384 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:06:34,384 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:06:34,384 - main - INFO - 
2025-12-29 19:06:34,385 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:06:34,385 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:06:34,385 - main - INFO -        - No manual section generation
2025-12-29 19:06:34,385 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:06:34,386 - main - INFO - 
2025-12-29 19:06:34,386 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:06:34,387 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:06:34,388 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:06:34,389 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:06:34,389 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:06:34,390 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:06:34,390 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:06:34,390 - main - INFO - 
2025-12-29 19:06:34,391 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:06:34,391 - main - INFO -      Main:
2025-12-29 19:06:34,391 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:06:34,392 - main - INFO - 
2025-12-29 19:06:34,392 - main - INFO -      Retrieval:
2025-12-29 19:06:34,392 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:06:34,392 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:06:34,393 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:06:34,393 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:06:34,393 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:06:34,393 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:06:34,394 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:06:34,394 - main - INFO - 
2025-12-29 19:06:34,394 - main - INFO -      Management:
2025-12-29 19:06:34,394 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:06:34,394 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:06:34,395 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:06:34,395 - main - INFO - 
2025-12-29 19:06:34,395 - main - INFO -      Documents (MongoDB):
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:06:34,396 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:06:34,397 - main - INFO - 
2025-12-29 19:06:34,397 - main - INFO -      Diagnostics & Health:
2025-12-29 19:06:34,397 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:06:34,397 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:06:34,398 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:06:34,398 - main - INFO - 
2025-12-29 19:06:34,398 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:06:34,398 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:06:34,398 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:06:34,400 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:06:34,400 - main - INFO - 
2025-12-29 19:06:34,400 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:06:34,400 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:06:34,400 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:06:34,401 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:06:34,401 - main - INFO -      4. No re-upload needed!
2025-12-29 19:06:34,401 - main - INFO - 
2025-12-29 19:06:34,401 - main - INFO - ================================================================================
2025-12-29 19:06:34,402 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:06:34,402 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:06:34,402 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:06:34,403 - main - INFO - ================================================================================
2025-12-29 19:06:34,403 - main - INFO - 
2025-12-29 19:06:34,403 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:07:05,415 - main - INFO - üì• GET /docs
2025-12-29 19:07:05,416 - main - INFO - üì§ GET /docs - 200 - 0.00s
2025-12-29 19:07:06,415 - main - INFO - üì• GET /openapi.json
2025-12-29 19:07:06,466 - main - INFO - üì§ GET /openapi.json - 200 - 0.05s
2025-12-29 19:07:25,213 - main - INFO - üì• GET /docs
2025-12-29 19:07:25,215 - main - INFO - üì§ GET /docs - 200 - 0.00s
2025-12-29 19:07:25,776 - main - INFO - üì• GET /openapi.json
2025-12-29 19:07:25,778 - main - INFO - üì§ GET /openapi.json - 200 - 0.00s
2025-12-29 19:08:13,806 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 19:08:13,822 - app.api.routes - INFO - üîç Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-29 19:08:13,822 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:08:13,824 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:08:13,827 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:08:13,838 - app.services.user_subscription_service - INFO - ‚úÖ Found user: abdul (wasay7757@gmail.com)
2025-12-29 19:08:13,843 - app.api.routes - INFO - ‚úÖ User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Remaining comparisons: 245
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-29 19:08:13,844 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:08:13,845 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_fc700523859f (2 files)
2025-12-29 19:08:13,845 - app.api.routes - INFO - üìä Initialized progress tracking: job_fc700523859f
2025-12-29 19:08:13,846 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:08:13,846 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:13,846 - app.api.routes - INFO - ======================================================================
2025-12-29 19:08:13,848 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí a8cfbbf9ef9d4048b1a049f94cec5d26.pdf (464206 bytes)
2025-12-29 19:08:13,849 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:13,850 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\a8cfbbf9ef9d4048b1a049f94cec5d26.pdf
2025-12-29 19:08:13,850 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:08:13,851 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:13,967 - app.api.routes - INFO - ======================================================================
2025-12-29 19:08:13,970 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 398c788967864635bba85b1024acc34c.pdf (175401 bytes)
2025-12-29 19:08:13,970 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,010 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\398c788967864635bba85b1024acc34c.pdf
2025-12-29 19:08:14,012 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 19:08:14,043 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:14,068 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:14,094 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 19:08:14,095 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:08:14,098 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:08:14,325 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:08:14,325 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:08:14,931 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,931 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:08:14,934 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:08:14,934 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 19:08:15,042 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 19:08:15,043 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:08:42,232 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:42,830 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:08:42,830 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:08:42,831 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:08:42,832 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 19:08:42,832 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:42,833 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:08:42,839 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:08:42,839 - app.services.ai_parser - INFO - üîÑ Rate: '0.38‚Ä∞' ‚Üí '0.38‚Ä∞'
2025-12-29 19:08:42,840 - app.services.ai_parser - INFO - üí∞ Calculated: 594567.88 from SI: 1564652306.28 √ó Rate: 0.38‚Ä∞
2025-12-29 19:08:42,840 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 5 extensions
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:08:48,214 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:48,215 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:08:51,768 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:51,769 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - 
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üìä Rate: 0.38‚Ä∞
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - 
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:08:51,777 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,796 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: a8cfbbf9ef9d4048b1a049f94cec5d26.pdf ‚Üí 6952d1c328d044533f44388c
2025-12-29 19:08:51,796 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d1c328d044533f44388c
2025-12-29 19:08:51,802 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d1c328d044533f44388d (464206 bytes)
2025-12-29 19:08:51,802 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d1c328d044533f44388d
2025-12-29 19:08:51,802 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:58,317 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:58,841 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:08:58,841 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:08:58,842 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:08:58,842 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 6 benefits, using fallback...
2025-12-29 19:08:58,849 - app.services.ai_parser - INFO - üìã Fallback extracted 60 benefits from patterns
2025-12-29 19:08:58,850 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 58 total
2025-12-29 19:08:58,850 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - üìä Counts: 58 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 19:08:58,854 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:09:05,004 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:05,007 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 82.0
2025-12-29 19:09:06,017 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:06,020 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:09:06,021 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:09:06,021 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:09:06,022 - app.services.ai_parser - INFO - 
2025-12-29 19:09:06,023 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,024 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:09:06,025 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,026 - app.services.ai_parser - INFO - üè¢ Insurer: Chubb Arabia
2025-12-29 19:09:06,026 - app.services.ai_parser - INFO - üë§ Insured: M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üìä Rate: 0.35‚Ä∞
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üéØ Score: 82.0/100
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - 
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Benefits: 58
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Exclusions: 29
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Warranties: 9
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,032 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 398c788967864635bba85b1024acc34c.pdf ‚Üí 6952d1d228d044533f44388e
2025-12-29 19:09:06,032 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d1d228d044533f44388e
2025-12-29 19:09:06,037 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d1d228d044533f44388f (175401 bytes)
2025-12-29 19:09:06,038 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d1d228d044533f44388f
2025-12-29 19:09:06,040 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:09:06,041 - app.api.routes - INFO - 
‚úÖ Successfully extracted 2 quotes
2025-12-29 19:09:06,042 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:09:06,042 - app.api.routes - INFO - üîÄ Generating comparison for 2 quotes
2025-12-29 19:09:06,043 - app.api.routes - INFO - ======================================================================
2025-12-29 19:09:06,043 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 2 quotes
2025-12-29 19:09:06,043 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 19:09:06,045 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 19:09:06,045 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:09:06,046 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 19:09:06,046 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:09:06,047 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:09:06,051 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:06,056 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:09:06,057 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:09:06,058 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:09:06,059 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:09:06,059 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:09:06,060 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:09:06,061 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:09:06,061 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "care_custody_control": "SR 2,500,000 any one occurrence & in aggregate",
    "srcc_malicious_damage": "Limited to 25% of the location sum insured",
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and
2025-12-29 19:09:06,065 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,065 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:09:06,069 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,069 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:09:06,070 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:09:06,071 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:09:06,071 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 19:09:06,073 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 19:09:06,075 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 19:09:06,075 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:09:06,080 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Chubb Arabia
2025-12-29 19:09:06,083 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:09:06,085 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:09:06,086 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:06,086 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:09:06,087 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:09:06,087 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:09:06,088 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:09:06,092 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "CHUBB",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 40M to SR 100M",
        "deductible": "5%, min SR 100,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductibl
2025-12-29 19:09:06,097 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,097 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:09:06,098 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:09:06,098 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:09:06,100 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:09:06,100 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:09:06,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:09:06,103 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,105 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Chubb Arabia
2025-12-29 19:09:06,105 - app.services.ai_ranker - INFO - 
üìä Chubb Arabia:
2025-12-29 19:09:06,109 - app.services.ai_ranker - INFO -    Warranties: 9
2025-12-29 19:09:06,111 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:09:06,112 - app.services.ai_ranker - INFO -    Exclusions: 29
2025-12-29 19:09:06,113 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:09:06,113 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -       ‚Ä¢ Bookkeeping warrantee
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO -       ‚Ä¢ Hazardous good warranty
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted no workshop operations on insured premises
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Chubb Arabia
2025-12-29 19:09:06,499 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 3
2025-12-29 19:09:06,499 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted strict adherence of local/police/Civil Defense authorities for all saf...
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO -       ‚Ä¢ Premium Payment Warranty 100% at inception
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO -       ‚Ä¢ Civil Defense Certificate clause
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=82.55
2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - üìä Chubb Arabia: Hakim Score=80.0 (Baseline), Weighted Score=84.23
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 19:09:16,902 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:16,906 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 19:09:16,907 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 19:09:20,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:20,905 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Chubb Arabia: Chubb Arabia stands out as the best insurance provider due to its superior score of 84.2/100 and a c...
2025-12-29 19:09:20,906 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 19:09:20,908 - app.api.routes - INFO - üè¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-29 19:09:20,908 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 19:09:20,908 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 2
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Chubb Arabia
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,077 bytes
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 32,405 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Data table: 15,438 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,408 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 37,696 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Total document: 186,731 bytes
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 19:09:20,924 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-29 19:09:20,924 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:09:20,926 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:20,927 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 19:09:20,943 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,944 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6952d1e05a37704a1c0a83f5
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 19:09:20,951 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 19:09:20,951 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:20,952 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6952d1e05a37704a1c0a83f5
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,953 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,953 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-29 19:09:20,959 - app.services.user_subscription_service - INFO - ‚úÖ Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,960 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,960 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:09:20,960 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 19:09:20,961 - app.api.routes - INFO - ======================================================================
2025-12-29 19:09:20,961 - app.api.routes - INFO - üìä Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,961 - app.api.routes - INFO - üë§ User ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,962 - app.api.routes - INFO - üìÑ Files Processed: 2/2
2025-12-29 19:09:20,962 - app.api.routes - INFO - üíæ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-29 19:09:20,962 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,962 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:09:20,963 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:09:20,964 - app.services.user_subscription_service - INFO - ‚úÖ Found user: abdul (wasay7757@gmail.com)
2025-12-29 19:09:20,967 - app.api.routes - INFO - üìä Remaining comparisons: 244
2025-12-29 19:09:20,968 - app.api.routes - INFO - ======================================================================

2025-12-29 19:09:20,968 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_fc700523859f ‚Üí comparison_id: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,975 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,977 - main - INFO - üì§ POST /api/compare-quotes - 200 - 67.17s
2025-12-29 19:10:08,395 - main - INFO - üì• GET /api/comparison/cmp_1767035293_832bad0a731c/pdf
2025-12-29 19:10:08,395 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035293_832bad0a731c, type: both
2025-12-29 19:10:08,399 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,399 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:08,400 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:10:08,400 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:08,401 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:10:08,402 - app.services.pdf_generator_service - ERROR - ‚ùå Error building strategic memo: cannot access local variable 'rows' where it is not associated with a value
2025-12-29 19:10:08,405 - app.services.pdf_generator_service - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 460, in generate_strategic_memo_pdf
    story.extend(self._build_strategic_memo(comparison_data))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 726, in _build_strategic_memo
    for row in rows:
               ^^^^
UnboundLocalError: cannot access local variable 'rows' where it is not associated with a value

2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:10:08,661 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:10:08,662 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:10:08,667 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:10:08,668 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:10:08,670 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:10:08,672 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:10:08,674 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:10:08,674 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:10:08,677 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:10:08,850 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,852 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035293_832bad0a731c_20251229_191008.pdf (126894 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035293_832bad0a731c_20251229_191008.pdf (153437 bytes)
2025-12-29 19:10:08,854 - main - INFO - üì§ GET /api/comparison/cmp_1767035293_832bad0a731c/pdf - 200 - 0.46s
2025-12-29 19:10:49,646 - main - INFO - üì• GET /api/comparison/cmp_1767035293_832bad0a731c/pdf/detailed-comparison
2025-12-29 19:10:49,647 - app.api.routes - INFO - üìÑ Generating Detailed Comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,649 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,649 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:49,650 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:10:49,650 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:49,651 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:10:49,673 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:10:49,682 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:10:49,690 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:10:49,693 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:10:49,696 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:10:49,698 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:10:49,700 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:10:49,700 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:10:49,702 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:10:49,908 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,908 - app.api.routes - INFO - ‚úÖ Detailed Comparison PDF generated: HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035293_832bad0a731c_20251229_191049.pdf (153437 bytes)
2025-12-29 19:10:49,909 - main - INFO - üì§ GET /api/comparison/cmp_1767035293_832bad0a731c/pdf/detailed-comparison - 200 - 0.26s
2025-12-29 19:12:49,938 - main - INFO - üì• OPTIONS /api/activity-logs/create
2025-12-29 19:12:49,939 - main - INFO - üì§ OPTIONS /api/activity-logs/create - 200 - 0.00s
2025-12-29 19:12:49,945 - main - INFO - üì• POST /api/activity-logs/create
2025-12-29 19:12:49,947 - app.api.routes - INFO - üìù Creating activity log: login for user 694edeacc98c1096e3582e38
2025-12-29 19:12:49,949 - app.api.routes - INFO - ‚úÖ Activity log created: 6952d2b128d044533f443891
2025-12-29 19:12:49,951 - main - INFO - üì§ POST /api/activity-logs/create - 200 - 0.01s
2025-12-29 19:12:50,938 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,949 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,951 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,954 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,967 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,972 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,978 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,980 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,983 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:50,984 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:50,986 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:50,989 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:50,989 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:50,993 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,995 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:50,996 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:50,997 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,001 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,001 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,004 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:51,007 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:51,009 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:51,011 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,014 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,014 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,016 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:51,019 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:51,020 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:51,022 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,028 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,028 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,030 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:13:06,349 - main - INFO - üì• OPTIONS /api/compare-quotes
2025-12-29 19:13:06,350 - main - INFO - üì§ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-29 19:13:06,352 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 19:13:06,367 - app.api.routes - INFO - üîç Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-29 19:13:06,367 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 19:13:06,368 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:13:06,368 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:13:06,369 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 19:13:06,371 - app.api.routes - INFO - ‚úÖ User 694edeacc98c1096e3582e38 can perform comparison
2025-12-29 19:13:06,371 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-29 19:13:06,371 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-29 19:13:06,372 - app.api.routes - INFO -    - Files uploaded: 4
2025-12-29 19:13:06,372 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:13:06,372 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_79bcf79b34f4 (4 files)
2025-12-29 19:13:06,373 - app.api.routes - INFO - üìä Initialized progress tracking: job_79bcf79b34f4
2025-12-29 19:13:06,375 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,376 - app.api.routes - INFO - üìÑ Processing: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,376 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,377 - app.api.routes - INFO - üíæ Saved file: Pricing Plans - Hakim AI.pdf ‚Üí 0a7cf71bc1f44cf0a57d9c0c7783a525.pdf (75894 bytes)
2025-12-29 19:13:06,378 - app.api.routes - INFO - üìñ Extracting text from: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,378 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,378 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\0a7cf71bc1f44cf0a57d9c0c7783a525.pdf
2025-12-29 19:13:06,379 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,379 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,422 - app.services.pdf_extractor - INFO - Successfully extracted 1805 characters from 2 pages
2025-12-29 19:13:06,422 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 52164b33cae544559aa3e2fea5af515f.pdf (464206 bytes)
2025-12-29 19:13:06,422 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,423 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,423 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,424 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,423 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\52164b33cae544559aa3e2fea5af515f.pdf
2025-12-29 19:13:06,498 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 19:13:06,498 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí f0a5ec97aab045d098a7fe8204b7d4c8.pdf (175401 bytes)
2025-12-29 19:13:06,498 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,499 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\f0a5ec97aab045d098a7fe8204b7d4c8.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,553 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 19:13:06,554 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Liva.pdf ‚Üí 04f9c0bc466d48adba03149e0ea62127.pdf (331157 bytes)
2025-12-29 19:13:06,554 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,554 - app.api.routes - INFO - ü§ñ Parsing with AI: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,555 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\04f9c0bc466d48adba03149e0ea62127.pdf
2025-12-29 19:13:06,555 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,581 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from text: Al Rajhi Takaful
2025-12-29 19:13:06,599 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Al Rajhi Takaful
2025-12-29 19:13:06,613 - app.services.ai_parser - INFO - üë§ Insured (Customer): Unknown Insured
2025-12-29 19:13:06,625 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,625 - app.services.pdf_extractor - INFO - Successfully extracted 18289 characters from 8 pages
2025-12-29 19:13:06,626 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:13:06,633 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:13:06,633 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,637 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:13:06,829 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:13:06,829 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,831 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 19:13:06,914 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 19:13:06,914 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,918 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,919 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,920 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Liva Insurance (pattern: \bliva\b)
2025-12-29 19:13:06,920 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Liva Insurance
2025-12-29 19:13:06,921 - app.services.ai_parser - INFO - üë§ Insured (Customer): No.  Description
2025-12-29 19:13:06,921 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,922 - app.services.ai_parser - INFO - üìã Detected format: LIVA
2025-12-29 19:13:07,032 - app.services.ai_parser - INFO - üéØ Pre-extracted 7 sublimits
2025-12-29 19:13:07,033 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:30,827 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:32,047 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:32,047 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:32,048 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:32,049 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 exclusions, using fallback...
2025-12-29 19:13:32,055 - app.services.ai_parser - INFO - üö´ Fallback extracted 1 exclusions from patterns
2025-12-29 19:13:32,056 - app.services.ai_parser - INFO - ‚úÖ Enhanced exclusions: 3 total
2025-12-29 19:13:32,056 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 19:13:32,057 - app.services.ai_parser - INFO - üìã Fallback extracted 0 benefits from patterns
2025-12-29 19:13:32,058 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:32,058 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:32,058 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Could not normalize rate: EXACT rate text
2025-12-29 19:13:32,059 - app.services.ai_parser - INFO - üîÑ Rate: 'EXACT rate text' ‚Üí 'EXACT rate text'
2025-12-29 19:13:32,059 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,060 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,060 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,061 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:32,061 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:32,062 - app.services.ai_parser - INFO - üìä Counts: 2 benefits, 3 exclusions, 6 warranties, 3 extensions
2025-12-29 19:13:32,062 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:32,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:32,216 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:32,216 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:32,217 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:32,217 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 19:13:32,217 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:32,217 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 19:13:32,222 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üîÑ Rate: '0.38‚Ä∞' ‚Üí '0.38‚Ä∞'
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üí∞ Calculated: 594567.88 from SI: 1564652306.28 √ó Rate: 0.38‚Ä∞
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:32,225 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 3 extensions
2025-12-29 19:13:32,225 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:36,798 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:37,560 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:38,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:38,410 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:38,472 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:38,722 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:38,723 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:38,723 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - 
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,725 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 19:13:38,725 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:13:38,726 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 19:13:38,726 - app.services.ai_parser - INFO - üìä Rate: 0.38‚Ä∞
2025-12-29 19:13:38,727 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:38,728 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:38,728 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:38,729 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:38,730 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:38,730 - app.services.ai_parser - INFO - 
2025-12-29 19:13:38,731 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:38,731 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:38,733 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:38,733 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,737 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 52164b33cae544559aa3e2fea5af515f.pdf ‚Üí 6952d2e228d044533f443892
2025-12-29 19:13:38,738 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2e228d044533f443892
2025-12-29 19:13:38,748 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d2e228d044533f443893 (464206 bytes)
2025-12-29 19:13:38,749 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d2e228d044533f443893
2025-12-29 19:13:38,750 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:39,181 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:39,186 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 6 benefits, using fallback...
2025-12-29 19:13:39,189 - app.services.ai_parser - INFO - üìã Fallback extracted 60 benefits from patterns
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 59 total
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:39,191 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 19:13:39,191 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 19:13:39,192 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,192 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,193 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,193 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:39,194 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:39,194 - app.services.ai_parser - INFO - üìä Counts: 59 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 19:13:39,195 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:39,725 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:40,261 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:40,263 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:40,264 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:40,265 - app.services.ai_parser - INFO - 
2025-12-29 19:13:40,266 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,267 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:40,267 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,268 - app.services.ai_parser - INFO - üè¢ Insurer: Al Rajhi Takaful
2025-12-29 19:13:40,269 - app.services.ai_parser - INFO - üë§ Insured: Unknown Insured
2025-12-29 19:13:40,271 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:13:40,272 - app.services.ai_parser - INFO - üìä Rate: EXACT rate text
2025-12-29 19:13:40,273 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:40,274 - app.services.ai_parser - INFO - üìè Quality: 83.7/100
2025-12-29 19:13:40,276 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:40,277 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:40,278 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:40,280 - app.services.ai_parser - INFO - 
2025-12-29 19:13:40,281 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:40,282 - app.services.ai_parser - INFO -    ‚úì Benefits: 2
2025-12-29 19:13:40,283 - app.services.ai_parser - INFO -    ‚úì Exclusions: 3
2025-12-29 19:13:40,284 - app.services.ai_parser - INFO -    ‚úì Warranties: 6
2025-12-29 19:13:40,286 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:40,287 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:40,288 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,296 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:40,301 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 0a7cf71bc1f44cf0a57d9c0c7783a525.pdf ‚Üí 6952d2e428d044533f443894
2025-12-29 19:13:40,302 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2e428d044533f443894
2025-12-29 19:13:40,312 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952d2e428d044533f443895 (75894 bytes)
2025-12-29 19:13:40,314 - app.api.routes - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952d2e428d044533f443895
2025-12-29 19:13:40,315 - app.api.routes - INFO - ‚úÖ Successfully processed: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:41,790 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:41,790 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:41,791 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:41,791 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 19:13:41,794 - app.services.ai_parser - INFO - üìã Fallback extracted 32 benefits from patterns
2025-12-29 19:13:41,795 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 34 total
2025-12-29 19:13:41,796 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üîÑ Rate: '0.379%o on Total Sum insured of SAR 1,564,652,306.28' ‚Üí '0.379‚Ä∞'
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üí∞ Calculated: 593003.22 from SI: 1564652306.28 √ó Rate: 0.379%o on Total Sum insured of SAR 1,564,652,306.28
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:41,799 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:41,801 - app.services.ai_parser - INFO - üìä Counts: 34 benefits, 26 exclusions, 7 warranties, 3 extensions
2025-12-29 19:13:41,801 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:45,415 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:45,425 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:46,221 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:46,223 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:46,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:46,910 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:46,911 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:46,912 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:46,912 - app.services.ai_parser - INFO - 
2025-12-29 19:13:46,913 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,913 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üè¢ Insurer: Liva Insurance
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üë§ Insured: No.  Description
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üí∞ Premium: SAR 593,003.00
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üìä Rate: 0.379‚Ä∞
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date of indication
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - üíº Brokerage: N/A
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - 
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:46,917 - app.services.ai_parser - INFO -    ‚úì Benefits: 34
2025-12-29 19:13:46,918 - app.services.ai_parser - INFO -    ‚úì Exclusions: 26
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Warranties: 7
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,921 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 04f9c0bc466d48adba03149e0ea62127.pdf ‚Üí 6952d2ea28d044533f443896
2025-12-29 19:13:46,921 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2ea28d044533f443896
2025-12-29 19:13:46,924 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Liva.pdf ‚Üí 6952d2ea28d044533f443897 (331157 bytes)
2025-12-29 19:13:46,925 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Liva.pdf ‚Üí 6952d2ea28d044533f443897
2025-12-29 19:13:46,925 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:47,194 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:47,962 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:47,964 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:47,965 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:47,966 - app.services.ai_parser - INFO - 
2025-12-29 19:13:47,966 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,967 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:47,968 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,969 - app.services.ai_parser - INFO - üè¢ Insurer: Chubb Arabia
2025-12-29 19:13:47,970 - app.services.ai_parser - INFO - üë§ Insured: M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:13:47,971 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:13:47,971 - app.services.ai_parser - INFO - üìä Rate: 0.35‚Ä∞
2025-12-29 19:13:47,972 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:47,972 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:47,973 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:47,974 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:47,974 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:47,975 - app.services.ai_parser - INFO - 
2025-12-29 19:13:47,976 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:47,977 - app.services.ai_parser - INFO -    ‚úì Benefits: 59
2025-12-29 19:13:47,978 - app.services.ai_parser - INFO -    ‚úì Exclusions: 29
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Warranties: 9
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:47,980 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,983 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: f0a5ec97aab045d098a7fe8204b7d4c8.pdf ‚Üí 6952d2eb28d044533f443898
2025-12-29 19:13:47,984 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2eb28d044533f443898
2025-12-29 19:13:47,987 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d2eb28d044533f443899 (175401 bytes)
2025-12-29 19:13:47,987 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d2eb28d044533f443899
2025-12-29 19:13:47,988 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:47,988 - app.api.routes - INFO - 
‚úÖ Successfully extracted 4 quotes
2025-12-29 19:13:47,989 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:47,989 - app.api.routes - INFO - üîÄ Generating comparison for 4 quotes
2025-12-29 19:13:47,989 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:47,990 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 4 quotes
2025-12-29 19:13:47,990 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 19:13:47,993 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 19:13:47,994 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:13:47,995 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 19:13:47,995 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 19:13:47,996 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:47,996 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 19:13:47,997 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:47,997 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:47,998 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:47,998 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:47,999 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:47,999 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,001 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,001 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,002 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,003 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,003 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and Contamination",
      "Nuclear Risks Exclusion - NMA 1975A",
      "Sabotage and terrorism",
      "Property cyber data exclusion LMA 5401",
      "Clar
2025-12-29 19:13:48,007 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,009 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,014 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,014 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,015 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,016 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,016 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,017 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,018 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,018 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,019 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,019 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,020 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,020 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,021 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,022 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,025 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,026 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,027 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 19:13:48,028 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 19:13:48,029 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 19:13:48,030 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,031 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 19:13:48,031 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,032 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,033 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Al Rajhi Takaful
2025-12-29 19:13:48,033 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,034 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,034 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,035 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,035 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,037 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,037 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,038 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,040 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,042 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,044 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "MD amount",
    "business_interruption": "BI amount",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "14 da
2025-12-29 19:13:48,050 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,051 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,052 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,052 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,053 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,053 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,055 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,056 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,058 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,059 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,059 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,060 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,060 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,061 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,062 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,063 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,064 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,065 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,066 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Al Rajhi Takaful
2025-12-29 19:13:48,067 - app.services.ai_ranker - INFO - 
üìä Al Rajhi Takaful:
2025-12-29 19:13:48,067 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Exclusions: 3
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,069 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,070 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Liva Insurance
2025-12-29 19:13:48,071 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,072 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,073 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,079 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,080 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,081 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension', 'Professional Valuation Report required for property with total Sum Insured exceeding SR40m'], 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers'], 'documentation_required': ['Detailed lists of items covered under gross profit for Business Interruption', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']}
2025-12-29 19:13:48,083 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,085 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,085 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,086 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,089 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "LIVA",
  "sum_insured_breakdown": {
    "material_damage": "SR 1,564,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible
2025-12-29 19:13:48,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-29 19:13:48,104 - app.services.ai_ranker - INFO -    ‚úÖ Found 2 items in key 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers']
2025-12-29 19:13:48,110 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'documentation_required': ['Detailed lists of items covered under gross profit for Business Interruption', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']
2025-12-29 19:13:48,112 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,113 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,114 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,115 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,117 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,119 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,120 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,128 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,130 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,131 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,137 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,146 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,147 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,148 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 9
2025-12-29 19:13:48,150 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-29 19:13:48,151 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 9 subjectivities for Liva Insurance
2025-12-29 19:13:48,152 - app.services.ai_ranker - INFO - 
üìä Liva Insurance:
2025-12-29 19:13:48,152 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-29 19:13:48,153 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,153 - app.services.ai_ranker - INFO -    Exclusions: 26
2025-12-29 19:13:48,155 - app.services.ai_ranker - INFO -    Subjectivities: 9
2025-12-29 19:13:48,156 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,161 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Chubb Arabia
2025-12-29 19:13:48,162 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,164 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,164 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,165 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,166 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,166 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,168 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,169 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,169 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,170 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,171 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "CHUBB",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 40M to SR 100M",
        "deductible": "5%, min SR 100,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductibl
2025-12-29 19:13:48,186 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,188 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,193 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,194 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,197 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,198 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,199 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,200 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,201 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,205 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,219 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,219 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,220 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,220 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,222 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,228 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,234 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,236 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,237 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Chubb Arabia
2025-12-29 19:13:48,237 - app.services.ai_ranker - INFO - 
üìä Chubb Arabia:
2025-12-29 19:13:48,238 - app.services.ai_ranker - INFO -    Warranties: 9
2025-12-29 19:13:48,239 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:13:48,253 - app.services.ai_ranker - INFO -    Exclusions: 29
2025-12-29 19:13:48,254 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,254 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 19:13:48,920 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W16) Bookkeeping warrantee
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W22) Hazardous good warranty
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W28) warranted no workshop operations on insured premises
2025-12-29 19:13:48,923 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Al Rajhi Takaful
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 0
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 1
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 1
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:48,986 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Liva Insurance
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 1
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 7
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 9
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted properties in the open and/or open sided sheds are covered against fir...
2025-12-29 19:13:49,374 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Chubb Arabia
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 3
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 2
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted strict adherence of local/police/Civil Defense authorities for all saf...
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -       ‚Ä¢ Premium Payment Warranty 100% at inception
2025-12-29 19:13:49,890 - app.services.ai_ranker - INFO -       ‚Ä¢ Civil Defense Certificate clause
2025-12-29 19:13:49,890 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:13:49,891 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 19:13:49,891 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 19:13:49,893 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=80.83
2025-12-29 19:13:49,894 - app.services.ai_ranker - WARNING - ‚ö†Ô∏è Al Rajhi Takaful: Invalid rate (0.0), applying penalty score
2025-12-29 19:13:49,896 - app.services.ai_ranker - INFO - üìä Al Rajhi Takaful: Hakim Score=80.0 (Baseline), Weighted Score=64.38
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - üìä Liva Insurance: Hakim Score=84.0 (Solid), Weighted Score=77.39
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - üìä Chubb Arabia: Hakim Score=80.0 (Baseline), Weighted Score=84.23
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 19:13:49,899 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 19:13:49,900 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 19:13:59,191 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:59,196 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 19:13:59,197 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 19:14:01,755 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:14:01,758 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Chubb Arabia: Chubb Arabia stands out as the best insurance provider with a top rank of #1 and a score of 84.2/100...
2025-12-29 19:14:01,759 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 19:14:01,760 - app.api.routes - INFO - üè¢ Main user - using user_id as company_id for sub-user access: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 4
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 4
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Al Rajhi Takaful
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:14:01,767 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Summary: 6,144 bytes
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 48,963 bytes
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Data table: 22,917 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,970 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 60,076 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Total document: 291,468 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       premium: 4 items
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       rate: 4 items
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       score: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       deductible: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       coverage: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       benefits: 4 items
2025-12-29 19:14:01,772 - app.services.mongodb_service_enhanced - INFO -       exclusions: 4 items
2025-12-29 19:14:01,772 - app.services.mongodb_service_enhanced - INFO -       warranties: 4 items
2025-12-29 19:14:01,773 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 4 items
2025-12-29 19:14:01,774 - app.services.mongodb_service_enhanced - INFO -       conditions: 4 items
2025-12-29 19:14:01,775 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 4 items
2025-12-29 19:14:01,775 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 4 items
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 4 items
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -       - Count: 4
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 19:14:01,785 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,785 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6952d2f95a37704a1c0a83f6
2025-12-29 19:14:01,800 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 4
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 4
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 4
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:14:01,805 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6952d2f95a37704a1c0a83f6
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,806 - app.api.routes - INFO -    User ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Company ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,809 - app.services.user_subscription_service - INFO - ‚úÖ Unlimited plan - no usage tracking needed for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,810 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,810 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:14:01,810 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 19:14:01,811 - app.api.routes - INFO - ======================================================================
2025-12-29 19:14:01,811 - app.api.routes - INFO - üìä Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,811 - app.api.routes - INFO - üë§ User ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,812 - app.api.routes - INFO - üìÑ Files Processed: 4/4
2025-12-29 19:14:01,812 - app.api.routes - INFO - üíæ Saved to MongoDB: 4 PDFs + 1 comparison
2025-12-29 19:14:01,812 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,813 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:14:01,813 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:14:01,816 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 19:14:01,817 - app.api.routes - INFO - üìä Remaining comparisons: -1
2025-12-29 19:14:01,817 - app.api.routes - INFO - ======================================================================

2025-12-29 19:14:01,817 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_79bcf79b34f4 ‚Üí comparison_id: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,818 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,821 - main - INFO - üì§ POST /api/compare-quotes - 200 - 55.47s
2025-12-29 19:14:02,069 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,072 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,077 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,085 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,087 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,102 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:14:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,113 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,122 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,123 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,129 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:02,137 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,139 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,142 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,153 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,153 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,162 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:02,172 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,173 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,176 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,182 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,183 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,189 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:22,435 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:14:22,435 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.00s
2025-12-29 19:14:22,438 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:14:22,438 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 19:14:22,441 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,442 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:14:22,442 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:14:22,443 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:14:22,443 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:14:22,444 - app.services.pdf_generator_service - ERROR - ‚ùå Error building strategic memo: cannot access local variable 'rows' where it is not associated with a value
2025-12-29 19:14:22,445 - app.services.pdf_generator_service - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 460, in generate_strategic_memo_pdf
    story.extend(self._build_strategic_memo(comparison_data))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 726, in _build_strategic_memo
    for row in rows:
               ^^^^
UnboundLocalError: cannot access local variable 'rows' where it is not associated with a value

2025-12-29 19:14:22,539 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,539 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,540 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:14:22,540 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:14:22,541 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:14:22,542 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:14:22,601 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:14:22,601 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:14:22,611 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:14:22,611 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:14:22,612 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:14:22,612 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:14:22,614 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:14:22,614 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:14:22,615 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:14:22,809 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,811 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_191422.pdf (126895 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_191422.pdf (163491 bytes)
2025-12-29 19:14:22,814 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.38s
2025-12-29 19:14:32,106 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:32,107 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:32,109 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:32,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:32,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:32,126 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:02,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:02,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:02,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:02,118 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:15:26,065 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,066 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,067 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,071 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,071 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,076 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:15:26,079 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,081 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,082 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,089 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,090 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,095 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:26,193 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,193 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,195 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,201 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,202 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,212 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:26,230 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,233 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,240 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,250 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,253 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,262 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:15:32,101 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:32,103 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:32,105 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:32,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:32,114 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:32,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:16:02,106 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:16:02,107 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:16:02,108 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:16:02,112 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:16:02,112 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:16:02,116 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:16:32,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:16:32,417 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:16:32,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:16:32,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:16:32,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:16:32,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:16:34,415 - app.services.progress_tracker - INFO - üßπ Cleaned up 1 old progress entries
2025-12-29 19:16:34,416 - app.services.progress_tracker - INFO - üßπ Cleanup task: Removed 1 old entries
2025-12-29 19:17:01,326 - main - INFO - 
2025-12-29 19:17:01,327 - main - INFO - ================================================================================
2025-12-29 19:17:01,327 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:01,331 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:01,332 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:01,333 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:01,333 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:01,335 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:01,335 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:01,336 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:01,337 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:01,338 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:01,338 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:01,343 - main - INFO -   ‚úÖ Cleaned up 6 temporary files
2025-12-29 19:17:01,344 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:01,346 - main - INFO - ================================================================================
2025-12-29 19:17:01,346 - main - INFO - 
2025-12-29 19:17:05,464 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:05,483 - main - INFO - 
2025-12-29 19:17:05,484 - main - INFO - ================================================================================
2025-12-29 19:17:05,484 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:05,484 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:05,484 - main - INFO - ================================================================================
2025-12-29 19:17:05,485 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:05,485 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:05,485 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:05,485 - main - INFO - ================================================================================
2025-12-29 19:17:05,486 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:05,486 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:05,486 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:05,520 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:05,530 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:05,530 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:05,564 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:05,565 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:05,566 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:05,568 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:05,569 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:05,596 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:05,597 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:05,597 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:05,604 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:05,607 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:05,607 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:05,607 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:05,640 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:05,649 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:05,650 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:05,650 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:05,650 - main - INFO - 
2025-12-29 19:17:05,651 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:05,651 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:05,651 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:05,651 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:05,652 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:05,652 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:05,652 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:05,652 - main - INFO - 
2025-12-29 19:17:05,653 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:05,653 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:05,653 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:05,654 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:05,654 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:05,654 - main - INFO - 
2025-12-29 19:17:05,655 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:05,655 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:05,655 - main - INFO -        - No manual section generation
2025-12-29 19:17:05,655 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:05,656 - main - INFO - 
2025-12-29 19:17:05,656 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:05,656 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:05,657 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:05,658 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:05,658 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:05,659 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:05,659 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:05,659 - main - INFO - 
2025-12-29 19:17:05,659 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:05,660 - main - INFO -      Main:
2025-12-29 19:17:05,660 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:05,660 - main - INFO - 
2025-12-29 19:17:05,660 - main - INFO -      Retrieval:
2025-12-29 19:17:05,661 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:05,661 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:05,662 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:05,662 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:05,662 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:05,663 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:05,664 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:05,664 - main - INFO - 
2025-12-29 19:17:05,665 - main - INFO -      Management:
2025-12-29 19:17:05,665 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:05,666 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:05,666 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:05,666 - main - INFO - 
2025-12-29 19:17:05,667 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:05,667 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:05,668 - main - INFO - 
2025-12-29 19:17:05,668 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:05,668 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:05,668 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:05,669 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:05,669 - main - INFO - 
2025-12-29 19:17:05,669 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:05,669 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:05,670 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:05,670 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:05,672 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:05,672 - main - INFO - 
2025-12-29 19:17:05,672 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:05,672 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:05,673 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:05,673 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:05,673 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:05,674 - main - INFO - 
2025-12-29 19:17:05,674 - main - INFO - ================================================================================
2025-12-29 19:17:05,674 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:05,674 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:05,675 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:05,675 - main - INFO - ================================================================================
2025-12-29 19:17:05,675 - main - INFO - 
2025-12-29 19:17:05,676 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:09,468 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:09,494 - main - INFO - 
2025-12-29 19:17:09,494 - main - INFO - ================================================================================
2025-12-29 19:17:09,494 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:09,495 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:09,495 - main - INFO - ================================================================================
2025-12-29 19:17:09,495 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:09,495 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:09,496 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:09,496 - main - INFO - ================================================================================
2025-12-29 19:17:09,497 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:09,497 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:09,497 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:09,522 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:09,533 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:09,533 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:09,544 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:09,547 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:09,549 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:09,551 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:09,551 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:09,551 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:09,551 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:09,552 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:09,562 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:09,563 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:09,563 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:09,570 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:09,572 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:09,573 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:09,573 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:09,583 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:09,587 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:09,587 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:09,587 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:09,587 - main - INFO - 
2025-12-29 19:17:09,588 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:09,588 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:09,588 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:09,588 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:09,588 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:09,589 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:09,589 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:09,589 - main - INFO - 
2025-12-29 19:17:09,589 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:09,590 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:09,590 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:09,590 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:09,591 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:09,592 - main - INFO - 
2025-12-29 19:17:09,593 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:09,593 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:09,594 - main - INFO -        - No manual section generation
2025-12-29 19:17:09,594 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:09,594 - main - INFO - 
2025-12-29 19:17:09,594 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:09,594 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:09,596 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:09,596 - main - INFO - 
2025-12-29 19:17:09,597 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:09,597 - main - INFO -      Main:
2025-12-29 19:17:09,597 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:09,598 - main - INFO - 
2025-12-29 19:17:09,598 - main - INFO -      Retrieval:
2025-12-29 19:17:09,598 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:09,598 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:09,599 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:09,599 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:09,599 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:09,599 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:09,599 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:09,599 - main - INFO - 
2025-12-29 19:17:09,600 - main - INFO -      Management:
2025-12-29 19:17:09,600 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:09,600 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:09,600 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:09,600 - main - INFO - 
2025-12-29 19:17:09,600 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:09,601 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:09,601 - main - INFO - 
2025-12-29 19:17:09,601 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:09,602 - main - INFO - 
2025-12-29 19:17:09,602 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:09,602 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:09,603 - main - INFO - 
2025-12-29 19:17:09,604 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:09,604 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:09,604 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:09,604 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:09,604 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:09,604 - main - INFO - 
2025-12-29 19:17:09,605 - main - INFO - ================================================================================
2025-12-29 19:17:09,605 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:09,605 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:09,605 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:09,605 - main - INFO - ================================================================================
2025-12-29 19:17:09,605 - main - INFO - 
2025-12-29 19:17:09,606 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:21,144 - main - INFO - 
2025-12-29 19:17:21,144 - main - INFO - ================================================================================
2025-12-29 19:17:21,144 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:21,145 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:21,146 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:21,146 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:21,147 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:21,148 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:21,148 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:21,149 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:21,149 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:21,150 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:21,152 - main - INFO - ================================================================================
2025-12-29 19:17:21,152 - main - INFO - 
2025-12-29 19:17:26,559 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:26,587 - main - INFO - 
2025-12-29 19:17:26,587 - main - INFO - ================================================================================
2025-12-29 19:17:26,587 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:26,588 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:26,588 - main - INFO - ================================================================================
2025-12-29 19:17:26,588 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:26,588 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:26,588 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:26,589 - main - INFO - ================================================================================
2025-12-29 19:17:26,589 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:26,590 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:26,590 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:26,608 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:26,614 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:26,614 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:26,614 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:26,614 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:26,615 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:26,627 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:26,629 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:26,631 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:26,634 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:26,635 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:26,635 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:26,636 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:26,636 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:26,649 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:26,649 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:26,650 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:26,665 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:26,670 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:26,670 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:26,671 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:26,684 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:26,689 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:26,689 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:26,692 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:26,693 - main - INFO - 
2025-12-29 19:17:26,693 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:26,694 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:26,694 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:26,695 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:26,695 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:26,697 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:26,699 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:26,700 - main - INFO - 
2025-12-29 19:17:26,700 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:26,701 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:26,701 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:26,701 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:26,701 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:26,702 - main - INFO - 
2025-12-29 19:17:26,702 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:26,702 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:26,702 - main - INFO -        - No manual section generation
2025-12-29 19:17:26,703 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:26,703 - main - INFO - 
2025-12-29 19:17:26,703 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:26,703 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:26,703 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:26,705 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:26,705 - main - INFO - 
2025-12-29 19:17:26,705 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:26,705 - main - INFO -      Main:
2025-12-29 19:17:26,705 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:26,706 - main - INFO - 
2025-12-29 19:17:26,706 - main - INFO -      Retrieval:
2025-12-29 19:17:26,707 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:26,708 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:26,708 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:26,708 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:26,709 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:26,709 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:26,709 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:26,710 - main - INFO - 
2025-12-29 19:17:26,710 - main - INFO -      Management:
2025-12-29 19:17:26,711 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:26,712 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:26,713 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:26,715 - main - INFO - 
2025-12-29 19:17:26,715 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:26,716 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:26,717 - main - INFO - 
2025-12-29 19:17:26,717 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:26,717 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:26,717 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:26,718 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:26,718 - main - INFO - 
2025-12-29 19:17:26,718 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:26,718 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:26,718 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:26,720 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:26,720 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:26,720 - main - INFO - 
2025-12-29 19:17:26,721 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:26,721 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:26,721 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:26,721 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:26,722 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:26,722 - main - INFO - 
2025-12-29 19:17:26,722 - main - INFO - ================================================================================
2025-12-29 19:17:26,722 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:26,723 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:26,723 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:26,723 - main - INFO - ================================================================================
2025-12-29 19:17:26,724 - main - INFO - 
2025-12-29 19:17:26,724 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:31,123 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:31,148 - main - INFO - 
2025-12-29 19:17:31,148 - main - INFO - ================================================================================
2025-12-29 19:17:31,149 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:31,149 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:31,149 - main - INFO - ================================================================================
2025-12-29 19:17:31,149 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:31,150 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:31,150 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:31,150 - main - INFO - ================================================================================
2025-12-29 19:17:31,150 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:31,151 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:31,151 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:31,198 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:31,203 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:31,203 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:31,203 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:31,204 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:31,204 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:31,240 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:31,242 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:31,246 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:31,249 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:31,249 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:31,249 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:31,249 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:31,250 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:31,271 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:31,272 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:31,272 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:31,302 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:31,307 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:31,311 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:31,314 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:31,349 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:31,365 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:31,367 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:31,367 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:31,367 - main - INFO - 
2025-12-29 19:17:31,368 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:31,369 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:31,370 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:31,370 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:31,370 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:31,371 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:31,371 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:31,371 - main - INFO - 
2025-12-29 19:17:31,372 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:31,372 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:31,372 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:31,372 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:31,374 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:31,375 - main - INFO - 
2025-12-29 19:17:31,379 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:31,380 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:31,380 - main - INFO -        - No manual section generation
2025-12-29 19:17:31,381 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:31,381 - main - INFO - 
2025-12-29 19:17:31,381 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:31,381 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:31,383 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:31,384 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:31,385 - main - INFO - 
2025-12-29 19:17:31,386 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:31,386 - main - INFO -      Main:
2025-12-29 19:17:31,387 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:31,387 - main - INFO - 
2025-12-29 19:17:31,388 - main - INFO -      Retrieval:
2025-12-29 19:17:31,389 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:31,389 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:31,394 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:31,397 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:31,398 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:31,398 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:31,399 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:31,399 - main - INFO - 
2025-12-29 19:17:31,400 - main - INFO -      Management:
2025-12-29 19:17:31,400 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:31,400 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:31,401 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:31,401 - main - INFO - 
2025-12-29 19:17:31,401 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:31,402 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:31,403 - main - INFO - 
2025-12-29 19:17:31,403 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:31,403 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:31,404 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:31,404 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:31,404 - main - INFO - 
2025-12-29 19:17:31,405 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:31,406 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:31,409 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:31,413 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:31,414 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:31,415 - main - INFO - 
2025-12-29 19:17:31,415 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:31,415 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:31,416 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:31,416 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:31,416 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:31,416 - main - INFO - 
2025-12-29 19:17:31,417 - main - INFO - ================================================================================
2025-12-29 19:17:31,417 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:31,418 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:31,418 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:31,419 - main - INFO - ================================================================================
2025-12-29 19:17:31,419 - main - INFO - 
2025-12-29 19:17:31,420 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:32,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:17:32,420 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:17:32,421 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:17:32,431 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:17:32,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:17:32,435 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:17:37,593 - main - INFO - 
2025-12-29 19:17:37,593 - main - INFO - ================================================================================
2025-12-29 19:17:37,594 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:37,596 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:37,596 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:37,598 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:37,599 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:37,601 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:37,602 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:37,603 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:37,604 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:37,606 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:37,609 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:37,610 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:17:37,611 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:37,612 - main - INFO - ================================================================================
2025-12-29 19:17:37,613 - main - INFO - 
2025-12-29 19:17:40,871 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:40,888 - main - INFO - 
2025-12-29 19:17:40,888 - main - INFO - ================================================================================
2025-12-29 19:17:40,888 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:40,889 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:40,889 - main - INFO - ================================================================================
2025-12-29 19:17:40,890 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:40,890 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:40,890 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:40,891 - main - INFO - ================================================================================
2025-12-29 19:17:40,891 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:40,892 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:40,893 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:40,931 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:40,936 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:40,936 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:40,936 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:40,936 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:40,937 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:40,944 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:40,945 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:40,947 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:40,948 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:40,948 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:40,966 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:40,966 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:40,967 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:40,973 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:40,979 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:40,979 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:40,980 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:40,997 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:41,001 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:41,001 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:41,001 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:41,002 - main - INFO - 
2025-12-29 19:17:41,002 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:41,002 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:41,002 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:41,002 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:41,003 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:41,003 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:41,003 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:41,003 - main - INFO - 
2025-12-29 19:17:41,003 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:41,003 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:41,004 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:41,004 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:41,004 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:41,004 - main - INFO - 
2025-12-29 19:17:41,004 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:41,005 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:41,005 - main - INFO -        - No manual section generation
2025-12-29 19:17:41,005 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:41,005 - main - INFO - 
2025-12-29 19:17:41,006 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:41,006 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:41,006 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:41,008 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:41,011 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:41,012 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:41,013 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:41,013 - main - INFO - 
2025-12-29 19:17:41,014 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:41,014 - main - INFO -      Main:
2025-12-29 19:17:41,014 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:41,015 - main - INFO - 
2025-12-29 19:17:41,015 - main - INFO -      Retrieval:
2025-12-29 19:17:41,016 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:41,016 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:41,016 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:41,016 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:41,017 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:41,017 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:41,017 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:41,017 - main - INFO - 
2025-12-29 19:17:41,017 - main - INFO -      Management:
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:41,018 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:41,018 - main - INFO - 
2025-12-29 19:17:41,018 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:41,019 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:41,019 - main - INFO - 
2025-12-29 19:17:41,019 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:41,020 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:41,020 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:41,020 - main - INFO - 
2025-12-29 19:17:41,020 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:41,020 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:41,022 - main - INFO - 
2025-12-29 19:17:41,022 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:41,022 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:41,022 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:41,022 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:41,022 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:41,023 - main - INFO - 
2025-12-29 19:17:41,023 - main - INFO - ================================================================================
2025-12-29 19:17:41,024 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:41,025 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:41,028 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:41,028 - main - INFO - ================================================================================
2025-12-29 19:17:41,029 - main - INFO - 
2025-12-29 19:17:41,029 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:53,945 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:17:53,946 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 19:17:53,949 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:53,949 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:17:53,950 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:17:53,950 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:17:53,951 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:17:53,953 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 19:17:54,096 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,096 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,097 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:17:54,097 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:17:54,098 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:17:54,098 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:17:54,112 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:17:54,113 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:17:54,129 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:17:54,129 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:17:54,131 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:17:54,131 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:17:54,132 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:17:54,133 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:17:54,134 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:17:54,356 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,359 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_191753.pdf (129412 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_191753.pdf (163491 bytes)
2025-12-29 19:17:54,364 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.42s
2025-12-29 19:18:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:18:02,111 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:18:02,114 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:18:02,122 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:18:02,123 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:18:02,126 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:18:32,408 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:18:32,410 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:18:32,412 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:18:32,417 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:18:32,417 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:18:32,423 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:19:27,134 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:19:27,137 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:19:27,139 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:19:27,152 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:19:27,153 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:19:27,159 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:19:54,207 - main - INFO - 
2025-12-29 19:19:54,207 - main - INFO - ================================================================================
2025-12-29 19:19:54,208 - main - INFO -   üõë Shutting down application...
2025-12-29 19:19:54,208 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:19:54,209 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:19:54,209 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:19:54,210 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:19:54,211 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:19:54,211 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:19:54,212 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:19:54,212 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:19:54,213 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:19:54,214 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:19:54,215 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:19:54,216 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:19:54,216 - main - INFO - ================================================================================
2025-12-29 19:19:54,216 - main - INFO - 
2025-12-29 19:19:57,997 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:19:58,025 - main - INFO - 
2025-12-29 19:19:58,025 - main - INFO - ================================================================================
2025-12-29 19:19:58,026 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:19:58,026 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:19:58,027 - main - INFO - ================================================================================
2025-12-29 19:19:58,027 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:19:58,027 - main - INFO -   Upload Directory: uploads
2025-12-29 19:19:58,028 - main - INFO -   Max File Size: 20MB
2025-12-29 19:19:58,030 - main - INFO - ================================================================================
2025-12-29 19:19:58,030 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:19:58,031 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:19:58,031 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:19:58,058 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:19:58,069 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:19:58,070 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:19:58,070 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:19:58,070 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:19:58,071 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:19:58,085 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:19:58,086 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:19:58,088 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:19:58,092 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:19:58,094 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:19:58,094 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:19:58,096 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:19:58,097 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:19:58,107 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:19:58,108 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:19:58,108 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:19:58,124 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:19:58,133 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:19:58,133 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:19:58,134 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:19:58,147 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:19:58,151 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:19:58,152 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:19:58,152 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:19:58,152 - main - INFO - 
2025-12-29 19:19:58,153 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:19:58,153 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:19:58,153 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:19:58,153 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:19:58,153 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:19:58,153 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:19:58,154 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:19:58,154 - main - INFO - 
2025-12-29 19:19:58,154 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:19:58,154 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:19:58,154 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:19:58,154 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:19:58,155 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:19:58,155 - main - INFO - 
2025-12-29 19:19:58,155 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:19:58,155 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:19:58,155 - main - INFO -        - No manual section generation
2025-12-29 19:19:58,156 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:19:58,156 - main - INFO - 
2025-12-29 19:19:58,156 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:19:58,156 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:19:58,157 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:19:58,159 - main - INFO - 
2025-12-29 19:19:58,159 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:19:58,159 - main - INFO -      Main:
2025-12-29 19:19:58,160 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:19:58,160 - main - INFO - 
2025-12-29 19:19:58,161 - main - INFO -      Retrieval:
2025-12-29 19:19:58,161 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:19:58,161 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:19:58,162 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:19:58,162 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:19:58,162 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:19:58,163 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:19:58,163 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:19:58,163 - main - INFO - 
2025-12-29 19:19:58,164 - main - INFO -      Management:
2025-12-29 19:19:58,164 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:19:58,164 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:19:58,164 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:19:58,164 - main - INFO - 
2025-12-29 19:19:58,164 - main - INFO -      Documents (MongoDB):
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:19:58,165 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:19:58,165 - main - INFO - 
2025-12-29 19:19:58,165 - main - INFO -      Diagnostics & Health:
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:19:58,166 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:19:58,166 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:19:58,166 - main - INFO - 
2025-12-29 19:19:58,166 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:19:58,166 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:19:58,166 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:19:58,168 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:19:58,168 - main - INFO - 
2025-12-29 19:19:58,168 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:19:58,168 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:19:58,168 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:19:58,169 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:19:58,169 - main - INFO -      4. No re-upload needed!
2025-12-29 19:19:58,169 - main - INFO - 
2025-12-29 19:19:58,169 - main - INFO - ================================================================================
2025-12-29 19:19:58,169 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:19:58,169 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:19:58,169 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:19:58,170 - main - INFO - ================================================================================
2025-12-29 19:19:58,170 - main - INFO - 
2025-12-29 19:19:58,170 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:01,608 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:01,627 - main - INFO - 
2025-12-29 19:20:01,627 - main - INFO - ================================================================================
2025-12-29 19:20:01,627 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:01,628 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:01,628 - main - INFO - ================================================================================
2025-12-29 19:20:01,628 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:01,629 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:01,629 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:01,629 - main - INFO - ================================================================================
2025-12-29 19:20:01,630 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:01,631 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:01,631 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:01,684 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:01,691 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:01,692 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:01,692 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:01,692 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:01,693 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:01,706 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:01,708 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:01,710 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:01,713 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:01,713 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:01,713 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:01,714 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:01,714 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:01,725 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:01,725 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:01,726 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:01,736 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:01,742 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:01,742 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:01,742 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:01,751 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:01,758 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:01,758 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:01,758 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:01,759 - main - INFO - 
2025-12-29 19:20:01,759 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:01,759 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:01,759 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:01,759 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:01,760 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:01,760 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:01,760 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:01,760 - main - INFO - 
2025-12-29 19:20:01,761 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:01,761 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:01,761 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:01,761 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:01,762 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:01,762 - main - INFO - 
2025-12-29 19:20:01,762 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:01,763 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:01,763 - main - INFO -        - No manual section generation
2025-12-29 19:20:01,764 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:01,764 - main - INFO - 
2025-12-29 19:20:01,764 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:01,764 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:01,766 - main - INFO - 
2025-12-29 19:20:01,766 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:01,766 - main - INFO -      Main:
2025-12-29 19:20:01,766 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:01,767 - main - INFO - 
2025-12-29 19:20:01,767 - main - INFO -      Retrieval:
2025-12-29 19:20:01,767 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:01,767 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:01,768 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:01,768 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:01,768 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:01,769 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:01,769 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:01,770 - main - INFO - 
2025-12-29 19:20:01,770 - main - INFO -      Management:
2025-12-29 19:20:01,771 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:01,771 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:01,771 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:01,771 - main - INFO - 
2025-12-29 19:20:01,771 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:01,772 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:01,772 - main - INFO - 
2025-12-29 19:20:01,773 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:01,775 - main - INFO - 
2025-12-29 19:20:01,775 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:01,775 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:01,775 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:01,777 - main - INFO - 
2025-12-29 19:20:01,777 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:01,777 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:01,777 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:01,778 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:01,778 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:01,778 - main - INFO - 
2025-12-29 19:20:01,778 - main - INFO - ================================================================================
2025-12-29 19:20:01,778 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:01,779 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:01,779 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:01,779 - main - INFO - ================================================================================
2025-12-29 19:20:01,780 - main - INFO - 
2025-12-29 19:20:01,780 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:05,204 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:05,225 - main - INFO - 
2025-12-29 19:20:05,225 - main - INFO - ================================================================================
2025-12-29 19:20:05,225 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:05,226 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:05,226 - main - INFO - ================================================================================
2025-12-29 19:20:05,226 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:05,226 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:05,227 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:05,227 - main - INFO - ================================================================================
2025-12-29 19:20:05,228 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:05,228 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:05,228 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:05,346 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:05,355 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:05,355 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:05,356 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:05,356 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:05,357 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:05,389 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:05,401 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:05,403 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:05,406 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:05,406 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:05,406 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:05,407 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:05,407 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:05,420 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:05,420 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:05,421 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:05,433 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:05,438 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:05,438 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:05,439 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:05,453 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:05,462 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:05,462 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:05,463 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:05,465 - main - INFO - 
2025-12-29 19:20:05,465 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:05,466 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:05,466 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:05,466 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:05,467 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:05,467 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:05,467 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:05,467 - main - INFO - 
2025-12-29 19:20:05,468 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:05,468 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:05,468 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:05,468 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:05,469 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:05,469 - main - INFO - 
2025-12-29 19:20:05,469 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:05,469 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:05,470 - main - INFO -        - No manual section generation
2025-12-29 19:20:05,470 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:05,470 - main - INFO - 
2025-12-29 19:20:05,471 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:05,473 - main - INFO - 
2025-12-29 19:20:05,476 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:05,478 - main - INFO -      Main:
2025-12-29 19:20:05,478 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:05,480 - main - INFO - 
2025-12-29 19:20:05,481 - main - INFO -      Retrieval:
2025-12-29 19:20:05,482 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:05,482 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:05,482 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:05,483 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:05,483 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:05,483 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:05,483 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:05,484 - main - INFO - 
2025-12-29 19:20:05,484 - main - INFO -      Management:
2025-12-29 19:20:05,484 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:05,484 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:05,485 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:05,485 - main - INFO - 
2025-12-29 19:20:05,485 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:05,486 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:05,487 - main - INFO - 
2025-12-29 19:20:05,487 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:05,487 - main - INFO - 
2025-12-29 19:20:05,488 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:05,490 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:05,492 - main - INFO - 
2025-12-29 19:20:05,492 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:05,492 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:05,493 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:05,493 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:05,493 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:05,494 - main - INFO - 
2025-12-29 19:20:05,495 - main - INFO - ================================================================================
2025-12-29 19:20:05,495 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:05,496 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:05,497 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:05,497 - main - INFO - ================================================================================
2025-12-29 19:20:05,498 - main - INFO - 
2025-12-29 19:20:05,498 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:27,422 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:20:27,423 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:20:27,425 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:20:27,430 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:20:27,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:20:27,435 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:20:38,990 - main - INFO - 
2025-12-29 19:20:38,990 - main - INFO - ================================================================================
2025-12-29 19:20:38,991 - main - INFO -   üõë Shutting down application...
2025-12-29 19:20:38,992 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:38,993 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:20:38,996 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:38,997 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:20:38,998 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:20:38,998 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:20:38,999 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:20:38,999 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:20:39,000 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:20:39,000 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:20:39,000 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:20:39,001 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:20:39,001 - main - INFO - ================================================================================
2025-12-29 19:20:39,001 - main - INFO - 
2025-12-29 19:20:42,692 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:42,717 - main - INFO - 
2025-12-29 19:20:42,718 - main - INFO - ================================================================================
2025-12-29 19:20:42,718 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:42,718 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:42,718 - main - INFO - ================================================================================
2025-12-29 19:20:42,718 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:42,719 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:42,719 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:42,719 - main - INFO - ================================================================================
2025-12-29 19:20:42,720 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:42,720 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:42,720 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:42,748 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:42,754 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:42,755 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:42,766 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:42,767 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:42,769 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:42,770 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:42,770 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:42,801 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:42,801 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:42,802 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:42,809 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:42,816 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:42,817 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:42,817 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:42,850 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:42,853 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:42,853 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:42,853 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:42,854 - main - INFO - 
2025-12-29 19:20:42,854 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:42,854 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:42,854 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:42,854 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:42,855 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:42,855 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:42,855 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:42,855 - main - INFO - 
2025-12-29 19:20:42,855 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:42,856 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:42,856 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:42,856 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:42,856 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:42,857 - main - INFO - 
2025-12-29 19:20:42,857 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:42,857 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:42,858 - main - INFO -        - No manual section generation
2025-12-29 19:20:42,858 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:42,858 - main - INFO - 
2025-12-29 19:20:42,858 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:42,858 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:42,860 - main - INFO - 
2025-12-29 19:20:42,860 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:42,860 - main - INFO -      Main:
2025-12-29 19:20:42,862 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:42,862 - main - INFO - 
2025-12-29 19:20:42,863 - main - INFO -      Retrieval:
2025-12-29 19:20:42,863 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:42,863 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:42,864 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:42,864 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:42,864 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:42,864 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:42,865 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:42,865 - main - INFO - 
2025-12-29 19:20:42,865 - main - INFO -      Management:
2025-12-29 19:20:42,865 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:42,865 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:42,866 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:42,866 - main - INFO - 
2025-12-29 19:20:42,866 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:42,866 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:42,866 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:42,867 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:42,867 - main - INFO - 
2025-12-29 19:20:42,867 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:42,868 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:42,868 - main - INFO - 
2025-12-29 19:20:42,868 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:42,868 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:42,868 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:42,869 - main - INFO - 
2025-12-29 19:20:42,870 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:42,870 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:42,870 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:42,870 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:42,870 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:42,870 - main - INFO - 
2025-12-29 19:20:42,871 - main - INFO - ================================================================================
2025-12-29 19:20:42,871 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:42,871 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:42,871 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:42,871 - main - INFO - ================================================================================
2025-12-29 19:20:42,871 - main - INFO - 
2025-12-29 19:20:42,872 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:46,470 - main - INFO - 
2025-12-29 19:20:46,470 - main - INFO - ================================================================================
2025-12-29 19:20:46,470 - main - INFO -   üõë Shutting down application...
2025-12-29 19:20:46,471 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:46,471 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:20:46,472 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:46,472 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:20:46,473 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:20:46,473 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:20:46,475 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:20:46,475 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:20:46,477 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:20:46,478 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:20:46,479 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:20:46,480 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:20:46,480 - main - INFO - ================================================================================
2025-12-29 19:20:46,480 - main - INFO - 
2025-12-29 19:20:50,068 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:50,087 - main - INFO - 
2025-12-29 19:20:50,087 - main - INFO - ================================================================================
2025-12-29 19:20:50,088 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:50,088 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:50,088 - main - INFO - ================================================================================
2025-12-29 19:20:50,088 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:50,089 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:50,089 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:50,089 - main - INFO - ================================================================================
2025-12-29 19:20:50,090 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:50,091 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:50,091 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:50,117 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:50,122 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:50,122 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:50,122 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:50,123 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:50,123 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:50,163 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:50,164 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:50,166 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:50,167 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:50,167 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:50,195 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:50,196 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:50,197 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:50,203 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:50,207 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:50,207 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:50,208 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:50,237 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:50,242 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:50,243 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:50,243 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:50,243 - main - INFO - 
2025-12-29 19:20:50,244 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:50,244 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:50,245 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:50,245 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:50,246 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:50,246 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:50,246 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:50,247 - main - INFO - 
2025-12-29 19:20:50,247 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:50,247 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:50,247 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:50,248 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:50,248 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:50,248 - main - INFO - 
2025-12-29 19:20:50,248 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:50,249 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:50,249 - main - INFO -        - No manual section generation
2025-12-29 19:20:50,249 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:50,249 - main - INFO - 
2025-12-29 19:20:50,249 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:50,251 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:50,251 - main - INFO - 
2025-12-29 19:20:50,251 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:50,251 - main - INFO -      Main:
2025-12-29 19:20:50,251 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:50,252 - main - INFO - 
2025-12-29 19:20:50,252 - main - INFO -      Retrieval:
2025-12-29 19:20:50,252 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:50,252 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:50,252 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:50,252 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:50,253 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:50,253 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:50,253 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:50,253 - main - INFO - 
2025-12-29 19:20:50,253 - main - INFO -      Management:
2025-12-29 19:20:50,253 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:50,253 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:50,254 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:50,254 - main - INFO - 
2025-12-29 19:20:50,254 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:50,254 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:50,255 - main - INFO - 
2025-12-29 19:20:50,255 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:50,255 - main - INFO - 
2025-12-29 19:20:50,256 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:50,258 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:50,258 - main - INFO - 
2025-12-29 19:20:50,258 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:50,258 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:50,259 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:50,259 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:50,259 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:50,259 - main - INFO - 
2025-12-29 19:20:50,260 - main - INFO - ================================================================================
2025-12-29 19:20:50,260 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:50,260 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:50,260 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:50,261 - main - INFO - ================================================================================
2025-12-29 19:20:50,261 - main - INFO - 
2025-12-29 19:20:50,262 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:21:01,332 - main - INFO - 
2025-12-29 19:21:01,332 - main - INFO - ================================================================================
2025-12-29 19:21:01,333 - main - INFO -   üõë Shutting down application...
2025-12-29 19:21:01,334 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:21:01,334 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:21:01,335 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:21:01,335 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:21:01,335 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:21:01,336 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:21:01,336 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:21:01,337 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:21:01,337 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:21:01,339 - main - INFO - ================================================================================
2025-12-29 19:21:01,339 - main - INFO - 
2025-12-29 19:21:04,656 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:21:04,677 - main - INFO - 
2025-12-29 19:21:04,677 - main - INFO - ================================================================================
2025-12-29 19:21:04,678 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:21:04,678 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:21:04,678 - main - INFO - ================================================================================
2025-12-29 19:21:04,678 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:21:04,679 - main - INFO -   Upload Directory: uploads
2025-12-29 19:21:04,679 - main - INFO -   Max File Size: 20MB
2025-12-29 19:21:04,679 - main - INFO - ================================================================================
2025-12-29 19:21:04,680 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:21:04,680 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:21:04,680 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:21:04,703 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:21:04,709 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:21:04,709 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:21:04,710 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:21:04,710 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:21:04,710 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:21:04,739 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:21:04,740 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:21:04,742 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:21:04,744 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:21:04,745 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:21:04,745 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:21:04,745 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:21:04,746 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:21:04,769 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:21:04,770 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:21:04,771 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:21:04,783 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:21:04,787 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:21:04,787 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:21:04,788 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:21:04,816 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:21:04,823 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:21:04,824 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:21:04,825 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:21:04,826 - main - INFO - 
2025-12-29 19:21:04,826 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:21:04,827 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:21:04,827 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:21:04,827 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:21:04,828 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:21:04,828 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:21:04,828 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:21:04,828 - main - INFO - 
2025-12-29 19:21:04,829 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:21:04,829 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:21:04,829 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:21:04,829 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:21:04,830 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:21:04,830 - main - INFO - 
2025-12-29 19:21:04,830 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:21:04,830 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:21:04,831 - main - INFO -        - No manual section generation
2025-12-29 19:21:04,831 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:21:04,831 - main - INFO - 
2025-12-29 19:21:04,831 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:21:04,832 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:21:04,832 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:21:04,832 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:21:04,832 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:21:04,833 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:21:04,833 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:21:04,833 - main - INFO - 
2025-12-29 19:21:04,833 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:21:04,833 - main - INFO -      Main:
2025-12-29 19:21:04,834 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:21:04,834 - main - INFO - 
2025-12-29 19:21:04,834 - main - INFO -      Retrieval:
2025-12-29 19:21:04,835 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:21:04,835 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:21:04,835 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:21:04,835 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:21:04,835 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:21:04,836 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:21:04,836 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:21:04,836 - main - INFO - 
2025-12-29 19:21:04,836 - main - INFO -      Management:
2025-12-29 19:21:04,836 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:21:04,836 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:21:04,836 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:21:04,837 - main - INFO - 
2025-12-29 19:21:04,837 - main - INFO -      Documents (MongoDB):
2025-12-29 19:21:04,837 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:21:04,837 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:21:04,837 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:21:04,837 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:21:04,838 - main - INFO - 
2025-12-29 19:21:04,838 - main - INFO -      Diagnostics & Health:
2025-12-29 19:21:04,838 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:21:04,838 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:21:04,838 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:21:04,838 - main - INFO - 
2025-12-29 19:21:04,839 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:21:04,839 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:21:04,839 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:21:04,839 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:21:04,839 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:21:04,840 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:21:04,840 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:21:04,841 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:21:04,842 - main - INFO - 
2025-12-29 19:21:04,842 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:21:04,843 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:21:04,843 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:21:04,844 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:21:04,844 - main - INFO -      4. No re-upload needed!
2025-12-29 19:21:04,844 - main - INFO - 
2025-12-29 19:21:04,844 - main - INFO - ================================================================================
2025-12-29 19:21:04,844 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:21:04,844 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:21:04,845 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:21:04,845 - main - INFO - ================================================================================
2025-12-29 19:21:04,845 - main - INFO - 
2025-12-29 19:21:04,845 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:21:27,428 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:21:27,429 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:21:27,431 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:21:27,437 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:21:27,437 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:21:27,440 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:22:27,102 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:22:27,103 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:22:27,104 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:22:27,107 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:22:27,107 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:22:27,110 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:23:27,416 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:23:27,417 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 19:23:27,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:23:27,419 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:23:27,420 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:23:27,424 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:23:27,424 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:23:27,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:24:27,112 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:24:27,113 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:24:27,116 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:24:27,122 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:24:27,123 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:24:27,128 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:25:27,414 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:25:27,415 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:25:27,416 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:25:27,419 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:25:27,419 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:25:27,422 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:26:27,101 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:26:27,102 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:26:27,103 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:26:27,106 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:26:27,107 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:26:27,112 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:27:27,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:27:27,419 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:27:27,422 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:27:27,431 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:27:27,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:27:27,442 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:28:27,113 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:28:27,114 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:28:27,116 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:28:27,120 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:28:27,121 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:28:27,127 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:29:27,413 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:29:27,414 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:29:27,415 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:29:27,419 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:29:27,420 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:29:27,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:30:27,104 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:30:27,105 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:30:27,106 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:30:27,109 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:30:27,109 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:30:27,112 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:31:27,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:31:27,419 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:31:27,421 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:31:27,424 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:31:27,424 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:31:27,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:32:27,099 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:32:27,100 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:32:27,101 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:32:27,105 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:32:27,105 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:32:27,109 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:33:27,415 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:33:27,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:33:27,417 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:33:27,420 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:33:27,420 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:33:27,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:34:27,109 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:34:27,109 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 19:34:27,113 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:34:27,113 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:34:27,115 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:34:27,119 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:34:27,120 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:34:27,125 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:35:27,412 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:35:27,412 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:35:27,413 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:35:27,416 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:35:27,416 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:35:27,420 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:36:27,100 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:36:27,100 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:36:27,102 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:36:27,105 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:36:27,105 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:36:27,109 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:37:27,406 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:37:27,406 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:37:27,407 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:37:27,410 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:37:27,410 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:37:27,413 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:38:27,105 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:38:27,106 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:38:27,108 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:38:27,112 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:38:27,112 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:38:27,116 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:39:27,415 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:39:27,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:39:27,418 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:39:27,421 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:39:27,421 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:39:27,425 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:40:27,101 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:40:27,102 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:40:27,103 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:40:27,106 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:40:27,106 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:40:27,109 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:41:27,409 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:41:27,411 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:41:27,414 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:41:27,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:41:27,423 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:41:27,432 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:42:27,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:42:27,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:42:27,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:42:27,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:42:27,114 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:42:27,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:43:27,423 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:43:27,425 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:43:27,427 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:43:27,434 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:43:27,435 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:43:27,442 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:44:27,099 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:44:27,100 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:44:27,102 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:44:27,107 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:44:27,107 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:44:27,113 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:45:27,420 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:45:27,421 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 19:45:27,423 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:45:27,424 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:45:27,425 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:45:27,428 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:45:27,428 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:45:27,431 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:46:27,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:46:27,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:46:27,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:46:27,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:46:27,114 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:46:27,117 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:47:27,420 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:47:27,422 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:47:27,425 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:47:27,436 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:47:27,437 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:47:27,445 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:48:27,105 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:48:27,106 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:48:27,108 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:48:27,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:48:27,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:48:27,120 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:49:27,424 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:49:27,424 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:49:27,426 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:49:27,430 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:49:27,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:49:27,435 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:50:27,111 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:50:27,112 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:50:27,115 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:50:27,120 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:50:27,120 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:50:27,125 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:51:27,418 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:51:27,419 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:51:27,421 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:51:27,427 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:51:27,427 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:51:27,432 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:52:27,108 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:52:27,109 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:52:27,110 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:52:27,115 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:52:27,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:52:27,120 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:53:27,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:53:27,418 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:53:27,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:53:27,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:53:27,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:53:27,425 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:54:01,169 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:54:01,171 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:54:01,173 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:54:01,180 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:54:01,180 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:54:01,188 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:54:17,007 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:54:17,007 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.00s
2025-12-29 19:54:17,009 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:54:17,010 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 19:54:17,012 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:54:17,013 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:54:17,013 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:54:17,014 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:54:17,014 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:54:17,017 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 19:54:17,182 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:54:17,182 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:54:17,183 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:54:17,183 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:54:17,184 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:54:17,184 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:54:17,195 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:54:17,196 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:54:17,205 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:54:17,207 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:54:17,209 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:54:17,210 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:54:17,211 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:54:17,211 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:54:17,213 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:54:17,433 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:54:17,435 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_195417.pdf (129405 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_195417.pdf (162026 bytes)
2025-12-29 19:54:17,438 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.43s
2025-12-29 19:54:20,733 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:54:20,734 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:54:20,735 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:54:20,739 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:54:20,739 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:54:20,743 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:54:20,746 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:54:20,747 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:54:20,749 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:54:20,754 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:54:20,755 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:54:20,762 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:54:32,414 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:54:32,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:54:32,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:54:32,426 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:54:32,427 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:54:32,434 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:55:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:55:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:55:02,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:55:02,115 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:55:02,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:55:02,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:55:32,411 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:55:32,411 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 19:55:32,414 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:55:32,415 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:55:32,416 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:55:32,420 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:55:32,421 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:55:32,425 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:56:27,104 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:56:27,105 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:56:27,106 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:56:27,109 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:56:27,109 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:56:27,112 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:57:27,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:57:27,420 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:57:27,421 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:57:27,425 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:57:27,425 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:57:27,431 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:58:27,106 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:58:27,108 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:58:27,110 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:58:27,117 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:58:27,118 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:58:27,125 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:59:27,421 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:59:27,422 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:59:27,424 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:59:27,430 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:59:27,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:59:27,437 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:00:27,103 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:00:27,104 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:00:27,106 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:00:27,110 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:00:27,111 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:00:27,116 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:01:27,410 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:01:27,412 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:01:27,415 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:01:27,423 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:01:27,423 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:01:27,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:02:27,110 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:02:27,111 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:02:27,112 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:02:27,115 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:02:27,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:02:27,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:03:27,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:03:27,418 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:03:27,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:03:27,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:03:27,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:03:27,426 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:04:27,110 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:04:27,111 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:04:27,112 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:04:27,116 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:04:27,116 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:04:27,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:05:27,437 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:05:27,438 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:05:27,439 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:05:27,442 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:05:27,442 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:05:27,446 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:06:27,590 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 20:06:27,591 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 20:06:27,600 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:06:27,602 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:06:27,604 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:06:27,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:06:27,609 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:06:27,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:07:27,405 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:07:27,406 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:07:27,407 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:07:27,412 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:07:27,412 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:07:27,418 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:07:32,077 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:07:32,078 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:07:32,080 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:07:32,086 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:07:32,087 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:07:32,097 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:08:02,114 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:08:02,114 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:08:02,116 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:08:02,119 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:08:02,119 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:08:02,123 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:08:32,418 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:08:32,420 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:08:32,422 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:08:32,429 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:08:32,430 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:08:32,437 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:09:27,410 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:09:27,411 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:09:27,413 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:09:27,418 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:09:27,418 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:09:27,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:10:18,132 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:10:18,135 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:10:18,144 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:10:18,155 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:10:18,161 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:10:18,168 - main - INFO - üì§ GET /api/comparisons - 200 - 0.04s
2025-12-29 20:10:32,416 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:10:32,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:10:32,417 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:10:32,420 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:10:32,421 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:10:32,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:11:02,108 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:11:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:11:02,113 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:11:02,120 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:11:02,120 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:11:02,123 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:12:03,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:12:03,417 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:12:03,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:12:03,421 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:12:03,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:12:03,425 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:13:04,410 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:13:04,411 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:13:04,412 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:13:04,415 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:13:04,415 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:13:04,418 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:14:05,415 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:14:05,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:14:05,417 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:14:05,420 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:14:05,421 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:14:05,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:15:06,416 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:15:06,416 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:15:06,417 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:15:06,421 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:15:06,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:15:06,425 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:16:07,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:16:07,418 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:16:07,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:16:07,423 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:16:07,423 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:16:07,429 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:17:08,418 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 20:17:08,419 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 20:17:08,422 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:17:08,424 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:17:08,426 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:17:08,432 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:17:08,433 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:17:08,439 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 20:18:09,412 - main - INFO - üì• GET /api/comparisons
2025-12-29 20:18:09,413 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 20:18:09,414 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 20:18:09,417 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 20:18:09,418 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 20:18:09,424 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 20:48:44,512 - main - INFO - 
2025-12-29 20:48:44,513 - main - INFO - ================================================================================
2025-12-29 20:48:44,513 - main - INFO -   üõë Shutting down application...
2025-12-29 20:48:44,515 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:48:44,516 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:48:44,519 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:48:44,520 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:48:44,523 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:48:44,525 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:48:44,526 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:48:44,527 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:48:44,528 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:48:44,528 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:48:44,531 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:48:44,531 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:48:44,531 - main - INFO - ================================================================================
2025-12-29 20:48:44,532 - main - INFO - 
2025-12-29 20:48:55,811 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:48:55,833 - main - INFO - 
2025-12-29 20:48:55,833 - main - INFO - ================================================================================
2025-12-29 20:48:55,833 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:48:55,833 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:48:55,834 - main - INFO - ================================================================================
2025-12-29 20:48:55,834 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:48:55,834 - main - INFO -   Upload Directory: uploads
2025-12-29 20:48:55,834 - main - INFO -   Max File Size: 20MB
2025-12-29 20:48:55,835 - main - INFO - ================================================================================
2025-12-29 20:48:55,835 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:48:55,836 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:48:55,836 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:48:56,157 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:48:56,162 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:48:56,162 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:48:56,162 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:48:56,163 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:48:56,163 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:48:56,188 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:48:56,189 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:48:56,190 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:48:56,192 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:48:56,192 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:48:56,193 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:48:56,193 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:48:56,193 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:48:56,235 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:48:56,236 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:48:56,236 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:48:56,244 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:48:56,246 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:48:56,247 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:48:56,247 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:48:56,267 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:48:56,271 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:48:56,271 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:48:56,271 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:48:56,271 - main - INFO - 
2025-12-29 20:48:56,272 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:48:56,272 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:48:56,272 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:48:56,272 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:48:56,273 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:48:56,273 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:48:56,273 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:48:56,273 - main - INFO - 
2025-12-29 20:48:56,273 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:48:56,273 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:48:56,274 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:48:56,274 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:48:56,274 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:48:56,274 - main - INFO - 
2025-12-29 20:48:56,274 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:48:56,274 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:48:56,275 - main - INFO -        - No manual section generation
2025-12-29 20:48:56,275 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:48:56,275 - main - INFO - 
2025-12-29 20:48:56,275 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:48:56,275 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:48:56,275 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:48:56,275 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:48:56,276 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:48:56,276 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:48:56,276 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:48:56,276 - main - INFO - 
2025-12-29 20:48:56,276 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:48:56,276 - main - INFO -      Main:
2025-12-29 20:48:56,276 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:48:56,277 - main - INFO - 
2025-12-29 20:48:56,277 - main - INFO -      Retrieval:
2025-12-29 20:48:56,277 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:48:56,277 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:48:56,277 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:48:56,277 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:48:56,278 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:48:56,278 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:48:56,278 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:48:56,278 - main - INFO - 
2025-12-29 20:48:56,279 - main - INFO -      Management:
2025-12-29 20:48:56,279 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:48:56,279 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:48:56,280 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:48:56,280 - main - INFO - 
2025-12-29 20:48:56,280 - main - INFO -      Documents (MongoDB):
2025-12-29 20:48:56,281 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:48:56,281 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:48:56,281 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:48:56,281 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:48:56,282 - main - INFO - 
2025-12-29 20:48:56,282 - main - INFO -      Diagnostics & Health:
2025-12-29 20:48:56,282 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:48:56,283 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:48:56,283 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:48:56,283 - main - INFO - 
2025-12-29 20:48:56,284 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:48:56,285 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:48:56,285 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:48:56,285 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:48:56,285 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:48:56,286 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:48:56,286 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:48:56,287 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:48:56,288 - main - INFO - 
2025-12-29 20:48:56,288 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:48:56,288 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:48:56,289 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:48:56,289 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:48:56,289 - main - INFO -      4. No re-upload needed!
2025-12-29 20:48:56,289 - main - INFO - 
2025-12-29 20:48:56,289 - main - INFO - ================================================================================
2025-12-29 20:48:56,290 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:48:56,290 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:48:56,290 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:48:56,290 - main - INFO - ================================================================================
2025-12-29 20:48:56,290 - main - INFO - 
2025-12-29 20:48:56,291 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:49:00,604 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:49:00,628 - main - INFO - 
2025-12-29 20:49:00,629 - main - INFO - ================================================================================
2025-12-29 20:49:00,629 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:49:00,629 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:49:00,629 - main - INFO - ================================================================================
2025-12-29 20:49:00,630 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:49:00,630 - main - INFO -   Upload Directory: uploads
2025-12-29 20:49:00,630 - main - INFO -   Max File Size: 20MB
2025-12-29 20:49:00,630 - main - INFO - ================================================================================
2025-12-29 20:49:00,631 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:49:00,631 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:49:00,631 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:00,659 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:49:00,665 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:49:00,665 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:49:00,666 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:49:00,666 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:49:00,666 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:49:00,679 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:49:00,680 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:49:00,681 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:49:00,682 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:49:00,683 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:49:00,683 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:49:00,683 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:00,683 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:49:00,719 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:49:00,719 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:49:00,719 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:49:00,729 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:49:00,731 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:49:00,732 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:49:00,732 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:49:00,742 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:49:00,746 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:49:00,747 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:49:00,747 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:49:00,747 - main - INFO - 
2025-12-29 20:49:00,747 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:49:00,748 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:49:00,748 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:49:00,748 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:49:00,748 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:49:00,749 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:49:00,749 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:49:00,749 - main - INFO - 
2025-12-29 20:49:00,749 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:49:00,750 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:49:00,750 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:49:00,750 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:49:00,750 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:49:00,750 - main - INFO - 
2025-12-29 20:49:00,751 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:49:00,751 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:49:00,751 - main - INFO -        - No manual section generation
2025-12-29 20:49:00,751 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:49:00,751 - main - INFO - 
2025-12-29 20:49:00,752 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:49:00,752 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:49:00,752 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:49:00,752 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:49:00,753 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:49:00,753 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:49:00,753 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:49:00,753 - main - INFO - 
2025-12-29 20:49:00,754 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:49:00,754 - main - INFO -      Main:
2025-12-29 20:49:00,754 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:49:00,754 - main - INFO - 
2025-12-29 20:49:00,755 - main - INFO -      Retrieval:
2025-12-29 20:49:00,755 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:49:00,755 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:49:00,756 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:49:00,756 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:49:00,756 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:49:00,756 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:49:00,757 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:49:00,757 - main - INFO - 
2025-12-29 20:49:00,758 - main - INFO -      Management:
2025-12-29 20:49:00,758 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:49:00,758 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:49:00,759 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:49:00,759 - main - INFO - 
2025-12-29 20:49:00,759 - main - INFO -      Documents (MongoDB):
2025-12-29 20:49:00,759 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:49:00,759 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:49:00,759 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:49:00,760 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:49:00,760 - main - INFO - 
2025-12-29 20:49:00,760 - main - INFO -      Diagnostics & Health:
2025-12-29 20:49:00,760 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:49:00,760 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:49:00,761 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:49:00,761 - main - INFO - 
2025-12-29 20:49:00,761 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:49:00,761 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:49:00,761 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:49:00,762 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:49:00,762 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:49:00,762 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:49:00,762 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:49:00,762 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:49:00,762 - main - INFO - 
2025-12-29 20:49:00,762 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:49:00,763 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:49:00,763 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:49:00,763 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:49:00,763 - main - INFO -      4. No re-upload needed!
2025-12-29 20:49:00,763 - main - INFO - 
2025-12-29 20:49:00,763 - main - INFO - ================================================================================
2025-12-29 20:49:00,764 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:49:00,764 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:49:00,764 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:49:00,764 - main - INFO - ================================================================================
2025-12-29 20:49:00,764 - main - INFO - 
2025-12-29 20:49:00,765 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:49:09,800 - main - INFO - 
2025-12-29 20:49:09,801 - main - INFO - ================================================================================
2025-12-29 20:49:09,801 - main - INFO -   üõë Shutting down application...
2025-12-29 20:49:09,803 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:49:09,803 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:49:09,804 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:49:09,805 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:49:09,806 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:49:09,806 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:49:09,807 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:49:09,807 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:49:09,808 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:49:09,809 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:49:09,810 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:49:09,810 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:49:09,810 - main - INFO - ================================================================================
2025-12-29 20:49:09,810 - main - INFO - 
2025-12-29 20:49:13,879 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:49:13,901 - main - INFO - 
2025-12-29 20:49:13,902 - main - INFO - ================================================================================
2025-12-29 20:49:13,904 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:49:13,907 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:49:13,908 - main - INFO - ================================================================================
2025-12-29 20:49:13,911 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:49:13,911 - main - INFO -   Upload Directory: uploads
2025-12-29 20:49:13,912 - main - INFO -   Max File Size: 20MB
2025-12-29 20:49:13,912 - main - INFO - ================================================================================
2025-12-29 20:49:13,913 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:49:13,913 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:49:13,914 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:13,968 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:49:13,977 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:49:13,977 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:49:13,977 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:49:13,978 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:49:13,978 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:49:14,000 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:49:14,001 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:49:14,003 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:49:14,008 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:49:14,009 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:49:14,010 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:49:14,010 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:14,010 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:49:14,044 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:49:14,044 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:49:14,044 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:49:14,076 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:49:14,078 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:49:14,078 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:49:14,079 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:49:14,085 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:49:14,093 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:49:14,094 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:49:14,094 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:49:14,094 - main - INFO - 
2025-12-29 20:49:14,094 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:49:14,095 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:49:14,095 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:49:14,095 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:49:14,095 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:49:14,095 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:49:14,095 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:49:14,096 - main - INFO - 
2025-12-29 20:49:14,096 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:49:14,096 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:49:14,096 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:49:14,097 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:49:14,097 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:49:14,097 - main - INFO - 
2025-12-29 20:49:14,097 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:49:14,097 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:49:14,097 - main - INFO -        - No manual section generation
2025-12-29 20:49:14,098 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:49:14,098 - main - INFO - 
2025-12-29 20:49:14,098 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:49:14,098 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:49:14,098 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:49:14,099 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:49:14,099 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:49:14,099 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:49:14,099 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:49:14,099 - main - INFO - 
2025-12-29 20:49:14,099 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:49:14,100 - main - INFO -      Main:
2025-12-29 20:49:14,100 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:49:14,100 - main - INFO - 
2025-12-29 20:49:14,100 - main - INFO -      Retrieval:
2025-12-29 20:49:14,100 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:49:14,100 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:49:14,101 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:49:14,101 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:49:14,101 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:49:14,102 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:49:14,102 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:49:14,102 - main - INFO - 
2025-12-29 20:49:14,102 - main - INFO -      Management:
2025-12-29 20:49:14,103 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:49:14,103 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:49:14,103 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:49:14,103 - main - INFO - 
2025-12-29 20:49:14,104 - main - INFO -      Documents (MongoDB):
2025-12-29 20:49:14,104 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:49:14,104 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:49:14,105 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:49:14,105 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:49:14,107 - main - INFO - 
2025-12-29 20:49:14,109 - main - INFO -      Diagnostics & Health:
2025-12-29 20:49:14,110 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:49:14,110 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:49:14,110 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:49:14,110 - main - INFO - 
2025-12-29 20:49:14,111 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:49:14,111 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:49:14,111 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:49:14,111 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:49:14,112 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:49:14,112 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:49:14,112 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:49:14,113 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:49:14,113 - main - INFO - 
2025-12-29 20:49:14,113 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:49:14,113 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:49:14,113 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:49:14,114 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:49:14,114 - main - INFO -      4. No re-upload needed!
2025-12-29 20:49:14,114 - main - INFO - 
2025-12-29 20:49:14,114 - main - INFO - ================================================================================
2025-12-29 20:49:14,115 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:49:14,115 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:49:14,115 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:49:14,115 - main - INFO - ================================================================================
2025-12-29 20:49:14,116 - main - INFO - 
2025-12-29 20:49:14,116 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:49:45,775 - main - INFO - 
2025-12-29 20:49:45,775 - main - INFO - ================================================================================
2025-12-29 20:49:45,776 - main - INFO -   üõë Shutting down application...
2025-12-29 20:49:45,777 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:49:45,777 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:49:45,778 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:49:45,778 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:49:45,779 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:49:45,779 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:49:45,780 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:49:45,780 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:49:45,781 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:49:45,781 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:49:45,782 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:49:45,782 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:49:45,782 - main - INFO - ================================================================================
2025-12-29 20:49:45,782 - main - INFO - 
2025-12-29 20:49:49,684 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:49:49,709 - main - INFO - 
2025-12-29 20:49:49,710 - main - INFO - ================================================================================
2025-12-29 20:49:49,710 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:49:49,711 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:49:49,711 - main - INFO - ================================================================================
2025-12-29 20:49:49,711 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:49:49,712 - main - INFO -   Upload Directory: uploads
2025-12-29 20:49:49,712 - main - INFO -   Max File Size: 20MB
2025-12-29 20:49:49,712 - main - INFO - ================================================================================
2025-12-29 20:49:49,713 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:49:49,713 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:49:49,713 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:49,738 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:49:49,748 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:49:49,748 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:49:49,749 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:49:49,749 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:49:49,749 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:49:49,771 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:49:49,772 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:49:49,773 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:49:49,776 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:49:49,776 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:49:49,777 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:49:49,778 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:49:49,779 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:49:49,802 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:49:49,803 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:49:49,804 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:49:49,832 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:49:49,834 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:49:49,835 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:49:49,835 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:49:49,845 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:49:49,850 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:49:49,850 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:49:49,850 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:49:49,851 - main - INFO - 
2025-12-29 20:49:49,851 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:49:49,851 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:49:49,851 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:49:49,852 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:49:49,852 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:49:49,853 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:49:49,853 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:49:49,853 - main - INFO - 
2025-12-29 20:49:49,854 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:49:49,854 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:49:49,854 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:49:49,854 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:49:49,854 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:49:49,854 - main - INFO - 
2025-12-29 20:49:49,855 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:49:49,855 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:49:49,855 - main - INFO -        - No manual section generation
2025-12-29 20:49:49,855 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:49:49,855 - main - INFO - 
2025-12-29 20:49:49,855 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:49:49,856 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:49:49,856 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:49:49,856 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:49:49,857 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:49:49,857 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:49:49,857 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:49:49,857 - main - INFO - 
2025-12-29 20:49:49,857 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:49:49,858 - main - INFO -      Main:
2025-12-29 20:49:49,858 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:49:49,858 - main - INFO - 
2025-12-29 20:49:49,858 - main - INFO -      Retrieval:
2025-12-29 20:49:49,858 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:49:49,859 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:49:49,859 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:49:49,859 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:49:49,859 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:49:49,859 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:49:49,860 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:49:49,860 - main - INFO - 
2025-12-29 20:49:49,860 - main - INFO -      Management:
2025-12-29 20:49:49,860 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:49:49,861 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:49:49,861 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:49:49,862 - main - INFO - 
2025-12-29 20:49:49,862 - main - INFO -      Documents (MongoDB):
2025-12-29 20:49:49,863 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:49:49,863 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:49:49,863 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:49:49,863 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:49:49,864 - main - INFO - 
2025-12-29 20:49:49,864 - main - INFO -      Diagnostics & Health:
2025-12-29 20:49:49,864 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:49:49,864 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:49:49,864 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:49:49,864 - main - INFO - 
2025-12-29 20:49:49,865 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:49:49,865 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:49:49,865 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:49:49,865 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:49:49,865 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:49:49,865 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:49:49,866 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:49:49,866 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:49:49,866 - main - INFO - 
2025-12-29 20:49:49,866 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:49:49,866 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:49:49,866 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:49:49,867 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:49:49,867 - main - INFO -      4. No re-upload needed!
2025-12-29 20:49:49,867 - main - INFO - 
2025-12-29 20:49:49,867 - main - INFO - ================================================================================
2025-12-29 20:49:49,868 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:49:49,868 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:49:49,868 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:49:49,868 - main - INFO - ================================================================================
2025-12-29 20:49:49,868 - main - INFO - 
2025-12-29 20:49:49,869 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:50:20,215 - main - INFO - 
2025-12-29 20:50:20,216 - main - INFO - ================================================================================
2025-12-29 20:50:20,216 - main - INFO -   üõë Shutting down application...
2025-12-29 20:50:20,217 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:20,218 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:50:20,219 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:20,219 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:50:20,220 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:50:20,220 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:50:20,221 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:50:20,222 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:50:20,222 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:50:20,223 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:50:20,223 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:50:20,224 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:50:20,224 - main - INFO - ================================================================================
2025-12-29 20:50:20,224 - main - INFO - 
2025-12-29 20:50:24,443 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:50:24,463 - main - INFO - 
2025-12-29 20:50:24,463 - main - INFO - ================================================================================
2025-12-29 20:50:24,463 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:50:24,464 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:50:24,464 - main - INFO - ================================================================================
2025-12-29 20:50:24,464 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:50:24,464 - main - INFO -   Upload Directory: uploads
2025-12-29 20:50:24,465 - main - INFO -   Max File Size: 20MB
2025-12-29 20:50:24,465 - main - INFO - ================================================================================
2025-12-29 20:50:24,465 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:50:24,466 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:50:24,466 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:24,493 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:50:24,500 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:50:24,500 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:50:24,501 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:50:24,501 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:50:24,501 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:50:24,530 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:50:24,531 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:50:24,532 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:50:24,534 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:50:24,534 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:50:24,534 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:50:24,535 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:24,535 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:50:24,574 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:50:24,574 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:50:24,574 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:50:24,606 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:50:24,611 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:50:24,612 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:50:24,612 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:50:24,636 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:50:24,640 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:50:24,641 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:50:24,641 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:50:24,641 - main - INFO - 
2025-12-29 20:50:24,642 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:50:24,642 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:50:24,642 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:50:24,643 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:50:24,643 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:50:24,644 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:50:24,644 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:50:24,645 - main - INFO - 
2025-12-29 20:50:24,645 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:50:24,646 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:50:24,646 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:50:24,646 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:50:24,647 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:50:24,647 - main - INFO - 
2025-12-29 20:50:24,647 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:50:24,647 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:50:24,648 - main - INFO -        - No manual section generation
2025-12-29 20:50:24,648 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:50:24,648 - main - INFO - 
2025-12-29 20:50:24,649 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:50:24,649 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:50:24,649 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:50:24,649 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:50:24,650 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:50:24,650 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:50:24,650 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:50:24,650 - main - INFO - 
2025-12-29 20:50:24,651 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:50:24,651 - main - INFO -      Main:
2025-12-29 20:50:24,651 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:50:24,651 - main - INFO - 
2025-12-29 20:50:24,651 - main - INFO -      Retrieval:
2025-12-29 20:50:24,652 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:50:24,652 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:50:24,652 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:50:24,652 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:50:24,653 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:50:24,653 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:50:24,653 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:50:24,653 - main - INFO - 
2025-12-29 20:50:24,654 - main - INFO -      Management:
2025-12-29 20:50:24,654 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:50:24,654 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:50:24,654 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:50:24,654 - main - INFO - 
2025-12-29 20:50:24,655 - main - INFO -      Documents (MongoDB):
2025-12-29 20:50:24,655 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:50:24,655 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:50:24,655 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:50:24,656 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:50:24,656 - main - INFO - 
2025-12-29 20:50:24,656 - main - INFO -      Diagnostics & Health:
2025-12-29 20:50:24,656 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:50:24,657 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:50:24,657 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:50:24,657 - main - INFO - 
2025-12-29 20:50:24,657 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:50:24,658 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:50:24,658 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:50:24,658 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:50:24,658 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:50:24,659 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:50:24,659 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:50:24,659 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:50:24,659 - main - INFO - 
2025-12-29 20:50:24,659 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:50:24,660 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:50:24,660 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:50:24,660 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:50:24,661 - main - INFO -      4. No re-upload needed!
2025-12-29 20:50:24,661 - main - INFO - 
2025-12-29 20:50:24,662 - main - INFO - ================================================================================
2025-12-29 20:50:24,662 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:50:24,663 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:50:24,663 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:50:24,663 - main - INFO - ================================================================================
2025-12-29 20:50:24,664 - main - INFO - 
2025-12-29 20:50:24,664 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:50:26,917 - main - INFO - 
2025-12-29 20:50:26,917 - main - INFO - ================================================================================
2025-12-29 20:50:26,918 - main - INFO -   üõë Shutting down application...
2025-12-29 20:50:26,919 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:26,920 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:50:26,921 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:26,922 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:50:26,923 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:50:26,923 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:50:26,925 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:50:26,925 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:50:26,926 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:50:26,927 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:50:26,927 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:50:26,927 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:50:26,928 - main - INFO - ================================================================================
2025-12-29 20:50:26,928 - main - INFO - 
2025-12-29 20:50:31,690 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:50:31,712 - main - INFO - 
2025-12-29 20:50:31,712 - main - INFO - ================================================================================
2025-12-29 20:50:31,712 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:50:31,712 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:50:31,712 - main - INFO - ================================================================================
2025-12-29 20:50:31,713 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:50:31,713 - main - INFO -   Upload Directory: uploads
2025-12-29 20:50:31,713 - main - INFO -   Max File Size: 20MB
2025-12-29 20:50:31,713 - main - INFO - ================================================================================
2025-12-29 20:50:31,713 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:50:31,714 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:50:31,714 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:31,734 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:50:31,742 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:50:31,742 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:50:31,742 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:50:31,742 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:50:31,743 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:50:31,750 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:50:31,752 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:50:31,753 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:50:31,756 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:50:31,756 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:50:31,756 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:50:31,756 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:31,757 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:50:31,764 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:50:31,765 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:50:31,765 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:50:31,779 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:50:31,782 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:50:31,782 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:50:31,782 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:50:31,791 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:50:31,796 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:50:31,796 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:50:31,797 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:50:31,797 - main - INFO - 
2025-12-29 20:50:31,797 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:50:31,797 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:50:31,798 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:50:31,798 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:50:31,798 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:50:31,798 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:50:31,798 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:50:31,799 - main - INFO - 
2025-12-29 20:50:31,799 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:50:31,799 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:50:31,799 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:50:31,800 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:50:31,800 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:50:31,800 - main - INFO - 
2025-12-29 20:50:31,800 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:50:31,801 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:50:31,801 - main - INFO -        - No manual section generation
2025-12-29 20:50:31,801 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:50:31,801 - main - INFO - 
2025-12-29 20:50:31,802 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:50:31,802 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:50:31,802 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:50:31,802 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:50:31,803 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:50:31,803 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:50:31,804 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:50:31,804 - main - INFO - 
2025-12-29 20:50:31,804 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:50:31,804 - main - INFO -      Main:
2025-12-29 20:50:31,805 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:50:31,805 - main - INFO - 
2025-12-29 20:50:31,806 - main - INFO -      Retrieval:
2025-12-29 20:50:31,808 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:50:31,810 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:50:31,810 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:50:31,810 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:50:31,811 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:50:31,811 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:50:31,811 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:50:31,812 - main - INFO - 
2025-12-29 20:50:31,812 - main - INFO -      Management:
2025-12-29 20:50:31,812 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:50:31,812 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:50:31,812 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:50:31,813 - main - INFO - 
2025-12-29 20:50:31,813 - main - INFO -      Documents (MongoDB):
2025-12-29 20:50:31,813 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:50:31,813 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:50:31,814 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:50:31,814 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:50:31,814 - main - INFO - 
2025-12-29 20:50:31,814 - main - INFO -      Diagnostics & Health:
2025-12-29 20:50:31,815 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:50:31,815 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:50:31,815 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:50:31,815 - main - INFO - 
2025-12-29 20:50:31,815 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:50:31,816 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:50:31,816 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:50:31,816 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:50:31,816 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:50:31,817 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:50:31,817 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:50:31,818 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:50:31,818 - main - INFO - 
2025-12-29 20:50:31,818 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:50:31,819 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:50:31,819 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:50:31,819 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:50:31,819 - main - INFO -      4. No re-upload needed!
2025-12-29 20:50:31,820 - main - INFO - 
2025-12-29 20:50:31,820 - main - INFO - ================================================================================
2025-12-29 20:50:31,821 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:50:31,821 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:50:31,822 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:50:31,823 - main - INFO - ================================================================================
2025-12-29 20:50:31,823 - main - INFO - 
2025-12-29 20:50:31,823 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:50:34,513 - main - INFO - 
2025-12-29 20:50:34,513 - main - INFO - ================================================================================
2025-12-29 20:50:34,514 - main - INFO -   üõë Shutting down application...
2025-12-29 20:50:34,515 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:34,516 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:50:34,517 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:34,518 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:50:34,519 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:50:34,519 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:50:34,520 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:50:34,521 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:50:34,522 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:50:34,522 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:50:34,523 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:50:34,523 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:50:34,523 - main - INFO - ================================================================================
2025-12-29 20:50:34,523 - main - INFO - 
2025-12-29 20:50:39,067 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:50:39,093 - main - INFO - 
2025-12-29 20:50:39,094 - main - INFO - ================================================================================
2025-12-29 20:50:39,094 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:50:39,094 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:50:39,094 - main - INFO - ================================================================================
2025-12-29 20:50:39,095 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:50:39,095 - main - INFO -   Upload Directory: uploads
2025-12-29 20:50:39,095 - main - INFO -   Max File Size: 20MB
2025-12-29 20:50:39,095 - main - INFO - ================================================================================
2025-12-29 20:50:39,096 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:50:39,096 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:50:39,097 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:39,120 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:50:39,124 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:50:39,125 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:50:39,125 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:50:39,125 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:50:39,125 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:50:39,132 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:50:39,134 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:50:39,135 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:50:39,137 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:50:39,137 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:50:39,138 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:50:39,138 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:39,138 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:50:39,144 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:50:39,144 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:50:39,145 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:50:39,153 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:50:39,157 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:50:39,158 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:50:39,158 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:50:39,165 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:50:39,170 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:50:39,170 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:50:39,170 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:50:39,170 - main - INFO - 
2025-12-29 20:50:39,171 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:50:39,171 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:50:39,171 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:50:39,171 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:50:39,171 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:50:39,172 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:50:39,172 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:50:39,172 - main - INFO - 
2025-12-29 20:50:39,172 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:50:39,172 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:50:39,173 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:50:39,173 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:50:39,173 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:50:39,173 - main - INFO - 
2025-12-29 20:50:39,173 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:50:39,173 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:50:39,174 - main - INFO -        - No manual section generation
2025-12-29 20:50:39,174 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:50:39,174 - main - INFO - 
2025-12-29 20:50:39,174 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:50:39,174 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:50:39,175 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:50:39,175 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:50:39,175 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:50:39,175 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:50:39,175 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:50:39,176 - main - INFO - 
2025-12-29 20:50:39,176 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:50:39,176 - main - INFO -      Main:
2025-12-29 20:50:39,176 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:50:39,177 - main - INFO - 
2025-12-29 20:50:39,177 - main - INFO -      Retrieval:
2025-12-29 20:50:39,177 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:50:39,177 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:50:39,178 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:50:39,178 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:50:39,178 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:50:39,178 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:50:39,178 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:50:39,179 - main - INFO - 
2025-12-29 20:50:39,179 - main - INFO -      Management:
2025-12-29 20:50:39,179 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:50:39,179 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:50:39,179 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:50:39,180 - main - INFO - 
2025-12-29 20:50:39,180 - main - INFO -      Documents (MongoDB):
2025-12-29 20:50:39,180 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:50:39,180 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:50:39,181 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:50:39,181 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:50:39,181 - main - INFO - 
2025-12-29 20:50:39,181 - main - INFO -      Diagnostics & Health:
2025-12-29 20:50:39,181 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:50:39,182 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:50:39,182 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:50:39,182 - main - INFO - 
2025-12-29 20:50:39,182 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:50:39,182 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:50:39,183 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:50:39,183 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:50:39,183 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:50:39,183 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:50:39,184 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:50:39,184 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:50:39,184 - main - INFO - 
2025-12-29 20:50:39,184 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:50:39,185 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:50:39,185 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:50:39,185 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:50:39,185 - main - INFO -      4. No re-upload needed!
2025-12-29 20:50:39,186 - main - INFO - 
2025-12-29 20:50:39,186 - main - INFO - ================================================================================
2025-12-29 20:50:39,186 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:50:39,186 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:50:39,186 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:50:39,187 - main - INFO - ================================================================================
2025-12-29 20:50:39,187 - main - INFO - 
2025-12-29 20:50:39,187 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:50:40,767 - main - INFO - 
2025-12-29 20:50:40,767 - main - INFO - ================================================================================
2025-12-29 20:50:40,767 - main - INFO -   üõë Shutting down application...
2025-12-29 20:50:40,768 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:40,769 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:50:40,769 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:40,770 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:50:40,770 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:50:40,771 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:50:40,771 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:50:40,772 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:50:40,773 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:50:40,773 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:50:40,774 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:50:40,774 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:50:40,774 - main - INFO - ================================================================================
2025-12-29 20:50:40,774 - main - INFO - 
2025-12-29 20:50:44,878 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:50:44,894 - main - INFO - 
2025-12-29 20:50:44,894 - main - INFO - ================================================================================
2025-12-29 20:50:44,894 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:50:44,895 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:50:44,895 - main - INFO - ================================================================================
2025-12-29 20:50:44,895 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:50:44,896 - main - INFO -   Upload Directory: uploads
2025-12-29 20:50:44,896 - main - INFO -   Max File Size: 20MB
2025-12-29 20:50:44,896 - main - INFO - ================================================================================
2025-12-29 20:50:44,897 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:50:44,897 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:50:44,898 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:44,944 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:50:44,950 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:50:44,950 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:50:44,951 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:50:44,951 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:50:44,951 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:50:44,958 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:50:44,959 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:50:44,960 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:50:44,962 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:50:44,962 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:50:44,962 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:50:44,963 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:44,963 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:50:44,995 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:50:44,995 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:50:44,995 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:50:45,002 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:50:45,007 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:50:45,008 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:50:45,009 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:50:45,038 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:50:45,042 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:50:45,043 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:50:45,043 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:50:45,044 - main - INFO - 
2025-12-29 20:50:45,044 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:50:45,044 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:50:45,044 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:50:45,045 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:50:45,045 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:50:45,045 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:50:45,045 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:50:45,046 - main - INFO - 
2025-12-29 20:50:45,046 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:50:45,046 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:50:45,046 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:50:45,047 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:50:45,047 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:50:45,047 - main - INFO - 
2025-12-29 20:50:45,047 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:50:45,048 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:50:45,048 - main - INFO -        - No manual section generation
2025-12-29 20:50:45,048 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:50:45,048 - main - INFO - 
2025-12-29 20:50:45,049 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:50:45,049 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:50:45,049 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:50:45,049 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:50:45,050 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:50:45,050 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:50:45,050 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:50:45,051 - main - INFO - 
2025-12-29 20:50:45,051 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:50:45,051 - main - INFO -      Main:
2025-12-29 20:50:45,051 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:50:45,052 - main - INFO - 
2025-12-29 20:50:45,052 - main - INFO -      Retrieval:
2025-12-29 20:50:45,052 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:50:45,052 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:50:45,053 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:50:45,054 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:50:45,054 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:50:45,054 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:50:45,055 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:50:45,055 - main - INFO - 
2025-12-29 20:50:45,055 - main - INFO -      Management:
2025-12-29 20:50:45,055 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:50:45,056 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:50:45,056 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:50:45,056 - main - INFO - 
2025-12-29 20:50:45,056 - main - INFO -      Documents (MongoDB):
2025-12-29 20:50:45,057 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:50:45,057 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:50:45,058 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:50:45,058 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:50:45,059 - main - INFO - 
2025-12-29 20:50:45,060 - main - INFO -      Diagnostics & Health:
2025-12-29 20:50:45,061 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:50:45,061 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:50:45,062 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:50:45,062 - main - INFO - 
2025-12-29 20:50:45,062 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:50:45,062 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:50:45,063 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:50:45,063 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:50:45,063 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:50:45,063 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:50:45,064 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:50:45,064 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:50:45,064 - main - INFO - 
2025-12-29 20:50:45,064 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:50:45,065 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:50:45,065 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:50:45,065 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:50:45,065 - main - INFO -      4. No re-upload needed!
2025-12-29 20:50:45,065 - main - INFO - 
2025-12-29 20:50:45,066 - main - INFO - ================================================================================
2025-12-29 20:50:45,066 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:50:45,066 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:50:45,066 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:50:45,067 - main - INFO - ================================================================================
2025-12-29 20:50:45,067 - main - INFO - 
2025-12-29 20:50:45,067 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:50:47,320 - main - INFO - 
2025-12-29 20:50:47,321 - main - INFO - ================================================================================
2025-12-29 20:50:47,321 - main - INFO -   üõë Shutting down application...
2025-12-29 20:50:47,323 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:47,324 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:50:47,326 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:50:47,326 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:50:47,329 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:50:47,329 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:50:47,331 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:50:47,331 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:50:47,332 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:50:47,333 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:50:47,333 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:50:47,334 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:50:47,335 - main - INFO - ================================================================================
2025-12-29 20:50:47,337 - main - INFO - 
2025-12-29 20:50:51,272 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:50:51,294 - main - INFO - 
2025-12-29 20:50:51,294 - main - INFO - ================================================================================
2025-12-29 20:50:51,295 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:50:51,295 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:50:51,295 - main - INFO - ================================================================================
2025-12-29 20:50:51,295 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:50:51,295 - main - INFO -   Upload Directory: uploads
2025-12-29 20:50:51,296 - main - INFO -   Max File Size: 20MB
2025-12-29 20:50:51,296 - main - INFO - ================================================================================
2025-12-29 20:50:51,296 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:50:51,297 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:50:51,297 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:51,325 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:50:51,331 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:50:51,331 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:50:51,331 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:50:51,332 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:50:51,332 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:50:51,345 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:50:51,346 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:50:51,348 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:50:51,350 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:50:51,350 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:50:51,350 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:50:51,351 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:50:51,351 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:50:51,363 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:50:51,363 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:50:51,363 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:50:51,395 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:50:51,400 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:50:51,400 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:50:51,401 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:50:51,435 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:50:51,449 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:50:51,450 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:50:51,451 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:50:51,451 - main - INFO - 
2025-12-29 20:50:51,452 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:50:51,453 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:50:51,454 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:50:51,455 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:50:51,456 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:50:51,457 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:50:51,458 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:50:51,459 - main - INFO - 
2025-12-29 20:50:51,460 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:50:51,461 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:50:51,461 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:50:51,462 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:50:51,463 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:50:51,463 - main - INFO - 
2025-12-29 20:50:51,464 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:50:51,465 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:50:51,466 - main - INFO -        - No manual section generation
2025-12-29 20:50:51,466 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:50:51,468 - main - INFO - 
2025-12-29 20:50:51,468 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:50:51,469 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:50:51,470 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:50:51,470 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:50:51,471 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:50:51,472 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:50:51,473 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:50:51,475 - main - INFO - 
2025-12-29 20:50:51,476 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:50:51,476 - main - INFO -      Main:
2025-12-29 20:50:51,477 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:50:51,477 - main - INFO - 
2025-12-29 20:50:51,478 - main - INFO -      Retrieval:
2025-12-29 20:50:51,478 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:50:51,479 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:50:51,479 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:50:51,479 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:50:51,480 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:50:51,481 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:50:51,481 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:50:51,482 - main - INFO - 
2025-12-29 20:50:51,482 - main - INFO -      Management:
2025-12-29 20:50:51,482 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:50:51,483 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:50:51,483 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:50:51,484 - main - INFO - 
2025-12-29 20:50:51,484 - main - INFO -      Documents (MongoDB):
2025-12-29 20:50:51,485 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:50:51,485 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:50:51,486 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:50:51,486 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:50:51,487 - main - INFO - 
2025-12-29 20:50:51,487 - main - INFO -      Diagnostics & Health:
2025-12-29 20:50:51,488 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:50:51,489 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:50:51,490 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:50:51,491 - main - INFO - 
2025-12-29 20:50:51,492 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:50:51,492 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:50:51,492 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:50:51,493 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:50:51,493 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:50:51,493 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:50:51,494 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:50:51,494 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:50:51,494 - main - INFO - 
2025-12-29 20:50:51,495 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:50:51,495 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:50:51,495 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:50:51,496 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:50:51,496 - main - INFO -      4. No re-upload needed!
2025-12-29 20:50:51,496 - main - INFO - 
2025-12-29 20:50:51,496 - main - INFO - ================================================================================
2025-12-29 20:50:51,497 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:50:51,497 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:50:51,497 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:50:51,498 - main - INFO - ================================================================================
2025-12-29 20:50:51,498 - main - INFO - 
2025-12-29 20:50:51,498 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:51:06,934 - main - INFO - 
2025-12-29 20:51:06,935 - main - INFO - ================================================================================
2025-12-29 20:51:06,935 - main - INFO -   üõë Shutting down application...
2025-12-29 20:51:06,936 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:06,936 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:51:06,937 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:06,937 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:51:06,938 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:51:06,938 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:51:06,939 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:51:06,939 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:51:06,940 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:51:06,940 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:51:06,941 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:51:06,941 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:51:06,941 - main - INFO - ================================================================================
2025-12-29 20:51:06,941 - main - INFO - 
2025-12-29 20:51:11,037 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:51:11,069 - main - INFO - 
2025-12-29 20:51:11,070 - main - INFO - ================================================================================
2025-12-29 20:51:11,070 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:51:11,070 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:51:11,071 - main - INFO - ================================================================================
2025-12-29 20:51:11,072 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:51:11,073 - main - INFO -   Upload Directory: uploads
2025-12-29 20:51:11,074 - main - INFO -   Max File Size: 20MB
2025-12-29 20:51:11,075 - main - INFO - ================================================================================
2025-12-29 20:51:11,078 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:51:11,080 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:51:11,081 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:11,126 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:51:11,132 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:51:11,132 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:51:11,133 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:51:11,133 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:51:11,133 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:51:11,147 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:51:11,148 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:51:11,149 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:51:11,153 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:51:11,153 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:51:11,156 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:51:11,156 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:11,157 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:51:11,168 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:51:11,170 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:51:11,171 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:51:11,181 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:51:11,185 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:51:11,186 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:51:11,187 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:51:11,209 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:51:11,217 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:51:11,218 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:51:11,219 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:51:11,219 - main - INFO - 
2025-12-29 20:51:11,220 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:51:11,220 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:51:11,220 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:51:11,221 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:51:11,221 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:51:11,221 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:51:11,222 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:51:11,223 - main - INFO - 
2025-12-29 20:51:11,224 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:51:11,226 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:51:11,227 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:51:11,228 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:51:11,229 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:51:11,229 - main - INFO - 
2025-12-29 20:51:11,239 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:51:11,241 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:51:11,242 - main - INFO -        - No manual section generation
2025-12-29 20:51:11,245 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:51:11,249 - main - INFO - 
2025-12-29 20:51:11,249 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:51:11,250 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:51:11,251 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:51:11,252 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:51:11,253 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:51:11,254 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:51:11,255 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:51:11,257 - main - INFO - 
2025-12-29 20:51:11,258 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:51:11,259 - main - INFO -      Main:
2025-12-29 20:51:11,260 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:51:11,260 - main - INFO - 
2025-12-29 20:51:11,260 - main - INFO -      Retrieval:
2025-12-29 20:51:11,261 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:51:11,262 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:51:11,263 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:51:11,264 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:51:11,265 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:51:11,266 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:51:11,266 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:51:11,266 - main - INFO - 
2025-12-29 20:51:11,268 - main - INFO -      Management:
2025-12-29 20:51:11,273 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:51:11,275 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:51:11,275 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:51:11,275 - main - INFO - 
2025-12-29 20:51:11,276 - main - INFO -      Documents (MongoDB):
2025-12-29 20:51:11,276 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:51:11,276 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:51:11,276 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:51:11,277 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:51:11,278 - main - INFO - 
2025-12-29 20:51:11,278 - main - INFO -      Diagnostics & Health:
2025-12-29 20:51:11,279 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:51:11,279 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:51:11,280 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:51:11,280 - main - INFO - 
2025-12-29 20:51:11,280 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:51:11,281 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:51:11,281 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:51:11,281 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:51:11,282 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:51:11,282 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:51:11,282 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:51:11,282 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:51:11,283 - main - INFO - 
2025-12-29 20:51:11,283 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:51:11,283 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:51:11,284 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:51:11,285 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:51:11,285 - main - INFO -      4. No re-upload needed!
2025-12-29 20:51:11,285 - main - INFO - 
2025-12-29 20:51:11,286 - main - INFO - ================================================================================
2025-12-29 20:51:11,286 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:51:11,287 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:51:11,287 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:51:11,288 - main - INFO - ================================================================================
2025-12-29 20:51:11,289 - main - INFO - 
2025-12-29 20:51:11,290 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:51:39,637 - main - INFO - 
2025-12-29 20:51:39,637 - main - INFO - ================================================================================
2025-12-29 20:51:39,638 - main - INFO -   üõë Shutting down application...
2025-12-29 20:51:39,639 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:39,639 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:51:39,640 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:39,641 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:51:39,642 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:51:39,642 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:51:39,644 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:51:39,644 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:51:39,645 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:51:39,646 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:51:39,646 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:51:39,646 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:51:39,647 - main - INFO - ================================================================================
2025-12-29 20:51:39,647 - main - INFO - 
2025-12-29 20:51:43,629 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:51:43,663 - main - INFO - 
2025-12-29 20:51:43,663 - main - INFO - ================================================================================
2025-12-29 20:51:43,663 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:51:43,664 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:51:43,664 - main - INFO - ================================================================================
2025-12-29 20:51:43,665 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:51:43,665 - main - INFO -   Upload Directory: uploads
2025-12-29 20:51:43,665 - main - INFO -   Max File Size: 20MB
2025-12-29 20:51:43,666 - main - INFO - ================================================================================
2025-12-29 20:51:43,667 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:51:43,669 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:51:43,671 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:43,714 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:51:43,733 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:51:43,733 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:51:43,733 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:51:43,734 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:51:43,735 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:51:43,901 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:51:43,921 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:51:43,928 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:51:43,933 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:51:43,935 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:51:43,938 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:51:43,942 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:43,954 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:51:43,987 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:51:43,989 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:51:43,989 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:51:44,013 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:51:44,018 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:51:44,019 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:51:44,020 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:51:44,037 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:51:44,048 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:51:44,048 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:51:44,049 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:51:44,049 - main - INFO - 
2025-12-29 20:51:44,049 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:51:44,050 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:51:44,050 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:51:44,051 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:51:44,051 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:51:44,051 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:51:44,052 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:51:44,053 - main - INFO - 
2025-12-29 20:51:44,053 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:51:44,053 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:51:44,054 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:51:44,054 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:51:44,055 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:51:44,058 - main - INFO - 
2025-12-29 20:51:44,060 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:51:44,060 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:51:44,061 - main - INFO -        - No manual section generation
2025-12-29 20:51:44,061 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:51:44,061 - main - INFO - 
2025-12-29 20:51:44,062 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:51:44,062 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:51:44,062 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:51:44,063 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:51:44,063 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:51:44,063 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:51:44,063 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:51:44,064 - main - INFO - 
2025-12-29 20:51:44,064 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:51:44,064 - main - INFO -      Main:
2025-12-29 20:51:44,065 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:51:44,065 - main - INFO - 
2025-12-29 20:51:44,065 - main - INFO -      Retrieval:
2025-12-29 20:51:44,066 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:51:44,066 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:51:44,066 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:51:44,066 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:51:44,067 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:51:44,067 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:51:44,068 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:51:44,068 - main - INFO - 
2025-12-29 20:51:44,069 - main - INFO -      Management:
2025-12-29 20:51:44,069 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:51:44,070 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:51:44,070 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:51:44,071 - main - INFO - 
2025-12-29 20:51:44,073 - main - INFO -      Documents (MongoDB):
2025-12-29 20:51:44,075 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:51:44,076 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:51:44,076 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:51:44,077 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:51:44,077 - main - INFO - 
2025-12-29 20:51:44,077 - main - INFO -      Diagnostics & Health:
2025-12-29 20:51:44,078 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:51:44,078 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:51:44,078 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:51:44,079 - main - INFO - 
2025-12-29 20:51:44,079 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:51:44,079 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:51:44,079 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:51:44,080 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:51:44,080 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:51:44,080 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:51:44,080 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:51:44,081 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:51:44,081 - main - INFO - 
2025-12-29 20:51:44,081 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:51:44,081 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:51:44,082 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:51:44,082 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:51:44,082 - main - INFO -      4. No re-upload needed!
2025-12-29 20:51:44,082 - main - INFO - 
2025-12-29 20:51:44,082 - main - INFO - ================================================================================
2025-12-29 20:51:44,083 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:51:44,083 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:51:44,083 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:51:44,084 - main - INFO - ================================================================================
2025-12-29 20:51:44,084 - main - INFO - 
2025-12-29 20:51:44,085 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 20:51:54,537 - main - INFO - 
2025-12-29 20:51:54,537 - main - INFO - ================================================================================
2025-12-29 20:51:54,537 - main - INFO -   üõë Shutting down application...
2025-12-29 20:51:54,539 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:54,539 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 20:51:54,540 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 20:51:54,540 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 20:51:54,541 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 20:51:54,542 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 20:51:54,543 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 20:51:54,543 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 20:51:54,544 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 20:51:54,545 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 20:51:54,545 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 20:51:54,546 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 20:51:54,546 - main - INFO - ================================================================================
2025-12-29 20:51:54,546 - main - INFO - 
2025-12-29 20:51:57,999 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 20:51:58,017 - main - INFO - 
2025-12-29 20:51:58,018 - main - INFO - ================================================================================
2025-12-29 20:51:58,018 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 20:51:58,019 - main - INFO -   Production-Ready Complete Integration
2025-12-29 20:51:58,019 - main - INFO - ================================================================================
2025-12-29 20:51:58,019 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 20:51:58,019 - main - INFO -   Upload Directory: uploads
2025-12-29 20:51:58,020 - main - INFO -   Max File Size: 20MB
2025-12-29 20:51:58,020 - main - INFO - ================================================================================
2025-12-29 20:51:58,021 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 20:51:58,021 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 20:51:58,021 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:58,044 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 20:51:58,049 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 20:51:58,049 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 20:51:58,049 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 20:51:58,049 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 20:51:58,050 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 20:51:58,082 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 20:51:58,083 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 20:51:58,084 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 20:51:58,087 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 20:51:58,087 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 20:51:58,087 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 20:51:58,088 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 20:51:58,088 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 20:51:58,127 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 20:51:58,128 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 20:51:58,128 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 20:51:58,160 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 20:51:58,162 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 20:51:58,163 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 20:51:58,163 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 20:51:58,193 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 20:51:58,196 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 20:51:58,196 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 20:51:58,197 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 20:51:58,197 - main - INFO - 
2025-12-29 20:51:58,197 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 20:51:58,197 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 20:51:58,197 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 20:51:58,198 - main - INFO -        - Separates warranties from extensions
2025-12-29 20:51:58,198 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 20:51:58,198 - main - INFO -        - Correct deductible tier detection
2025-12-29 20:51:58,198 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 20:51:58,198 - main - INFO - 
2025-12-29 20:51:58,199 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 20:51:58,199 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 20:51:58,199 - main - INFO -        - Identifies unique items per provider
2025-12-29 20:51:58,199 - main - INFO -        - Transparent scoring methodology
2025-12-29 20:51:58,199 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 20:51:58,199 - main - INFO - 
2025-12-29 20:51:58,200 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 20:51:58,200 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 20:51:58,200 - main - INFO -        - No manual section generation
2025-12-29 20:51:58,200 - main - INFO -        - Complete MongoDB integration
2025-12-29 20:51:58,200 - main - INFO - 
2025-12-29 20:51:58,201 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 20:51:58,201 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 20:51:58,201 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 20:51:58,201 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 20:51:58,201 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 20:51:58,202 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 20:51:58,202 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 20:51:58,202 - main - INFO - 
2025-12-29 20:51:58,202 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 20:51:58,203 - main - INFO -      Main:
2025-12-29 20:51:58,203 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 20:51:58,204 - main - INFO - 
2025-12-29 20:51:58,204 - main - INFO -      Retrieval:
2025-12-29 20:51:58,204 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 20:51:58,204 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 20:51:58,204 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 20:51:58,205 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 20:51:58,205 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 20:51:58,205 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 20:51:58,205 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 20:51:58,205 - main - INFO - 
2025-12-29 20:51:58,206 - main - INFO -      Management:
2025-12-29 20:51:58,206 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 20:51:58,206 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 20:51:58,206 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 20:51:58,206 - main - INFO - 
2025-12-29 20:51:58,207 - main - INFO -      Documents (MongoDB):
2025-12-29 20:51:58,207 - main - INFO -        GET  /api/documents                All documents
2025-12-29 20:51:58,207 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 20:51:58,207 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 20:51:58,208 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 20:51:58,208 - main - INFO - 
2025-12-29 20:51:58,208 - main - INFO -      Diagnostics & Health:
2025-12-29 20:51:58,209 - main - INFO -        GET  /api/health                   System health
2025-12-29 20:51:58,209 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 20:51:58,209 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 20:51:58,210 - main - INFO - 
2025-12-29 20:51:58,210 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 20:51:58,210 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 20:51:58,210 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 20:51:58,210 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 20:51:58,211 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 20:51:58,211 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 20:51:58,211 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 20:51:58,211 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 20:51:58,211 - main - INFO - 
2025-12-29 20:51:58,211 - main - INFO -   üéØ WORKFLOW:
2025-12-29 20:51:58,211 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 20:51:58,212 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 20:51:58,212 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 20:51:58,212 - main - INFO -      4. No re-upload needed!
2025-12-29 20:51:58,212 - main - INFO - 
2025-12-29 20:51:58,212 - main - INFO - ================================================================================
2025-12-29 20:51:58,212 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 20:51:58,213 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 20:51:58,213 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 20:51:58,213 - main - INFO - ================================================================================
2025-12-29 20:51:58,213 - main - INFO - 
2025-12-29 20:51:58,213 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 21:03:18,292 - main - INFO - üì• OPTIONS /api/activity-logs/create
2025-12-29 21:03:18,301 - main - INFO - üì§ OPTIONS /api/activity-logs/create - 200 - 0.01s
2025-12-29 21:03:18,312 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:03:18,313 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:03:18,318 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:03:18,333 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.02s
2025-12-29 21:03:18,348 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:03:18,349 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:03:18,354 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:03:18,356 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:03:18,361 - main - INFO - üì• POST /api/activity-logs/create
2025-12-29 21:03:18,362 - app.api.routes - INFO - üìù Creating activity log: login for user 694edeacc98c1096e3582e38
2025-12-29 21:03:18,364 - app.api.routes - INFO - ‚úÖ Activity log created: 6952ec9692754586913ba639
2025-12-29 21:03:18,365 - main - INFO - üì§ POST /api/activity-logs/create - 200 - 0.00s
2025-12-29 21:03:18,369 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:03:18,371 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:03:18,373 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:03:18,378 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:03:18,378 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:03:18,381 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:03:18,386 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:03:18,387 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:03:18,389 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:03:18,393 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:03:18,394 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:03:18,398 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:03:18,402 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:03:18,404 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:03:18,405 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:03:18,408 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:03:18,408 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:03:18,413 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:03:18,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:03:18,421 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:03:18,426 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:03:18,435 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:03:18,436 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:03:18,440 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:03:21,355 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 21:03:21,356 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.00s
2025-12-29 21:03:21,358 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 21:03:21,359 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 21:03:21,362 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 21:03:21,362 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 21:03:21,362 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 21:03:21,364 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 21:03:21,364 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 21:03:21,368 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 21:03:21,470 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 21:03:21,471 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 21:03:21,471 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 21:03:21,471 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 21:03:21,472 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 21:03:21,472 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 21:03:21,488 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 21:03:21,489 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 21:03:21,490 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 21:03:21,659 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 21:03:21,661 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_210321.pdf (129365 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_210321.pdf (147463 bytes)
2025-12-29 21:03:21,663 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.30s
2025-12-29 21:03:48,445 - main - INFO - üì• OPTIONS /api/compare-quotes
2025-12-29 21:03:48,445 - main - INFO - üì§ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-29 21:03:48,448 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 21:03:48,464 - app.api.routes - INFO - üîç Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-29 21:03:48,465 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 21:03:48,465 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 21:03:48,466 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 21:03:48,467 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 21:03:48,469 - app.api.routes - INFO - ‚úÖ User 694edeacc98c1096e3582e38 can perform comparison
2025-12-29 21:03:48,470 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-29 21:03:48,470 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-29 21:03:48,470 - app.api.routes - INFO -    - Files uploaded: 3
2025-12-29 21:03:48,470 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767042228_68ea79134e85
2025-12-29 21:03:48,471 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_16af6f394331 (3 files)
2025-12-29 21:03:48,471 - app.api.routes - INFO - üìä Initialized progress tracking: job_16af6f394331
2025-12-29 21:03:48,472 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:03:48,472 - app.api.routes - INFO - üìÑ Processing: Pricing Plans - Hakim AI.pdf
2025-12-29 21:03:48,473 - app.api.routes - INFO - ======================================================================
2025-12-29 21:03:48,474 - app.api.routes - INFO - üíæ Saved file: Pricing Plans - Hakim AI.pdf ‚Üí d651e6e7af3d4594a0bc05e88ae20942.pdf (75894 bytes)
2025-12-29 21:03:48,475 - app.api.routes - INFO - üìñ Extracting text from: Pricing Plans - Hakim AI.pdf
2025-12-29 21:03:48,476 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\d651e6e7af3d4594a0bc05e88ae20942.pdf
2025-12-29 21:03:48,476 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:03:48,477 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:03:48,500 - app.api.routes - INFO - ======================================================================
2025-12-29 21:03:48,518 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 450b600180e042d48f0cc86d3405d75e.pdf (464206 bytes)
2025-12-29 21:03:48,527 - app.services.pdf_extractor - INFO - Successfully extracted 1805 characters from 2 pages
2025-12-29 21:03:48,527 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:03:48,528 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:03:48,528 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\450b600180e042d48f0cc86d3405d75e.pdf
2025-12-29 21:03:48,528 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 21:03:48,529 - app.api.routes - INFO - ======================================================================
2025-12-29 21:03:48,603 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 21:03:48,604 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí b23b74ed66ec4d9eb7e4dc7b3cfbcc3c.pdf (175401 bytes)
2025-12-29 21:03:48,604 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 21:03:48,605 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\b23b74ed66ec4d9eb7e4dc7b3cfbcc3c.pdf
2025-12-29 21:03:48,605 - app.api.routes - INFO - ü§ñ Parsing with AI: Pricing Plans - Hakim AI.pdf
2025-12-29 21:03:48,628 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for Pricing Plans - Hakim AI.pdf
2025-12-29 21:03:48,643 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from text: Al Rajhi Takaful
2025-12-29 21:03:48,656 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Al Rajhi Takaful
2025-12-29 21:03:48,673 - app.services.ai_parser - INFO - üë§ Insured (Customer): Unknown Insured
2025-12-29 21:03:48,675 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 21:03:48,675 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 21:03:48,676 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 21:03:48,684 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 21:03:48,686 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 21:03:49,409 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:03:49,409 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:03:49,410 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 21:03:49,410 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 21:03:49,410 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 21:03:49,410 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 21:03:49,411 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 21:03:49,586 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 21:03:49,587 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 21:03:49,590 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 21:03:49,590 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 21:03:49,591 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 21:03:49,591 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 21:03:49,592 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 21:03:49,592 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 21:03:49,592 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 21:03:49,675 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 21:03:49,675 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 21:06:52,472 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:06:53,781 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 21:06:53,781 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 21:06:53,782 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 21:06:53,782 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 21:06:53,783 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 21:06:53,783 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 21:06:53,790 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 21:06:53,791 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 21:06:53,791 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 21:06:53,791 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 21:06:53,791 - app.services.ai_parser - INFO - üîÑ Rate: '0.38‚Ä∞' ‚Üí '0.38‚Ä∞'
2025-12-29 21:06:53,792 - app.services.ai_parser - INFO - üí∞ Calculated: 594567.88 from SI: 1564652306.28 √ó Rate: 0.38‚Ä∞
2025-12-29 21:06:53,792 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 21:06:53,792 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 21:06:53,793 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 5 extensions
2025-12-29 21:06:53,793 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 21:08:09,199 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:08:09,711 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 21:08:09,711 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 21:08:09,711 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 21:08:09,711 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 6 benefits, using fallback...
2025-12-29 21:08:09,715 - app.services.ai_parser - INFO - üìã Fallback extracted 60 benefits from patterns
2025-12-29 21:08:09,716 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 59 total
2025-12-29 21:08:09,716 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 21:08:09,716 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 21:08:09,717 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 21:08:09,717 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 21:08:09,717 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:08:09,718 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:08:09,718 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:08:09,718 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 21:08:09,718 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 21:08:09,719 - app.services.ai_parser - INFO - üìä Counts: 59 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 21:08:09,719 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 21:08:18,958 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:08:18,965 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 82.0
2025-12-29 21:09:21,365 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:09:42,992 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 21:09:42,993 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 21:09:42,993 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 21:09:42,993 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 exclusions, using fallback...
2025-12-29 21:09:42,997 - app.services.ai_parser - INFO - üö´ Fallback extracted 1 exclusions from patterns
2025-12-29 21:09:42,998 - app.services.ai_parser - INFO - ‚úÖ Enhanced exclusions: 3 total
2025-12-29 21:09:42,998 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 21:09:42,999 - app.services.ai_parser - INFO - üìã Fallback extracted 0 benefits from patterns
2025-12-29 21:09:42,999 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 21:09:42,999 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 21:09:43,000 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Could not normalize rate: EXACT rate text
2025-12-29 21:09:43,000 - app.services.ai_parser - INFO - üîÑ Rate: 'EXACT rate text' ‚Üí 'EXACT rate text'
2025-12-29 21:09:43,001 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:09:43,001 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:09:43,001 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:09:43,002 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 21:09:43,002 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 21:09:43,002 - app.services.ai_parser - INFO - üìä Counts: 2 benefits, 3 exclusions, 6 warranties, 3 extensions
2025-12-29 21:09:43,003 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 21:09:49,975 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:09:49,987 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 21:11:18,065 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:11:18,066 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 21:11:18,066 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 21:11:18,067 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 21:11:18,067 - app.services.ai_parser - INFO - 
2025-12-29 21:11:18,067 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:11:18,067 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - Pricing Plans - Hakim AI.pdf
2025-12-29 21:11:18,068 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:11:18,068 - app.services.ai_parser - INFO - üè¢ Insurer: Al Rajhi Takaful
2025-12-29 21:11:18,068 - app.services.ai_parser - INFO - üë§ Insured: Unknown Insured
2025-12-29 21:11:18,068 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 21:11:18,069 - app.services.ai_parser - INFO - üìä Rate: EXACT rate text
2025-12-29 21:11:18,069 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 21:11:18,069 - app.services.ai_parser - INFO - üìè Quality: 83.7/100
2025-12-29 21:11:18,069 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 21:11:18,070 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 21:11:18,070 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 21:11:18,070 - app.services.ai_parser - INFO - 
2025-12-29 21:11:18,070 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 21:11:18,070 - app.services.ai_parser - INFO -    ‚úì Benefits: 2
2025-12-29 21:11:18,071 - app.services.ai_parser - INFO -    ‚úì Exclusions: 3
2025-12-29 21:11:18,071 - app.services.ai_parser - INFO -    ‚úì Warranties: 6
2025-12-29 21:11:18,071 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 21:11:18,071 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 21:11:18,071 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:11:18,072 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: d651e6e7af3d4594a0bc05e88ae20942.pdf ‚Üí 6952ee7692754586913ba63a
2025-12-29 21:11:18,073 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952ee7692754586913ba63a
2025-12-29 21:11:18,074 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952ee7692754586913ba63b (75894 bytes)
2025-12-29 21:11:18,074 - app.api.routes - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952ee7692754586913ba63b
2025-12-29 21:11:18,074 - app.api.routes - INFO - ‚úÖ Successfully processed: Pricing Plans - Hakim AI.pdf
2025-12-29 21:12:37,156 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:12:38,850 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 21:16:24,023 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 21:16:24,053 - main - INFO - 
2025-12-29 21:16:24,053 - main - INFO - ================================================================================
2025-12-29 21:16:24,053 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 21:16:24,054 - main - INFO -   Production-Ready Complete Integration
2025-12-29 21:16:24,054 - main - INFO - ================================================================================
2025-12-29 21:16:24,054 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 21:16:24,054 - main - INFO -   Upload Directory: uploads
2025-12-29 21:16:24,055 - main - INFO -   Max File Size: 20MB
2025-12-29 21:16:24,055 - main - INFO - ================================================================================
2025-12-29 21:16:24,056 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 21:16:24,056 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 21:16:24,056 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 21:16:24,076 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 21:16:24,081 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 21:16:24,082 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 21:16:24,082 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 21:16:24,082 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 21:16:24,082 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 21:16:24,111 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 21:16:24,112 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 21:16:24,113 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 21:16:24,114 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 21:16:24,115 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 21:16:24,115 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 21:16:24,115 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 21:16:24,115 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 21:16:24,142 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 21:16:24,143 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 21:16:24,143 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 21:16:24,187 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 21:16:24,190 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 21:16:24,190 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 21:16:24,190 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 21:16:24,224 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 21:16:24,269 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 21:16:24,277 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 21:16:24,282 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 21:16:24,283 - main - INFO - 
2025-12-29 21:16:24,305 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 21:16:24,306 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 21:16:24,306 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 21:16:24,307 - main - INFO -        - Separates warranties from extensions
2025-12-29 21:16:24,307 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 21:16:24,308 - main - INFO -        - Correct deductible tier detection
2025-12-29 21:16:24,309 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 21:16:24,309 - main - INFO - 
2025-12-29 21:16:24,310 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 21:16:24,310 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 21:16:24,311 - main - INFO -        - Identifies unique items per provider
2025-12-29 21:16:24,311 - main - INFO -        - Transparent scoring methodology
2025-12-29 21:16:24,312 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 21:16:24,328 - main - INFO - 
2025-12-29 21:16:24,329 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 21:16:24,329 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 21:16:24,329 - main - INFO -        - No manual section generation
2025-12-29 21:16:24,330 - main - INFO -        - Complete MongoDB integration
2025-12-29 21:16:24,330 - main - INFO - 
2025-12-29 21:16:24,330 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 21:16:24,331 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 21:16:24,331 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 21:16:24,332 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 21:16:24,347 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 21:16:24,349 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 21:16:24,360 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 21:16:24,360 - main - INFO - 
2025-12-29 21:16:24,360 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 21:16:24,360 - main - INFO -      Main:
2025-12-29 21:16:24,361 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 21:16:24,361 - main - INFO - 
2025-12-29 21:16:24,361 - main - INFO -      Retrieval:
2025-12-29 21:16:24,361 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 21:16:24,361 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 21:16:24,362 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 21:16:24,362 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 21:16:24,362 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 21:16:24,362 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 21:16:24,363 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 21:16:24,363 - main - INFO - 
2025-12-29 21:16:24,363 - main - INFO -      Management:
2025-12-29 21:16:24,363 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 21:16:24,364 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 21:16:24,364 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 21:16:24,364 - main - INFO - 
2025-12-29 21:16:24,364 - main - INFO -      Documents (MongoDB):
2025-12-29 21:16:24,364 - main - INFO -        GET  /api/documents                All documents
2025-12-29 21:16:24,364 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 21:16:24,365 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 21:16:24,365 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 21:16:24,365 - main - INFO - 
2025-12-29 21:16:24,365 - main - INFO -      Diagnostics & Health:
2025-12-29 21:16:24,365 - main - INFO -        GET  /api/health                   System health
2025-12-29 21:16:24,365 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 21:16:24,365 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 21:16:24,366 - main - INFO - 
2025-12-29 21:16:24,366 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 21:16:24,366 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 21:16:24,366 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 21:16:24,366 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 21:16:24,367 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 21:16:24,367 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 21:16:24,367 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 21:16:24,368 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 21:16:24,368 - main - INFO - 
2025-12-29 21:16:24,368 - main - INFO -   üéØ WORKFLOW:
2025-12-29 21:16:24,368 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 21:16:24,369 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 21:16:24,369 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 21:16:24,369 - main - INFO -      4. No re-upload needed!
2025-12-29 21:16:24,369 - main - INFO - 
2025-12-29 21:16:24,369 - main - INFO - ================================================================================
2025-12-29 21:16:24,369 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 21:16:24,370 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 21:16:24,370 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 21:16:24,370 - main - INFO - ================================================================================
2025-12-29 21:16:24,370 - main - INFO - 
2025-12-29 21:16:24,371 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 21:16:35,408 - main - INFO - üì• OPTIONS /api/compare-quotes
2025-12-29 21:16:35,409 - main - INFO - üì§ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-29 21:16:35,413 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 21:16:35,416 - app.api.routes - INFO - üîç Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-29 21:16:35,417 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 21:16:35,417 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 21:16:35,418 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 21:16:35,420 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 21:16:35,424 - app.api.routes - INFO - ‚úÖ User 694edeacc98c1096e3582e38 can perform comparison
2025-12-29 21:16:35,425 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-29 21:16:35,425 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-29 21:16:35,425 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-29 21:16:35,425 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767042995_2719f410998f
2025-12-29 21:16:35,426 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_900e4a368d49 (2 files)
2025-12-29 21:16:35,426 - app.api.routes - INFO - üìä Initialized progress tracking: job_900e4a368d49
2025-12-29 21:16:35,426 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:16:35,427 - app.api.routes - INFO - üìÑ Processing: Pricing Plans - Hakim AI.pdf
2025-12-29 21:16:35,427 - app.api.routes - INFO - ======================================================================
2025-12-29 21:16:35,428 - app.api.routes - INFO - üíæ Saved file: Pricing Plans - Hakim AI.pdf ‚Üí 283a6089372c4f63a57dad609bf1b887.pdf (75894 bytes)
2025-12-29 21:16:35,429 - app.api.routes - INFO - üìñ Extracting text from: Pricing Plans - Hakim AI.pdf
2025-12-29 21:16:35,430 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\283a6089372c4f63a57dad609bf1b887.pdf
2025-12-29 21:16:35,431 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:16:35,431 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:16:35,459 - app.api.routes - INFO - ======================================================================
2025-12-29 21:16:35,466 - app.services.pdf_extractor - INFO - Successfully extracted 1805 characters from 2 pages
2025-12-29 21:16:35,466 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí a3b21ec92acc489d97aee0617f88356e.pdf (464206 bytes)
2025-12-29 21:16:35,468 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:16:35,469 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\a3b21ec92acc489d97aee0617f88356e.pdf
2025-12-29 21:16:35,470 - app.api.routes - INFO - ü§ñ Parsing with AI: Pricing Plans - Hakim AI.pdf
2025-12-29 21:16:35,621 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for Pricing Plans - Hakim AI.pdf
2025-12-29 21:16:35,685 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from text: Al Rajhi Takaful
2025-12-29 21:16:35,709 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 21:16:35,711 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Al Rajhi Takaful
2025-12-29 21:16:35,711 - app.services.ai_parser - INFO - üë§ Insured (Customer): Unknown Insured
2025-12-29 21:16:35,711 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 21:16:35,712 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 21:16:35,723 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 21:16:35,724 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 21:16:36,251 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:16:36,252 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:16:36,253 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 21:16:36,253 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 21:16:36,254 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 21:16:36,254 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 21:16:36,255 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 21:16:36,447 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 21:16:36,448 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 21:17:02,555 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:17:03,309 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 21:17:03,309 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 21:17:03,310 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 21:17:03,310 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 21:17:03,310 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 21:17:03,311 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 21:17:03,316 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 21:17:03,316 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 21:17:03,316 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 21:17:03,316 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 21:17:03,317 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Extracted rate 594 > 10, likely premium confusion
2025-12-29 21:17:03,317 - app.services.ai_parser - INFO - üîÑ Rate: 'SR. 594,567.87 + SR. 25 Policy fee + 89,188.93 (15% VAT)' ‚Üí 'N/A'
2025-12-29 21:17:03,318 - app.services.ai_parser - INFO - üí∞ Calculated: 9302919888690.08 from SI: 1564652306.0 √ó Rate: SR. 594,567.87 + SR. 25 Policy fee + 89,188.93 (15% VAT)
2025-12-29 21:17:03,318 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 21:17:03,318 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 21:17:03,318 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 5 extensions
2025-12-29 21:17:03,318 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 21:17:09,022 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:17:09,024 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 21:17:09,368 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:17:09,370 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 75.0
2025-12-29 21:17:09,370 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 21:17:09,370 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 21:17:09,371 - app.services.ai_parser - INFO - 
2025-12-29 21:17:09,371 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:17:09,371 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:17:09,371 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:17:09,371 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 21:17:09,372 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 21:17:09,372 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 21:17:09,372 - app.services.ai_parser - INFO - üìä Rate: N/A
2025-12-29 21:17:09,372 - app.services.ai_parser - INFO - üéØ Score: 75.0/100
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - 
2025-12-29 21:17:09,373 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 21:17:09,374 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:17:09,376 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: a3b21ec92acc489d97aee0617f88356e.pdf ‚Üí 6952efd590dd44e968b980c3
2025-12-29 21:17:09,376 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952efd590dd44e968b980c3
2025-12-29 21:17:09,379 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952efd590dd44e968b980c4 (464206 bytes)
2025-12-29 21:17:09,380 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952efd590dd44e968b980c4
2025-12-29 21:17:09,380 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 21:19:22,708 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:19:22,712 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 21:19:22,713 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 21:19:22,713 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 21:19:22,714 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 exclusions, using fallback...
2025-12-29 21:19:22,720 - app.services.ai_parser - INFO - üö´ Fallback extracted 1 exclusions from patterns
2025-12-29 21:19:22,721 - app.services.ai_parser - INFO - ‚úÖ Enhanced exclusions: 3 total
2025-12-29 21:19:22,721 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 21:19:22,722 - app.services.ai_parser - INFO - üìã Fallback extracted 0 benefits from patterns
2025-12-29 21:19:22,722 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 21:19:22,722 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 21:19:22,722 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Could not normalize rate: EXACT rate text
2025-12-29 21:19:22,723 - app.services.ai_parser - INFO - üîÑ Rate: 'EXACT rate text' ‚Üí 'EXACT rate text'
2025-12-29 21:19:22,723 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:19:22,723 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:19:22,723 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 21:19:22,724 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 21:19:22,724 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 21:19:22,724 - app.services.ai_parser - INFO - üìä Counts: 2 benefits, 3 exclusions, 6 warranties, 3 extensions
2025-12-29 21:19:22,724 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 21:19:47,687 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:19:47,690 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:19:47,693 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 21:19:47,904 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 21:19:47,904 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 21:19:47,905 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 21:19:47,905 - app.services.ai_parser - INFO - 
2025-12-29 21:19:47,906 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:19:47,906 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - Pricing Plans - Hakim AI.pdf
2025-12-29 21:19:47,906 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:19:47,907 - app.services.ai_parser - INFO - üè¢ Insurer: Al Rajhi Takaful
2025-12-29 21:19:47,907 - app.services.ai_parser - INFO - üë§ Insured: Unknown Insured
2025-12-29 21:19:47,907 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 21:19:47,908 - app.services.ai_parser - INFO - üìä Rate: EXACT rate text
2025-12-29 21:19:47,908 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 21:19:47,908 - app.services.ai_parser - INFO - üìè Quality: 83.7/100
2025-12-29 21:19:47,909 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 21:19:47,909 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 21:19:47,909 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 21:19:47,910 - app.services.ai_parser - INFO - 
2025-12-29 21:19:47,910 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 21:19:47,910 - app.services.ai_parser - INFO -    ‚úì Benefits: 2
2025-12-29 21:19:47,911 - app.services.ai_parser - INFO -    ‚úì Exclusions: 3
2025-12-29 21:19:47,911 - app.services.ai_parser - INFO -    ‚úì Warranties: 6
2025-12-29 21:19:47,911 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 21:19:47,911 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 21:19:47,912 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 21:19:47,914 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 283a6089372c4f63a57dad609bf1b887.pdf ‚Üí 6952f07390dd44e968b980c5
2025-12-29 21:19:47,914 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952f07390dd44e968b980c5
2025-12-29 21:19:47,916 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952f07390dd44e968b980c6 (75894 bytes)
2025-12-29 21:19:47,917 - app.api.routes - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952f07390dd44e968b980c6
2025-12-29 21:19:47,917 - app.api.routes - INFO - ‚úÖ Successfully processed: Pricing Plans - Hakim AI.pdf
2025-12-29 21:19:47,918 - app.api.routes - INFO - 
‚úÖ Successfully extracted 2 quotes
2025-12-29 21:19:47,918 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:19:47,919 - app.api.routes - INFO - üîÄ Generating comparison for 2 quotes
2025-12-29 21:19:47,919 - app.api.routes - INFO - ======================================================================
2025-12-29 21:19:47,919 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 2 quotes
2025-12-29 21:19:47,920 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 21:19:47,920 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 21:19:47,920 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 21:19:47,921 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 21:19:47,921 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 21:19:47,922 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 21:19:47,922 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 21:19:47,922 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 21:19:47,922 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 21:19:47,923 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 21:19:47,923 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 21:19:47,923 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 21:19:47,924 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 21:19:47,924 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 21:19:47,925 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 21:19:47,925 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 21:19:47,925 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 21:19:47,926 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.0,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "care_custody_control": "SR 2,500,000 any one occurrence & in aggregate",
    "srcc_malicious_damage": "Limited to 25% of the location sum insured",
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and 
2025-12-29 21:19:47,930 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 21:19:47,932 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 21:19:47,932 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 21:19:47,933 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 21:19:47,933 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 21:19:47,934 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 21:19:47,934 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 21:19:47,934 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 21:19:47,935 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 21:19:47,936 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 21:19:47,937 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 21:19:47,937 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 21:19:47,938 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 21:19:47,938 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 21:19:47,938 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 21:19:47,939 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 21:19:47,939 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 21:19:47,939 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 21:19:47,939 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 21:19:47,940 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 21:19:47,940 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 21:19:47,940 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 21:19:47,941 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 21:19:47,941 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 21:19:47,941 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 21:19:47,942 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Al Rajhi Takaful
2025-12-29 21:19:47,942 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 21:19:47,942 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 21:19:47,942 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 21:19:47,943 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 21:19:47,943 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 21:19:47,944 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 21:19:47,944 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 21:19:47,945 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 21:19:47,945 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 21:19:47,946 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 21:19:47,946 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "MD amount",
    "business_interruption": "BI amount",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "14 da
2025-12-29 21:19:47,951 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 21:19:47,952 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 21:19:47,952 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 21:19:47,952 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 21:19:47,953 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 21:19:47,953 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 21:19:47,953 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 21:19:47,954 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 21:19:47,954 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 21:19:47,954 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 21:19:47,955 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 21:19:47,955 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 21:19:47,955 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 21:19:47,955 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 21:19:47,956 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 21:19:47,956 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 21:19:47,956 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 21:19:47,956 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 21:19:47,957 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Al Rajhi Takaful
2025-12-29 21:19:47,957 - app.services.ai_ranker - INFO - 
üìä Al Rajhi Takaful:
2025-12-29 21:19:47,957 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-29 21:19:47,957 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 21:19:47,958 - app.services.ai_ranker - INFO -    Exclusions: 3
2025-12-29 21:19:47,958 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 21:19:47,958 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 21:19:48,002 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 21:19:48,002 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 3
2025-12-29 21:19:48,003 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 21:19:48,003 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 21:19:48,003 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 21:19:48,003 - app.services.ai_ranker - INFO -       ‚Ä¢ Bookkeeping warrantee
2025-12-29 21:19:48,004 - app.services.ai_ranker - INFO -       ‚Ä¢ Hazardous good warranty
2025-12-29 21:19:48,004 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted no workshop operations on insured premises
2025-12-29 21:19:48,004 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Al Rajhi Takaful
2025-12-29 21:19:48,027 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 0
2025-12-29 21:19:48,028 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 1
2025-12-29 21:19:48,028 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 2
2025-12-29 21:19:48,028 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 21:19:48,028 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 21:19:48,029 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 21:19:48,029 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 21:19:48,029 - app.services.ai_ranker - WARNING - ‚ö†Ô∏è No valid rates found in comparison set
2025-12-29 21:19:48,030 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=74.96
2025-12-29 21:19:48,030 - app.services.ai_ranker - WARNING - ‚ö†Ô∏è No valid rates found in comparison set
2025-12-29 21:19:48,030 - app.services.ai_ranker - INFO - üìä Al Rajhi Takaful: Hakim Score=80.0 (Baseline), Weighted Score=68.38
2025-12-29 21:19:48,030 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 21:19:48,031 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 21:19:48,031 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 21:19:56,942 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:19:56,946 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 21:19:56,946 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 21:23:22,577 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 21:23:23,197 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Tawuniya: Tawuniya stands out as the best insurance provider with a score of 75.0/100, significantly outperfor...
2025-12-29 21:23:23,198 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 21:23:23,199 - app.api.routes - INFO - üè¢ Main user - using user_id as company_id for sub-user access: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,199 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 21:23:23,200 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767042995_2719f410998f
2025-12-29 21:23:23,200 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-29 21:23:23,200 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 21:23:23,201 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 2
2025-12-29 21:23:23,201 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 21:23:23,201 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 21:23:23,201 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 21:23:23,202 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 21:23:23,202 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 21:23:23,202 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 21:23:23,202 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 21:23:23,203 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Al Rajhi Takaful
2025-12-29 21:23:23,203 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 21:23:23,203 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 21:23:23,204 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 21:23:23,204 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 21:23:23,204 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 21:23:23,204 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 21:23:23,206 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 21:23:23,206 - app.services.mongodb_service_enhanced - INFO -    Summary: 2,604 bytes
2025-12-29 21:23:23,206 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 18,313 bytes
2025-12-29 21:23:23,207 - app.services.mongodb_service_enhanced - INFO -    Data table: 8,510 bytes
2025-12-29 21:23:23,207 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,418 bytes
2025-12-29 21:23:23,207 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 23,646 bytes
2025-12-29 21:23:23,207 - app.services.mongodb_service_enhanced - INFO -    Total document: 115,563 bytes
2025-12-29 21:23:23,208 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 21:23:23,208 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-29 21:23:23,208 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-29 21:23:23,208 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-29 21:23:23,209 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-29 21:23:23,210 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-29 21:23:23,210 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-29 21:23:23,210 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-29 21:23:23,210 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-29 21:23:23,210 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-29 21:23:23,211 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 21:23:23,211 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-29 21:23:23,211 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 21:23:23,211 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 21:23:23,212 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 21:23:23,216 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767042995_2719f410998f
2025-12-29 21:23:23,216 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6952f14b5a37704a1c0a83f7
2025-12-29 21:23:23,219 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 21:23:23,219 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 21:23:23,219 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 21:23:23,220 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 21:23:23,220 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 21:23:23,220 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 21:23:23,221 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 21:23:23,221 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-29 21:23:23,221 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 21:23:23,222 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-29 21:23:23,222 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 21:23:23,222 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-29 21:23:23,222 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 21:23:23,223 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 21:23:23,223 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 21:23:23,223 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 21:23:23,224 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 21:23:23,224 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 21:23:23,224 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 21:23:23,225 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6952f14b5a37704a1c0a83f7
2025-12-29 21:23:23,225 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 21:23:23,225 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 21:23:23,225 - app.api.routes - INFO -    Comparison ID: cmp_1767042995_2719f410998f
2025-12-29 21:23:23,226 - app.api.routes - INFO -    User ID: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,226 - app.api.routes - INFO -    Company ID: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,228 - app.services.user_subscription_service - INFO - ‚úÖ Unlimited plan - no usage tracking needed for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,228 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,228 - app.api.routes - INFO - 
======================================================================
2025-12-29 21:23:23,229 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 21:23:23,229 - app.api.routes - INFO - ======================================================================
2025-12-29 21:23:23,229 - app.api.routes - INFO - üìä Comparison ID: cmp_1767042995_2719f410998f
2025-12-29 21:23:23,229 - app.api.routes - INFO - üë§ User ID: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,230 - app.api.routes - INFO - üìÑ Files Processed: 2/2
2025-12-29 21:23:23,230 - app.api.routes - INFO - üíæ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-29 21:23:23,230 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,230 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 21:23:23,231 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 21:23:23,232 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 21:23:23,234 - app.api.routes - INFO - üìä Remaining comparisons: -1
2025-12-29 21:23:23,235 - app.api.routes - INFO - ======================================================================

2025-12-29 21:23:23,236 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_900e4a368d49 ‚Üí comparison_id: cmp_1767042995_2719f410998f
2025-12-29 21:23:23,241 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,242 - main - INFO - üì§ POST /api/compare-quotes - 200 - 407.83s
2025-12-29 21:23:23,552 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:23:23,553 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:23:23,557 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:23:23,557 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:23:23,560 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 21:23:23,561 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 21:23:23,563 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:23:23,564 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,565 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:23:23,575 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:23:23,576 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,587 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:23:23,592 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:23:23,595 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,598 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:23:23,604 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:23:23,605 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:23:23,616 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:23:23,620 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,622 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:23:23,630 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:23:23,638 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,648 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 21:23:23,655 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:23:23,657 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:23:23,660 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:23:23,673 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:23:23,674 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:23:23,683 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 21:23:49,452 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767042995_2719f410998f/pdf
2025-12-29 21:23:49,452 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767042995_2719f410998f/pdf - 200 - 0.00s
2025-12-29 21:23:49,456 - main - INFO - üì• GET /api/comparison/cmp_1767042995_2719f410998f/pdf
2025-12-29 21:23:49,456 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767042995_2719f410998f, type: both
2025-12-29 21:23:49,458 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767042995_2719f410998f
2025-12-29 21:23:49,458 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 21:23:49,459 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 21:23:49,460 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 21:23:49,460 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 21:23:49,463 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 21:23:49,578 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767042995_2719f410998f
2025-12-29 21:23:49,578 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767042995_2719f410998f
2025-12-29 21:23:49,578 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 21:23:49,579 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 21:23:49,579 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 21:23:49,579 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 21:23:49,586 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 21:23:49,587 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 21:23:49,588 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 21:23:49,728 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767042995_2719f410998f
2025-12-29 21:23:49,730 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767042995_2719f410998f_20251229_212349.pdf (129186 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767042995_2719f410998f_20251229_212349.pdf (138055 bytes)
2025-12-29 21:23:49,732 - main - INFO - üì§ GET /api/comparison/cmp_1767042995_2719f410998f/pdf - 200 - 0.28s
2025-12-29 21:23:53,626 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:23:53,627 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:23:53,629 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:23:53,699 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:23:53,700 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:23:53,708 - main - INFO - üì§ GET /api/comparisons - 200 - 0.08s
2025-12-29 21:24:24,412 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:24:24,414 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:24:24,417 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:24:24,429 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:24:24,429 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:24:24,439 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 21:24:54,097 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:24:54,097 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:24:54,099 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:24:54,104 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:24:54,105 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:24:54,111 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:25:24,409 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:25:24,411 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:25:24,414 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:25:24,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:25:24,422 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:25:24,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:25:54,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:25:54,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:25:54,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:25:54,115 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:25:54,115 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:25:54,120 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:26:24,411 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:26:24,412 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:26:24,415 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:26:24,425 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:26:24,425 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:26:24,429 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:26:54,115 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:26:54,117 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:26:54,120 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:26:54,128 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:26:54,129 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:26:54,136 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:27:27,413 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:27:27,415 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:27:27,418 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:27:27,433 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:27:27,434 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:27:27,447 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 21:28:27,099 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:28:27,101 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:28:27,103 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:28:27,108 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:28:27,108 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:28:27,113 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 21:29:27,420 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:29:27,421 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:29:27,424 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:29:27,436 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:29:27,437 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:29:27,442 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 21:30:27,111 - main - INFO - üì• GET /api/comparisons
2025-12-29 21:30:27,113 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 21:30:27,116 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 21:30:27,124 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 21:30:27,124 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 21:30:27,131 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:37:58,623 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:37:58,640 - main - INFO - 
2025-12-29 22:37:58,640 - main - INFO - ================================================================================
2025-12-29 22:37:58,640 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:37:58,640 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:37:58,641 - main - INFO - ================================================================================
2025-12-29 22:37:58,641 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:37:58,641 - main - INFO -   Upload Directory: uploads
2025-12-29 22:37:58,642 - main - INFO -   Max File Size: 20MB
2025-12-29 22:37:58,642 - main - INFO - ================================================================================
2025-12-29 22:37:58,642 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:37:58,643 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:37:58,643 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:37:58,918 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:37:58,923 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:37:58,923 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:37:58,923 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:37:58,923 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:37:58,924 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:37:58,931 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:37:58,932 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:37:58,934 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:37:58,936 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:37:58,937 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:37:58,937 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:37:58,937 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:37:58,937 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:37:58,965 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:37:58,965 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:37:58,965 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:37:58,971 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:37:58,973 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:37:58,974 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:37:58,974 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:37:58,981 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:37:58,985 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:37:58,985 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:37:58,985 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:37:58,985 - main - INFO - 
2025-12-29 22:37:58,985 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:37:58,986 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:37:58,986 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:37:58,986 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:37:58,986 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:37:58,987 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:37:58,987 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:37:58,987 - main - INFO - 
2025-12-29 22:37:58,987 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:37:58,987 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:37:58,987 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:37:58,988 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:37:58,988 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:37:58,988 - main - INFO - 
2025-12-29 22:37:58,988 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:37:58,988 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:37:58,988 - main - INFO -        - No manual section generation
2025-12-29 22:37:58,989 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:37:58,989 - main - INFO - 
2025-12-29 22:37:58,989 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:37:58,989 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:37:58,989 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:37:58,989 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:37:58,990 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:37:58,990 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:37:58,990 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:37:58,990 - main - INFO - 
2025-12-29 22:37:58,991 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:37:58,991 - main - INFO -      Main:
2025-12-29 22:37:58,991 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:37:58,991 - main - INFO - 
2025-12-29 22:37:58,991 - main - INFO -      Retrieval:
2025-12-29 22:37:58,991 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:37:58,992 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:37:58,992 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:37:58,992 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:37:58,993 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:37:58,993 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:37:58,993 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:37:58,993 - main - INFO - 
2025-12-29 22:37:58,994 - main - INFO -      Management:
2025-12-29 22:37:58,994 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:37:58,994 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:37:58,994 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:37:58,995 - main - INFO - 
2025-12-29 22:37:58,995 - main - INFO -      Documents (MongoDB):
2025-12-29 22:37:58,995 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:37:58,995 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:37:58,995 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:37:58,995 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:37:58,996 - main - INFO - 
2025-12-29 22:37:58,996 - main - INFO -      Diagnostics & Health:
2025-12-29 22:37:58,996 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:37:58,996 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:37:58,997 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:37:58,997 - main - INFO - 
2025-12-29 22:37:58,997 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:37:58,997 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:37:58,998 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:37:58,998 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:37:58,998 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:37:58,998 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:37:58,999 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:37:58,999 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:37:58,999 - main - INFO - 
2025-12-29 22:37:58,999 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:37:59,000 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:37:59,000 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:37:59,000 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:37:59,000 - main - INFO -      4. No re-upload needed!
2025-12-29 22:37:59,000 - main - INFO - 
2025-12-29 22:37:59,001 - main - INFO - ================================================================================
2025-12-29 22:37:59,001 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:37:59,001 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:37:59,001 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:37:59,002 - main - INFO - ================================================================================
2025-12-29 22:37:59,002 - main - INFO - 
2025-12-29 22:37:59,003 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:38:25,341 - main - INFO - üì• OPTIONS /api/activity-logs/create
2025-12-29 22:38:25,342 - main - INFO - üì§ OPTIONS /api/activity-logs/create - 200 - 0.00s
2025-12-29 22:38:25,346 - main - INFO - üì• POST /api/activity-logs/create
2025-12-29 22:38:25,348 - app.api.routes - INFO - üìù Creating activity log: login for user 694edeacc98c1096e3582e38
2025-12-29 22:38:25,350 - app.api.routes - INFO - ‚úÖ Activity log created: 695302e1c68c1555b3dcc853
2025-12-29 22:38:25,350 - main - INFO - üì§ POST /api/activity-logs/create - 200 - 0.00s
2025-12-29 22:38:26,208 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:38:26,210 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:38:26,213 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 22:38:26,215 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 22:38:26,218 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:38:26,220 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:38:26,220 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 22:38:26,222 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 22:38:26,254 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:38:26,255 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:38:26,258 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:38:26,269 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:38:26,270 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:38:26,274 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:38:26,277 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:38:26,279 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:38:26,282 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:38:26,287 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:38:26,288 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:38:26,293 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:38:26,298 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:38:26,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:38:26,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:38:26,307 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:38:26,307 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:38:26,315 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:38:26,322 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:38:26,324 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:38:26,328 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:38:26,336 - app.services.mongodb_service_enhanced - INFO - üìä Found 3 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:38:26,337 - app.api.routes - INFO - ‚úÖ Found 3 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:38:26,341 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:38:36,996 - main - INFO - üì• OPTIONS /api/compare-quotes
2025-12-29 22:38:36,996 - main - INFO - üì§ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-29 22:38:36,999 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 22:38:37,003 - app.api.routes - INFO - üîç Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-29 22:38:37,004 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 22:38:37,004 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 22:38:37,004 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 22:38:37,006 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 22:38:37,007 - app.api.routes - INFO - ‚úÖ User 694edeacc98c1096e3582e38 can perform comparison
2025-12-29 22:38:37,008 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-29 22:38:37,008 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-29 22:38:37,008 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-29 22:38:37,009 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767047917_c66baf45d7e7
2025-12-29 22:38:37,009 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_53cf24a84477 (2 files)
2025-12-29 22:38:37,009 - app.api.routes - INFO - üìä Initialized progress tracking: job_53cf24a84477
2025-12-29 22:38:37,010 - app.api.routes - INFO - 
======================================================================
2025-12-29 22:38:37,010 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:38:37,011 - app.api.routes - INFO - ======================================================================
2025-12-29 22:38:37,012 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 5138d366ae8b4a03952fe3d595e0bfc7.pdf (464206 bytes)
2025-12-29 22:38:37,012 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:38:37,013 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\5138d366ae8b4a03952fe3d595e0bfc7.pdf
2025-12-29 22:38:37,013 - app.api.routes - INFO - 
======================================================================
2025-12-29 22:38:37,013 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:38:37,035 - app.api.routes - INFO - ======================================================================
2025-12-29 22:38:37,054 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 43e5de38be714435a650b2fad3a65d78.pdf (175401 bytes)
2025-12-29 22:38:37,066 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:38:37,087 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 22:38:37,087 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\43e5de38be714435a650b2fad3a65d78.pdf
2025-12-29 22:38:37,089 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:38:37,115 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:38:37,149 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 22:38:37,149 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 22:38:37,151 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 22:38:37,151 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 22:38:37,151 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 22:38:37,152 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 22:38:37,326 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 22:38:37,327 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 22:38:37,961 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:38:37,963 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:38:37,965 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 22:38:37,966 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 22:38:37,968 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 22:38:37,968 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 22:38:37,969 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 22:38:38,123 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 22:38:38,124 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 22:39:04,177 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:04,186 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 22:39:04,186 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 22:39:04,186 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 22:39:04,187 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 22:39:04,187 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 22:39:04,187 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 22:39:04,193 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 22:39:04,194 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 22:39:04,194 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 22:39:04,194 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 22:39:04,195 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Extracted rate 594 > 10, likely premium confusion
2025-12-29 22:39:04,195 - app.services.ai_parser - INFO - üîÑ Rate: 'SR. 594,567.87 + SR. 25 Policy fee + 89,188.93 (15% VAT)' ‚Üí 'N/A'
2025-12-29 22:39:04,196 - app.services.ai_parser - INFO - üí∞ Calculated: 9302919888690.08 from SI: 1564652306.0 √ó Rate: SR. 594,567.87 + SR. 25 Policy fee + 89,188.93 (15% VAT)
2025-12-29 22:39:04,196 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 22:39:04,196 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 22:39:04,197 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 3 extensions
2025-12-29 22:39:04,197 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 22:39:12,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:12,236 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 78.0
2025-12-29 22:39:12,269 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:12,485 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 22:39:12,485 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 22:39:12,485 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 22:39:12,486 - app.services.ai_parser - INFO - 
2025-12-29 22:39:12,486 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:12,486 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:39:12,486 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:12,487 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 22:39:12,487 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 22:39:12,487 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 22:39:12,488 - app.services.ai_parser - INFO - üìä Rate: N/A
2025-12-29 22:39:12,488 - app.services.ai_parser - INFO - üéØ Score: 78.0/100
2025-12-29 22:39:12,488 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 22:39:12,489 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 22:39:12,489 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 22:39:12,489 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 22:39:12,489 - app.services.ai_parser - INFO - 
2025-12-29 22:39:12,489 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 22:39:12,490 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:12,492 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 5138d366ae8b4a03952fe3d595e0bfc7.pdf ‚Üí 69530310c68c1555b3dcc854
2025-12-29 22:39:12,492 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 69530310c68c1555b3dcc854
2025-12-29 22:39:12,496 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 69530310c68c1555b3dcc855 (464206 bytes)
2025-12-29 22:39:12,496 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 69530310c68c1555b3dcc855
2025-12-29 22:39:12,496 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 22:39:22,348 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:22,353 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 22:39:22,353 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 22:39:22,354 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 22:39:22,355 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 22:39:22,355 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 22:39:22,356 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 22:39:22,357 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 22:39:22,358 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 22:39:22,358 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 22:39:22,359 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 22:39:22,359 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 22:39:22,360 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 22:39:22,360 - app.services.ai_parser - INFO - üìä Counts: 10 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 22:39:22,360 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 22:39:29,995 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:29,996 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 22:39:35,383 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:39:35,389 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 22:39:35,389 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 22:39:35,390 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 22:39:35,390 - app.services.ai_parser - INFO - 
2025-12-29 22:39:35,390 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:35,390 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:39:35,391 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:35,391 - app.services.ai_parser - INFO - üè¢ Insurer: Chubb Arabia
2025-12-29 22:39:35,391 - app.services.ai_parser - INFO - üë§ Insured: M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 22:39:35,391 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 22:39:35,391 - app.services.ai_parser - INFO - üìä Rate: 0.35‚Ä∞
2025-12-29 22:39:35,392 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 22:39:35,392 - app.services.ai_parser - INFO - üìè Quality: 96.0/100
2025-12-29 22:39:35,392 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 22:39:35,392 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 22:39:35,392 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 22:39:35,393 - app.services.ai_parser - INFO - 
2025-12-29 22:39:35,393 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 22:39:35,393 - app.services.ai_parser - INFO -    ‚úì Benefits: 10
2025-12-29 22:39:35,394 - app.services.ai_parser - INFO -    ‚úì Exclusions: 29
2025-12-29 22:39:35,394 - app.services.ai_parser - INFO -    ‚úì Warranties: 9
2025-12-29 22:39:35,394 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 22:39:35,394 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 22:39:35,394 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 22:39:35,396 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 43e5de38be714435a650b2fad3a65d78.pdf ‚Üí 69530327c68c1555b3dcc856
2025-12-29 22:39:35,397 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 69530327c68c1555b3dcc856
2025-12-29 22:39:35,401 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 69530327c68c1555b3dcc857 (175401 bytes)
2025-12-29 22:39:35,402 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 69530327c68c1555b3dcc857
2025-12-29 22:39:35,402 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 22:39:35,402 - app.api.routes - INFO - 
‚úÖ Successfully extracted 2 quotes
2025-12-29 22:39:35,402 - app.api.routes - INFO - 
======================================================================
2025-12-29 22:39:35,403 - app.api.routes - INFO - üîÄ Generating comparison for 2 quotes
2025-12-29 22:39:35,403 - app.api.routes - INFO - ======================================================================
2025-12-29 22:39:35,403 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 2 quotes
2025-12-29 22:39:35,403 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 22:39:35,404 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 22:39:35,404 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 22:39:35,404 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 22:39:35,404 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 22:39:35,405 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 22:39:35,405 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 22:39:35,405 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 22:39:35,405 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 22:39:35,406 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 22:39:35,406 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 22:39:35,406 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 22:39:35,406 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 22:39:35,407 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 22:39:35,407 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 22:39:35,407 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 22:39:35,407 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 22:39:35,408 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.0,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "care_custody_control": "SR 2,500,000 any one occurrence & in aggregate",
    "srcc_malicious_damage": "Limited to 25% of the location sum insured",
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and 
2025-12-29 22:39:35,411 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 22:39:35,412 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 22:39:35,412 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 22:39:35,412 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 22:39:35,413 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 22:39:35,413 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 22:39:35,413 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 22:39:35,413 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 22:39:35,413 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 22:39:35,414 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 22:39:35,414 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 22:39:35,414 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 22:39:35,414 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 22:39:35,414 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 22:39:35,415 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 22:39:35,415 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 22:39:35,415 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 22:39:35,415 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 22:39:35,416 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 22:39:35,416 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 22:39:35,416 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 22:39:35,417 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 22:39:35,417 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 22:39:35,417 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 22:39:35,418 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 22:39:35,418 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Chubb Arabia
2025-12-29 22:39:35,418 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 22:39:35,419 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 22:39:35,419 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 22:39:35,419 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 22:39:35,420 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 22:39:35,420 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 22:39:35,421 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 22:39:35,421 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 22:39:35,421 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 22:39:35,422 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 22:39:35,422 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "CHUBB",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "
2025-12-29 22:39:35,424 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 22:39:35,425 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 22:39:35,425 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 22:39:35,425 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 22:39:35,426 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 22:39:35,426 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 22:39:35,426 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 22:39:35,426 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 22:39:35,427 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 22:39:35,427 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 22:39:35,428 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 22:39:35,429 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 22:39:35,429 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 22:39:35,429 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 22:39:35,429 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 22:39:35,430 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 22:39:35,430 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 22:39:35,431 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 22:39:35,431 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Chubb Arabia
2025-12-29 22:39:35,431 - app.services.ai_ranker - INFO - 
üìä Chubb Arabia:
2025-12-29 22:39:35,431 - app.services.ai_ranker - INFO -    Warranties: 9
2025-12-29 22:39:35,432 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 22:39:35,432 - app.services.ai_ranker - INFO -    Exclusions: 29
2025-12-29 22:39:35,433 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 22:39:35,433 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 22:39:35,581 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 22:39:35,581 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 22:39:35,582 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 22:39:35,582 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 22:39:35,582 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 22:39:35,582 - app.services.ai_ranker - INFO -       ‚Ä¢ (W16) Bookkeeping warrantee
2025-12-29 22:39:35,583 - app.services.ai_ranker - INFO -       ‚Ä¢ (W22) Hazardous good warranty
2025-12-29 22:39:35,583 - app.services.ai_ranker - INFO -       ‚Ä¢ (W28) warranted no workshop operations on insured premises
2025-12-29 22:39:35,583 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Chubb Arabia
2025-12-29 22:39:35,735 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 3
2025-12-29 22:39:35,735 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 2
2025-12-29 22:39:35,736 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 22:39:35,736 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 22:39:35,736 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 22:39:35,736 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted strict adherence to safety measures
2025-12-29 22:39:35,737 - app.services.ai_ranker - INFO -       ‚Ä¢ Premium Payment Warranty 100% at inception
2025-12-29 22:39:35,737 - app.services.ai_ranker - INFO -       ‚Ä¢ Civil Defense Certificate clause
2025-12-29 22:39:35,737 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 22:39:35,738 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 22:39:35,738 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 22:39:35,738 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=70.23
2025-12-29 22:39:35,739 - app.services.ai_ranker - INFO - üìä Chubb Arabia: Hakim Score=80.0 (Baseline), Weighted Score=76.50
2025-12-29 22:39:35,739 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 22:39:35,739 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 22:39:35,739 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 22:40:11,062 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:40:11,305 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 22:40:11,305 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 22:40:14,808 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 22:40:15,048 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Chubb Arabia: Chubb Arabia stands out as the best insurance provider with a score of 76.5/100, offering a competit...
2025-12-29 22:40:15,049 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 22:40:15,050 - app.api.routes - INFO - üè¢ Main user - using user_id as company_id for sub-user access: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,050 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 22:40:15,051 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:15,051 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-29 22:40:15,051 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 22:40:15,051 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 2
2025-12-29 22:40:15,052 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 22:40:15,052 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 22:40:15,052 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 22:40:15,052 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 22:40:15,053 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 22:40:15,053 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 22:40:15,053 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 22:40:15,053 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Chubb Arabia
2025-12-29 22:40:15,053 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 22:40:15,054 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 22:40:15,054 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 22:40:15,054 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 22:40:15,054 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 22:40:15,054 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 22:40:15,056 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 22:40:15,056 - app.services.mongodb_service_enhanced - INFO -    Summary: 2,964 bytes
2025-12-29 22:40:15,056 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 23,128 bytes
2025-12-29 22:40:15,057 - app.services.mongodb_service_enhanced - INFO -    Data table: 10,917 bytes
2025-12-29 22:40:15,057 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,407 bytes
2025-12-29 22:40:15,057 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 28,660 bytes
2025-12-29 22:40:15,057 - app.services.mongodb_service_enhanced - INFO -    Total document: 140,916 bytes
2025-12-29 22:40:15,058 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 22:40:15,058 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-29 22:40:15,058 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-29 22:40:15,058 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-29 22:40:15,059 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-29 22:40:15,059 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-29 22:40:15,059 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-29 22:40:15,059 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-29 22:40:15,059 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-29 22:40:15,060 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-29 22:40:15,060 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-29 22:40:15,060 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-29 22:40:15,060 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-29 22:40:15,060 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-29 22:40:15,061 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-29 22:40:15,061 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 22:40:15,061 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-29 22:40:15,061 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 22:40:15,062 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 22:40:15,063 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 22:40:15,070 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:15,070 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6953034f5a37704a1c0a83f8
2025-12-29 22:40:15,073 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 22:40:15,073 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 22:40:15,074 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 22:40:15,074 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 22:40:15,074 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 22:40:15,075 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 22:40:15,075 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 22:40:15,075 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-29 22:40:15,075 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 22:40:15,075 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-29 22:40:15,076 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 22:40:15,076 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-29 22:40:15,076 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 22:40:15,077 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 22:40:15,078 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 22:40:15,079 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 22:40:15,079 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 22:40:15,079 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 22:40:15,079 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 22:40:15,080 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6953034f5a37704a1c0a83f8
2025-12-29 22:40:15,080 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 22:40:15,081 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 22:40:15,081 - app.api.routes - INFO -    Comparison ID: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:15,081 - app.api.routes - INFO -    User ID: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,081 - app.api.routes - INFO -    Company ID: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,084 - app.services.user_subscription_service - INFO - ‚úÖ Unlimited plan - no usage tracking needed for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,085 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,085 - app.api.routes - INFO - 
======================================================================
2025-12-29 22:40:15,086 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 22:40:15,087 - app.api.routes - INFO - ======================================================================
2025-12-29 22:40:15,087 - app.api.routes - INFO - üìä Comparison ID: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:15,087 - app.api.routes - INFO - üë§ User ID: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,088 - app.api.routes - INFO - üìÑ Files Processed: 2/2
2025-12-29 22:40:15,088 - app.api.routes - INFO - üíæ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-29 22:40:15,088 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,088 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 22:40:15,089 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 22:40:15,090 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 22:40:15,091 - app.api.routes - INFO - üìä Remaining comparisons: -1
2025-12-29 22:40:15,092 - app.api.routes - INFO - ======================================================================

2025-12-29 22:40:15,092 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_53cf24a84477 ‚Üí comparison_id: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:15,095 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,097 - main - INFO - üì§ POST /api/compare-quotes - 200 - 98.10s
2025-12-29 22:40:15,344 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:40:15,346 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,347 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:40:15,353 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:40:15,354 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,361 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:40:15,368 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:40:15,370 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,376 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:40:15,386 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:40:15,387 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,397 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:40:15,404 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:40:15,406 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,409 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:40:15,420 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:40:15,420 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,433 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:40:15,438 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:40:15,439 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:40:15,442 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:40:15,458 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:40:15,458 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:40:15,466 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:40:22,043 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:40:22,043 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.00s
2025-12-29 22:40:22,046 - main - INFO - üì• GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:40:22,046 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767047917_c66baf45d7e7, type: both
2025-12-29 22:40:22,048 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:22,049 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:40:22,049 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 22:40:22,050 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:40:22,050 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 22:40:22,053 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 22:40:22,249 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:22,250 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:22,250 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:40:22,250 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 22:40:22,251 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:40:22,252 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 22:40:22,270 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 22:40:22,271 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 22:40:22,272 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 22:40:22,397 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:40:22,398 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767047917_c66baf45d7e7_20251229_224022.pdf (129260 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767047917_c66baf45d7e7_20251229_224022.pdf (139935 bytes)
2025-12-29 22:40:22,401 - main - INFO - üì§ GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.36s
2025-12-29 22:40:45,884 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:40:45,885 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:40:45,886 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:40:45,891 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:40:45,892 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:40:45,908 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:41:16,198 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:41:16,200 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:41:16,203 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:41:16,210 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:41:16,211 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:41:16,222 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:41:45,879 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:41:45,880 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:41:45,881 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:41:45,885 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:41:45,886 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:41:45,891 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:42:16,189 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:42:16,190 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:42:16,191 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:42:16,195 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:42:16,195 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:42:16,199 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:42:45,891 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:42:45,892 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:42:45,895 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:42:45,908 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:42:45,908 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:42:45,917 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:43:16,186 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:43:16,187 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:43:16,188 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:43:16,193 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:43:16,193 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:43:16,198 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:43:45,887 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:43:45,888 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:43:45,889 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:43:45,897 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:43:45,898 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:43:45,903 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:44:27,200 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:44:27,201 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:44:27,203 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:44:27,207 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:44:27,208 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:44:27,213 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:44:51,461 - main - INFO - 
2025-12-29 22:44:51,463 - main - INFO - ================================================================================
2025-12-29 22:44:51,464 - main - INFO -   üõë Shutting down application...
2025-12-29 22:44:51,466 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:44:51,467 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:44:51,470 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:44:51,471 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:44:51,472 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:44:51,473 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:44:51,474 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:44:51,474 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:44:51,476 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:44:51,476 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:44:51,480 - main - INFO -   ‚úÖ Cleaned up 7 temporary files
2025-12-29 22:44:51,481 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:44:51,482 - main - INFO - ================================================================================
2025-12-29 22:44:51,482 - main - INFO - 
2025-12-29 22:44:55,131 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:44:55,162 - main - INFO - 
2025-12-29 22:44:55,162 - main - INFO - ================================================================================
2025-12-29 22:44:55,162 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:44:55,163 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:44:55,163 - main - INFO - ================================================================================
2025-12-29 22:44:55,163 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:44:55,163 - main - INFO -   Upload Directory: uploads
2025-12-29 22:44:55,163 - main - INFO -   Max File Size: 20MB
2025-12-29 22:44:55,164 - main - INFO - ================================================================================
2025-12-29 22:44:55,164 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:44:55,164 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:44:55,165 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:44:55,210 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:44:55,219 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:44:55,219 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:44:55,220 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:44:55,220 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:44:55,220 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:44:55,234 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:44:55,235 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:44:55,237 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:44:55,239 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:44:55,239 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:44:55,240 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:44:55,240 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:44:55,240 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:44:55,251 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:44:55,251 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:44:55,251 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:44:55,260 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:44:55,268 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:44:55,268 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:44:55,268 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:44:55,276 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:44:55,286 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:44:55,287 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:44:55,287 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:44:55,287 - main - INFO - 
2025-12-29 22:44:55,288 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:44:55,288 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:44:55,288 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:44:55,289 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:44:55,289 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:44:55,289 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:44:55,289 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:44:55,289 - main - INFO - 
2025-12-29 22:44:55,290 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:44:55,290 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:44:55,290 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:44:55,290 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:44:55,290 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:44:55,291 - main - INFO - 
2025-12-29 22:44:55,291 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:44:55,291 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:44:55,291 - main - INFO -        - No manual section generation
2025-12-29 22:44:55,291 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:44:55,292 - main - INFO - 
2025-12-29 22:44:55,292 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:44:55,292 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:44:55,292 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:44:55,293 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:44:55,293 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:44:55,293 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:44:55,294 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:44:55,294 - main - INFO - 
2025-12-29 22:44:55,294 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:44:55,294 - main - INFO -      Main:
2025-12-29 22:44:55,295 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:44:55,295 - main - INFO - 
2025-12-29 22:44:55,296 - main - INFO -      Retrieval:
2025-12-29 22:44:55,297 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:44:55,299 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:44:55,300 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:44:55,301 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:44:55,301 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:44:55,301 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:44:55,302 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:44:55,302 - main - INFO - 
2025-12-29 22:44:55,302 - main - INFO -      Management:
2025-12-29 22:44:55,302 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:44:55,303 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:44:55,303 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:44:55,303 - main - INFO - 
2025-12-29 22:44:55,303 - main - INFO -      Documents (MongoDB):
2025-12-29 22:44:55,304 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:44:55,304 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:44:55,304 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:44:55,304 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:44:55,305 - main - INFO - 
2025-12-29 22:44:55,305 - main - INFO -      Diagnostics & Health:
2025-12-29 22:44:55,305 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:44:55,305 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:44:55,306 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:44:55,306 - main - INFO - 
2025-12-29 22:44:55,306 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:44:55,306 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:44:55,306 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:44:55,307 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:44:55,307 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:44:55,307 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:44:55,307 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:44:55,307 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:44:55,308 - main - INFO - 
2025-12-29 22:44:55,308 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:44:55,308 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:44:55,308 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:44:55,308 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:44:55,308 - main - INFO -      4. No re-upload needed!
2025-12-29 22:44:55,309 - main - INFO - 
2025-12-29 22:44:55,309 - main - INFO - ================================================================================
2025-12-29 22:44:55,309 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:44:55,309 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:44:55,309 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:44:55,310 - main - INFO - ================================================================================
2025-12-29 22:44:55,310 - main - INFO - 
2025-12-29 22:44:55,310 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:45:11,895 - main - INFO - 
2025-12-29 22:45:11,896 - main - INFO - ================================================================================
2025-12-29 22:45:11,897 - main - INFO -   üõë Shutting down application...
2025-12-29 22:45:11,899 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:45:11,899 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:45:11,900 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:45:11,900 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:45:11,901 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:45:11,902 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:45:11,902 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:45:11,903 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:45:11,904 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:45:11,904 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:45:11,904 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 22:45:11,905 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:45:11,905 - main - INFO - ================================================================================
2025-12-29 22:45:11,905 - main - INFO - 
2025-12-29 22:45:15,217 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:45:15,236 - main - INFO - 
2025-12-29 22:45:15,237 - main - INFO - ================================================================================
2025-12-29 22:45:15,237 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:45:15,238 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:45:15,238 - main - INFO - ================================================================================
2025-12-29 22:45:15,238 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:45:15,238 - main - INFO -   Upload Directory: uploads
2025-12-29 22:45:15,239 - main - INFO -   Max File Size: 20MB
2025-12-29 22:45:15,239 - main - INFO - ================================================================================
2025-12-29 22:45:15,239 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:45:15,240 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:45:15,240 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:45:15,264 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:45:15,273 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:45:15,273 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:45:15,273 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:45:15,273 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:45:15,274 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:45:15,304 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:45:15,305 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:45:15,306 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:45:15,307 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:45:15,308 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:45:15,308 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:45:15,308 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:45:15,308 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:45:15,318 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:45:15,319 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:45:15,319 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:45:15,351 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:45:15,353 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:45:15,354 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:45:15,354 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:45:15,399 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:45:15,403 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:45:15,404 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:45:15,404 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:45:15,404 - main - INFO - 
2025-12-29 22:45:15,404 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:45:15,405 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:45:15,405 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:45:15,405 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:45:15,405 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:45:15,405 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:45:15,406 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:45:15,406 - main - INFO - 
2025-12-29 22:45:15,406 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:45:15,406 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:45:15,406 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:45:15,407 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:45:15,407 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:45:15,407 - main - INFO - 
2025-12-29 22:45:15,407 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:45:15,407 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:45:15,407 - main - INFO -        - No manual section generation
2025-12-29 22:45:15,408 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:45:15,408 - main - INFO - 
2025-12-29 22:45:15,408 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:45:15,408 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:45:15,408 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:45:15,408 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:45:15,409 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:45:15,409 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:45:15,409 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:45:15,409 - main - INFO - 
2025-12-29 22:45:15,409 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:45:15,410 - main - INFO -      Main:
2025-12-29 22:45:15,410 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:45:15,411 - main - INFO - 
2025-12-29 22:45:15,412 - main - INFO -      Retrieval:
2025-12-29 22:45:15,412 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:45:15,413 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:45:15,413 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:45:15,413 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:45:15,413 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:45:15,414 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:45:15,414 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:45:15,415 - main - INFO - 
2025-12-29 22:45:15,415 - main - INFO -      Management:
2025-12-29 22:45:15,416 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:45:15,416 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:45:15,416 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:45:15,416 - main - INFO - 
2025-12-29 22:45:15,417 - main - INFO -      Documents (MongoDB):
2025-12-29 22:45:15,417 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:45:15,417 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:45:15,417 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:45:15,417 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:45:15,418 - main - INFO - 
2025-12-29 22:45:15,418 - main - INFO -      Diagnostics & Health:
2025-12-29 22:45:15,418 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:45:15,418 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:45:15,418 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:45:15,419 - main - INFO - 
2025-12-29 22:45:15,419 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:45:15,419 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:45:15,419 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:45:15,419 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:45:15,420 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:45:15,420 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:45:15,420 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:45:15,420 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:45:15,420 - main - INFO - 
2025-12-29 22:45:15,420 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:45:15,421 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:45:15,421 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:45:15,421 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:45:15,421 - main - INFO -      4. No re-upload needed!
2025-12-29 22:45:15,421 - main - INFO - 
2025-12-29 22:45:15,421 - main - INFO - ================================================================================
2025-12-29 22:45:15,422 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:45:15,422 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:45:15,422 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:45:15,422 - main - INFO - ================================================================================
2025-12-29 22:45:15,422 - main - INFO - 
2025-12-29 22:45:15,422 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:45:24,211 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:45:24,212 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:45:24,213 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:45:24,219 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:45:24,219 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:45:24,224 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:45:25,354 - main - INFO - üì• GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:45:25,355 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767047917_c66baf45d7e7, type: both
2025-12-29 22:45:25,357 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:45:25,358 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:45:25,358 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 22:45:25,359 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:45:25,359 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 22:45:25,363 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 22:45:25,491 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:45:25,492 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:45:25,492 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:45:25,492 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 22:45:25,493 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:45:25,494 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 22:45:25,501 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 22:45:25,502 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 22:45:25,503 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 22:45:25,626 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:45:25,627 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767047917_c66baf45d7e7_20251229_224525.pdf (129236 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767047917_c66baf45d7e7_20251229_224525.pdf (139945 bytes)
2025-12-29 22:45:25,630 - main - INFO - üì§ GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.28s
2025-12-29 22:45:45,882 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:45:45,883 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:45:45,884 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:45:45,892 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:45:45,892 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:45:45,898 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:46:16,183 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:46:16,184 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:46:16,185 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:46:16,190 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:46:16,190 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:46:16,200 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:47:17,192 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:47:17,193 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:47:17,195 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:47:17,203 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:47:17,203 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:47:17,208 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:47:26,982 - main - INFO - 
2025-12-29 22:47:26,982 - main - INFO - ================================================================================
2025-12-29 22:47:26,983 - main - INFO -   üõë Shutting down application...
2025-12-29 22:47:26,985 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:47:26,985 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:47:26,986 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:47:26,987 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:47:26,989 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:47:26,989 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:47:26,991 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:47:26,992 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:47:26,993 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:47:26,994 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:47:26,995 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 22:47:26,995 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:47:26,995 - main - INFO - ================================================================================
2025-12-29 22:47:26,996 - main - INFO - 
2025-12-29 22:47:30,887 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:47:30,908 - main - INFO - 
2025-12-29 22:47:30,908 - main - INFO - ================================================================================
2025-12-29 22:47:30,908 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:47:30,908 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:47:30,908 - main - INFO - ================================================================================
2025-12-29 22:47:30,909 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:47:30,909 - main - INFO -   Upload Directory: uploads
2025-12-29 22:47:30,909 - main - INFO -   Max File Size: 20MB
2025-12-29 22:47:30,909 - main - INFO - ================================================================================
2025-12-29 22:47:30,911 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:47:30,913 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:47:30,914 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:47:30,965 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:47:30,971 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:47:30,971 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:47:30,971 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:47:30,972 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:47:30,972 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:47:30,987 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:47:30,988 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:47:30,990 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:47:30,992 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:47:30,992 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:47:30,993 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:47:30,995 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:47:30,996 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:47:31,023 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:47:31,023 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:47:31,024 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:47:31,055 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:47:31,057 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:47:31,058 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:47:31,058 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:47:31,084 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:47:31,088 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:47:31,088 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:47:31,088 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:47:31,089 - main - INFO - 
2025-12-29 22:47:31,089 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:47:31,089 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:47:31,089 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:47:31,090 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:47:31,090 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:47:31,090 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:47:31,090 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:47:31,091 - main - INFO - 
2025-12-29 22:47:31,091 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:47:31,091 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:47:31,091 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:47:31,091 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:47:31,092 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:47:31,092 - main - INFO - 
2025-12-29 22:47:31,092 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:47:31,092 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:47:31,092 - main - INFO -        - No manual section generation
2025-12-29 22:47:31,093 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:47:31,093 - main - INFO - 
2025-12-29 22:47:31,094 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:47:31,095 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:47:31,096 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:47:31,096 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:47:31,097 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:47:31,097 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:47:31,098 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:47:31,098 - main - INFO - 
2025-12-29 22:47:31,098 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:47:31,099 - main - INFO -      Main:
2025-12-29 22:47:31,099 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:47:31,099 - main - INFO - 
2025-12-29 22:47:31,099 - main - INFO -      Retrieval:
2025-12-29 22:47:31,099 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:47:31,100 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:47:31,100 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:47:31,100 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:47:31,100 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:47:31,100 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:47:31,100 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:47:31,101 - main - INFO - 
2025-12-29 22:47:31,101 - main - INFO -      Management:
2025-12-29 22:47:31,101 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:47:31,101 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:47:31,101 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:47:31,102 - main - INFO - 
2025-12-29 22:47:31,102 - main - INFO -      Documents (MongoDB):
2025-12-29 22:47:31,102 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:47:31,102 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:47:31,102 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:47:31,102 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:47:31,103 - main - INFO - 
2025-12-29 22:47:31,103 - main - INFO -      Diagnostics & Health:
2025-12-29 22:47:31,103 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:47:31,103 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:47:31,103 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:47:31,103 - main - INFO - 
2025-12-29 22:47:31,103 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:47:31,104 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:47:31,105 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:47:31,105 - main - INFO - 
2025-12-29 22:47:31,105 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:47:31,105 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:47:31,105 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:47:31,105 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:47:31,106 - main - INFO -      4. No re-upload needed!
2025-12-29 22:47:31,106 - main - INFO - 
2025-12-29 22:47:31,106 - main - INFO - ================================================================================
2025-12-29 22:47:31,106 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:47:31,106 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:47:31,107 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:47:31,107 - main - INFO - ================================================================================
2025-12-29 22:47:31,107 - main - INFO - 
2025-12-29 22:47:31,107 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:47:36,857 - main - INFO - 
2025-12-29 22:47:36,858 - main - INFO - ================================================================================
2025-12-29 22:47:36,858 - main - INFO -   üõë Shutting down application...
2025-12-29 22:47:36,859 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:47:36,860 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:47:36,862 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:47:36,863 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:47:36,864 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:47:36,865 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:47:36,866 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:47:36,867 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:47:36,868 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:47:36,868 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:47:36,869 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 22:47:36,869 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:47:36,870 - main - INFO - ================================================================================
2025-12-29 22:47:36,870 - main - INFO - 
2025-12-29 22:47:40,362 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:47:40,385 - main - INFO - 
2025-12-29 22:47:40,385 - main - INFO - ================================================================================
2025-12-29 22:47:40,385 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:47:40,385 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:47:40,386 - main - INFO - ================================================================================
2025-12-29 22:47:40,386 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:47:40,386 - main - INFO -   Upload Directory: uploads
2025-12-29 22:47:40,386 - main - INFO -   Max File Size: 20MB
2025-12-29 22:47:40,386 - main - INFO - ================================================================================
2025-12-29 22:47:40,387 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:47:40,387 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:47:40,387 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:47:40,409 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:47:40,419 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:47:40,419 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:47:40,419 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:47:40,420 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:47:40,420 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:47:40,465 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:47:40,466 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:47:40,468 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:47:40,469 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:47:40,470 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:47:40,470 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:47:40,470 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:47:40,470 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:47:40,499 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:47:40,500 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:47:40,500 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:47:40,542 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:47:40,550 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:47:40,550 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:47:40,550 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:47:40,575 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:47:40,584 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:47:40,584 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:47:40,584 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:47:40,585 - main - INFO - 
2025-12-29 22:47:40,585 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:47:40,585 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:47:40,586 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:47:40,586 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:47:40,586 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:47:40,586 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:47:40,587 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:47:40,587 - main - INFO - 
2025-12-29 22:47:40,587 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:47:40,587 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:47:40,588 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:47:40,588 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:47:40,589 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:47:40,589 - main - INFO - 
2025-12-29 22:47:40,589 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:47:40,589 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:47:40,590 - main - INFO -        - No manual section generation
2025-12-29 22:47:40,590 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:47:40,590 - main - INFO - 
2025-12-29 22:47:40,590 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:47:40,591 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:47:40,591 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:47:40,591 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:47:40,591 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:47:40,592 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:47:40,592 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:47:40,592 - main - INFO - 
2025-12-29 22:47:40,593 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:47:40,593 - main - INFO -      Main:
2025-12-29 22:47:40,594 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:47:40,595 - main - INFO - 
2025-12-29 22:47:40,596 - main - INFO -      Retrieval:
2025-12-29 22:47:40,597 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:47:40,598 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:47:40,599 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:47:40,599 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:47:40,599 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:47:40,599 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:47:40,600 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:47:40,600 - main - INFO - 
2025-12-29 22:47:40,600 - main - INFO -      Management:
2025-12-29 22:47:40,600 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:47:40,600 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:47:40,601 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:47:40,601 - main - INFO - 
2025-12-29 22:47:40,601 - main - INFO -      Documents (MongoDB):
2025-12-29 22:47:40,601 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:47:40,601 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:47:40,602 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:47:40,602 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:47:40,602 - main - INFO - 
2025-12-29 22:47:40,602 - main - INFO -      Diagnostics & Health:
2025-12-29 22:47:40,603 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:47:40,603 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:47:40,603 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:47:40,603 - main - INFO - 
2025-12-29 22:47:40,604 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:47:40,604 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:47:40,604 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:47:40,604 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:47:40,605 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:47:40,605 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:47:40,605 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:47:40,605 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:47:40,605 - main - INFO - 
2025-12-29 22:47:40,606 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:47:40,606 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:47:40,606 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:47:40,606 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:47:40,606 - main - INFO -      4. No re-upload needed!
2025-12-29 22:47:40,607 - main - INFO - 
2025-12-29 22:47:40,607 - main - INFO - ================================================================================
2025-12-29 22:47:40,607 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:47:40,607 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:47:40,607 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:47:40,608 - main - INFO - ================================================================================
2025-12-29 22:47:40,608 - main - INFO - 
2025-12-29 22:47:40,608 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:48:00,749 - main - INFO - 
2025-12-29 22:48:00,749 - main - INFO - ================================================================================
2025-12-29 22:48:00,750 - main - INFO -   üõë Shutting down application...
2025-12-29 22:48:00,751 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:48:00,752 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:48:00,758 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:48:00,759 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:48:00,760 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:48:00,761 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:48:00,762 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:48:00,762 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:48:00,764 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:48:00,765 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:48:00,765 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 22:48:00,766 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:48:00,766 - main - INFO - ================================================================================
2025-12-29 22:48:00,766 - main - INFO - 
2025-12-29 22:48:03,993 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:48:04,019 - main - INFO - 
2025-12-29 22:48:04,019 - main - INFO - ================================================================================
2025-12-29 22:48:04,019 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:48:04,020 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:48:04,020 - main - INFO - ================================================================================
2025-12-29 22:48:04,020 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:48:04,020 - main - INFO -   Upload Directory: uploads
2025-12-29 22:48:04,021 - main - INFO -   Max File Size: 20MB
2025-12-29 22:48:04,021 - main - INFO - ================================================================================
2025-12-29 22:48:04,021 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:48:04,022 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:48:04,022 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:48:04,048 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:48:04,055 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:48:04,055 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:48:04,055 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:48:04,056 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:48:04,056 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:48:04,065 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:48:04,067 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:48:04,068 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:48:04,071 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:48:04,071 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:48:04,071 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:48:04,072 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:48:04,072 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:48:04,096 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:48:04,096 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:48:04,097 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:48:04,124 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:48:04,127 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:48:04,128 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:48:04,129 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:48:04,169 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:48:04,172 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:48:04,173 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:48:04,173 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:48:04,173 - main - INFO - 
2025-12-29 22:48:04,173 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:48:04,174 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:48:04,174 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:48:04,174 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:48:04,174 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:48:04,174 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:48:04,175 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:48:04,175 - main - INFO - 
2025-12-29 22:48:04,175 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:48:04,175 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:48:04,175 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:48:04,175 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:48:04,176 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:48:04,176 - main - INFO - 
2025-12-29 22:48:04,176 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:48:04,177 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:48:04,177 - main - INFO -        - No manual section generation
2025-12-29 22:48:04,177 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:48:04,178 - main - INFO - 
2025-12-29 22:48:04,178 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:48:04,178 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:48:04,179 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:48:04,179 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:48:04,179 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:48:04,179 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:48:04,179 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:48:04,179 - main - INFO - 
2025-12-29 22:48:04,180 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:48:04,180 - main - INFO -      Main:
2025-12-29 22:48:04,180 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:48:04,180 - main - INFO - 
2025-12-29 22:48:04,180 - main - INFO -      Retrieval:
2025-12-29 22:48:04,180 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:48:04,180 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:48:04,181 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:48:04,181 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:48:04,181 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:48:04,181 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:48:04,181 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:48:04,182 - main - INFO - 
2025-12-29 22:48:04,182 - main - INFO -      Management:
2025-12-29 22:48:04,182 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:48:04,182 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:48:04,183 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:48:04,183 - main - INFO - 
2025-12-29 22:48:04,183 - main - INFO -      Documents (MongoDB):
2025-12-29 22:48:04,183 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:48:04,183 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:48:04,183 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:48:04,184 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:48:04,184 - main - INFO - 
2025-12-29 22:48:04,184 - main - INFO -      Diagnostics & Health:
2025-12-29 22:48:04,184 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:48:04,184 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:48:04,184 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:48:04,184 - main - INFO - 
2025-12-29 22:48:04,185 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:48:04,185 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:48:04,185 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:48:04,186 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:48:04,186 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:48:04,186 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:48:04,186 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:48:04,186 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:48:04,186 - main - INFO - 
2025-12-29 22:48:04,187 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:48:04,187 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:48:04,187 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:48:04,187 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:48:04,187 - main - INFO -      4. No re-upload needed!
2025-12-29 22:48:04,187 - main - INFO - 
2025-12-29 22:48:04,188 - main - INFO - ================================================================================
2025-12-29 22:48:04,188 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:48:04,188 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:48:04,188 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:48:04,188 - main - INFO - ================================================================================
2025-12-29 22:48:04,188 - main - INFO - 
2025-12-29 22:48:04,189 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:48:18,217 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:48:18,218 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:48:18,221 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:48:18,234 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:48:18,234 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:48:18,242 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:48:54,447 - main - INFO - 
2025-12-29 22:48:54,448 - main - INFO - ================================================================================
2025-12-29 22:48:54,448 - main - INFO -   üõë Shutting down application...
2025-12-29 22:48:54,449 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 22:48:54,449 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 22:48:54,450 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 22:48:54,450 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 22:48:54,451 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 22:48:54,451 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 22:48:54,451 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 22:48:54,452 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 22:48:54,452 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 22:48:54,453 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 22:48:54,453 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 22:48:54,453 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 22:48:54,453 - main - INFO - ================================================================================
2025-12-29 22:48:54,454 - main - INFO - 
2025-12-29 22:48:57,946 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 22:48:57,979 - main - INFO - 
2025-12-29 22:48:57,979 - main - INFO - ================================================================================
2025-12-29 22:48:57,980 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 22:48:57,980 - main - INFO -   Production-Ready Complete Integration
2025-12-29 22:48:57,980 - main - INFO - ================================================================================
2025-12-29 22:48:57,980 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 22:48:57,980 - main - INFO -   Upload Directory: uploads
2025-12-29 22:48:57,981 - main - INFO -   Max File Size: 20MB
2025-12-29 22:48:57,981 - main - INFO - ================================================================================
2025-12-29 22:48:57,981 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 22:48:57,982 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 22:48:57,982 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 22:48:58,007 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 22:48:58,016 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 22:48:58,016 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 22:48:58,017 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 22:48:58,017 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 22:48:58,017 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 22:48:58,029 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 22:48:58,031 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 22:48:58,032 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 22:48:58,036 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 22:48:58,037 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 22:48:58,038 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 22:48:58,038 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 22:48:58,038 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 22:48:58,048 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 22:48:58,048 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 22:48:58,048 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 22:48:58,061 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 22:48:58,065 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 22:48:58,065 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 22:48:58,065 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 22:48:58,078 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 22:48:58,082 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 22:48:58,082 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 22:48:58,082 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 22:48:58,083 - main - INFO - 
2025-12-29 22:48:58,083 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 22:48:58,084 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 22:48:58,084 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 22:48:58,084 - main - INFO -        - Separates warranties from extensions
2025-12-29 22:48:58,085 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 22:48:58,085 - main - INFO -        - Correct deductible tier detection
2025-12-29 22:48:58,085 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 22:48:58,086 - main - INFO - 
2025-12-29 22:48:58,086 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 22:48:58,086 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 22:48:58,086 - main - INFO -        - Identifies unique items per provider
2025-12-29 22:48:58,086 - main - INFO -        - Transparent scoring methodology
2025-12-29 22:48:58,087 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 22:48:58,087 - main - INFO - 
2025-12-29 22:48:58,087 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 22:48:58,088 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 22:48:58,089 - main - INFO -        - No manual section generation
2025-12-29 22:48:58,089 - main - INFO -        - Complete MongoDB integration
2025-12-29 22:48:58,090 - main - INFO - 
2025-12-29 22:48:58,090 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 22:48:58,091 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 22:48:58,092 - main - INFO - 
2025-12-29 22:48:58,092 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 22:48:58,092 - main - INFO -      Main:
2025-12-29 22:48:58,092 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 22:48:58,092 - main - INFO - 
2025-12-29 22:48:58,093 - main - INFO -      Retrieval:
2025-12-29 22:48:58,093 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 22:48:58,093 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 22:48:58,093 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 22:48:58,093 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 22:48:58,094 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 22:48:58,094 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 22:48:58,094 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 22:48:58,095 - main - INFO - 
2025-12-29 22:48:58,095 - main - INFO -      Management:
2025-12-29 22:48:58,096 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 22:48:58,096 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 22:48:58,096 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 22:48:58,096 - main - INFO - 
2025-12-29 22:48:58,097 - main - INFO -      Documents (MongoDB):
2025-12-29 22:48:58,097 - main - INFO -        GET  /api/documents                All documents
2025-12-29 22:48:58,097 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 22:48:58,097 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 22:48:58,097 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 22:48:58,097 - main - INFO - 
2025-12-29 22:48:58,098 - main - INFO -      Diagnostics & Health:
2025-12-29 22:48:58,098 - main - INFO -        GET  /api/health                   System health
2025-12-29 22:48:58,098 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 22:48:58,098 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 22:48:58,098 - main - INFO - 
2025-12-29 22:48:58,098 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 22:48:58,099 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 22:48:58,099 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 22:48:58,099 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 22:48:58,099 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 22:48:58,099 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 22:48:58,100 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 22:48:58,100 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 22:48:58,100 - main - INFO - 
2025-12-29 22:48:58,100 - main - INFO -   üéØ WORKFLOW:
2025-12-29 22:48:58,100 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 22:48:58,101 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 22:48:58,101 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 22:48:58,101 - main - INFO -      4. No re-upload needed!
2025-12-29 22:48:58,101 - main - INFO - 
2025-12-29 22:48:58,101 - main - INFO - ================================================================================
2025-12-29 22:48:58,102 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 22:48:58,102 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 22:48:58,102 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 22:48:58,102 - main - INFO - ================================================================================
2025-12-29 22:48:58,103 - main - INFO - 
2025-12-29 22:48:58,103 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 22:49:01,277 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:49:01,278 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 22:49:01,281 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:49:01,282 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:49:01,283 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:49:01,289 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:49:01,289 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:49:01,295 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:49:02,002 - main - INFO - üì• GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:49:02,003 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767047917_c66baf45d7e7, type: both
2025-12-29 22:49:02,006 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:49:02,006 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:49:02,006 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 22:49:02,007 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:49:02,007 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 22:49:02,011 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 22:49:02,197 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:49:02,197 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:49:02,198 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:49:02,198 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 22:49:02,198 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:49:02,199 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 22:49:02,207 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 22:49:02,207 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 22:49:02,208 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 22:49:02,335 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:49:02,336 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767047917_c66baf45d7e7_20251229_224902.pdf (129236 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767047917_c66baf45d7e7_20251229_224902.pdf (139470 bytes)
2025-12-29 22:49:02,339 - main - INFO - üì§ GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.34s
2025-12-29 22:49:15,877 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:49:15,878 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:49:15,880 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:49:15,885 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:49:15,885 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:49:15,890 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:49:46,194 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:49:46,195 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:49:46,196 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:49:46,200 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:49:46,200 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:49:46,205 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:50:15,889 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:50:15,890 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:50:15,893 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:50:15,906 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:50:15,907 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:50:15,918 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:51:17,187 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:51:17,188 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:51:17,189 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:51:17,197 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:51:17,198 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:51:17,203 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:52:18,195 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:52:18,196 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:52:18,197 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:52:18,202 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:52:18,202 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:52:18,207 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:53:19,194 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:53:19,195 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:53:19,196 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:53:19,200 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:53:19,200 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:53:19,205 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:53:25,616 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:53:25,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:53:25,619 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:53:25,632 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:53:25,633 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:53:25,644 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:53:25,666 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:53:25,682 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:53:25,686 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:53:25,702 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:53:25,708 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:53:25,736 - main - INFO - üì§ GET /api/comparisons - 200 - 0.07s
2025-12-29 22:53:27,618 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:53:27,619 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.00s
2025-12-29 22:53:27,621 - main - INFO - üì• GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 22:53:27,622 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767047917_c66baf45d7e7, type: both
2025-12-29 22:53:27,623 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:53:27,623 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:53:27,624 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 22:53:27,625 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:53:27,625 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 22:53:27,627 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 22:53:27,726 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:53:27,727 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767047917_c66baf45d7e7
2025-12-29 22:53:27,728 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 22:53:27,728 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 22:53:27,729 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 22:53:27,729 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 22:53:27,736 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 22:53:27,737 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 22:53:27,737 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 22:53:27,856 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 22:53:27,857 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767047917_c66baf45d7e7_20251229_225327.pdf (129236 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767047917_c66baf45d7e7_20251229_225327.pdf (139470 bytes)
2025-12-29 22:53:27,860 - main - INFO - üì§ GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.24s
2025-12-29 22:53:55,884 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:53:55,887 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:53:55,891 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:53:55,899 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:53:55,899 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:53:55,905 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:54:26,198 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:54:26,200 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:54:26,201 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:54:26,205 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:54:26,205 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:54:26,210 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:54:55,882 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:54:55,883 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:54:55,884 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:54:55,888 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:54:55,888 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:54:55,893 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:55:26,199 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:55:26,199 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:55:26,200 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:55:26,204 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:55:26,205 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:55:26,209 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:55:55,886 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:55:55,888 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:55:55,891 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:55:55,901 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:55:55,901 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:55:55,906 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:56:26,197 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:56:26,198 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:56:26,199 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:56:26,204 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:56:26,204 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:56:26,209 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 22:56:55,890 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:56:55,891 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:56:55,894 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:56:55,903 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:56:55,904 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:56:55,908 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 22:57:27,186 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:57:27,187 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:57:27,190 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:57:27,206 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:57:27,206 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:57:27,218 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:58:26,886 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:58:26,888 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:58:26,890 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:58:26,901 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:58:26,902 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:58:26,923 - main - INFO - üì§ GET /api/comparisons - 200 - 0.04s
2025-12-29 22:58:56,196 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:58:56,200 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:58:56,203 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:58:56,214 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:58:56,217 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:58:56,231 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 22:59:25,882 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 22:59:25,883 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 22:59:25,885 - main - INFO - üì• GET /api/comparisons
2025-12-29 22:59:25,886 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 22:59:25,887 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 22:59:25,891 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 22:59:25,891 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 22:59:25,897 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 23:00:27,196 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:00:27,198 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:00:27,201 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:00:27,214 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:00:27,215 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:00:27,227 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 23:01:26,886 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:01:26,887 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:01:26,889 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:01:26,901 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:01:26,902 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:01:26,908 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:02:22,736 - main - INFO - 
2025-12-29 23:02:22,737 - main - INFO - ================================================================================
2025-12-29 23:02:22,737 - main - INFO -   üõë Shutting down application...
2025-12-29 23:02:22,738 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:22,738 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:02:22,739 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:22,739 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:02:22,740 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:02:22,741 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:02:22,742 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:02:22,743 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:02:22,743 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:02:22,744 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:02:22,744 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:02:22,744 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:02:22,745 - main - INFO - ================================================================================
2025-12-29 23:02:22,745 - main - INFO - 
2025-12-29 23:02:26,615 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:02:26,632 - main - INFO - 
2025-12-29 23:02:26,632 - main - INFO - ================================================================================
2025-12-29 23:02:26,632 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:02:26,633 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:02:26,633 - main - INFO - ================================================================================
2025-12-29 23:02:26,633 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:02:26,633 - main - INFO -   Upload Directory: uploads
2025-12-29 23:02:26,634 - main - INFO -   Max File Size: 20MB
2025-12-29 23:02:26,634 - main - INFO - ================================================================================
2025-12-29 23:02:26,634 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:02:26,635 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:02:26,635 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:26,663 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:02:26,672 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:02:26,673 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:02:26,673 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:02:26,673 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:02:26,674 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:02:26,681 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:02:26,682 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:02:26,683 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:02:26,685 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:02:26,685 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:02:26,686 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:02:26,686 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:26,687 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:02:26,723 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:02:26,723 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:02:26,724 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:02:26,732 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:02:26,735 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:02:26,735 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:02:26,736 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:02:26,743 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:02:26,747 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:02:26,747 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:02:26,748 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:02:26,748 - main - INFO - 
2025-12-29 23:02:26,748 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:02:26,748 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:02:26,749 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:02:26,749 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:02:26,749 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:02:26,749 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:02:26,750 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:02:26,750 - main - INFO - 
2025-12-29 23:02:26,750 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:02:26,750 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:02:26,750 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:02:26,751 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:02:26,751 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:02:26,751 - main - INFO - 
2025-12-29 23:02:26,751 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:02:26,751 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:02:26,752 - main - INFO -        - No manual section generation
2025-12-29 23:02:26,752 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:02:26,752 - main - INFO - 
2025-12-29 23:02:26,752 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:02:26,753 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:02:26,753 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:02:26,753 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:02:26,753 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:02:26,754 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:02:26,754 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:02:26,754 - main - INFO - 
2025-12-29 23:02:26,755 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:02:26,755 - main - INFO -      Main:
2025-12-29 23:02:26,755 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:02:26,755 - main - INFO - 
2025-12-29 23:02:26,755 - main - INFO -      Retrieval:
2025-12-29 23:02:26,756 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:02:26,756 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:02:26,756 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:02:26,756 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:02:26,757 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:02:26,757 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:02:26,757 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:02:26,757 - main - INFO - 
2025-12-29 23:02:26,758 - main - INFO -      Management:
2025-12-29 23:02:26,758 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:02:26,758 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:02:26,758 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:02:26,759 - main - INFO - 
2025-12-29 23:02:26,759 - main - INFO -      Documents (MongoDB):
2025-12-29 23:02:26,759 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:02:26,759 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:02:26,760 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:02:26,760 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:02:26,760 - main - INFO - 
2025-12-29 23:02:26,761 - main - INFO -      Diagnostics & Health:
2025-12-29 23:02:26,761 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:02:26,761 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:02:26,761 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:02:26,762 - main - INFO - 
2025-12-29 23:02:26,762 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:02:26,762 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:02:26,762 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:02:26,762 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:02:26,763 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:02:26,763 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:02:26,763 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:02:26,763 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:02:26,764 - main - INFO - 
2025-12-29 23:02:26,764 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:02:26,764 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:02:26,765 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:02:26,765 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:02:26,765 - main - INFO -      4. No re-upload needed!
2025-12-29 23:02:26,765 - main - INFO - 
2025-12-29 23:02:26,766 - main - INFO - ================================================================================
2025-12-29 23:02:26,766 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:02:26,766 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:02:26,766 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:02:26,766 - main - INFO - ================================================================================
2025-12-29 23:02:26,767 - main - INFO - 
2025-12-29 23:02:26,767 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:02:27,216 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:02:27,217 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:02:27,218 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:02:27,225 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:02:27,225 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:02:27,230 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 23:02:29,001 - main - INFO - 
2025-12-29 23:02:29,001 - main - INFO - ================================================================================
2025-12-29 23:02:29,004 - main - INFO -   üõë Shutting down application...
2025-12-29 23:02:29,005 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:29,006 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:02:29,008 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:29,009 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:02:29,011 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:02:29,011 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:02:29,014 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:02:29,016 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:02:29,018 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:02:29,019 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:02:29,019 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:02:29,020 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:02:29,020 - main - INFO - ================================================================================
2025-12-29 23:02:29,020 - main - INFO - 
2025-12-29 23:02:33,252 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:02:33,282 - main - INFO - 
2025-12-29 23:02:33,282 - main - INFO - ================================================================================
2025-12-29 23:02:33,283 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:02:33,283 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:02:33,283 - main - INFO - ================================================================================
2025-12-29 23:02:33,283 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:02:33,284 - main - INFO -   Upload Directory: uploads
2025-12-29 23:02:33,284 - main - INFO -   Max File Size: 20MB
2025-12-29 23:02:33,284 - main - INFO - ================================================================================
2025-12-29 23:02:33,284 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:02:33,285 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:02:33,285 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:33,313 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:02:33,320 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:02:33,321 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:02:33,321 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:02:33,321 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:02:33,321 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:02:33,332 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:02:33,334 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:02:33,336 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:02:33,338 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:02:33,338 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:02:33,338 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:02:33,339 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:33,339 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:02:33,351 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:02:33,351 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:02:33,351 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:02:33,384 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:02:33,389 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:02:33,390 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:02:33,390 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:02:33,426 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:02:33,438 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:02:33,438 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:02:33,438 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:02:33,439 - main - INFO - 
2025-12-29 23:02:33,439 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:02:33,439 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:02:33,440 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:02:33,440 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:02:33,440 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:02:33,441 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:02:33,441 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:02:33,441 - main - INFO - 
2025-12-29 23:02:33,441 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:02:33,442 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:02:33,442 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:02:33,442 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:02:33,443 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:02:33,444 - main - INFO - 
2025-12-29 23:02:33,445 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:02:33,446 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:02:33,446 - main - INFO -        - No manual section generation
2025-12-29 23:02:33,446 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:02:33,447 - main - INFO - 
2025-12-29 23:02:33,447 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:02:33,447 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:02:33,448 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:02:33,449 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:02:33,449 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:02:33,449 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:02:33,450 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:02:33,450 - main - INFO - 
2025-12-29 23:02:33,450 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:02:33,450 - main - INFO -      Main:
2025-12-29 23:02:33,451 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:02:33,451 - main - INFO - 
2025-12-29 23:02:33,451 - main - INFO -      Retrieval:
2025-12-29 23:02:33,451 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:02:33,452 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:02:33,452 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:02:33,452 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:02:33,452 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:02:33,452 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:02:33,453 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:02:33,453 - main - INFO - 
2025-12-29 23:02:33,453 - main - INFO -      Management:
2025-12-29 23:02:33,453 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:02:33,453 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:02:33,454 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:02:33,454 - main - INFO - 
2025-12-29 23:02:33,454 - main - INFO -      Documents (MongoDB):
2025-12-29 23:02:33,454 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:02:33,454 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:02:33,454 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:02:33,455 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:02:33,455 - main - INFO - 
2025-12-29 23:02:33,455 - main - INFO -      Diagnostics & Health:
2025-12-29 23:02:33,455 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:02:33,455 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:02:33,455 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:02:33,456 - main - INFO - 
2025-12-29 23:02:33,456 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:02:33,456 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:02:33,456 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:02:33,456 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:02:33,456 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:02:33,456 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:02:33,457 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:02:33,457 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:02:33,457 - main - INFO - 
2025-12-29 23:02:33,457 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:02:33,457 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:02:33,457 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:02:33,458 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:02:33,458 - main - INFO -      4. No re-upload needed!
2025-12-29 23:02:33,458 - main - INFO - 
2025-12-29 23:02:33,458 - main - INFO - ================================================================================
2025-12-29 23:02:33,458 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:02:33,458 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:02:33,459 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:02:33,459 - main - INFO - ================================================================================
2025-12-29 23:02:33,459 - main - INFO - 
2025-12-29 23:02:33,460 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:02:43,492 - main - INFO - 
2025-12-29 23:02:43,492 - main - INFO - ================================================================================
2025-12-29 23:02:43,492 - main - INFO -   üõë Shutting down application...
2025-12-29 23:02:43,493 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:43,493 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:02:43,494 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:02:43,495 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:02:43,495 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:02:43,496 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:02:43,496 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:02:43,497 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:02:43,498 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:02:43,498 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:02:43,499 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:02:43,499 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:02:43,499 - main - INFO - ================================================================================
2025-12-29 23:02:43,500 - main - INFO - 
2025-12-29 23:02:47,566 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:02:47,588 - main - INFO - 
2025-12-29 23:02:47,588 - main - INFO - ================================================================================
2025-12-29 23:02:47,588 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:02:47,588 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:02:47,589 - main - INFO - ================================================================================
2025-12-29 23:02:47,589 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:02:47,589 - main - INFO -   Upload Directory: uploads
2025-12-29 23:02:47,589 - main - INFO -   Max File Size: 20MB
2025-12-29 23:02:47,590 - main - INFO - ================================================================================
2025-12-29 23:02:47,590 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:02:47,590 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:02:47,590 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:47,620 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:02:47,625 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:02:47,625 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:02:47,626 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:02:47,626 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:02:47,627 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:02:47,636 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:02:47,637 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:02:47,638 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:02:47,640 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:02:47,640 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:02:47,640 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:02:47,641 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:02:47,641 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:02:47,672 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:02:47,672 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:02:47,673 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:02:47,687 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:02:47,691 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:02:47,691 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:02:47,691 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:02:47,719 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:02:47,722 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:02:47,723 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:02:47,723 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:02:47,723 - main - INFO - 
2025-12-29 23:02:47,723 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:02:47,723 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:02:47,724 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:02:47,724 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:02:47,724 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:02:47,724 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:02:47,724 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:02:47,724 - main - INFO - 
2025-12-29 23:02:47,725 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:02:47,725 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:02:47,725 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:02:47,725 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:02:47,725 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:02:47,725 - main - INFO - 
2025-12-29 23:02:47,726 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:02:47,726 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:02:47,726 - main - INFO -        - No manual section generation
2025-12-29 23:02:47,727 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:02:47,727 - main - INFO - 
2025-12-29 23:02:47,728 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:02:47,729 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:02:47,729 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:02:47,729 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:02:47,730 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:02:47,730 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:02:47,730 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:02:47,730 - main - INFO - 
2025-12-29 23:02:47,731 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:02:47,731 - main - INFO -      Main:
2025-12-29 23:02:47,732 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:02:47,732 - main - INFO - 
2025-12-29 23:02:47,733 - main - INFO -      Retrieval:
2025-12-29 23:02:47,733 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:02:47,734 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:02:47,734 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:02:47,734 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:02:47,734 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:02:47,735 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:02:47,735 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:02:47,735 - main - INFO - 
2025-12-29 23:02:47,735 - main - INFO -      Management:
2025-12-29 23:02:47,736 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:02:47,736 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:02:47,736 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:02:47,736 - main - INFO - 
2025-12-29 23:02:47,736 - main - INFO -      Documents (MongoDB):
2025-12-29 23:02:47,737 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:02:47,737 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:02:47,737 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:02:47,737 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:02:47,737 - main - INFO - 
2025-12-29 23:02:47,738 - main - INFO -      Diagnostics & Health:
2025-12-29 23:02:47,738 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:02:47,738 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:02:47,738 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:02:47,738 - main - INFO - 
2025-12-29 23:02:47,739 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:02:47,739 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:02:47,739 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:02:47,739 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:02:47,740 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:02:47,740 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:02:47,740 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:02:47,740 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:02:47,740 - main - INFO - 
2025-12-29 23:02:47,741 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:02:47,741 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:02:47,741 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:02:47,741 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:02:47,741 - main - INFO -      4. No re-upload needed!
2025-12-29 23:02:47,742 - main - INFO - 
2025-12-29 23:02:47,742 - main - INFO - ================================================================================
2025-12-29 23:02:47,742 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:02:47,742 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:02:47,742 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:02:47,742 - main - INFO - ================================================================================
2025-12-29 23:02:47,743 - main - INFO - 
2025-12-29 23:02:47,743 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:03:06,513 - main - INFO - 
2025-12-29 23:03:06,513 - main - INFO - ================================================================================
2025-12-29 23:03:06,514 - main - INFO -   üõë Shutting down application...
2025-12-29 23:03:06,515 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:06,515 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:03:06,516 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:06,516 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:03:06,517 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:03:06,517 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:03:06,518 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:03:06,518 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:03:06,519 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:03:06,520 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:03:06,520 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:03:06,520 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:03:06,521 - main - INFO - ================================================================================
2025-12-29 23:03:06,521 - main - INFO - 
2025-12-29 23:03:10,935 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:03:10,955 - main - INFO - 
2025-12-29 23:03:10,956 - main - INFO - ================================================================================
2025-12-29 23:03:10,956 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:03:10,956 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:03:10,957 - main - INFO - ================================================================================
2025-12-29 23:03:10,957 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:03:10,957 - main - INFO -   Upload Directory: uploads
2025-12-29 23:03:10,957 - main - INFO -   Max File Size: 20MB
2025-12-29 23:03:10,958 - main - INFO - ================================================================================
2025-12-29 23:03:10,958 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:03:10,958 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:03:10,959 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:10,988 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:03:10,996 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:03:10,997 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:03:10,997 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:03:10,997 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:03:10,998 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:03:11,007 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:03:11,009 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:03:11,013 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:03:11,015 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:03:11,015 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:03:11,016 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:03:11,016 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:11,016 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:03:11,036 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:03:11,037 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:03:11,037 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:03:11,050 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:03:11,055 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:03:11,055 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:03:11,055 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:03:11,067 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:03:11,071 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:03:11,071 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:03:11,071 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:03:11,071 - main - INFO - 
2025-12-29 23:03:11,071 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:03:11,072 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:03:11,072 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:03:11,072 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:03:11,073 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:03:11,073 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:03:11,073 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:03:11,073 - main - INFO - 
2025-12-29 23:03:11,073 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:03:11,074 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:03:11,074 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:03:11,074 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:03:11,074 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:03:11,074 - main - INFO - 
2025-12-29 23:03:11,075 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:03:11,075 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:03:11,075 - main - INFO -        - No manual section generation
2025-12-29 23:03:11,075 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:03:11,075 - main - INFO - 
2025-12-29 23:03:11,075 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:03:11,076 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:03:11,076 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:03:11,076 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:03:11,076 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:03:11,077 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:03:11,077 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:03:11,078 - main - INFO - 
2025-12-29 23:03:11,078 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:03:11,078 - main - INFO -      Main:
2025-12-29 23:03:11,078 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:03:11,079 - main - INFO - 
2025-12-29 23:03:11,079 - main - INFO -      Retrieval:
2025-12-29 23:03:11,079 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:03:11,079 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:03:11,079 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:03:11,079 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:03:11,080 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:03:11,080 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:03:11,080 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:03:11,080 - main - INFO - 
2025-12-29 23:03:11,081 - main - INFO -      Management:
2025-12-29 23:03:11,081 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:03:11,081 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:03:11,081 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:03:11,082 - main - INFO - 
2025-12-29 23:03:11,082 - main - INFO -      Documents (MongoDB):
2025-12-29 23:03:11,082 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:03:11,083 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:03:11,083 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:03:11,083 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:03:11,083 - main - INFO - 
2025-12-29 23:03:11,084 - main - INFO -      Diagnostics & Health:
2025-12-29 23:03:11,084 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:03:11,084 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:03:11,085 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:03:11,086 - main - INFO - 
2025-12-29 23:03:11,086 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:03:11,086 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:03:11,086 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:03:11,087 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:03:11,087 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:03:11,087 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:03:11,087 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:03:11,087 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:03:11,088 - main - INFO - 
2025-12-29 23:03:11,088 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:03:11,088 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:03:11,088 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:03:11,088 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:03:11,089 - main - INFO -      4. No re-upload needed!
2025-12-29 23:03:11,089 - main - INFO - 
2025-12-29 23:03:11,089 - main - INFO - ================================================================================
2025-12-29 23:03:11,089 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:03:11,089 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:03:11,090 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:03:11,090 - main - INFO - ================================================================================
2025-12-29 23:03:11,090 - main - INFO - 
2025-12-29 23:03:11,090 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:03:22,791 - main - INFO - 
2025-12-29 23:03:22,791 - main - INFO - ================================================================================
2025-12-29 23:03:22,791 - main - INFO -   üõë Shutting down application...
2025-12-29 23:03:22,792 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:22,792 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:03:22,793 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:22,794 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:03:22,794 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:03:22,795 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:03:22,795 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:03:22,796 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:03:22,797 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:03:22,797 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:03:22,798 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:03:22,798 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:03:22,798 - main - INFO - ================================================================================
2025-12-29 23:03:22,798 - main - INFO - 
2025-12-29 23:03:26,120 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:03:26,138 - main - INFO - 
2025-12-29 23:03:26,138 - main - INFO - ================================================================================
2025-12-29 23:03:26,139 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:03:26,139 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:03:26,139 - main - INFO - ================================================================================
2025-12-29 23:03:26,139 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:03:26,140 - main - INFO -   Upload Directory: uploads
2025-12-29 23:03:26,140 - main - INFO -   Max File Size: 20MB
2025-12-29 23:03:26,140 - main - INFO - ================================================================================
2025-12-29 23:03:26,141 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:03:26,141 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:03:26,141 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:26,200 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:03:26,204 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:03:26,205 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:03:26,205 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:03:26,205 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:03:26,205 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:03:26,214 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:03:26,219 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:03:26,220 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:03:26,222 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:03:26,223 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:03:26,223 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:03:26,223 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:26,223 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:03:26,233 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:03:26,233 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:03:26,234 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:03:26,242 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:03:26,248 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:03:26,248 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:03:26,249 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:03:26,257 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:03:26,266 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:03:26,267 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:03:26,267 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:03:26,268 - main - INFO - 
2025-12-29 23:03:26,268 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:03:26,268 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:03:26,269 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:03:26,270 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:03:26,270 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:03:26,270 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:03:26,270 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:03:26,271 - main - INFO - 
2025-12-29 23:03:26,271 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:03:26,271 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:03:26,271 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:03:26,271 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:03:26,271 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:03:26,272 - main - INFO - 
2025-12-29 23:03:26,272 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:03:26,272 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:03:26,272 - main - INFO -        - No manual section generation
2025-12-29 23:03:26,272 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:03:26,272 - main - INFO - 
2025-12-29 23:03:26,273 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:03:26,273 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:03:26,273 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:03:26,273 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:03:26,273 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:03:26,274 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:03:26,274 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:03:26,274 - main - INFO - 
2025-12-29 23:03:26,274 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:03:26,274 - main - INFO -      Main:
2025-12-29 23:03:26,274 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:03:26,275 - main - INFO - 
2025-12-29 23:03:26,275 - main - INFO -      Retrieval:
2025-12-29 23:03:26,275 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:03:26,275 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:03:26,276 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:03:26,276 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:03:26,276 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:03:26,277 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:03:26,277 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:03:26,277 - main - INFO - 
2025-12-29 23:03:26,278 - main - INFO -      Management:
2025-12-29 23:03:26,279 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:03:26,279 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:03:26,279 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:03:26,279 - main - INFO - 
2025-12-29 23:03:26,280 - main - INFO -      Documents (MongoDB):
2025-12-29 23:03:26,280 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:03:26,280 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:03:26,280 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:03:26,281 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:03:26,281 - main - INFO - 
2025-12-29 23:03:26,281 - main - INFO -      Diagnostics & Health:
2025-12-29 23:03:26,281 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:03:26,281 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:03:26,282 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:03:26,282 - main - INFO - 
2025-12-29 23:03:26,282 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:03:26,282 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:03:26,282 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:03:26,283 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:03:26,283 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:03:26,283 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:03:26,283 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:03:26,284 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:03:26,284 - main - INFO - 
2025-12-29 23:03:26,284 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:03:26,285 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:03:26,285 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:03:26,285 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:03:26,285 - main - INFO -      4. No re-upload needed!
2025-12-29 23:03:26,285 - main - INFO - 
2025-12-29 23:03:26,285 - main - INFO - ================================================================================
2025-12-29 23:03:26,286 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:03:26,286 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:03:26,286 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:03:26,286 - main - INFO - ================================================================================
2025-12-29 23:03:26,286 - main - INFO - 
2025-12-29 23:03:26,286 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:03:27,200 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:03:27,201 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:03:27,203 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:03:27,208 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:03:27,210 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:03:27,217 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:03:30,722 - main - INFO - 
2025-12-29 23:03:30,723 - main - INFO - ================================================================================
2025-12-29 23:03:30,725 - main - INFO -   üõë Shutting down application...
2025-12-29 23:03:30,729 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:30,732 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:03:30,736 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:03:30,738 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:03:30,739 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:03:30,740 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:03:30,743 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:03:30,749 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:03:30,751 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:03:30,751 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:03:30,752 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:03:30,752 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:03:30,753 - main - INFO - ================================================================================
2025-12-29 23:03:30,753 - main - INFO - 
2025-12-29 23:03:34,824 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:03:34,868 - main - INFO - 
2025-12-29 23:03:34,870 - main - INFO - ================================================================================
2025-12-29 23:03:34,871 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:03:34,871 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:03:34,872 - main - INFO - ================================================================================
2025-12-29 23:03:34,872 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:03:34,873 - main - INFO -   Upload Directory: uploads
2025-12-29 23:03:34,873 - main - INFO -   Max File Size: 20MB
2025-12-29 23:03:34,874 - main - INFO - ================================================================================
2025-12-29 23:03:34,874 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:03:34,875 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:03:34,876 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:34,918 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:03:34,925 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:03:34,925 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:03:34,926 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:03:34,927 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:03:34,927 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:03:34,940 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:03:34,941 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:03:34,944 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:03:34,951 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:03:34,952 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:03:34,952 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:03:34,952 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:03:34,953 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:03:34,968 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:03:34,969 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:03:34,969 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:03:34,983 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:03:34,988 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:03:34,988 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:03:34,989 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:03:35,004 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:03:35,010 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:03:35,011 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:03:35,013 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:03:35,014 - main - INFO - 
2025-12-29 23:03:35,014 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:03:35,014 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:03:35,014 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:03:35,015 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:03:35,015 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:03:35,015 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:03:35,015 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:03:35,016 - main - INFO - 
2025-12-29 23:03:35,016 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:03:35,017 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:03:35,018 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:03:35,018 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:03:35,018 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:03:35,019 - main - INFO - 
2025-12-29 23:03:35,019 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:03:35,019 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:03:35,019 - main - INFO -        - No manual section generation
2025-12-29 23:03:35,019 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:03:35,020 - main - INFO - 
2025-12-29 23:03:35,020 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:03:35,020 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:03:35,020 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:03:35,021 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:03:35,021 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:03:35,021 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:03:35,021 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:03:35,021 - main - INFO - 
2025-12-29 23:03:35,021 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:03:35,022 - main - INFO -      Main:
2025-12-29 23:03:35,022 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:03:35,022 - main - INFO - 
2025-12-29 23:03:35,022 - main - INFO -      Retrieval:
2025-12-29 23:03:35,022 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:03:35,023 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:03:35,023 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:03:35,023 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:03:35,023 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:03:35,024 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:03:35,024 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:03:35,024 - main - INFO - 
2025-12-29 23:03:35,024 - main - INFO -      Management:
2025-12-29 23:03:35,024 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:03:35,024 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:03:35,025 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:03:35,025 - main - INFO - 
2025-12-29 23:03:35,025 - main - INFO -      Documents (MongoDB):
2025-12-29 23:03:35,025 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:03:35,025 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:03:35,025 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:03:35,026 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:03:35,026 - main - INFO - 
2025-12-29 23:03:35,026 - main - INFO -      Diagnostics & Health:
2025-12-29 23:03:35,027 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:03:35,027 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:03:35,028 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:03:35,029 - main - INFO - 
2025-12-29 23:03:35,029 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:03:35,029 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:03:35,030 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:03:35,030 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:03:35,030 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:03:35,030 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:03:35,030 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:03:35,031 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:03:35,031 - main - INFO - 
2025-12-29 23:03:35,031 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:03:35,031 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:03:35,031 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:03:35,031 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:03:35,032 - main - INFO -      4. No re-upload needed!
2025-12-29 23:03:35,032 - main - INFO - 
2025-12-29 23:03:35,032 - main - INFO - ================================================================================
2025-12-29 23:03:35,032 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:03:35,032 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:03:35,033 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:03:35,033 - main - INFO - ================================================================================
2025-12-29 23:03:35,033 - main - INFO - 
2025-12-29 23:03:35,033 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:04:27,206 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:04:27,207 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:04:27,208 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:04:27,217 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:04:27,217 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:04:27,224 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:04:32,558 - main - INFO - 
2025-12-29 23:04:32,558 - main - INFO - ================================================================================
2025-12-29 23:04:32,558 - main - INFO -   üõë Shutting down application...
2025-12-29 23:04:32,559 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:04:32,560 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:04:32,561 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:04:32,561 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:04:32,561 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:04:32,562 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:04:32,562 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:04:32,563 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:04:32,564 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:04:32,564 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:04:32,564 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:04:32,565 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:04:32,565 - main - INFO - ================================================================================
2025-12-29 23:04:32,565 - main - INFO - 
2025-12-29 23:04:36,727 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:04:36,753 - main - INFO - 
2025-12-29 23:04:36,754 - main - INFO - ================================================================================
2025-12-29 23:04:36,754 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:04:36,754 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:04:36,754 - main - INFO - ================================================================================
2025-12-29 23:04:36,755 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:04:36,755 - main - INFO -   Upload Directory: uploads
2025-12-29 23:04:36,757 - main - INFO -   Max File Size: 20MB
2025-12-29 23:04:36,757 - main - INFO - ================================================================================
2025-12-29 23:04:36,757 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:04:36,758 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:04:36,758 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:04:36,804 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:04:36,817 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:04:36,818 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:04:36,818 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:04:36,819 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:04:36,819 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:04:36,834 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:04:36,836 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:04:36,838 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:04:36,840 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:04:36,840 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:04:36,841 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:04:36,841 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:04:36,841 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:04:36,854 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:04:36,855 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:04:36,855 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:04:36,867 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:04:36,871 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:04:36,872 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:04:36,872 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:04:36,884 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:04:36,889 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:04:36,889 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:04:36,889 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:04:36,889 - main - INFO - 
2025-12-29 23:04:36,890 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:04:36,890 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:04:36,890 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:04:36,890 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:04:36,890 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:04:36,890 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:04:36,891 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:04:36,891 - main - INFO - 
2025-12-29 23:04:36,891 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:04:36,891 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:04:36,891 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:04:36,892 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:04:36,892 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:04:36,892 - main - INFO - 
2025-12-29 23:04:36,892 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:04:36,892 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:04:36,892 - main - INFO -        - No manual section generation
2025-12-29 23:04:36,893 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:04:36,893 - main - INFO - 
2025-12-29 23:04:36,893 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:04:36,894 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:04:36,894 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:04:36,894 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:04:36,894 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:04:36,895 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:04:36,895 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:04:36,896 - main - INFO - 
2025-12-29 23:04:36,897 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:04:36,899 - main - INFO -      Main:
2025-12-29 23:04:36,899 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:04:36,900 - main - INFO - 
2025-12-29 23:04:36,900 - main - INFO -      Retrieval:
2025-12-29 23:04:36,900 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:04:36,901 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:04:36,901 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:04:36,901 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:04:36,902 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:04:36,902 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:04:36,902 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:04:36,902 - main - INFO - 
2025-12-29 23:04:36,903 - main - INFO -      Management:
2025-12-29 23:04:36,903 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:04:36,903 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:04:36,904 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:04:36,904 - main - INFO - 
2025-12-29 23:04:36,904 - main - INFO -      Documents (MongoDB):
2025-12-29 23:04:36,904 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:04:36,904 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:04:36,905 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:04:36,905 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:04:36,905 - main - INFO - 
2025-12-29 23:04:36,905 - main - INFO -      Diagnostics & Health:
2025-12-29 23:04:36,906 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:04:36,906 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:04:36,906 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:04:36,906 - main - INFO - 
2025-12-29 23:04:36,907 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:04:36,907 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:04:36,907 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:04:36,907 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:04:36,908 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:04:36,908 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:04:36,908 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:04:36,908 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:04:36,908 - main - INFO - 
2025-12-29 23:04:36,909 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:04:36,909 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:04:36,909 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:04:36,910 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:04:36,910 - main - INFO -      4. No re-upload needed!
2025-12-29 23:04:36,910 - main - INFO - 
2025-12-29 23:04:36,911 - main - INFO - ================================================================================
2025-12-29 23:04:36,911 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:04:36,912 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:04:36,912 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:04:36,913 - main - INFO - ================================================================================
2025-12-29 23:04:36,915 - main - INFO - 
2025-12-29 23:04:36,917 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:05:24,736 - main - INFO - 
2025-12-29 23:05:24,736 - main - INFO - ================================================================================
2025-12-29 23:05:24,736 - main - INFO -   üõë Shutting down application...
2025-12-29 23:05:24,737 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:05:24,738 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:05:24,739 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:05:24,739 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:05:24,740 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:05:24,741 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:05:24,742 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:05:24,742 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:05:24,743 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:05:24,744 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:05:24,744 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:05:24,745 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:05:24,745 - main - INFO - ================================================================================
2025-12-29 23:05:24,745 - main - INFO - 
2025-12-29 23:05:28,433 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:05:28,456 - main - INFO - 
2025-12-29 23:05:28,456 - main - INFO - ================================================================================
2025-12-29 23:05:28,457 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:05:28,457 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:05:28,457 - main - INFO - ================================================================================
2025-12-29 23:05:28,457 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:05:28,457 - main - INFO -   Upload Directory: uploads
2025-12-29 23:05:28,458 - main - INFO -   Max File Size: 20MB
2025-12-29 23:05:28,458 - main - INFO - ================================================================================
2025-12-29 23:05:28,458 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:05:28,459 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:05:28,459 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:05:28,487 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:05:28,491 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:05:28,492 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:05:28,492 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:05:28,492 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:05:28,492 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:05:28,531 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:05:28,533 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:05:28,535 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:05:28,537 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:05:28,537 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:05:28,537 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:05:28,537 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:05:28,538 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:05:28,559 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:05:28,559 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:05:28,559 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:05:28,570 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:05:28,573 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:05:28,573 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:05:28,573 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:05:28,607 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:05:28,614 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:05:28,614 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:05:28,615 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:05:28,615 - main - INFO - 
2025-12-29 23:05:28,615 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:05:28,615 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:05:28,616 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:05:28,616 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:05:28,616 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:05:28,617 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:05:28,617 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:05:28,617 - main - INFO - 
2025-12-29 23:05:28,617 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:05:28,617 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:05:28,618 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:05:28,618 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:05:28,618 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:05:28,618 - main - INFO - 
2025-12-29 23:05:28,619 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:05:28,619 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:05:28,619 - main - INFO -        - No manual section generation
2025-12-29 23:05:28,619 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:05:28,619 - main - INFO - 
2025-12-29 23:05:28,619 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:05:28,620 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:05:28,620 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:05:28,620 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:05:28,620 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:05:28,621 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:05:28,621 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:05:28,621 - main - INFO - 
2025-12-29 23:05:28,621 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:05:28,621 - main - INFO -      Main:
2025-12-29 23:05:28,621 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:05:28,622 - main - INFO - 
2025-12-29 23:05:28,622 - main - INFO -      Retrieval:
2025-12-29 23:05:28,622 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:05:28,622 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:05:28,622 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:05:28,623 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:05:28,623 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:05:28,623 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:05:28,623 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:05:28,623 - main - INFO - 
2025-12-29 23:05:28,623 - main - INFO -      Management:
2025-12-29 23:05:28,623 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:05:28,623 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:05:28,624 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:05:28,624 - main - INFO - 
2025-12-29 23:05:28,624 - main - INFO -      Documents (MongoDB):
2025-12-29 23:05:28,624 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:05:28,624 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:05:28,624 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:05:28,625 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:05:28,625 - main - INFO - 
2025-12-29 23:05:28,625 - main - INFO -      Diagnostics & Health:
2025-12-29 23:05:28,625 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:05:28,625 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:05:28,625 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:05:28,625 - main - INFO - 
2025-12-29 23:05:28,626 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:05:28,626 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:05:28,626 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:05:28,627 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:05:28,628 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:05:28,629 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:05:28,629 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:05:28,630 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:05:28,630 - main - INFO - 
2025-12-29 23:05:28,630 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:05:28,630 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:05:28,631 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:05:28,631 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:05:28,631 - main - INFO -      4. No re-upload needed!
2025-12-29 23:05:28,631 - main - INFO - 
2025-12-29 23:05:28,631 - main - INFO - ================================================================================
2025-12-29 23:05:28,632 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:05:28,632 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:05:28,632 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:05:28,632 - main - INFO - ================================================================================
2025-12-29 23:05:28,633 - main - INFO - 
2025-12-29 23:05:28,633 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:05:28,692 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:05:28,692 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:05:28,696 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:05:28,704 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:05:28,705 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:05:28,709 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:05:56,184 - main - INFO - 
2025-12-29 23:05:56,184 - main - INFO - ================================================================================
2025-12-29 23:05:56,184 - main - INFO -   üõë Shutting down application...
2025-12-29 23:05:56,185 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:05:56,186 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:05:56,186 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:05:56,187 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:05:56,187 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:05:56,188 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:05:56,188 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:05:56,189 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:05:56,189 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:05:56,189 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:05:56,190 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:05:56,190 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:05:56,190 - main - INFO - ================================================================================
2025-12-29 23:05:56,191 - main - INFO - 
2025-12-29 23:06:00,620 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:06:00,636 - main - INFO - 
2025-12-29 23:06:00,636 - main - INFO - ================================================================================
2025-12-29 23:06:00,637 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:06:00,637 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:06:00,637 - main - INFO - ================================================================================
2025-12-29 23:06:00,637 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:06:00,637 - main - INFO -   Upload Directory: uploads
2025-12-29 23:06:00,637 - main - INFO -   Max File Size: 20MB
2025-12-29 23:06:00,638 - main - INFO - ================================================================================
2025-12-29 23:06:00,638 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:06:00,638 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:06:00,638 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:06:00,683 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:06:00,699 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:06:00,699 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:06:00,700 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:06:00,700 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:06:00,701 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:06:00,738 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:06:00,741 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:06:00,747 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:06:00,751 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:06:00,752 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:06:00,753 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:06:00,753 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:06:00,754 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:06:00,770 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:06:00,770 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:06:00,770 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:06:00,779 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:06:00,782 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:06:00,782 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:06:00,783 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:06:00,790 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:06:00,793 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:06:00,793 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:06:00,794 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:06:00,794 - main - INFO - 
2025-12-29 23:06:00,794 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:06:00,794 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:06:00,795 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:06:00,795 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:06:00,795 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:06:00,795 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:06:00,796 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:06:00,796 - main - INFO - 
2025-12-29 23:06:00,796 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:06:00,796 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:06:00,796 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:06:00,797 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:06:00,797 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:06:00,797 - main - INFO - 
2025-12-29 23:06:00,797 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:06:00,797 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:06:00,798 - main - INFO -        - No manual section generation
2025-12-29 23:06:00,798 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:06:00,798 - main - INFO - 
2025-12-29 23:06:00,798 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:06:00,798 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:06:00,799 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:06:00,799 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:06:00,800 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:06:00,801 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:06:00,801 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:06:00,802 - main - INFO - 
2025-12-29 23:06:00,803 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:06:00,803 - main - INFO -      Main:
2025-12-29 23:06:00,803 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:06:00,803 - main - INFO - 
2025-12-29 23:06:00,804 - main - INFO -      Retrieval:
2025-12-29 23:06:00,804 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:06:00,804 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:06:00,804 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:06:00,804 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:06:00,804 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:06:00,805 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:06:00,805 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:06:00,805 - main - INFO - 
2025-12-29 23:06:00,805 - main - INFO -      Management:
2025-12-29 23:06:00,805 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:06:00,805 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:06:00,805 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:06:00,806 - main - INFO - 
2025-12-29 23:06:00,806 - main - INFO -      Documents (MongoDB):
2025-12-29 23:06:00,806 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:06:00,806 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:06:00,806 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:06:00,806 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:06:00,806 - main - INFO - 
2025-12-29 23:06:00,807 - main - INFO -      Diagnostics & Health:
2025-12-29 23:06:00,807 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:06:00,807 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:06:00,807 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:06:00,807 - main - INFO - 
2025-12-29 23:06:00,807 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:06:00,808 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:06:00,809 - main - INFO - 
2025-12-29 23:06:00,809 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:06:00,809 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:06:00,809 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:06:00,809 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:06:00,810 - main - INFO -      4. No re-upload needed!
2025-12-29 23:06:00,810 - main - INFO - 
2025-12-29 23:06:00,810 - main - INFO - ================================================================================
2025-12-29 23:06:00,810 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:06:00,810 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:06:00,810 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:06:00,811 - main - INFO - ================================================================================
2025-12-29 23:06:00,811 - main - INFO - 
2025-12-29 23:06:00,811 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:06:00,864 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:06:00,865 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:06:00,866 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:06:00,872 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:06:00,872 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:06:00,877 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 23:06:01,403 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 23:06:01,404 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.00s
2025-12-29 23:06:01,407 - main - INFO - üì• GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf
2025-12-29 23:06:01,408 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767047917_c66baf45d7e7, type: both
2025-12-29 23:06:01,412 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767047917_c66baf45d7e7
2025-12-29 23:06:01,412 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 23:06:01,412 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 23:06:01,413 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 23:06:01,413 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 23:06:01,416 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 23:06:01,538 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 23:06:01,538 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767047917_c66baf45d7e7
2025-12-29 23:06:01,539 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 23:06:01,539 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 23:06:01,539 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 23:06:01,540 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 23:06:01,548 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 23:06:01,549 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section (overall score comparison only)...
2025-12-29 23:06:01,550 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 23:06:01,692 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767047917_c66baf45d7e7
2025-12-29 23:06:01,694 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767047917_c66baf45d7e7_20251229_230601.pdf (129235 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767047917_c66baf45d7e7_20251229_230601.pdf (139452 bytes)
2025-12-29 23:06:01,697 - main - INFO - üì§ GET /api/comparison/cmp_1767047917_c66baf45d7e7/pdf - 200 - 0.29s
2025-12-29 23:06:25,889 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:06:25,890 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:06:25,892 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:06:25,901 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:06:25,901 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:06:25,908 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:06:56,200 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:06:56,200 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:06:56,202 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:06:56,206 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:06:56,206 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:06:56,214 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 23:07:26,888 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:07:26,889 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:07:26,891 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:07:26,925 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:07:26,926 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:07:26,937 - main - INFO - üì§ GET /api/comparisons - 200 - 0.05s
2025-12-29 23:07:39,113 - main - INFO - 
2025-12-29 23:07:39,114 - main - INFO - ================================================================================
2025-12-29 23:07:39,114 - main - INFO -   üõë Shutting down application...
2025-12-29 23:07:39,115 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:07:39,115 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:07:39,117 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:07:39,118 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:07:39,119 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:07:39,119 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:07:39,120 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:07:39,120 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:07:39,121 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:07:39,121 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:07:39,122 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:07:39,122 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:07:39,122 - main - INFO - ================================================================================
2025-12-29 23:07:39,122 - main - INFO - 
2025-12-29 23:07:43,497 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:07:43,520 - main - INFO - 
2025-12-29 23:07:43,521 - main - INFO - ================================================================================
2025-12-29 23:07:43,521 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:07:43,521 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:07:43,521 - main - INFO - ================================================================================
2025-12-29 23:07:43,522 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:07:43,522 - main - INFO -   Upload Directory: uploads
2025-12-29 23:07:43,522 - main - INFO -   Max File Size: 20MB
2025-12-29 23:07:43,522 - main - INFO - ================================================================================
2025-12-29 23:07:43,523 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:07:43,523 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:07:43,523 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:07:43,548 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:07:43,555 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:07:43,555 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:07:43,556 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:07:43,556 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:07:43,556 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:07:43,585 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:07:43,586 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:07:43,587 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:07:43,589 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:07:43,589 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:07:43,589 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:07:43,589 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:07:43,590 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:07:43,602 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:07:43,602 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:07:43,602 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:07:43,609 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:07:43,616 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:07:43,617 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:07:43,617 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:07:43,624 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:07:43,633 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:07:43,634 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:07:43,634 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:07:43,634 - main - INFO - 
2025-12-29 23:07:43,634 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:07:43,635 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:07:43,635 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:07:43,635 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:07:43,635 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:07:43,636 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:07:43,636 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:07:43,636 - main - INFO - 
2025-12-29 23:07:43,636 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:07:43,636 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:07:43,637 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:07:43,637 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:07:43,637 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:07:43,637 - main - INFO - 
2025-12-29 23:07:43,637 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:07:43,637 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:07:43,638 - main - INFO -        - No manual section generation
2025-12-29 23:07:43,638 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:07:43,638 - main - INFO - 
2025-12-29 23:07:43,638 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:07:43,638 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:07:43,638 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:07:43,638 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:07:43,639 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:07:43,639 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:07:43,639 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:07:43,639 - main - INFO - 
2025-12-29 23:07:43,639 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:07:43,639 - main - INFO -      Main:
2025-12-29 23:07:43,640 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:07:43,640 - main - INFO - 
2025-12-29 23:07:43,640 - main - INFO -      Retrieval:
2025-12-29 23:07:43,640 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:07:43,640 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:07:43,640 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:07:43,641 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:07:43,641 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:07:43,641 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:07:43,641 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:07:43,641 - main - INFO - 
2025-12-29 23:07:43,641 - main - INFO -      Management:
2025-12-29 23:07:43,641 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:07:43,642 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:07:43,642 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:07:43,642 - main - INFO - 
2025-12-29 23:07:43,642 - main - INFO -      Documents (MongoDB):
2025-12-29 23:07:43,642 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:07:43,642 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:07:43,643 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:07:43,644 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:07:43,646 - main - INFO - 
2025-12-29 23:07:43,647 - main - INFO -      Diagnostics & Health:
2025-12-29 23:07:43,647 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:07:43,647 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:07:43,647 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:07:43,648 - main - INFO - 
2025-12-29 23:07:43,648 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:07:43,648 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:07:43,649 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:07:43,649 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:07:43,650 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:07:43,650 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:07:43,650 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:07:43,650 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:07:43,651 - main - INFO - 
2025-12-29 23:07:43,651 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:07:43,651 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:07:43,651 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:07:43,651 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:07:43,652 - main - INFO -      4. No re-upload needed!
2025-12-29 23:07:43,652 - main - INFO - 
2025-12-29 23:07:43,652 - main - INFO - ================================================================================
2025-12-29 23:07:43,652 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:07:43,653 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:07:43,653 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:07:43,653 - main - INFO - ================================================================================
2025-12-29 23:07:43,653 - main - INFO - 
2025-12-29 23:07:43,653 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:07:51,739 - main - INFO - 
2025-12-29 23:07:51,739 - main - INFO - ================================================================================
2025-12-29 23:07:51,740 - main - INFO -   üõë Shutting down application...
2025-12-29 23:07:51,740 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:07:51,741 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:07:51,742 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:07:51,742 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:07:51,745 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:07:51,746 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:07:51,749 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:07:51,749 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:07:51,750 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:07:51,750 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:07:51,751 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:07:51,751 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:07:51,751 - main - INFO - ================================================================================
2025-12-29 23:07:51,752 - main - INFO - 
2025-12-29 23:07:55,636 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:07:55,661 - main - INFO - 
2025-12-29 23:07:55,661 - main - INFO - ================================================================================
2025-12-29 23:07:55,661 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:07:55,662 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:07:55,662 - main - INFO - ================================================================================
2025-12-29 23:07:55,663 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:07:55,663 - main - INFO -   Upload Directory: uploads
2025-12-29 23:07:55,663 - main - INFO -   Max File Size: 20MB
2025-12-29 23:07:55,664 - main - INFO - ================================================================================
2025-12-29 23:07:55,665 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:07:55,667 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:07:55,667 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:07:55,689 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:07:55,695 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:07:55,696 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:07:55,697 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:07:55,699 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:07:55,700 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:07:55,712 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:07:55,716 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:07:55,717 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:07:55,719 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:07:55,720 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:07:55,720 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:07:55,720 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:07:55,720 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:07:55,729 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:07:55,729 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:07:55,730 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:07:55,739 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:07:55,742 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:07:55,743 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:07:55,743 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:07:55,753 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:07:55,758 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:07:55,758 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:07:55,758 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:07:55,759 - main - INFO - 
2025-12-29 23:07:55,759 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:07:55,759 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:07:55,759 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:07:55,760 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:07:55,760 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:07:55,760 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:07:55,761 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:07:55,761 - main - INFO - 
2025-12-29 23:07:55,761 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:07:55,761 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:07:55,762 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:07:55,762 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:07:55,762 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:07:55,762 - main - INFO - 
2025-12-29 23:07:55,762 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:07:55,763 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:07:55,763 - main - INFO -        - No manual section generation
2025-12-29 23:07:55,763 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:07:55,764 - main - INFO - 
2025-12-29 23:07:55,764 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:07:55,764 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:07:55,765 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:07:55,765 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:07:55,766 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:07:55,766 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:07:55,767 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:07:55,767 - main - INFO - 
2025-12-29 23:07:55,768 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:07:55,768 - main - INFO -      Main:
2025-12-29 23:07:55,768 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:07:55,768 - main - INFO - 
2025-12-29 23:07:55,769 - main - INFO -      Retrieval:
2025-12-29 23:07:55,769 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:07:55,769 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:07:55,769 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:07:55,769 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:07:55,770 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:07:55,770 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:07:55,770 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:07:55,770 - main - INFO - 
2025-12-29 23:07:55,771 - main - INFO -      Management:
2025-12-29 23:07:55,771 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:07:55,771 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:07:55,771 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:07:55,771 - main - INFO - 
2025-12-29 23:07:55,772 - main - INFO -      Documents (MongoDB):
2025-12-29 23:07:55,772 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:07:55,772 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:07:55,772 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:07:55,772 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:07:55,772 - main - INFO - 
2025-12-29 23:07:55,773 - main - INFO -      Diagnostics & Health:
2025-12-29 23:07:55,773 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:07:55,773 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:07:55,773 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:07:55,773 - main - INFO - 
2025-12-29 23:07:55,774 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:07:55,774 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:07:55,774 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:07:55,774 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:07:55,774 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:07:55,775 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:07:55,775 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:07:55,775 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:07:55,775 - main - INFO - 
2025-12-29 23:07:55,776 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:07:55,776 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:07:55,776 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:07:55,776 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:07:55,776 - main - INFO -      4. No re-upload needed!
2025-12-29 23:07:55,777 - main - INFO - 
2025-12-29 23:07:55,777 - main - INFO - ================================================================================
2025-12-29 23:07:55,777 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:07:55,777 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:07:55,778 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:07:55,778 - main - INFO - ================================================================================
2025-12-29 23:07:55,778 - main - INFO - 
2025-12-29 23:07:55,779 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:08:16,828 - main - INFO - 
2025-12-29 23:08:16,828 - main - INFO - ================================================================================
2025-12-29 23:08:16,828 - main - INFO -   üõë Shutting down application...
2025-12-29 23:08:16,829 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:08:16,830 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:08:16,831 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:08:16,831 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:08:16,832 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:08:16,832 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:08:16,833 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:08:16,833 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:08:16,834 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:08:16,834 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:08:16,835 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:08:16,835 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:08:16,835 - main - INFO - ================================================================================
2025-12-29 23:08:16,835 - main - INFO - 
2025-12-29 23:08:21,242 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:08:21,271 - main - INFO - 
2025-12-29 23:08:21,271 - main - INFO - ================================================================================
2025-12-29 23:08:21,271 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:08:21,271 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:08:21,271 - main - INFO - ================================================================================
2025-12-29 23:08:21,272 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:08:21,272 - main - INFO -   Upload Directory: uploads
2025-12-29 23:08:21,272 - main - INFO -   Max File Size: 20MB
2025-12-29 23:08:21,273 - main - INFO - ================================================================================
2025-12-29 23:08:21,273 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:08:21,273 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:08:21,274 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:08:21,326 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:08:21,336 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:08:21,336 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:08:21,336 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:08:21,336 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:08:21,337 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:08:21,346 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:08:21,348 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:08:21,349 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:08:21,351 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:08:21,351 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:08:21,352 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:08:21,352 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:08:21,352 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:08:21,363 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:08:21,363 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:08:21,364 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:08:21,373 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:08:21,378 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:08:21,379 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:08:21,380 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:08:21,388 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:08:21,392 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:08:21,393 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:08:21,394 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:08:21,396 - main - INFO - 
2025-12-29 23:08:21,396 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:08:21,396 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:08:21,397 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:08:21,397 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:08:21,397 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:08:21,398 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:08:21,398 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:08:21,399 - main - INFO - 
2025-12-29 23:08:21,399 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:08:21,399 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:08:21,399 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:08:21,400 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:08:21,400 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:08:21,400 - main - INFO - 
2025-12-29 23:08:21,400 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:08:21,400 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:08:21,401 - main - INFO -        - No manual section generation
2025-12-29 23:08:21,401 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:08:21,401 - main - INFO - 
2025-12-29 23:08:21,401 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:08:21,401 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:08:21,401 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:08:21,402 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:08:21,402 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:08:21,402 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:08:21,402 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:08:21,402 - main - INFO - 
2025-12-29 23:08:21,402 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:08:21,403 - main - INFO -      Main:
2025-12-29 23:08:21,403 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:08:21,403 - main - INFO - 
2025-12-29 23:08:21,403 - main - INFO -      Retrieval:
2025-12-29 23:08:21,403 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:08:21,404 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:08:21,404 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:08:21,404 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:08:21,404 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:08:21,404 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:08:21,405 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:08:21,405 - main - INFO - 
2025-12-29 23:08:21,405 - main - INFO -      Management:
2025-12-29 23:08:21,405 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:08:21,405 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:08:21,405 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:08:21,406 - main - INFO - 
2025-12-29 23:08:21,406 - main - INFO -      Documents (MongoDB):
2025-12-29 23:08:21,406 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:08:21,406 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:08:21,406 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:08:21,406 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:08:21,407 - main - INFO - 
2025-12-29 23:08:21,407 - main - INFO -      Diagnostics & Health:
2025-12-29 23:08:21,407 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:08:21,407 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:08:21,407 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:08:21,407 - main - INFO - 
2025-12-29 23:08:21,408 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:08:21,408 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:08:21,409 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:08:21,409 - main - INFO - 
2025-12-29 23:08:21,409 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:08:21,409 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:08:21,410 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:08:21,410 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:08:21,411 - main - INFO -      4. No re-upload needed!
2025-12-29 23:08:21,411 - main - INFO - 
2025-12-29 23:08:21,411 - main - INFO - ================================================================================
2025-12-29 23:08:21,412 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:08:21,412 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:08:21,412 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:08:21,412 - main - INFO - ================================================================================
2025-12-29 23:08:21,413 - main - INFO - 
2025-12-29 23:08:21,413 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:08:27,203 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:08:27,204 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:08:27,205 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:08:27,211 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:08:27,211 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:08:27,218 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:08:29,068 - main - INFO - 
2025-12-29 23:08:29,068 - main - INFO - ================================================================================
2025-12-29 23:08:29,068 - main - INFO -   üõë Shutting down application...
2025-12-29 23:08:29,069 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:08:29,070 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:08:29,071 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:08:29,071 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:08:29,072 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:08:29,072 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:08:29,073 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:08:29,074 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:08:29,075 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:08:29,075 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:08:29,076 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:08:29,076 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:08:29,078 - main - INFO - ================================================================================
2025-12-29 23:08:29,080 - main - INFO - 
2025-12-29 23:08:33,015 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:08:33,038 - main - INFO - 
2025-12-29 23:08:33,039 - main - INFO - ================================================================================
2025-12-29 23:08:33,039 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:08:33,039 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:08:33,039 - main - INFO - ================================================================================
2025-12-29 23:08:33,040 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:08:33,040 - main - INFO -   Upload Directory: uploads
2025-12-29 23:08:33,040 - main - INFO -   Max File Size: 20MB
2025-12-29 23:08:33,040 - main - INFO - ================================================================================
2025-12-29 23:08:33,040 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:08:33,041 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:08:33,041 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:08:33,068 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:08:33,073 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:08:33,073 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:08:33,073 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:08:33,074 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:08:33,074 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:08:33,104 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:08:33,106 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:08:33,108 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:08:33,115 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:08:33,116 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:08:33,118 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:08:33,118 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:08:33,119 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:08:33,135 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:08:33,135 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:08:33,135 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:08:33,146 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:08:33,152 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:08:33,152 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:08:33,152 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:08:33,159 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:08:33,168 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:08:33,169 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:08:33,169 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:08:33,169 - main - INFO - 
2025-12-29 23:08:33,169 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:08:33,169 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:08:33,170 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:08:33,170 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:08:33,170 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:08:33,170 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:08:33,170 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:08:33,170 - main - INFO - 
2025-12-29 23:08:33,171 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:08:33,171 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:08:33,171 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:08:33,171 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:08:33,171 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:08:33,172 - main - INFO - 
2025-12-29 23:08:33,172 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:08:33,172 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:08:33,172 - main - INFO -        - No manual section generation
2025-12-29 23:08:33,172 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:08:33,172 - main - INFO - 
2025-12-29 23:08:33,172 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:08:33,173 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:08:33,173 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:08:33,173 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:08:33,173 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:08:33,173 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:08:33,174 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:08:33,174 - main - INFO - 
2025-12-29 23:08:33,174 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:08:33,174 - main - INFO -      Main:
2025-12-29 23:08:33,175 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:08:33,175 - main - INFO - 
2025-12-29 23:08:33,175 - main - INFO -      Retrieval:
2025-12-29 23:08:33,175 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:08:33,175 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:08:33,176 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:08:33,176 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:08:33,177 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:08:33,180 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:08:33,180 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:08:33,180 - main - INFO - 
2025-12-29 23:08:33,181 - main - INFO -      Management:
2025-12-29 23:08:33,181 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:08:33,181 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:08:33,182 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:08:33,183 - main - INFO - 
2025-12-29 23:08:33,183 - main - INFO -      Documents (MongoDB):
2025-12-29 23:08:33,183 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:08:33,183 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:08:33,183 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:08:33,184 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:08:33,184 - main - INFO - 
2025-12-29 23:08:33,184 - main - INFO -      Diagnostics & Health:
2025-12-29 23:08:33,184 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:08:33,184 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:08:33,185 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:08:33,185 - main - INFO - 
2025-12-29 23:08:33,185 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:08:33,185 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:08:33,185 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:08:33,186 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:08:33,186 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:08:33,186 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:08:33,186 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:08:33,186 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:08:33,186 - main - INFO - 
2025-12-29 23:08:33,187 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:08:33,187 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:08:33,187 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:08:33,187 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:08:33,187 - main - INFO -      4. No re-upload needed!
2025-12-29 23:08:33,187 - main - INFO - 
2025-12-29 23:08:33,188 - main - INFO - ================================================================================
2025-12-29 23:08:33,188 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:08:33,188 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:08:33,188 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:08:33,188 - main - INFO - ================================================================================
2025-12-29 23:08:33,188 - main - INFO - 
2025-12-29 23:08:33,189 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:09:07,934 - main - INFO - 
2025-12-29 23:09:07,935 - main - INFO - ================================================================================
2025-12-29 23:09:07,935 - main - INFO -   üõë Shutting down application...
2025-12-29 23:09:07,936 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:09:07,936 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:09:07,937 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:09:07,938 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:09:07,939 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:09:07,939 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:09:07,940 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:09:07,940 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:09:07,941 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:09:07,941 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:09:07,942 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:09:07,942 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:09:07,942 - main - INFO - ================================================================================
2025-12-29 23:09:07,943 - main - INFO - 
2025-12-29 23:09:13,266 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:09:13,290 - main - INFO - 
2025-12-29 23:09:13,291 - main - INFO - ================================================================================
2025-12-29 23:09:13,291 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:09:13,291 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:09:13,291 - main - INFO - ================================================================================
2025-12-29 23:09:13,292 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:09:13,292 - main - INFO -   Upload Directory: uploads
2025-12-29 23:09:13,292 - main - INFO -   Max File Size: 20MB
2025-12-29 23:09:13,292 - main - INFO - ================================================================================
2025-12-29 23:09:13,293 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:09:13,293 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:09:13,293 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:09:13,322 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:09:13,327 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:09:13,328 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:09:13,328 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:09:13,329 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:09:13,331 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:09:13,341 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:09:13,342 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:09:13,344 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:09:13,349 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:09:13,349 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:09:13,350 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:09:13,350 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:09:13,350 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:09:13,358 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:09:13,358 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:09:13,359 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:09:13,373 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:09:13,376 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:09:13,377 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:09:13,377 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:09:13,389 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:09:13,400 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:09:13,401 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:09:13,401 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:09:13,401 - main - INFO - 
2025-12-29 23:09:13,402 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:09:13,402 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:09:13,402 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:09:13,402 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:09:13,403 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:09:13,403 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:09:13,403 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:09:13,404 - main - INFO - 
2025-12-29 23:09:13,404 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:09:13,404 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:09:13,404 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:09:13,404 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:09:13,405 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:09:13,405 - main - INFO - 
2025-12-29 23:09:13,405 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:09:13,405 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:09:13,406 - main - INFO -        - No manual section generation
2025-12-29 23:09:13,406 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:09:13,406 - main - INFO - 
2025-12-29 23:09:13,406 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:09:13,406 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:09:13,407 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:09:13,407 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:09:13,407 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:09:13,407 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:09:13,408 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:09:13,408 - main - INFO - 
2025-12-29 23:09:13,408 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:09:13,408 - main - INFO -      Main:
2025-12-29 23:09:13,409 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:09:13,409 - main - INFO - 
2025-12-29 23:09:13,409 - main - INFO -      Retrieval:
2025-12-29 23:09:13,410 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:09:13,410 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:09:13,411 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:09:13,412 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:09:13,413 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:09:13,415 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:09:13,417 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:09:13,417 - main - INFO - 
2025-12-29 23:09:13,417 - main - INFO -      Management:
2025-12-29 23:09:13,418 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:09:13,418 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:09:13,418 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:09:13,419 - main - INFO - 
2025-12-29 23:09:13,419 - main - INFO -      Documents (MongoDB):
2025-12-29 23:09:13,420 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:09:13,420 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:09:13,421 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:09:13,421 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:09:13,421 - main - INFO - 
2025-12-29 23:09:13,422 - main - INFO -      Diagnostics & Health:
2025-12-29 23:09:13,422 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:09:13,423 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:09:13,423 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:09:13,423 - main - INFO - 
2025-12-29 23:09:13,424 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:09:13,424 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:09:13,424 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:09:13,424 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:09:13,425 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:09:13,425 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:09:13,425 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:09:13,425 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:09:13,426 - main - INFO - 
2025-12-29 23:09:13,426 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:09:13,426 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:09:13,426 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:09:13,426 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:09:13,427 - main - INFO -      4. No re-upload needed!
2025-12-29 23:09:13,427 - main - INFO - 
2025-12-29 23:09:13,427 - main - INFO - ================================================================================
2025-12-29 23:09:13,427 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:09:13,427 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:09:13,427 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:09:13,428 - main - INFO - ================================================================================
2025-12-29 23:09:13,428 - main - INFO - 
2025-12-29 23:09:13,428 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:09:23,402 - main - INFO - 
2025-12-29 23:09:23,402 - main - INFO - ================================================================================
2025-12-29 23:09:23,403 - main - INFO -   üõë Shutting down application...
2025-12-29 23:09:23,404 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:09:23,404 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:09:23,405 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:09:23,405 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:09:23,406 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:09:23,406 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:09:23,408 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:09:23,408 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:09:23,410 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:09:23,412 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:09:23,413 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:09:23,414 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:09:23,414 - main - INFO - ================================================================================
2025-12-29 23:09:23,415 - main - INFO - 
2025-12-29 23:09:27,684 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:09:27,705 - main - INFO - 
2025-12-29 23:09:27,705 - main - INFO - ================================================================================
2025-12-29 23:09:27,705 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:09:27,705 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:09:27,706 - main - INFO - ================================================================================
2025-12-29 23:09:27,706 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:09:27,706 - main - INFO -   Upload Directory: uploads
2025-12-29 23:09:27,706 - main - INFO -   Max File Size: 20MB
2025-12-29 23:09:27,706 - main - INFO - ================================================================================
2025-12-29 23:09:27,707 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:09:27,707 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:09:27,707 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:09:27,735 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:09:27,740 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:09:27,741 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:09:27,741 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:09:27,741 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:09:27,742 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:09:27,753 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:09:27,754 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:09:27,755 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:09:27,757 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:09:27,757 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:09:27,758 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:09:27,758 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:09:27,758 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:09:27,801 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:09:27,801 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:09:27,801 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:09:27,808 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:09:27,814 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:09:27,815 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:09:27,816 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:09:27,847 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:09:27,853 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:09:27,853 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:09:27,853 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:09:27,854 - main - INFO - 
2025-12-29 23:09:27,854 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:09:27,854 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:09:27,854 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:09:27,855 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:09:27,855 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:09:27,855 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:09:27,855 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:09:27,855 - main - INFO - 
2025-12-29 23:09:27,856 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:09:27,856 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:09:27,856 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:09:27,856 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:09:27,856 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:09:27,857 - main - INFO - 
2025-12-29 23:09:27,857 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:09:27,857 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:09:27,857 - main - INFO -        - No manual section generation
2025-12-29 23:09:27,857 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:09:27,857 - main - INFO - 
2025-12-29 23:09:27,858 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:09:27,858 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:09:27,858 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:09:27,858 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:09:27,858 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:09:27,859 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:09:27,859 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:09:27,859 - main - INFO - 
2025-12-29 23:09:27,859 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:09:27,860 - main - INFO -      Main:
2025-12-29 23:09:27,860 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:09:27,861 - main - INFO - 
2025-12-29 23:09:27,863 - main - INFO -      Retrieval:
2025-12-29 23:09:27,863 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:09:27,863 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:09:27,864 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:09:27,864 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:09:27,864 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:09:27,864 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:09:27,865 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:09:27,865 - main - INFO - 
2025-12-29 23:09:27,865 - main - INFO -      Management:
2025-12-29 23:09:27,865 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:09:27,866 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:09:27,866 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:09:27,866 - main - INFO - 
2025-12-29 23:09:27,866 - main - INFO -      Documents (MongoDB):
2025-12-29 23:09:27,867 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:09:27,867 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:09:27,867 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:09:27,867 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:09:27,867 - main - INFO - 
2025-12-29 23:09:27,868 - main - INFO -      Diagnostics & Health:
2025-12-29 23:09:27,868 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:09:27,868 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:09:27,868 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:09:27,868 - main - INFO - 
2025-12-29 23:09:27,868 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:09:27,869 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:09:27,869 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:09:27,869 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:09:27,869 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:09:27,869 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:09:27,870 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:09:27,870 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:09:27,870 - main - INFO - 
2025-12-29 23:09:27,870 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:09:27,870 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:09:27,871 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:09:27,871 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:09:27,871 - main - INFO -      4. No re-upload needed!
2025-12-29 23:09:27,871 - main - INFO - 
2025-12-29 23:09:27,871 - main - INFO - ================================================================================
2025-12-29 23:09:27,871 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:09:27,872 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:09:27,872 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:09:27,872 - main - INFO - ================================================================================
2025-12-29 23:09:27,872 - main - INFO - 
2025-12-29 23:09:27,872 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:09:27,929 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 23:09:27,930 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-29 23:09:27,934 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:09:27,935 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:09:27,937 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:09:27,946 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:09:27,947 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:09:27,952 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:10:07,922 - main - INFO - 
2025-12-29 23:10:07,922 - main - INFO - ================================================================================
2025-12-29 23:10:07,922 - main - INFO -   üõë Shutting down application...
2025-12-29 23:10:07,923 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:10:07,924 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:10:07,925 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:10:07,925 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:10:07,926 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:10:07,926 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:10:07,927 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:10:07,928 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:10:07,928 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:10:07,929 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:10:07,929 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:10:07,930 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:10:07,930 - main - INFO - ================================================================================
2025-12-29 23:10:07,930 - main - INFO - 
2025-12-29 23:10:11,803 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:10:11,824 - main - INFO - 
2025-12-29 23:10:11,825 - main - INFO - ================================================================================
2025-12-29 23:10:11,825 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:10:11,825 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:10:11,825 - main - INFO - ================================================================================
2025-12-29 23:10:11,825 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:10:11,826 - main - INFO -   Upload Directory: uploads
2025-12-29 23:10:11,826 - main - INFO -   Max File Size: 20MB
2025-12-29 23:10:11,827 - main - INFO - ================================================================================
2025-12-29 23:10:11,829 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:10:11,830 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:10:11,832 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:10:11,883 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:10:11,899 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:10:11,900 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:10:11,901 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:10:11,901 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:10:11,902 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:10:11,918 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:10:11,919 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:10:11,921 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:10:11,923 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:10:11,923 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:10:11,924 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:10:11,924 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:10:11,924 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:10:11,936 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:10:11,936 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:10:11,937 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:10:11,946 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:10:11,951 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:10:11,951 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:10:11,951 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:10:11,958 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:10:11,967 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:10:11,967 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:10:11,967 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:10:11,967 - main - INFO - 
2025-12-29 23:10:11,968 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:10:11,968 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:10:11,968 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:10:11,969 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:10:11,969 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:10:11,969 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:10:11,969 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:10:11,969 - main - INFO - 
2025-12-29 23:10:11,970 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:10:11,970 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:10:11,970 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:10:11,970 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:10:11,970 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:10:11,971 - main - INFO - 
2025-12-29 23:10:11,971 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:10:11,971 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:10:11,971 - main - INFO -        - No manual section generation
2025-12-29 23:10:11,971 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:10:11,972 - main - INFO - 
2025-12-29 23:10:11,972 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:10:11,972 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:10:11,972 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:10:11,972 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:10:11,972 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:10:11,973 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:10:11,973 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:10:11,973 - main - INFO - 
2025-12-29 23:10:11,973 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:10:11,973 - main - INFO -      Main:
2025-12-29 23:10:11,973 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:10:11,974 - main - INFO - 
2025-12-29 23:10:11,974 - main - INFO -      Retrieval:
2025-12-29 23:10:11,974 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:10:11,974 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:10:11,974 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:10:11,974 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:10:11,975 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:10:11,975 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:10:11,975 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:10:11,975 - main - INFO - 
2025-12-29 23:10:11,975 - main - INFO -      Management:
2025-12-29 23:10:11,975 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:10:11,976 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:10:11,976 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:10:11,977 - main - INFO - 
2025-12-29 23:10:11,978 - main - INFO -      Documents (MongoDB):
2025-12-29 23:10:11,979 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:10:11,979 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:10:11,980 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:10:11,980 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:10:11,980 - main - INFO - 
2025-12-29 23:10:11,980 - main - INFO -      Diagnostics & Health:
2025-12-29 23:10:11,981 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:10:11,981 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:10:11,981 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:10:11,982 - main - INFO - 
2025-12-29 23:10:11,982 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:10:11,982 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:10:11,982 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:10:11,983 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:10:11,983 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:10:11,983 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:10:11,983 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:10:11,983 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:10:11,983 - main - INFO - 
2025-12-29 23:10:11,984 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:10:11,984 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:10:11,984 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:10:11,984 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:10:11,984 - main - INFO -      4. No re-upload needed!
2025-12-29 23:10:11,985 - main - INFO - 
2025-12-29 23:10:11,985 - main - INFO - ================================================================================
2025-12-29 23:10:11,985 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:10:11,985 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:10:11,986 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:10:11,986 - main - INFO - ================================================================================
2025-12-29 23:10:11,986 - main - INFO - 
2025-12-29 23:10:11,986 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:10:27,210 - main - INFO - üì• GET /api/comparisons
2025-12-29 23:10:27,220 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 23:10:27,221 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 23:10:27,227 - app.services.mongodb_service_enhanced - INFO - üìä Found 4 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 23:10:27,227 - app.api.routes - INFO - ‚úÖ Found 4 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 23:10:27,231 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 23:10:29,262 - main - INFO - 
2025-12-29 23:10:29,263 - main - INFO - ================================================================================
2025-12-29 23:10:29,263 - main - INFO -   üõë Shutting down application...
2025-12-29 23:10:29,265 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:10:29,265 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:10:29,266 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:10:29,267 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:10:29,268 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:10:29,268 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:10:29,269 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:10:29,269 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:10:29,270 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:10:29,270 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:10:29,271 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:10:29,271 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:10:29,271 - main - INFO - ================================================================================
2025-12-29 23:10:29,271 - main - INFO - 
2025-12-29 23:10:32,933 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 23:10:32,951 - main - INFO - 
2025-12-29 23:10:32,951 - main - INFO - ================================================================================
2025-12-29 23:10:32,951 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 23:10:32,951 - main - INFO -   Production-Ready Complete Integration
2025-12-29 23:10:32,951 - main - INFO - ================================================================================
2025-12-29 23:10:32,952 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 23:10:32,952 - main - INFO -   Upload Directory: uploads
2025-12-29 23:10:32,952 - main - INFO -   Max File Size: 20MB
2025-12-29 23:10:32,952 - main - INFO - ================================================================================
2025-12-29 23:10:32,953 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 23:10:32,953 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 23:10:32,953 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 23:10:32,983 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 23:10:32,988 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 23:10:32,988 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 23:10:32,988 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 23:10:32,989 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 23:10:32,989 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 23:10:32,998 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 23:10:32,999 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 23:10:33,002 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 23:10:33,004 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 23:10:33,004 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 23:10:33,005 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 23:10:33,005 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 23:10:33,005 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 23:10:33,034 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 23:10:33,034 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 23:10:33,035 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 23:10:33,074 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 23:10:33,078 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 23:10:33,078 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 23:10:33,078 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 23:10:33,086 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 23:10:33,090 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 23:10:33,090 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 23:10:33,091 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 23:10:33,091 - main - INFO - 
2025-12-29 23:10:33,091 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 23:10:33,091 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 23:10:33,091 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 23:10:33,092 - main - INFO -        - Separates warranties from extensions
2025-12-29 23:10:33,092 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 23:10:33,092 - main - INFO -        - Correct deductible tier detection
2025-12-29 23:10:33,092 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 23:10:33,092 - main - INFO - 
2025-12-29 23:10:33,093 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 23:10:33,093 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 23:10:33,093 - main - INFO -        - Identifies unique items per provider
2025-12-29 23:10:33,093 - main - INFO -        - Transparent scoring methodology
2025-12-29 23:10:33,093 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 23:10:33,093 - main - INFO - 
2025-12-29 23:10:33,094 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 23:10:33,094 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 23:10:33,094 - main - INFO -        - No manual section generation
2025-12-29 23:10:33,094 - main - INFO -        - Complete MongoDB integration
2025-12-29 23:10:33,094 - main - INFO - 
2025-12-29 23:10:33,095 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 23:10:33,095 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 23:10:33,095 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 23:10:33,095 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 23:10:33,095 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 23:10:33,096 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 23:10:33,096 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 23:10:33,096 - main - INFO - 
2025-12-29 23:10:33,096 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 23:10:33,096 - main - INFO -      Main:
2025-12-29 23:10:33,096 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 23:10:33,097 - main - INFO - 
2025-12-29 23:10:33,097 - main - INFO -      Retrieval:
2025-12-29 23:10:33,097 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 23:10:33,097 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 23:10:33,097 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 23:10:33,097 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 23:10:33,098 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 23:10:33,098 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 23:10:33,098 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 23:10:33,098 - main - INFO - 
2025-12-29 23:10:33,098 - main - INFO -      Management:
2025-12-29 23:10:33,098 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 23:10:33,099 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 23:10:33,099 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 23:10:33,099 - main - INFO - 
2025-12-29 23:10:33,099 - main - INFO -      Documents (MongoDB):
2025-12-29 23:10:33,099 - main - INFO -        GET  /api/documents                All documents
2025-12-29 23:10:33,099 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 23:10:33,099 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 23:10:33,100 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 23:10:33,100 - main - INFO - 
2025-12-29 23:10:33,100 - main - INFO -      Diagnostics & Health:
2025-12-29 23:10:33,100 - main - INFO -        GET  /api/health                   System health
2025-12-29 23:10:33,100 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 23:10:33,101 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 23:10:33,101 - main - INFO - 
2025-12-29 23:10:33,101 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 23:10:33,101 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 23:10:33,101 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 23:10:33,101 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 23:10:33,102 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 23:10:33,102 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 23:10:33,102 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 23:10:33,102 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 23:10:33,102 - main - INFO - 
2025-12-29 23:10:33,102 - main - INFO -   üéØ WORKFLOW:
2025-12-29 23:10:33,103 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 23:10:33,103 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 23:10:33,103 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 23:10:33,103 - main - INFO -      4. No re-upload needed!
2025-12-29 23:10:33,103 - main - INFO - 
2025-12-29 23:10:33,103 - main - INFO - ================================================================================
2025-12-29 23:10:33,104 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 23:10:33,104 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 23:10:33,104 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 23:10:33,104 - main - INFO - ================================================================================
2025-12-29 23:10:33,104 - main - INFO - 
2025-12-29 23:10:33,105 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 23:11:05,318 - main - INFO - 
2025-12-29 23:11:05,318 - main - INFO - ================================================================================
2025-12-29 23:11:05,318 - main - INFO -   üõë Shutting down application...
2025-12-29 23:11:05,319 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 23:11:05,320 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 23:11:05,320 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 23:11:05,321 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 23:11:05,321 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 23:11:05,322 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 23:11:05,322 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 23:11:05,322 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 23:11:05,323 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 23:11:05,323 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 23:11:05,324 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 23:11:05,324 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 23:11:05,324 - main - INFO - ================================================================================
2025-12-29 23:11:05,324 - main - INFO - 
