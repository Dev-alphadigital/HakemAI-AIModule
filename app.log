    2025-12-26 20:07:48,607 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:07:48,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:07:48,610 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:07:48,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:07:48,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:07:48,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:07:48,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:07:48,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:18,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:18,307 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:18,308 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:18,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:48,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:48,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:48,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:48,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:48,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:48,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:09:30,303 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:09:30,304 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:09:30,306 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:09:30,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:09:30,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:09:30,313 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:10:30,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:10:30,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:10:30,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:10:30,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:10:30,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:10:30,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:30,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:30,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:30,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:30,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:30,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:30,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:48,547 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:48,549 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:48,553 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:48,559 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:48,559 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:48,565 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:12:18,240 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:18,240 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:18,242 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:18,244 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:18,244 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:18,246 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:12:48,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:48,609 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:48,610 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:48,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:48,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:48,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:13:18,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:13:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:13:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:13:18,304 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:13:18,304 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:13:18,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:14:19,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:14:19,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:14:19,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:14:19,624 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:14:19,624 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:14:19,626 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:15:20,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:15:20,605 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:15:20,606 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:15:20,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:15:20,610 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:15:20,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:21,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:21,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:21,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:21,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:21,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:21,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:48,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:48,294 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:48,296 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:48,299 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:48,300 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:48,302 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:17:18,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:17:18,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:17:18,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:17:18,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:17:18,607 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:17:18,609 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:18:19,608 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:18:19,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:18:19,611 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:18:19,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:18:19,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:18:19,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:18:19,614 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:18:19,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:19:06,376 - main - INFO - 
2025-12-26 20:19:06,378 - main - INFO - ================================================================================
2025-12-26 20:19:06,410 - main - INFO -   üõë Shutting down application...
2025-12-26 20:19:06,412 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,466 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:19:06,473 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,506 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:19:06,525 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:19:06,539 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:19:06,541 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:19:06,541 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:19:06,542 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:19:06,544 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:19:06,544 - main - INFO - ================================================================================
2025-12-26 20:19:06,544 - main - INFO - 
2025-12-26 20:19:10,918 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:19:10,941 - main - INFO - 
2025-12-26 20:19:10,941 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:19:10,942 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:19:10,942 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:19:10,942 - main - INFO -   Upload Directory: uploads
2025-12-26 20:19:10,942 - main - INFO -   Max File Size: 20MB
2025-12-26 20:19:10,943 - main - INFO - ================================================================================
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:19:10,944 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:10,978 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:19:10,982 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:19:10,983 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:19:10,983 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,984 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,986 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:19:10,986 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:19:11,010 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:19:11,010 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:19:11,010 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:11,024 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:19:11,026 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:19:11,027 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:19:11,027 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:19:11,071 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:19:11,075 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:19:11,076 - main - INFO - 
2025-12-26 20:19:11,076 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:19:11,076 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:19:11,076 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:19:11,076 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:19:11,077 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:19:11,077 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:19:11,077 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:19:11,077 - main - INFO - 
2025-12-26 20:19:11,077 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:19:11,078 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:19:11,078 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:19:11,078 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:19:11,078 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:19:11,078 - main - INFO - 
2025-12-26 20:19:11,078 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:19:11,079 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:19:11,079 - main - INFO -        - No manual section generation
2025-12-26 20:19:11,079 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:19:11,079 - main - INFO - 
2025-12-26 20:19:11,079 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:19:11,079 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:19:11,080 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:19:11,081 - main - INFO -      Main:
2025-12-26 20:19:11,081 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:19:11,081 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -      Retrieval:
2025-12-26 20:19:11,081 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:19:11,082 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:19:11,082 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:19:11,082 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:19:11,082 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:19:11,082 - main - INFO - 
2025-12-26 20:19:11,083 - main - INFO -      Management:
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:19:11,083 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:19:11,084 - main - INFO - 
2025-12-26 20:19:11,084 - main - INFO -      Documents (MongoDB):
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:19:11,085 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:19:11,085 - main - INFO - 
2025-12-26 20:19:11,085 - main - INFO -      Diagnostics & Health:
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:19:11,086 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:19:11,086 - main - INFO - 
2025-12-26 20:19:11,086 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:19:11,087 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:19:11,088 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:19:11,090 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:19:11,090 - main - INFO - 
2025-12-26 20:19:11,090 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:19:11,090 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:19:11,091 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:19:11,091 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:19:11,091 - main - INFO -      4. No re-upload needed!
2025-12-26 20:19:11,091 - main - INFO - 
2025-12-26 20:19:11,091 - main - INFO - ================================================================================
2025-12-26 20:19:11,092 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:19:11,092 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:19:11,092 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:19:11,092 - main - INFO - ================================================================================
2025-12-26 20:19:11,093 - main - INFO - 
2025-12-26 20:19:11,093 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-26 20:19:21,593 - main - INFO - üì• OPTIONS /api/admin/activity-logs
2025-12-26 20:19:21,596 - main - INFO - üì§ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:19:21,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,625 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,628 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,635 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,637 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,643 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 20:19:21,650 - main - INFO - üì• GET /api/admin/activity-logs
2025-12-26 20:19:21,655 - app.api.routes - INFO - üìä Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:19:21,657 - app.api.routes - INFO - ‚úÖ Activity logs service already connected
2025-12-26 20:19:21,658 - app.api.routes - INFO - üîç Calling activity_logs_service.get_activity_logs...
2025-12-26 20:19:21,666 - app.api.routes - INFO - ‚úÖ Retrieved 5 logs (total: 5)
2025-12-26 20:19:21,669 - main - INFO - üì§ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 20:19:21,677 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,678 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,679 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,679 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,686 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,687 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,693 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:19:52,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:52,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:52,299 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,300 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:52,302 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:52,302 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:52,306 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:22,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:20:22,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:20:22,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:20:22,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:20:22,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:20:22,620 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:29,780 - main - INFO - 
2025-12-26 20:20:29,780 - main - INFO - ================================================================================
2025-12-26 20:20:29,780 - main - INFO -   üõë Shutting down application...
2025-12-26 20:20:29,781 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:20:29,782 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:20:29,782 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:20:29,783 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:20:29,784 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:20:29,784 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:20:29,786 - main - INFO - ================================================================================
2025-12-26 20:20:29,786 - main - INFO - 
2025-12-26 20:20:34,207 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:20:34,227 - main - INFO - 
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,228 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:20:34,228 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,229 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:20:34,229 - main - INFO -   Upload Directory: uploads
2025-12-26 20:20:34,229 - main - INFO -   Max File Size: 20MB
2025-12-26 20:20:34,229 - main - INFO - ================================================================================
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:20:34,230 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,261 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:20:34,269 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:20:34,270 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:20:34,270 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,270 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,271 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:20:34,272 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:20:34,279 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:20:34,279 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:20:34,280 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,293 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:20:34,298 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:20:34,298 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:20:34,298 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:20:34,310 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:20:34,313 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:20:34,314 - main - INFO - 
2025-12-26 20:20:34,314 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:20:34,314 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:20:34,315 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:20:34,315 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:20:34,315 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:20:34,315 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:20:34,316 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:20:34,316 - main - INFO - 
2025-12-26 20:20:34,316 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:20:34,316 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:20:34,317 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:20:34,317 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:20:34,318 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:20:34,319 - main - INFO - 
2025-12-26 20:20:34,319 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:20:34,319 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:20:34,320 - main - INFO -        - No manual section generation
2025-12-26 20:20:34,320 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:20:34,320 - main - INFO - 
2025-12-26 20:20:34,321 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:20:34,322 - main - INFO - 
2025-12-26 20:20:34,322 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:20:34,323 - main - INFO -      Main:
2025-12-26 20:20:34,323 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:20:34,323 - main - INFO - 
2025-12-26 20:20:34,323 - main - INFO -      Retrieval:
2025-12-26 20:20:34,323 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:20:34,324 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:20:34,324 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:20:34,324 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:20:34,324 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:20:34,325 - main - INFO - 
2025-12-26 20:20:34,325 - main - INFO -      Management:
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:20:34,325 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:20:34,326 - main - INFO - 
2025-12-26 20:20:34,326 - main - INFO -      Documents (MongoDB):
2025-12-26 20:20:34,326 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:20:34,327 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:20:34,327 - main - INFO - 
2025-12-26 20:20:34,327 - main - INFO -      Diagnostics & Health:
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:20:34,328 - main - INFO - 
2025-12-26 20:20:34,328 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:20:34,329 - main - INFO - 
2025-12-26 20:20:34,330 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:20:34,330 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:20:34,330 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:20:34,330 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:20:34,330 - main - INFO -      4. No re-upload needed!
2025-12-26 20:20:34,331 - main - INFO - 
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,331 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:20:34,331 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:20:34,331 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,332 - main - INFO - 
2025-12-26 20:20:34,332 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-26 20:20:52,856 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:20:52,860 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:20:52,862 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:20:52,862 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:52,865 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:52,871 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:20:52,878 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:20:52,879 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:20:52,883 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 20:21:22,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:21:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:21:22,301 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:21:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:22,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:21:22,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:21:22,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:21:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:21:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:21:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:21:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:21:52,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:21:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:21:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:21:52,621 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:21:52,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:22:22,304 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:22:22,305 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:22:22,306 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:22:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:22,308 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:22,309 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:22:22,314 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:22:22,315 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:22:22,316 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:22:52,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:22:52,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:22:52,620 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:22:52,621 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:52,622 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:22:52,622 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:22:52,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:22:52,629 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:22:52,636 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:23:22,300 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:23:22,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:23:22,302 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:23:22,303 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:22,305 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:23:22,311 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:23:22,312 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:23:22,317 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:23:52,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:23:52,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:23:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:23:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:23:52,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:23:52,623 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:23:52,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:23:52,625 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:24:22,309 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:24:22,310 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:24:22,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:24:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:22,313 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:22,313 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:24:22,319 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:24:22,320 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:24:22,324 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:24:52,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:24:52,612 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:24:52,612 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:24:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:24:52,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:24:52,615 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:24:52,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:24:52,617 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:25:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:25:22,306 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:25:22,307 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:25:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:25:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:25:22,308 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:25:22,310 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:25:22,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:25:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:26:23,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:26:23,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:26:23,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:26:23,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:26:23,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:26:23,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:26:23,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:26:23,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:26:23,619 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:27:24,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:27:24,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:27:24,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:27:24,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:27:24,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:27:24,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:27:24,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:27:24,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:27:24,631 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:28:25,616 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:28:25,617 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:28:25,621 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:28:25,622 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:28:25,623 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:28:25,623 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:28:25,624 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:28:25,624 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:28:25,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:28:25,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:28:25,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:29:26,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:29:26,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:29:26,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:29:26,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:29:26,614 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:29:26,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:29:26,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:29:26,617 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:29:26,618 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:30:27,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:30:27,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:30:27,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:30:27,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:30:27,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:30:27,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:30:27,623 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:30:27,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:30:27,626 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:31:28,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:31:28,612 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:31:28,612 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:31:28,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:31:28,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:31:28,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:31:28,615 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:31:28,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:31:28,617 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:32:29,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:32:29,620 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:32:29,621 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:32:29,621 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:32:29,622 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:32:29,623 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:32:29,628 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:32:29,629 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:32:29,634 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:33:30,631 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:33:30,633 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:33:30,633 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:33:30,634 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:33:30,635 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:33:30,635 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:33:30,638 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:33:30,639 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:33:30,641 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:34:30,304 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:34:30,305 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:34:30,306 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:34:30,306 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:34:30,306 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:34:30,307 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:34:30,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:34:30,309 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:34:30,312 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:35:30,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:35:30,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:35:30,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:35:30,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:35:30,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:35:30,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:35:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:35:30,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:35:30,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:36:30,299 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:36:30,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:36:30,301 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:36:30,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:36:30,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:36:30,302 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:36:30,304 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:36:30,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:36:30,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:37:30,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:37:30,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:37:30,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:37:30,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:37:30,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:37:30,619 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:37:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:37:30,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:37:30,631 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:38:30,309 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:38:30,311 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:38:30,327 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:38:30,328 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:38:30,329 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:38:30,329 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:38:30,331 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:38:30,331 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:38:30,335 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:38:30,335 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:38:30,338 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:39:30,618 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:39:30,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:39:30,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:39:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:39:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:39:30,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:39:30,622 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:39:30,622 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:39:30,624 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:40:30,314 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:40:30,316 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:40:30,318 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:40:30,319 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:40:30,320 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:40:30,320 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:40:30,324 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:40:30,325 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:40:30,328 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:41:30,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:41:30,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:41:30,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:41:30,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:41:30,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:41:30,617 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:41:30,619 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:41:30,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:41:30,620 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:42:30,308 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:42:30,309 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:42:30,309 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:42:30,309 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:42:30,309 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:42:30,310 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:42:30,312 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:42:30,312 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:42:30,315 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:43:30,612 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:43:30,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:43:30,613 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:43:30,613 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:43:30,614 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:43:30,614 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:43:30,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:43:30,617 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:43:30,621 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:44:30,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:44:30,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:44:30,303 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:44:30,303 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:30,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:30,304 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:44:30,308 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:44:30,308 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:44:30,310 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:44:52,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:44:52,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:44:52,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:44:52,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:52,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:44:52,622 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:44:52,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:44:52,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:44:52,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:45:22,295 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:45:22,296 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:45:22,296 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:45:22,296 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:22,297 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:22,297 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:45:22,299 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:45:22,300 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:45:22,301 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:45:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:45:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:45:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:45:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:45:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:45:52,621 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:45:52,622 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:45:52,625 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:46:22,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:46:22,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:46:22,298 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:46:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:22,299 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:22,299 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:46:22,302 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:46:22,302 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:46:22,306 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:46:52,660 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:46:52,661 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:46:52,662 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:46:52,662 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:52,663 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:46:52,663 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:46:52,669 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:46:52,670 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:46:52,676 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:47:22,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:47:22,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:47:22,302 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:47:22,302 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:22,303 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:22,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:47:22,306 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:47:22,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:47:22,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:47:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:47:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:47:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:47:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:47:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:47:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:47:52,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:47:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:48:22,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:48:22,293 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:48:22,294 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:48:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:22,295 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:48:22,297 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:48:22,297 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:48:22,300 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:48:52,612 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:48:52,612 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:48:52,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:48:52,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:48:52,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:48:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:52,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:48:52,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:48:52,624 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:48:52,625 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:48:52,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:49:22,307 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:49:22,309 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:49:22,309 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:49:22,310 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:22,311 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:22,312 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:49:22,318 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:49:22,318 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:49:22,322 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:49:52,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:49:52,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:49:52,615 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:49:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:49:52,617 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:49:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:49:52,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:49:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:50:22,303 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:50:22,303 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:50:22,304 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:50:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:50:22,304 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:50:22,304 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:50:22,306 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:50:22,307 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:50:22,308 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:51:23,602 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:51:23,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:51:23,604 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:51:23,605 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:51:23,605 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:51:23,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:51:23,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:51:23,608 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:51:23,610 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:52:24,605 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:52:24,606 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:52:24,607 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:52:24,607 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:52:24,608 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:52:24,608 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:52:24,612 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:52:24,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:52:24,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:53:25,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:53:25,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:53:25,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:53:25,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:53:25,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:53:25,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:53:25,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:53:25,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:53:25,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:54:26,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:54:26,619 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:54:26,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:54:26,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:54:26,621 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:54:26,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:54:26,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:54:26,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:54:26,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:55:27,611 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:55:27,613 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:55:27,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:55:27,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:55:27,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:55:27,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:55:27,622 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:55:27,623 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:55:27,630 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:56:28,617 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:56:28,618 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:56:28,619 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:56:28,620 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:56:28,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:56:28,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:56:28,627 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:56:28,628 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:56:28,632 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:57:29,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:57:29,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:57:29,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:57:29,618 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:57:29,619 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:57:29,620 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:57:29,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:57:29,626 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:57:29,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:58:30,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:58:30,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:58:30,618 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:58:30,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:58:30,620 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:58:30,621 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:58:30,626 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:58:30,627 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:58:30,628 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:59:30,305 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:59:30,305 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:59:30,310 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:59:30,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:59:30,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:59:30,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:59:30,312 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:59:30,312 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:59:30,315 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:59:30,316 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:59:30,318 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:00:30,607 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:00:30,607 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:00:30,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:00:30,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:00:30,608 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:00:30,608 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:00:30,610 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:00:30,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:00:30,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:01:27,651 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:01:27,659 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:01:27,662 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:01:27,663 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:27,663 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:27,664 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:01:27,675 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:01:27,698 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:01:27,712 - main - INFO - üì§ GET /api/comparisons - 200 - 0.06s
2025-12-26 21:01:52,606 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:01:52,606 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:01:52,607 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:01:52,607 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:52,607 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:01:52,607 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:01:52,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:01:52,609 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:01:52,611 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:02:22,310 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:02:22,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:02:22,312 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:02:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:22,313 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:22,313 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:02:22,317 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:02:22,317 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:02:22,319 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:02:52,607 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:02:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:02:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:02:52,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:02:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:02:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:02:52,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:02:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:03:22,299 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:03:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:03:22,300 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:03:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:22,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:03:22,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:03:22,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:03:22,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:03:52,629 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:03:52,633 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:03:52,649 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:03:52,650 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:52,664 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:03:52,668 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:03:52,675 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:03:52,677 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:03:52,681 - main - INFO - üì§ GET /api/comparisons - 200 - 0.05s
2025-12-26 21:04:02,769 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:02,774 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:02,775 - main - INFO - üì§ GET /api/posts/ - 404 - 0.01s
2025-12-26 21:04:02,777 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:02,790 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:02,793 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:02,793 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:02,795 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:03,130 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,183 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,197 - main - INFO - üì§ GET /api/posts/ - 404 - 0.07s
2025-12-26 21:04:03,202 - main - INFO - üì§ GET /api/categories/ - 404 - 0.02s
2025-12-26 21:04:03,272 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,312 - main - INFO - üì§ GET /api/posts/ - 404 - 0.04s
2025-12-26 21:04:03,319 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,367 - main - INFO - üì§ GET /api/categories/ - 404 - 0.05s
2025-12-26 21:04:03,578 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,579 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,580 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:03,581 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:03,592 - main - INFO - üì• GET /api/posts/
2025-12-26 21:04:03,593 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:04:03,596 - main - INFO - üì• GET /api/categories/
2025-12-26 21:04:03,598 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:04:22,291 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:04:22,292 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:04:22,292 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:04:22,292 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:22,292 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:22,293 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:04:22,295 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:04:22,295 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:04:22,296 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:04:52,631 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:04:52,632 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:04:52,632 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:04:52,632 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:52,633 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:04:52,633 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:04:52,638 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:04:52,639 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:04:52,642 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:05:22,327 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:05:22,329 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:05:22,330 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:05:22,331 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:22,332 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:22,334 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:05:22,340 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:05:22,346 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:05:22,353 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 21:05:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:05:52,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:05:52,610 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:05:52,610 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:52,610 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:05:52,611 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:05:52,613 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:05:52,613 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:05:52,615 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:06:22,292 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:06:22,292 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:06:22,293 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:06:22,293 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:22,293 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:22,293 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:06:22,295 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:06:22,295 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:06:22,297 - main - INFO - üì§ GET /api/comparisons - 200 - 0.00s
2025-12-26 21:06:52,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:06:52,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:06:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:06:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:06:52,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:06:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:06:52,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:06:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:07:22,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:07:22,294 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:07:22,294 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:07:22,294 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:22,295 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:22,295 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:07:22,297 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:07:22,297 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:07:22,299 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:07:52,606 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:07:52,608 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:07:52,608 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:07:52,608 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:52,609 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:07:52,609 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:07:52,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:07:52,611 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:07:52,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:08:16,280 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:08:16,281 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:08:22,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:08:22,311 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:08:22,311 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:08:22,312 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:08:22,314 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:08:22,317 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:08:22,331 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:08:22,343 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:08:22,349 - main - INFO - üì§ GET /api/comparisons - 200 - 0.05s
2025-12-26 21:08:59,946 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:08:59,994 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:08:59,998 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:00,000 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:00,002 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:00,026 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:00,053 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:00,065 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:00,072 - main - INFO - üì§ GET /api/comparisons - 200 - 0.13s
2025-12-26 21:09:22,314 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:09:22,316 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:09:22,316 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:22,316 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:22,317 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:22,317 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:22,325 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:22,327 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:22,332 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 21:09:52,609 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 21:09:52,610 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 21:09:52,614 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:09:52,616 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:09:52,617 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:09:52,617 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:52,618 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:09:52,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:09:52,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:09:52,621 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:09:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:10:22,300 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:10:22,300 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:10:22,300 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:10:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:22,301 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:22,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:10:22,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:10:22,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:10:22,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:10:52,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:10:52,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:10:52,611 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:10:52,612 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:52,613 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:10:52,613 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:10:52,619 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:10:52,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:10:52,627 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 21:11:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:11:22,306 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:11:22,307 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:11:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:22,307 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:22,307 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:11:22,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:11:22,309 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:11:22,311 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:11:52,615 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:11:52,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:11:52,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:11:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:52,616 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:11:52,616 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:11:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:11:52,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:11:52,623 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:12:22,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:12:22,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:12:22,298 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:12:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:22,298 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:22,299 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:12:22,301 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:12:22,301 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:12:22,305 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:12:52,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:12:52,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:12:52,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:12:52,614 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:52,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:12:52,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:12:52,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:12:52,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:12:52,621 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:13:22,306 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:13:22,307 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:13:22,308 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:13:22,308 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:22,309 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:22,309 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:13:22,313 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:13:22,313 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:13:22,316 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:13:37,166 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:37,166 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:39,913 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:39,914 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:40,322 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:40,323 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:40,514 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:40,515 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:41,418 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:41,419 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:41,593 - main - INFO - üì• POST /api/auth/register/
2025-12-26 21:13:41,594 - main - INFO - üì§ POST /api/auth/register/ - 404 - 0.00s
2025-12-26 21:13:52,603 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:13:52,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:13:52,604 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:13:52,604 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:52,604 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:13:52,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:13:52,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:13:52,607 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:13:52,609 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:14:30,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 21:14:30,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 21:14:30,299 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 21:14:30,299 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:14:30,300 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 21:14:30,300 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 21:14:30,303 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 21:14:30,305 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 21:14:30,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 21:14:38,656 - main - INFO - üì• GET /api/posts/
2025-12-26 21:14:38,657 - main - INFO - üì• GET /api/categories/
2025-12-26 21:14:38,659 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:14:38,661 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:14:38,673 - main - INFO - üì• GET /api/posts/
2025-12-26 21:14:38,675 - main - INFO - üì§ GET /api/posts/ - 404 - 0.00s
2025-12-26 21:14:38,677 - main - INFO - üì• GET /api/categories/
2025-12-26 21:14:38,678 - main - INFO - üì§ GET /api/categories/ - 404 - 0.00s
2025-12-26 21:15:26,616 - main - INFO - 
2025-12-26 21:15:26,618 - main - INFO - ================================================================================
2025-12-26 21:15:26,622 - main - INFO -   üõë Shutting down application...
2025-12-26 21:15:26,625 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 21:15:26,625 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 21:15:26,626 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 21:15:26,629 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 21:15:26,631 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 21:15:26,632 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 21:15:26,642 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 21:15:26,680 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 21:15:26,685 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 21:15:26,719 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 21:15:26,763 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 21:15:26,775 - main - INFO - ================================================================================
2025-12-26 21:15:26,781 - main - INFO - 
2025-12-29 19:06:33,568 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:06:33,585 - main - INFO - 
2025-12-29 19:06:33,585 - main - INFO - ================================================================================
2025-12-29 19:06:33,585 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:06:33,586 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:06:33,586 - main - INFO - ================================================================================
2025-12-29 19:06:33,586 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:06:33,586 - main - INFO -   Upload Directory: uploads
2025-12-29 19:06:33,587 - main - INFO -   Max File Size: 20MB
2025-12-29 19:06:33,587 - main - INFO - ================================================================================
2025-12-29 19:06:33,587 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:06:33,588 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:06:33,588 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:06:34,016 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:06:34,047 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:06:34,049 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:06:34,050 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:06:34,050 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:06:34,051 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:06:34,081 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:06:34,089 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:06:34,096 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:06:34,242 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:06:34,242 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:06:34,242 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:06:34,242 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:06:34,243 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:06:34,286 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:06:34,287 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:06:34,287 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:06:34,321 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:06:34,335 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:06:34,336 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:06:34,337 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:06:34,372 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:06:34,380 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:06:34,380 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:06:34,380 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:06:34,381 - main - INFO - 
2025-12-29 19:06:34,381 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:06:34,381 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:06:34,381 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:06:34,382 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:06:34,382 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:06:34,382 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:06:34,382 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:06:34,383 - main - INFO - 
2025-12-29 19:06:34,383 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:06:34,383 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:06:34,383 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:06:34,384 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:06:34,384 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:06:34,384 - main - INFO - 
2025-12-29 19:06:34,385 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:06:34,385 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:06:34,385 - main - INFO -        - No manual section generation
2025-12-29 19:06:34,385 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:06:34,386 - main - INFO - 
2025-12-29 19:06:34,386 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:06:34,387 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:06:34,388 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:06:34,389 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:06:34,389 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:06:34,390 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:06:34,390 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:06:34,390 - main - INFO - 
2025-12-29 19:06:34,391 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:06:34,391 - main - INFO -      Main:
2025-12-29 19:06:34,391 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:06:34,392 - main - INFO - 
2025-12-29 19:06:34,392 - main - INFO -      Retrieval:
2025-12-29 19:06:34,392 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:06:34,392 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:06:34,393 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:06:34,393 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:06:34,393 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:06:34,393 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:06:34,394 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:06:34,394 - main - INFO - 
2025-12-29 19:06:34,394 - main - INFO -      Management:
2025-12-29 19:06:34,394 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:06:34,394 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:06:34,395 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:06:34,395 - main - INFO - 
2025-12-29 19:06:34,395 - main - INFO -      Documents (MongoDB):
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:06:34,396 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:06:34,396 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:06:34,397 - main - INFO - 
2025-12-29 19:06:34,397 - main - INFO -      Diagnostics & Health:
2025-12-29 19:06:34,397 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:06:34,397 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:06:34,398 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:06:34,398 - main - INFO - 
2025-12-29 19:06:34,398 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:06:34,398 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:06:34,398 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:06:34,399 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:06:34,400 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:06:34,400 - main - INFO - 
2025-12-29 19:06:34,400 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:06:34,400 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:06:34,400 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:06:34,401 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:06:34,401 - main - INFO -      4. No re-upload needed!
2025-12-29 19:06:34,401 - main - INFO - 
2025-12-29 19:06:34,401 - main - INFO - ================================================================================
2025-12-29 19:06:34,402 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:06:34,402 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:06:34,402 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:06:34,403 - main - INFO - ================================================================================
2025-12-29 19:06:34,403 - main - INFO - 
2025-12-29 19:06:34,403 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:07:05,415 - main - INFO - üì• GET /docs
2025-12-29 19:07:05,416 - main - INFO - üì§ GET /docs - 200 - 0.00s
2025-12-29 19:07:06,415 - main - INFO - üì• GET /openapi.json
2025-12-29 19:07:06,466 - main - INFO - üì§ GET /openapi.json - 200 - 0.05s
2025-12-29 19:07:25,213 - main - INFO - üì• GET /docs
2025-12-29 19:07:25,215 - main - INFO - üì§ GET /docs - 200 - 0.00s
2025-12-29 19:07:25,776 - main - INFO - üì• GET /openapi.json
2025-12-29 19:07:25,778 - main - INFO - üì§ GET /openapi.json - 200 - 0.00s
2025-12-29 19:08:13,806 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 19:08:13,822 - app.api.routes - INFO - üîç Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-29 19:08:13,822 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:08:13,824 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:08:13,827 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:08:13,838 - app.services.user_subscription_service - INFO - ‚úÖ Found user: abdul (wasay7757@gmail.com)
2025-12-29 19:08:13,843 - app.api.routes - INFO - ‚úÖ User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Remaining comparisons: 245
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-29 19:08:13,844 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-29 19:08:13,844 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:08:13,845 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_fc700523859f (2 files)
2025-12-29 19:08:13,845 - app.api.routes - INFO - üìä Initialized progress tracking: job_fc700523859f
2025-12-29 19:08:13,846 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:08:13,846 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:13,846 - app.api.routes - INFO - ======================================================================
2025-12-29 19:08:13,848 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí a8cfbbf9ef9d4048b1a049f94cec5d26.pdf (464206 bytes)
2025-12-29 19:08:13,849 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:13,850 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\a8cfbbf9ef9d4048b1a049f94cec5d26.pdf
2025-12-29 19:08:13,850 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:08:13,851 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:13,967 - app.api.routes - INFO - ======================================================================
2025-12-29 19:08:13,970 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 398c788967864635bba85b1024acc34c.pdf (175401 bytes)
2025-12-29 19:08:13,970 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,010 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\398c788967864635bba85b1024acc34c.pdf
2025-12-29 19:08:14,012 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 19:08:14,043 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:14,068 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:14,094 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 19:08:14,095 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:08:14,097 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:08:14,098 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:08:14,325 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:08:14,325 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:08:14,931 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,931 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 19:08:14,933 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:08:14,934 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:08:14,934 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 19:08:15,042 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 19:08:15,043 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:08:42,232 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:42,830 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:08:42,830 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:08:42,831 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:08:42,832 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 19:08:42,832 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:42,833 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 19:08:42,838 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:08:42,839 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:08:42,839 - app.services.ai_parser - INFO - üîÑ Rate: '0.38‚Ä∞' ‚Üí '0.38‚Ä∞'
2025-12-29 19:08:42,840 - app.services.ai_parser - INFO - üí∞ Calculated: 594567.88 from SI: 1564652306.28 √ó Rate: 0.38‚Ä∞
2025-12-29 19:08:42,840 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 5 extensions
2025-12-29 19:08:42,841 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:08:48,214 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:48,215 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:08:51,768 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:51,769 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - 
2025-12-29 19:08:51,770 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,771 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 19:08:51,772 - app.services.ai_parser - INFO - üìä Rate: 0.38‚Ä∞
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:08:51,773 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:08:51,774 - app.services.ai_parser - INFO - 
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 19:08:51,775 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:08:51,776 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:08:51,777 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:08:51,796 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: a8cfbbf9ef9d4048b1a049f94cec5d26.pdf ‚Üí 6952d1c328d044533f44388c
2025-12-29 19:08:51,796 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d1c328d044533f44388c
2025-12-29 19:08:51,802 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d1c328d044533f44388d (464206 bytes)
2025-12-29 19:08:51,802 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d1c328d044533f44388d
2025-12-29 19:08:51,802 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:08:58,317 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:08:58,841 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:08:58,841 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:08:58,842 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:08:58,842 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 6 benefits, using fallback...
2025-12-29 19:08:58,849 - app.services.ai_parser - INFO - üìã Fallback extracted 60 benefits from patterns
2025-12-29 19:08:58,850 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 58 total
2025-12-29 19:08:58,850 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 19:08:58,851 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,852 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:08:58,853 - app.services.ai_parser - INFO - üìä Counts: 58 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 19:08:58,854 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:09:05,004 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:05,007 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 82.0
2025-12-29 19:09:06,017 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:06,020 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:09:06,021 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:09:06,021 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:09:06,022 - app.services.ai_parser - INFO - 
2025-12-29 19:09:06,023 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,024 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:09:06,025 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,026 - app.services.ai_parser - INFO - üè¢ Insurer: Chubb Arabia
2025-12-29 19:09:06,026 - app.services.ai_parser - INFO - üë§ Insured: M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üìä Rate: 0.35‚Ä∞
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üéØ Score: 82.0/100
2025-12-29 19:09:06,027 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - 
2025-12-29 19:09:06,028 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Benefits: 58
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Exclusions: 29
2025-12-29 19:09:06,029 - app.services.ai_parser - INFO -    ‚úì Warranties: 9
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:09:06,030 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:09:06,032 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 398c788967864635bba85b1024acc34c.pdf ‚Üí 6952d1d228d044533f44388e
2025-12-29 19:09:06,032 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d1d228d044533f44388e
2025-12-29 19:09:06,037 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d1d228d044533f44388f (175401 bytes)
2025-12-29 19:09:06,038 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d1d228d044533f44388f
2025-12-29 19:09:06,040 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:09:06,041 - app.api.routes - INFO - 
‚úÖ Successfully extracted 2 quotes
2025-12-29 19:09:06,042 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:09:06,042 - app.api.routes - INFO - üîÄ Generating comparison for 2 quotes
2025-12-29 19:09:06,043 - app.api.routes - INFO - ======================================================================
2025-12-29 19:09:06,043 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 2 quotes
2025-12-29 19:09:06,043 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:09:06,044 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 19:09:06,045 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 19:09:06,045 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:09:06,046 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 19:09:06,046 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:09:06,047 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:09:06,051 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:06,056 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:09:06,057 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:09:06,058 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:09:06,059 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:09:06,059 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:09:06,060 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:09:06,061 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:09:06,061 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "care_custody_control": "SR 2,500,000 any one occurrence & in aggregate",
    "srcc_malicious_damage": "Limited to 25% of the location sum insured",
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and
2025-12-29 19:09:06,065 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,065 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:09:06,066 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:09:06,067 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:09:06,068 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:09:06,069 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,069 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:09:06,070 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:09:06,071 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:09:06,071 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,072 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 19:09:06,073 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 19:09:06,075 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 19:09:06,075 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:09:06,076 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:09:06,080 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Chubb Arabia
2025-12-29 19:09:06,083 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:09:06,085 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:09:06,086 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:06,086 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:09:06,087 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:09:06,087 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:09:06,088 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:09:06,089 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:09:06,092 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "CHUBB",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 40M to SR 100M",
        "deductible": "5%, min SR 100,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductibl
2025-12-29 19:09:06,097 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,097 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:09:06,098 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:09:06,098 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:09:06,099 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:09:06,100 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:09:06,100 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:09:06,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:09:06,102 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:09:06,103 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:09:06,104 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:09:06,105 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Chubb Arabia
2025-12-29 19:09:06,105 - app.services.ai_ranker - INFO - 
üìä Chubb Arabia:
2025-12-29 19:09:06,109 - app.services.ai_ranker - INFO -    Warranties: 9
2025-12-29 19:09:06,111 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:09:06,112 - app.services.ai_ranker - INFO -    Exclusions: 29
2025-12-29 19:09:06,113 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:09:06,113 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:09:06,308 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:09:06,309 - app.services.ai_ranker - INFO -       ‚Ä¢ Bookkeeping warrantee
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO -       ‚Ä¢ Hazardous good warranty
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted no workshop operations on insured premises
2025-12-29 19:09:06,310 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Chubb Arabia
2025-12-29 19:09:06,499 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 3
2025-12-29 19:09:06,499 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:09:06,500 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted strict adherence of local/police/Civil Defense authorities for all saf...
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO -       ‚Ä¢ Premium Payment Warranty 100% at inception
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO -       ‚Ä¢ Civil Defense Certificate clause
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:09:06,501 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=82.55
2025-12-29 19:09:06,502 - app.services.ai_ranker - INFO - üìä Chubb Arabia: Hakim Score=80.0 (Baseline), Weighted Score=84.23
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 19:09:06,503 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 19:09:16,902 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:16,906 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 19:09:16,907 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 19:09:20,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:09:20,905 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Chubb Arabia: Chubb Arabia stands out as the best insurance provider due to its superior score of 84.2/100 and a c...
2025-12-29 19:09:20,906 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 19:09:20,908 - app.api.routes - INFO - üè¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-29 19:09:20,908 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 19:09:20,908 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 19:09:20,909 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 2
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:09:20,910 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Chubb Arabia
2025-12-29 19:09:20,911 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:09:20,912 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,077 bytes
2025-12-29 19:09:20,916 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 32,405 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Data table: 15,438 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,408 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 37,696 bytes
2025-12-29 19:09:20,917 - app.services.mongodb_service_enhanced - INFO -    Total document: 186,731 bytes
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-29 19:09:20,918 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-29 19:09:20,919 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-29 19:09:20,920 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-29 19:09:20,921 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-29 19:09:20,922 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 19:09:20,924 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-29 19:09:20,924 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:09:20,926 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:20,927 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 19:09:20,943 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,944 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6952d1e05a37704a1c0a83f5
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 19:09:20,946 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 19:09:20,947 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-29 19:09:20,948 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:09:20,949 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 19:09:20,950 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 19:09:20,951 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 19:09:20,951 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:09:20,952 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6952d1e05a37704a1c0a83f5
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 19:09:20,952 - app.api.routes - INFO -    Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,953 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,953 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-29 19:09:20,959 - app.services.user_subscription_service - INFO - ‚úÖ Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,960 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,960 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:09:20,960 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 19:09:20,961 - app.api.routes - INFO - ======================================================================
2025-12-29 19:09:20,961 - app.api.routes - INFO - üìä Comparison ID: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,961 - app.api.routes - INFO - üë§ User ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,962 - app.api.routes - INFO - üìÑ Files Processed: 2/2
2025-12-29 19:09:20,962 - app.api.routes - INFO - üíæ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-29 19:09:20,962 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,962 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:09:20,963 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:09:20,964 - app.services.user_subscription_service - INFO - ‚úÖ Found user: abdul (wasay7757@gmail.com)
2025-12-29 19:09:20,967 - app.api.routes - INFO - üìä Remaining comparisons: 244
2025-12-29 19:09:20,968 - app.api.routes - INFO - ======================================================================

2025-12-29 19:09:20,968 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_fc700523859f ‚Üí comparison_id: cmp_1767035293_832bad0a731c
2025-12-29 19:09:20,975 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 693ae751e9ed6d204b2fc06e
2025-12-29 19:09:20,977 - main - INFO - üì§ POST /api/compare-quotes - 200 - 67.17s
2025-12-29 19:10:08,395 - main - INFO - üì• GET /api/comparison/cmp_1767035293_832bad0a731c/pdf
2025-12-29 19:10:08,395 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035293_832bad0a731c, type: both
2025-12-29 19:10:08,399 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,399 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:08,400 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:10:08,400 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:08,401 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:10:08,402 - app.services.pdf_generator_service - ERROR - ‚ùå Error building strategic memo: cannot access local variable 'rows' where it is not associated with a value
2025-12-29 19:10:08,405 - app.services.pdf_generator_service - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 460, in generate_strategic_memo_pdf
    story.extend(self._build_strategic_memo(comparison_data))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 726, in _build_strategic_memo
    for row in rows:
               ^^^^
UnboundLocalError: cannot access local variable 'rows' where it is not associated with a value

2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,648 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:08,649 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:10:08,661 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:10:08,662 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:10:08,667 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:10:08,668 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:10:08,670 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:10:08,672 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:10:08,674 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:10:08,674 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:10:08,677 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:10:08,850 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:08,852 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035293_832bad0a731c_20251229_191008.pdf (126894 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035293_832bad0a731c_20251229_191008.pdf (153437 bytes)
2025-12-29 19:10:08,854 - main - INFO - üì§ GET /api/comparison/cmp_1767035293_832bad0a731c/pdf - 200 - 0.46s
2025-12-29 19:10:49,646 - main - INFO - üì• GET /api/comparison/cmp_1767035293_832bad0a731c/pdf/detailed-comparison
2025-12-29 19:10:49,647 - app.api.routes - INFO - üìÑ Generating Detailed Comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,649 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,649 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:10:49,650 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:10:49,650 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:10:49,651 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:10:49,673 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:10:49,682 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:10:49,690 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:10:49,693 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:10:49,696 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:10:49,698 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:10:49,700 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:10:49,700 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:10:49,702 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:10:49,908 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035293_832bad0a731c
2025-12-29 19:10:49,908 - app.api.routes - INFO - ‚úÖ Detailed Comparison PDF generated: HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035293_832bad0a731c_20251229_191049.pdf (153437 bytes)
2025-12-29 19:10:49,909 - main - INFO - üì§ GET /api/comparison/cmp_1767035293_832bad0a731c/pdf/detailed-comparison - 200 - 0.26s
2025-12-29 19:12:49,938 - main - INFO - üì• OPTIONS /api/activity-logs/create
2025-12-29 19:12:49,939 - main - INFO - üì§ OPTIONS /api/activity-logs/create - 200 - 0.00s
2025-12-29 19:12:49,945 - main - INFO - üì• POST /api/activity-logs/create
2025-12-29 19:12:49,947 - app.api.routes - INFO - üìù Creating activity log: login for user 694edeacc98c1096e3582e38
2025-12-29 19:12:49,949 - app.api.routes - INFO - ‚úÖ Activity log created: 6952d2b128d044533f443891
2025-12-29 19:12:49,951 - main - INFO - üì§ POST /api/activity-logs/create - 200 - 0.01s
2025-12-29 19:12:50,938 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,949 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,951 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,954 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,967 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,972 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-29 19:12:50,978 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,980 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,983 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:50,984 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:50,986 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:50,989 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:50,989 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:50,993 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:50,995 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:50,996 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:50,997 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,001 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,001 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,004 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:51,007 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:51,009 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:51,011 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,014 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,014 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,016 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:12:51,019 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:12:51,020 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:12:51,022 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:12:51,028 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:12:51,028 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:12:51,030 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:13:06,349 - main - INFO - üì• OPTIONS /api/compare-quotes
2025-12-29 19:13:06,350 - main - INFO - üì§ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-29 19:13:06,352 - main - INFO - üì• POST /api/compare-quotes
2025-12-29 19:13:06,367 - app.api.routes - INFO - üîç Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-29 19:13:06,367 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 19:13:06,368 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:13:06,368 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:13:06,369 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 19:13:06,371 - app.api.routes - INFO - ‚úÖ User 694edeacc98c1096e3582e38 can perform comparison
2025-12-29 19:13:06,371 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-29 19:13:06,371 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-29 19:13:06,372 - app.api.routes - INFO -    - Files uploaded: 4
2025-12-29 19:13:06,372 - app.api.routes - INFO - üÜî Generated comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:13:06,372 - app.services.progress_tracker - INFO - üìä Progress initialized for job: job_79bcf79b34f4 (4 files)
2025-12-29 19:13:06,373 - app.api.routes - INFO - üìä Initialized progress tracking: job_79bcf79b34f4
2025-12-29 19:13:06,375 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,376 - app.api.routes - INFO - üìÑ Processing: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,376 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,377 - app.api.routes - INFO - üíæ Saved file: Pricing Plans - Hakim AI.pdf ‚Üí 0a7cf71bc1f44cf0a57d9c0c7783a525.pdf (75894 bytes)
2025-12-29 19:13:06,378 - app.api.routes - INFO - üìñ Extracting text from: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,378 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,378 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\0a7cf71bc1f44cf0a57d9c0c7783a525.pdf
2025-12-29 19:13:06,379 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,379 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,422 - app.services.pdf_extractor - INFO - Successfully extracted 1805 characters from 2 pages
2025-12-29 19:13:06,422 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 52164b33cae544559aa3e2fea5af515f.pdf (464206 bytes)
2025-12-29 19:13:06,422 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,423 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,423 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,424 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,423 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\52164b33cae544559aa3e2fea5af515f.pdf
2025-12-29 19:13:06,498 - app.services.pdf_extractor - INFO - Successfully extracted 14935 characters from 7 pages
2025-12-29 19:13:06,498 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Chubb.pdf ‚Üí f0a5ec97aab045d098a7fe8204b7d4c8.pdf (175401 bytes)
2025-12-29 19:13:06,498 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:06,499 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\f0a5ec97aab045d098a7fe8204b7d4c8.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - üìÑ Processing: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,499 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:06,553 - app.services.pdf_extractor - INFO - Successfully extracted 14268 characters from 7 pages
2025-12-29 19:13:06,554 - app.api.routes - INFO - üíæ Saved file: AL Salama Hospital - PAR - Liva.pdf ‚Üí 04f9c0bc466d48adba03149e0ea62127.pdf (331157 bytes)
2025-12-29 19:13:06,554 - app.api.routes - INFO - üìñ Extracting text from: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,554 - app.api.routes - INFO - ü§ñ Parsing with AI: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,555 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\04f9c0bc466d48adba03149e0ea62127.pdf
2025-12-29 19:13:06,555 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:06,581 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from text: Al Rajhi Takaful
2025-12-29 19:13:06,599 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Al Rajhi Takaful
2025-12-29 19:13:06,613 - app.services.ai_parser - INFO - üë§ Insured (Customer): Unknown Insured
2025-12-29 19:13:06,625 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,625 - app.services.pdf_extractor - INFO - Successfully extracted 18289 characters from 8 pages
2025-12-29 19:13:06,626 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:13:06,633 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:13:06,633 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,637 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-29 19:13:06,637 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Tawuniya
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,638 - app.services.ai_parser - INFO - üìã Detected format: GENERIC
2025-12-29 19:13:06,829 - app.services.ai_parser - INFO - üéØ Pre-extracted 1 sublimits
2025-12-29 19:13:06,829 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,831 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Chubb Arabia (pattern: \bchubb\b)
2025-12-29 19:13:06,832 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Chubb Arabia
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üë§ Insured (Customer): M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,833 - app.services.ai_parser - INFO - üìã Detected format: CHUBB
2025-12-29 19:13:06,914 - app.services.ai_parser - INFO - üéØ Pre-extracted 3 sublimits
2025-12-29 19:13:06,914 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:06,918 - app.api.routes - INFO - ü§ñ Parsing with AI: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,919 - app.services.ai_parser - INFO - üîç Stage 1: Entity identification for AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:06,920 - app.services.ai_parser - INFO - ‚úÖ Detected insurer from filename: Liva Insurance (pattern: \bliva\b)
2025-12-29 19:13:06,920 - app.services.ai_parser - INFO - üè¢ Insurer (Insurance Company): Liva Insurance
2025-12-29 19:13:06,921 - app.services.ai_parser - INFO - üë§ Insured (Customer): No.  Description
2025-12-29 19:13:06,921 - app.services.ai_parser - INFO - üîç Stage 2: Document format detection
2025-12-29 19:13:06,922 - app.services.ai_parser - INFO - üìã Detected format: LIVA
2025-12-29 19:13:07,032 - app.services.ai_parser - INFO - üéØ Pre-extracted 7 sublimits
2025-12-29 19:13:07,033 - app.services.ai_parser - INFO - üîç Stage 3: Comprehensive extraction
2025-12-29 19:13:30,827 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:32,047 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:32,047 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:32,048 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:32,049 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 exclusions, using fallback...
2025-12-29 19:13:32,055 - app.services.ai_parser - INFO - üö´ Fallback extracted 1 exclusions from patterns
2025-12-29 19:13:32,056 - app.services.ai_parser - INFO - ‚úÖ Enhanced exclusions: 3 total
2025-12-29 19:13:32,056 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 19:13:32,057 - app.services.ai_parser - INFO - üìã Fallback extracted 0 benefits from patterns
2025-12-29 19:13:32,058 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:32,058 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:32,058 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Could not normalize rate: EXACT rate text
2025-12-29 19:13:32,059 - app.services.ai_parser - INFO - üîÑ Rate: 'EXACT rate text' ‚Üí 'EXACT rate text'
2025-12-29 19:13:32,059 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,060 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,060 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:32,061 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:32,061 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:32,062 - app.services.ai_parser - INFO - üìä Counts: 2 benefits, 3 exclusions, 6 warranties, 3 extensions
2025-12-29 19:13:32,062 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:32,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:32,216 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:32,216 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:32,217 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:32,217 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Deductible missing/invalid, using fallback...
2025-12-29 19:13:32,217 - app.services.ai_parser - INFO - ‚úÖ Extracted deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:32,217 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 0 benefits, using fallback...
2025-12-29 19:13:32,222 - app.services.ai_parser - INFO - üìã Fallback extracted 45 benefits from patterns
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 44 total
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:32,223 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üîÑ Rate: '0.38‚Ä∞' ‚Üí '0.38‚Ä∞'
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üí∞ Calculated: 594567.88 from SI: 1564652306.28 √ó Rate: 0.38‚Ä∞
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles (fallback): MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:32,224 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:32,225 - app.services.ai_parser - INFO - üìä Counts: 44 benefits, 24 exclusions, 13 warranties, 3 extensions
2025-12-29 19:13:32,225 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:36,798 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:37,560 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:38,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:38,410 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:38,472 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:38,722 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:38,723 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:38,723 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - 
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:38,724 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,725 - app.services.ai_parser - INFO - üè¢ Insurer: Tawuniya
2025-12-29 19:13:38,725 - app.services.ai_parser - INFO - üë§ Insured: M/s.  Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-29 19:13:38,726 - app.services.ai_parser - INFO - üí∞ Premium: SAR 594,567.87
2025-12-29 19:13:38,726 - app.services.ai_parser - INFO - üìä Rate: 0.38‚Ä∞
2025-12-29 19:13:38,727 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:38,728 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:38,728 - app.services.ai_parser - INFO - üîß Deductible: MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000
2025-12-29 19:13:38,729 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:38,730 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:38,730 - app.services.ai_parser - INFO - 
2025-12-29 19:13:38,731 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:38,731 - app.services.ai_parser - INFO -    ‚úì Benefits: 44
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Exclusions: 24
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Warranties: 13
2025-12-29 19:13:38,732 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:38,733 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:38,733 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:38,737 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 52164b33cae544559aa3e2fea5af515f.pdf ‚Üí 6952d2e228d044533f443892
2025-12-29 19:13:38,738 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2e228d044533f443892
2025-12-29 19:13:38,748 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d2e228d044533f443893 (464206 bytes)
2025-12-29 19:13:38,749 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Tawuniya.pdf ‚Üí 6952d2e228d044533f443893
2025-12-29 19:13:38,750 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Tawuniya.pdf
2025-12-29 19:13:39,181 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:39,185 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:39,186 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 6 benefits, using fallback...
2025-12-29 19:13:39,189 - app.services.ai_parser - INFO - üìã Fallback extracted 60 benefits from patterns
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 59 total
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:39,190 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:39,191 - app.services.ai_parser - INFO - üîÑ Rate: '0.35%o' ‚Üí '0.35‚Ä∞'
2025-12-29 19:13:39,191 - app.services.ai_parser - INFO - üí∞ Calculated: 547628.31 from SI: 1564652306.0 √ó Rate: 0.35%o
2025-12-29 19:13:39,192 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,192 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,193 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:39,193 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:39,194 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:39,194 - app.services.ai_parser - INFO - üìä Counts: 59 benefits, 29 exclusions, 9 warranties, 5 extensions
2025-12-29 19:13:39,195 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:39,725 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:40,261 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:40,263 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:40,264 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:40,265 - app.services.ai_parser - INFO - 
2025-12-29 19:13:40,266 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,267 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:40,267 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,268 - app.services.ai_parser - INFO - üè¢ Insurer: Al Rajhi Takaful
2025-12-29 19:13:40,269 - app.services.ai_parser - INFO - üë§ Insured: Unknown Insured
2025-12-29 19:13:40,271 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:13:40,272 - app.services.ai_parser - INFO - üìä Rate: EXACT rate text
2025-12-29 19:13:40,273 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:40,274 - app.services.ai_parser - INFO - üìè Quality: 83.7/100
2025-12-29 19:13:40,276 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:40,277 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:40,278 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:40,280 - app.services.ai_parser - INFO - 
2025-12-29 19:13:40,281 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:40,282 - app.services.ai_parser - INFO -    ‚úì Benefits: 2
2025-12-29 19:13:40,283 - app.services.ai_parser - INFO -    ‚úì Exclusions: 3
2025-12-29 19:13:40,284 - app.services.ai_parser - INFO -    ‚úì Warranties: 6
2025-12-29 19:13:40,286 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:40,287 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:40,288 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:40,296 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:40,301 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 0a7cf71bc1f44cf0a57d9c0c7783a525.pdf ‚Üí 6952d2e428d044533f443894
2025-12-29 19:13:40,302 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2e428d044533f443894
2025-12-29 19:13:40,312 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952d2e428d044533f443895 (75894 bytes)
2025-12-29 19:13:40,314 - app.api.routes - INFO - ‚úÖ Saved user document: Pricing Plans - Hakim AI.pdf ‚Üí 6952d2e428d044533f443895
2025-12-29 19:13:40,315 - app.api.routes - INFO - ‚úÖ Successfully processed: Pricing Plans - Hakim AI.pdf
2025-12-29 19:13:41,790 - app.services.ai_parser - INFO - ‚úÖ Stage 3: JSON parsed successfully
2025-12-29 19:13:41,790 - app.services.ai_parser - INFO - üîç Stage 3.5: Validation and Fallback
2025-12-29 19:13:41,791 - app.services.ai_parser - INFO - üîç Stage 3.5: Validating and enhancing extraction...
2025-12-29 19:13:41,791 - app.services.ai_parser - WARNING - ‚ö†Ô∏è Only 2 benefits, using fallback...
2025-12-29 19:13:41,794 - app.services.ai_parser - INFO - üìã Fallback extracted 32 benefits from patterns
2025-12-29 19:13:41,795 - app.services.ai_parser - INFO - ‚úÖ Enhanced benefits: 34 total
2025-12-29 19:13:41,796 - app.services.ai_parser - INFO - üîç Stage 4: Extracting subjectivities and binding requirements
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üßÆ Stage 5: Calculations and tier detection
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üîÑ Rate: '0.379%o on Total Sum insured of SAR 1,564,652,306.28' ‚Üí '0.379‚Ä∞'
2025-12-29 19:13:41,797 - app.services.ai_parser - INFO - üí∞ Calculated: 593003.22 from SI: 1564652306.28 √ó Rate: 0.379%o on Total Sum insured of SAR 1,564,652,306.28
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úì Deductible tier: >500M applies (SI: 1564.7M)
2025-12-29 19:13:41,798 - app.services.ai_parser - INFO - ‚úÖ Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:41,799 - app.services.ai_parser - INFO - üéØ Stage 6: Analysis and scoring
2025-12-29 19:13:41,801 - app.services.ai_parser - INFO - üìä Counts: 34 benefits, 26 exclusions, 7 warranties, 3 extensions
2025-12-29 19:13:41,801 - app.services.ai_parser - INFO - ‚è≥ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-29 19:13:45,415 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:45,425 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:46,221 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:46,223 - app.services.ai_parser - INFO - ‚úÖ Stage 4: Subjectivities extracted
2025-12-29 19:13:46,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:46,910 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:46,911 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:46,912 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:46,912 - app.services.ai_parser - INFO - 
2025-12-29 19:13:46,913 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,913 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üè¢ Insurer: Liva Insurance
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üë§ Insured: No.  Description
2025-12-29 19:13:46,914 - app.services.ai_parser - INFO - üí∞ Premium: SAR 593,003.00
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üìä Rate: 0.379‚Ä∞
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:46,915 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date of indication
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - üíº Brokerage: N/A
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - 
2025-12-29 19:13:46,916 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:46,917 - app.services.ai_parser - INFO -    ‚úì Benefits: 34
2025-12-29 19:13:46,918 - app.services.ai_parser - INFO -    ‚úì Exclusions: 26
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Warranties: 7
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Extensions: 3
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:46,919 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:46,921 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: 04f9c0bc466d48adba03149e0ea62127.pdf ‚Üí 6952d2ea28d044533f443896
2025-12-29 19:13:46,921 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2ea28d044533f443896
2025-12-29 19:13:46,924 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Liva.pdf ‚Üí 6952d2ea28d044533f443897 (331157 bytes)
2025-12-29 19:13:46,925 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Liva.pdf ‚Üí 6952d2ea28d044533f443897
2025-12-29 19:13:46,925 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Liva.pdf
2025-12-29 19:13:47,194 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:47,962 - app.services.ai_parser - INFO - ‚úÖ Stage 6 complete - Score: 80.0
2025-12-29 19:13:47,964 - app.services.ai_parser - INFO - ‚úÖ Parallel stages complete
2025-12-29 19:13:47,965 - app.services.ai_parser - INFO - üì¶ Assembling final data structure
2025-12-29 19:13:47,966 - app.services.ai_parser - INFO - 
2025-12-29 19:13:47,966 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,967 - app.services.ai_parser - INFO - ‚úÖ EXTRACTION COMPLETE - AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:47,968 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,969 - app.services.ai_parser - INFO - üè¢ Insurer: Chubb Arabia
2025-12-29 19:13:47,970 - app.services.ai_parser - INFO - üë§ Insured: M/s. Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan Group
2025-12-29 19:13:47,971 - app.services.ai_parser - INFO - üí∞ Premium: SAR 500,000.00
2025-12-29 19:13:47,971 - app.services.ai_parser - INFO - üìä Rate: 0.35‚Ä∞
2025-12-29 19:13:47,972 - app.services.ai_parser - INFO - üéØ Score: 80.0/100
2025-12-29 19:13:47,972 - app.services.ai_parser - INFO - üìè Quality: 100.0/100
2025-12-29 19:13:47,973 - app.services.ai_parser - INFO - üîß Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-29 19:13:47,974 - app.services.ai_parser - INFO - ‚è∞ Validity: 15 days from date shown
2025-12-29 19:13:47,974 - app.services.ai_parser - INFO - üíº Brokerage: 15%
2025-12-29 19:13:47,975 - app.services.ai_parser - INFO - 
2025-12-29 19:13:47,976 - app.services.ai_parser - INFO - üì¶ Extracted:
2025-12-29 19:13:47,977 - app.services.ai_parser - INFO -    ‚úì Benefits: 59
2025-12-29 19:13:47,978 - app.services.ai_parser - INFO -    ‚úì Exclusions: 29
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Warranties: 9
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Extensions: 5
2025-12-29 19:13:47,979 - app.services.ai_parser - INFO -    ‚úì Subjectivities: 4
2025-12-29 19:13:47,980 - app.services.ai_parser - INFO - ======================================================================
2025-12-29 19:13:47,983 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved individual PDF: f0a5ec97aab045d098a7fe8204b7d4c8.pdf ‚Üí 6952d2eb28d044533f443898
2025-12-29 19:13:47,984 - app.api.routes - INFO - ‚úÖ Saved individual PDF to MongoDB: 6952d2eb28d044533f443898
2025-12-29 19:13:47,987 - app.services.user_documents_service - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d2eb28d044533f443899 (175401 bytes)
2025-12-29 19:13:47,987 - app.api.routes - INFO - ‚úÖ Saved user document: AL Salama Hospital - PAR - Chubb.pdf ‚Üí 6952d2eb28d044533f443899
2025-12-29 19:13:47,988 - app.api.routes - INFO - ‚úÖ Successfully processed: AL Salama Hospital - PAR - Chubb.pdf
2025-12-29 19:13:47,988 - app.api.routes - INFO - 
‚úÖ Successfully extracted 4 quotes
2025-12-29 19:13:47,989 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:13:47,989 - app.api.routes - INFO - üîÄ Generating comparison for 4 quotes
2025-12-29 19:13:47,989 - app.api.routes - INFO - ======================================================================
2025-12-29 19:13:47,990 - app.services.ai_ranker - INFO - üîç Starting comprehensive comparison of 4 quotes
2025-12-29 19:13:47,990 - app.services.ai_ranker - INFO - ‚öñÔ∏è Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-29 19:13:47,993 - app.services.ai_ranker - INFO - üèÜ Hakim Score integration enabled
2025-12-29 19:13:47,994 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:13:47,995 - app.services.ai_ranker - INFO - üîç IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-29 19:13:47,995 - app.services.ai_ranker - INFO - ================================================================================
2025-12-29 19:13:47,996 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:47,996 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-29 19:13:47,997 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:47,997 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:47,998 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:47,998 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:47,999 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:47,999 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,001 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,001 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,002 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,003 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,003 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "fallback_summary": "MD: 5% of claim amount, minimum SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, minimum SR 1,500,000",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {
    "Minimization of losses": "SR 250,000"
  },
  "exclusions_complete": {
    "all_exclusions_list": [
      "Industries Seepage, Pollution and Contamination",
      "Nuclear Risks Exclusion - NMA 1975A",
      "Sabotage and terrorism",
      "Property cyber data exclusion LMA 5401",
      "Clar
2025-12-29 19:13:48,007 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,009 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,014 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,014 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,015 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,016 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,016 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,017 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,018 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,018 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,019 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,019 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,020 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,020 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,021 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,022 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,025 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,026 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,027 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Tawuniya
2025-12-29 19:13:48,028 - app.services.ai_ranker - INFO - 
üìä Tawuniya:
2025-12-29 19:13:48,029 - app.services.ai_ranker - INFO -    Warranties: 13
2025-12-29 19:13:48,030 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,031 - app.services.ai_ranker - INFO -    Exclusions: 24
2025-12-29 19:13:48,031 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,032 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,033 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Al Rajhi Takaful
2025-12-29 19:13:48,033 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,034 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,034 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,035 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,035 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,037 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,037 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,038 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,040 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,042 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,044 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "MD amount",
    "business_interruption": "BI amount",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "14 da
2025-12-29 19:13:48,050 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,051 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,052 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,052 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,053 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,053 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,055 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,056 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,058 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,059 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,059 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,060 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,060 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,061 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,062 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,063 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,064 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,065 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,066 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Al Rajhi Takaful
2025-12-29 19:13:48,067 - app.services.ai_ranker - INFO - 
üìä Al Rajhi Takaful:
2025-12-29 19:13:48,067 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Exclusions: 3
2025-12-29 19:13:48,068 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,069 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,070 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Liva Insurance
2025-12-29 19:13:48,071 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,072 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,073 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,079 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,080 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,081 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension', 'Professional Valuation Report required for property with total Sum Insured exceeding SR40m'], 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers'], 'documentation_required': ['Detailed lists of items covered under gross profit for Business Interruption', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']}
2025-12-29 19:13:48,083 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,085 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,085 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,086 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,089 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "LIVA",
  "sum_insured_breakdown": {
    "material_damage": "SR 1,564,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible
2025-12-29 19:13:48,101 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-29 19:13:48,104 - app.services.ai_ranker - INFO -    ‚úÖ Found 2 items in key 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers']
2025-12-29 19:13:48,110 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'documentation_required': ['Detailed lists of items covered under gross profit for Business Interruption', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']
2025-12-29 19:13:48,112 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,113 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,114 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,115 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,117 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,119 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,120 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,128 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,130 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,131 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,137 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,146 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,147 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,148 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 9
2025-12-29 19:13:48,150 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-29 19:13:48,151 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 9 subjectivities for Liva Insurance
2025-12-29 19:13:48,152 - app.services.ai_ranker - INFO - 
üìä Liva Insurance:
2025-12-29 19:13:48,152 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-29 19:13:48,153 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-29 19:13:48,153 - app.services.ai_ranker - INFO -    Exclusions: 26
2025-12-29 19:13:48,155 - app.services.ai_ranker - INFO -    Subjectivities: 9
2025-12-29 19:13:48,156 - app.services.ai_ranker - INFO - 
============================================================
2025-12-29 19:13:48,161 - app.services.ai_ranker - INFO - üîç EXTRACTING SUBJECTIVITIES for: Chubb Arabia
2025-12-29 19:13:48,162 - app.services.ai_ranker - INFO - ============================================================
2025-12-29 19:13:48,164 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-29 19:13:48,164 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:13:48,165 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-29 19:13:48,166 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-29 19:13:48,166 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-29 19:13:48,168 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-29 19:13:48,169 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-29 19:13:48,169 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-29 19:13:48,170 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-29 19:13:48,171 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "CHUBB",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 40M to SR 100M",
        "deductible": "5%, min SR 100,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductibl
2025-12-29 19:13:48,186 - app.services.ai_ranker - INFO -    ‚úÖ Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,188 - app.services.ai_ranker - INFO -    ‚úÖ Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-29 19:13:48,193 - app.services.ai_ranker - INFO -    ‚úÖ Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-29 19:13:48,194 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities_list': []
2025-12-29 19:13:48,197 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'requirements': []
2025-12-29 19:13:48,198 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'all_subjectivities': []
2025-12-29 19:13:48,199 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in key 'subjectivities': []
2025-12-29 19:13:48,200 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-29 19:13:48,201 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,205 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-29 19:13:48,219 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-29 19:13:48,219 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-29 19:13:48,220 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-29 19:13:48,220 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-29 19:13:48,222 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-29 19:13:48,228 - app.services.ai_ranker - INFO -    ‚úÖ Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-29 19:13:48,234 - app.services.ai_ranker - INFO -    üìä Total unique subjectivities extracted: 12
2025-12-29 19:13:48,236 - app.services.ai_ranker - INFO -    üìù Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-29 19:13:48,237 - app.services.ai_ranker - INFO -    ‚úÖ Extracted 12 subjectivities for Chubb Arabia
2025-12-29 19:13:48,237 - app.services.ai_ranker - INFO - 
üìä Chubb Arabia:
2025-12-29 19:13:48,238 - app.services.ai_ranker - INFO -    Warranties: 9
2025-12-29 19:13:48,239 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-29 19:13:48,253 - app.services.ai_ranker - INFO -    Exclusions: 29
2025-12-29 19:13:48,254 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-29 19:13:48,254 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Tawuniya
2025-12-29 19:13:48,920 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 5
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:13:48,921 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W16) Bookkeeping warrantee
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W22) Hazardous good warranty
2025-12-29 19:13:48,922 - app.services.ai_ranker - INFO -       ‚Ä¢ (W28) warranted no workshop operations on insured premises
2025-12-29 19:13:48,923 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Al Rajhi Takaful
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 0
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 1
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 1
2025-12-29 19:13:48,985 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:48,986 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Liva Insurance
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 1
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 0
2025-12-29 19:13:49,372 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 7
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 9
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:49,373 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted properties in the open and/or open sided sheds are covered against fir...
2025-12-29 19:13:49,374 - app.services.ai_ranker - INFO - 
üîé Analyzing unique items for: Chubb Arabia
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Warranties: 3
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Extensions: 2
2025-12-29 19:13:49,888 - app.services.ai_ranker - INFO -    ‚úì Unique Exclusions: 10
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -    ‚úì Unique Subjectivities: 0
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -    üìù Sample unique warranties:
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -       ‚Ä¢ Warranted strict adherence of local/police/Civil Defense authorities for all saf...
2025-12-29 19:13:49,889 - app.services.ai_ranker - INFO -       ‚Ä¢ Premium Payment Warranty 100% at inception
2025-12-29 19:13:49,890 - app.services.ai_ranker - INFO -       ‚Ä¢ Civil Defense Certificate clause
2025-12-29 19:13:49,890 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-29 19:13:49,891 - app.services.ai_ranker - INFO - ‚úÖ UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-29 19:13:49,891 - app.services.ai_ranker - INFO - ================================================================================

2025-12-29 19:13:49,893 - app.services.ai_ranker - INFO - üìä Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=80.83
2025-12-29 19:13:49,894 - app.services.ai_ranker - WARNING - ‚ö†Ô∏è Al Rajhi Takaful: Invalid rate (0.0), applying penalty score
2025-12-29 19:13:49,896 - app.services.ai_ranker - INFO - üìä Al Rajhi Takaful: Hakim Score=80.0 (Baseline), Weighted Score=64.38
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - üìä Liva Insurance: Hakim Score=84.0 (Solid), Weighted Score=77.39
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - üìä Chubb Arabia: Hakim Score=80.0 (Baseline), Weighted Score=84.23
2025-12-29 19:13:49,898 - app.services.ai_ranker - INFO - ü§ñ Performing weighted ranking with Hakim Score...
2025-12-29 19:13:49,899 - app.services.ai_ranker - INFO - ü§ñ Starting AI ranking analysis (background task)...
2025-12-29 19:13:49,900 - app.services.ai_ranker - INFO - ‚úÖ Weighted ranking with Hakim Score completed
2025-12-29 19:13:59,191 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:13:59,196 - app.services.ai_ranker - INFO - ‚úÖ AI ranking analysis completed
2025-12-29 19:13:59,197 - app.services.ai_ranker - INFO - üî® Building comprehensive comparison structure...
2025-12-29 19:14:01,755 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-29 19:14:01,758 - app.services.ai_ranker - INFO - ‚úÖ Generated reasoning for Chubb Arabia: Chubb Arabia stands out as the best insurance provider with a top rank of #1 and a score of 84.2/100...
2025-12-29 19:14:01,759 - app.services.ai_ranker - INFO - ‚úÖ Comprehensive comparison complete
2025-12-29 19:14:01,760 - app.api.routes - INFO - üè¢ Main user - using user_id as company_id for sub-user access: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO - üíæ Saving COMPLETE comparison data to MongoDB
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 4
2025-12-29 19:14:01,761 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO - üìã Extracted quotes count: 4
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Tawuniya
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:14:01,762 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:14:01,763 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Al Rajhi Takaful
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-29 19:14:01,764 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-29 19:14:01,767 - app.services.mongodb_service_enhanced - INFO - üìä Data sizes:
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Summary: 6,144 bytes
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 48,963 bytes
2025-12-29 19:14:01,768 - app.services.mongodb_service_enhanced - INFO -    Data table: 22,917 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,970 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 60,076 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Total document: 291,468 bytes
2025-12-29 19:14:01,769 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       premium: 4 items
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       rate: 4 items
2025-12-29 19:14:01,770 - app.services.mongodb_service_enhanced - INFO -       score: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       deductible: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       coverage: 4 items
2025-12-29 19:14:01,771 - app.services.mongodb_service_enhanced - INFO -       benefits: 4 items
2025-12-29 19:14:01,772 - app.services.mongodb_service_enhanced - INFO -       exclusions: 4 items
2025-12-29 19:14:01,772 - app.services.mongodb_service_enhanced - INFO -       warranties: 4 items
2025-12-29 19:14:01,773 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 4 items
2025-12-29 19:14:01,774 - app.services.mongodb_service_enhanced - INFO -       conditions: 4 items
2025-12-29 19:14:01,775 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 4 items
2025-12-29 19:14:01,775 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 4 items
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 4 items
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-29 19:14:01,776 - app.services.mongodb_service_enhanced - INFO -       - Count: 4
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:14:01,777 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-29 19:14:01,785 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Saved new comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,785 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 6952d2f95a37704a1c0a83f6
2025-12-29 19:14:01,800 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Verification - Saved document has:
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-29 19:14:01,801 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 4
2025-12-29 19:14:01,802 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 4
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 4
2025-12-29 19:14:01,803 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-29 19:14:01,804 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-29 19:14:01,805 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-29 19:14:01,805 - app.api.routes - INFO - ‚úÖ Saved comparison result to MongoDB: 6952d2f95a37704a1c0a83f6
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Database: hakemAI
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Collection: comparisons
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,806 - app.api.routes - INFO -    User ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,806 - app.api.routes - INFO -    Company ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,809 - app.services.user_subscription_service - INFO - ‚úÖ Unlimited plan - no usage tracking needed for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,810 - app.api.routes - INFO - ‚úÖ Recorded comparison usage for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,810 - app.api.routes - INFO - 
======================================================================
2025-12-29 19:14:01,810 - app.api.routes - INFO - ‚úÖ COMPARISON COMPLETE
2025-12-29 19:14:01,811 - app.api.routes - INFO - ======================================================================
2025-12-29 19:14:01,811 - app.api.routes - INFO - üìä Comparison ID: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,811 - app.api.routes - INFO - üë§ User ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,812 - app.api.routes - INFO - üìÑ Files Processed: 4/4
2025-12-29 19:14:01,812 - app.api.routes - INFO - üíæ Saved to MongoDB: 4 PDFs + 1 comparison
2025-12-29 19:14:01,812 - app.services.user_subscription_service - INFO - üîç Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-29 19:14:01,813 - app.services.user_subscription_service - INFO - üìä Database: hakemAI
2025-12-29 19:14:01,813 - app.services.user_subscription_service - INFO - üìä Collection: users
2025-12-29 19:14:01,816 - app.services.user_subscription_service - INFO - ‚úÖ Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-29 19:14:01,817 - app.api.routes - INFO - üìä Remaining comparisons: -1
2025-12-29 19:14:01,817 - app.api.routes - INFO - ======================================================================

2025-12-29 19:14:01,817 - app.services.progress_tracker - INFO - ‚úÖ Job completed: job_79bcf79b34f4 ‚Üí comparison_id: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:01,818 - app.api.routes - INFO - ‚úÖ Activity logged: comparison_created for user 694edeacc98c1096e3582e38
2025-12-29 19:14:01,821 - main - INFO - üì§ POST /api/compare-quotes - 200 - 55.47s
2025-12-29 19:14:02,069 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,072 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,077 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,085 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,087 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,102 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:14:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,113 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,122 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,123 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,129 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:02,137 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,139 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,142 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,153 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,153 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,162 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:02,172 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:02,173 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:02,176 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:02,182 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:02,183 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:02,189 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:14:22,435 - main - INFO - üì• OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:14:22,435 - main - INFO - üì§ OPTIONS /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.00s
2025-12-29 19:14:22,438 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:14:22,438 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 19:14:22,441 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,442 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:14:22,442 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:14:22,443 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:14:22,443 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:14:22,444 - app.services.pdf_generator_service - ERROR - ‚ùå Error building strategic memo: cannot access local variable 'rows' where it is not associated with a value
2025-12-29 19:14:22,445 - app.services.pdf_generator_service - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 460, in generate_strategic_memo_pdf
    story.extend(self._build_strategic_memo(comparison_data))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\services\pdf_generator_service.py", line 726, in _build_strategic_memo
    for row in rows:
               ^^^^
UnboundLocalError: cannot access local variable 'rows' where it is not associated with a value

2025-12-29 19:14:22,539 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,539 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,540 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:14:22,540 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:14:22,541 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:14:22,542 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:14:22,601 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:14:22,601 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:14:22,611 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:14:22,611 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:14:22,612 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:14:22,612 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:14:22,614 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:14:22,614 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:14:22,615 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:14:22,809 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:14:22,811 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_191422.pdf (126895 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_191422.pdf (163491 bytes)
2025-12-29 19:14:22,814 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.38s
2025-12-29 19:14:32,106 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:14:32,107 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:14:32,109 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:14:32,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:14:32,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:14:32,126 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:02,110 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:02,111 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:02,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:02,115 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:02,118 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:15:26,065 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,066 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,067 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,071 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,071 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,076 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:15:26,079 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,081 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,082 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,089 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,090 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,095 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:26,193 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,193 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,195 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,201 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,202 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,212 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:15:26,230 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:26,233 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:26,240 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:26,250 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:26,253 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:26,262 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:15:32,101 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:15:32,103 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:15:32,105 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:15:32,114 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:15:32,114 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:15:32,119 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:16:02,106 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:16:02,107 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:16:02,108 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:16:02,112 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:16:02,112 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:16:02,116 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:16:32,417 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:16:32,417 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:16:32,419 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:16:32,422 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:16:32,422 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:16:32,427 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:16:34,415 - app.services.progress_tracker - INFO - üßπ Cleaned up 1 old progress entries
2025-12-29 19:16:34,416 - app.services.progress_tracker - INFO - üßπ Cleanup task: Removed 1 old entries
2025-12-29 19:17:01,326 - main - INFO - 
2025-12-29 19:17:01,327 - main - INFO - ================================================================================
2025-12-29 19:17:01,327 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:01,331 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:01,332 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:01,333 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:01,333 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:01,335 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:01,335 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:01,336 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:01,337 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:01,338 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:01,338 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:01,343 - main - INFO -   ‚úÖ Cleaned up 6 temporary files
2025-12-29 19:17:01,344 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:01,346 - main - INFO - ================================================================================
2025-12-29 19:17:01,346 - main - INFO - 
2025-12-29 19:17:05,464 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:05,483 - main - INFO - 
2025-12-29 19:17:05,484 - main - INFO - ================================================================================
2025-12-29 19:17:05,484 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:05,484 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:05,484 - main - INFO - ================================================================================
2025-12-29 19:17:05,485 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:05,485 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:05,485 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:05,485 - main - INFO - ================================================================================
2025-12-29 19:17:05,486 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:05,486 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:05,486 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:05,520 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:05,530 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:05,530 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:05,531 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:05,564 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:05,565 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:05,566 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:05,568 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:05,569 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:05,569 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:05,596 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:05,597 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:05,597 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:05,604 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:05,607 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:05,607 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:05,607 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:05,640 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:05,649 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:05,650 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:05,650 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:05,650 - main - INFO - 
2025-12-29 19:17:05,651 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:05,651 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:05,651 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:05,651 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:05,652 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:05,652 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:05,652 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:05,652 - main - INFO - 
2025-12-29 19:17:05,653 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:05,653 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:05,653 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:05,654 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:05,654 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:05,654 - main - INFO - 
2025-12-29 19:17:05,655 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:05,655 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:05,655 - main - INFO -        - No manual section generation
2025-12-29 19:17:05,655 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:05,656 - main - INFO - 
2025-12-29 19:17:05,656 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:05,656 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:05,657 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:05,658 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:05,658 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:05,659 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:05,659 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:05,659 - main - INFO - 
2025-12-29 19:17:05,659 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:05,660 - main - INFO -      Main:
2025-12-29 19:17:05,660 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:05,660 - main - INFO - 
2025-12-29 19:17:05,660 - main - INFO -      Retrieval:
2025-12-29 19:17:05,661 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:05,661 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:05,662 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:05,662 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:05,662 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:05,663 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:05,664 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:05,664 - main - INFO - 
2025-12-29 19:17:05,665 - main - INFO -      Management:
2025-12-29 19:17:05,665 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:05,666 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:05,666 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:05,666 - main - INFO - 
2025-12-29 19:17:05,667 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:05,667 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:05,667 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:05,668 - main - INFO - 
2025-12-29 19:17:05,668 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:05,668 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:05,668 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:05,669 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:05,669 - main - INFO - 
2025-12-29 19:17:05,669 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:05,669 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:05,670 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:05,670 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:05,671 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:05,672 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:05,672 - main - INFO - 
2025-12-29 19:17:05,672 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:05,672 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:05,673 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:05,673 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:05,673 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:05,674 - main - INFO - 
2025-12-29 19:17:05,674 - main - INFO - ================================================================================
2025-12-29 19:17:05,674 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:05,674 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:05,675 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:05,675 - main - INFO - ================================================================================
2025-12-29 19:17:05,675 - main - INFO - 
2025-12-29 19:17:05,676 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:09,468 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:09,494 - main - INFO - 
2025-12-29 19:17:09,494 - main - INFO - ================================================================================
2025-12-29 19:17:09,494 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:09,495 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:09,495 - main - INFO - ================================================================================
2025-12-29 19:17:09,495 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:09,495 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:09,496 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:09,496 - main - INFO - ================================================================================
2025-12-29 19:17:09,497 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:09,497 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:09,497 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:09,522 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:09,533 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:09,533 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:09,534 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:09,544 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:09,547 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:09,549 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:09,551 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:09,551 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:09,551 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:09,551 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:09,552 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:09,562 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:09,563 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:09,563 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:09,570 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:09,572 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:09,573 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:09,573 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:09,583 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:09,587 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:09,587 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:09,587 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:09,587 - main - INFO - 
2025-12-29 19:17:09,588 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:09,588 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:09,588 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:09,588 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:09,588 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:09,589 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:09,589 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:09,589 - main - INFO - 
2025-12-29 19:17:09,589 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:09,590 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:09,590 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:09,590 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:09,591 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:09,592 - main - INFO - 
2025-12-29 19:17:09,593 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:09,593 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:09,594 - main - INFO -        - No manual section generation
2025-12-29 19:17:09,594 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:09,594 - main - INFO - 
2025-12-29 19:17:09,594 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:09,594 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:09,595 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:09,596 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:09,596 - main - INFO - 
2025-12-29 19:17:09,597 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:09,597 - main - INFO -      Main:
2025-12-29 19:17:09,597 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:09,598 - main - INFO - 
2025-12-29 19:17:09,598 - main - INFO -      Retrieval:
2025-12-29 19:17:09,598 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:09,598 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:09,599 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:09,599 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:09,599 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:09,599 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:09,599 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:09,599 - main - INFO - 
2025-12-29 19:17:09,600 - main - INFO -      Management:
2025-12-29 19:17:09,600 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:09,600 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:09,600 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:09,600 - main - INFO - 
2025-12-29 19:17:09,600 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:09,601 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:09,601 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:09,601 - main - INFO - 
2025-12-29 19:17:09,601 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:09,602 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:09,602 - main - INFO - 
2025-12-29 19:17:09,602 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:09,602 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:09,603 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:09,603 - main - INFO - 
2025-12-29 19:17:09,604 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:09,604 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:09,604 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:09,604 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:09,604 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:09,604 - main - INFO - 
2025-12-29 19:17:09,605 - main - INFO - ================================================================================
2025-12-29 19:17:09,605 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:09,605 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:09,605 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:09,605 - main - INFO - ================================================================================
2025-12-29 19:17:09,605 - main - INFO - 
2025-12-29 19:17:09,606 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:21,144 - main - INFO - 
2025-12-29 19:17:21,144 - main - INFO - ================================================================================
2025-12-29 19:17:21,144 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:21,145 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:21,146 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:21,146 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:21,147 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:21,148 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:21,148 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:21,149 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:21,149 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:21,150 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:17:21,151 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:21,152 - main - INFO - ================================================================================
2025-12-29 19:17:21,152 - main - INFO - 
2025-12-29 19:17:26,559 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:26,587 - main - INFO - 
2025-12-29 19:17:26,587 - main - INFO - ================================================================================
2025-12-29 19:17:26,587 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:26,588 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:26,588 - main - INFO - ================================================================================
2025-12-29 19:17:26,588 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:26,588 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:26,588 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:26,589 - main - INFO - ================================================================================
2025-12-29 19:17:26,589 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:26,590 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:26,590 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:26,608 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:26,614 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:26,614 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:26,614 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:26,614 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:26,615 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:26,627 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:26,629 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:26,631 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:26,634 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:26,635 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:26,635 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:26,636 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:26,636 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:26,649 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:26,649 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:26,650 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:26,665 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:26,670 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:26,670 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:26,671 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:26,684 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:26,689 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:26,689 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:26,692 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:26,693 - main - INFO - 
2025-12-29 19:17:26,693 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:26,694 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:26,694 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:26,695 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:26,695 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:26,697 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:26,699 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:26,700 - main - INFO - 
2025-12-29 19:17:26,700 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:26,701 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:26,701 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:26,701 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:26,701 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:26,702 - main - INFO - 
2025-12-29 19:17:26,702 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:26,702 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:26,702 - main - INFO -        - No manual section generation
2025-12-29 19:17:26,703 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:26,703 - main - INFO - 
2025-12-29 19:17:26,703 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:26,703 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:26,703 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:26,704 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:26,705 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:26,705 - main - INFO - 
2025-12-29 19:17:26,705 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:26,705 - main - INFO -      Main:
2025-12-29 19:17:26,705 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:26,706 - main - INFO - 
2025-12-29 19:17:26,706 - main - INFO -      Retrieval:
2025-12-29 19:17:26,707 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:26,708 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:26,708 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:26,708 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:26,709 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:26,709 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:26,709 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:26,710 - main - INFO - 
2025-12-29 19:17:26,710 - main - INFO -      Management:
2025-12-29 19:17:26,711 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:26,712 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:26,713 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:26,715 - main - INFO - 
2025-12-29 19:17:26,715 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:26,716 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:26,716 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:26,717 - main - INFO - 
2025-12-29 19:17:26,717 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:26,717 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:26,717 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:26,718 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:26,718 - main - INFO - 
2025-12-29 19:17:26,718 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:26,718 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:26,718 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:26,719 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:26,720 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:26,720 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:26,720 - main - INFO - 
2025-12-29 19:17:26,721 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:26,721 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:26,721 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:26,721 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:26,722 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:26,722 - main - INFO - 
2025-12-29 19:17:26,722 - main - INFO - ================================================================================
2025-12-29 19:17:26,722 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:26,723 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:26,723 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:26,723 - main - INFO - ================================================================================
2025-12-29 19:17:26,724 - main - INFO - 
2025-12-29 19:17:26,724 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:31,123 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:31,148 - main - INFO - 
2025-12-29 19:17:31,148 - main - INFO - ================================================================================
2025-12-29 19:17:31,149 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:31,149 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:31,149 - main - INFO - ================================================================================
2025-12-29 19:17:31,149 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:31,150 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:31,150 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:31,150 - main - INFO - ================================================================================
2025-12-29 19:17:31,150 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:31,151 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:31,151 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:31,198 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:31,203 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:31,203 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:31,203 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:31,204 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:31,204 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:31,240 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:31,242 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:31,246 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:31,249 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:31,249 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:31,249 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:31,249 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:31,250 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:31,271 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:31,272 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:31,272 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:31,302 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:31,307 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:31,311 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:31,314 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:31,349 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:31,365 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:31,367 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:31,367 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:31,367 - main - INFO - 
2025-12-29 19:17:31,368 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:31,369 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:31,370 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:31,370 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:31,370 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:31,371 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:31,371 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:31,371 - main - INFO - 
2025-12-29 19:17:31,372 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:31,372 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:31,372 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:31,372 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:31,374 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:31,375 - main - INFO - 
2025-12-29 19:17:31,379 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:31,380 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:31,380 - main - INFO -        - No manual section generation
2025-12-29 19:17:31,381 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:31,381 - main - INFO - 
2025-12-29 19:17:31,381 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:31,381 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:31,382 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:31,383 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:31,384 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:31,385 - main - INFO - 
2025-12-29 19:17:31,386 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:31,386 - main - INFO -      Main:
2025-12-29 19:17:31,387 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:31,387 - main - INFO - 
2025-12-29 19:17:31,388 - main - INFO -      Retrieval:
2025-12-29 19:17:31,389 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:31,389 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:31,394 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:31,397 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:31,398 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:31,398 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:31,399 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:31,399 - main - INFO - 
2025-12-29 19:17:31,400 - main - INFO -      Management:
2025-12-29 19:17:31,400 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:31,400 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:31,401 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:31,401 - main - INFO - 
2025-12-29 19:17:31,401 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:31,402 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:31,402 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:31,403 - main - INFO - 
2025-12-29 19:17:31,403 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:31,403 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:31,404 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:31,404 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:31,404 - main - INFO - 
2025-12-29 19:17:31,405 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:31,405 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:31,406 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:31,409 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:31,413 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:31,414 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:31,415 - main - INFO - 
2025-12-29 19:17:31,415 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:31,415 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:31,416 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:31,416 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:31,416 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:31,416 - main - INFO - 
2025-12-29 19:17:31,417 - main - INFO - ================================================================================
2025-12-29 19:17:31,417 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:31,418 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:31,418 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:31,419 - main - INFO - ================================================================================
2025-12-29 19:17:31,419 - main - INFO - 
2025-12-29 19:17:31,420 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:32,419 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:17:32,420 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:17:32,421 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:17:32,431 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:17:32,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:17:32,435 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:17:37,593 - main - INFO - 
2025-12-29 19:17:37,593 - main - INFO - ================================================================================
2025-12-29 19:17:37,594 - main - INFO -   üõë Shutting down application...
2025-12-29 19:17:37,596 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:37,596 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:17:37,598 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:17:37,599 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:17:37,601 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:17:37,602 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:17:37,603 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:17:37,604 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:17:37,606 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:17:37,609 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:17:37,610 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:17:37,611 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:17:37,612 - main - INFO - ================================================================================
2025-12-29 19:17:37,613 - main - INFO - 
2025-12-29 19:17:40,871 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:17:40,888 - main - INFO - 
2025-12-29 19:17:40,888 - main - INFO - ================================================================================
2025-12-29 19:17:40,888 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:17:40,889 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:17:40,889 - main - INFO - ================================================================================
2025-12-29 19:17:40,890 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:17:40,890 - main - INFO -   Upload Directory: uploads
2025-12-29 19:17:40,890 - main - INFO -   Max File Size: 20MB
2025-12-29 19:17:40,891 - main - INFO - ================================================================================
2025-12-29 19:17:40,891 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:17:40,892 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:17:40,893 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:40,931 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:17:40,936 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:17:40,936 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:17:40,936 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:17:40,936 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:17:40,937 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:17:40,944 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:17:40,945 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:17:40,947 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:17:40,948 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:17:40,948 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:17:40,949 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:17:40,966 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:17:40,966 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:17:40,967 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:17:40,973 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:17:40,979 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:17:40,979 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:17:40,980 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:17:40,997 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:17:41,001 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:17:41,001 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:17:41,001 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:17:41,002 - main - INFO - 
2025-12-29 19:17:41,002 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:17:41,002 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:17:41,002 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:17:41,002 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:17:41,003 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:17:41,003 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:17:41,003 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:17:41,003 - main - INFO - 
2025-12-29 19:17:41,003 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:17:41,003 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:17:41,004 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:17:41,004 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:17:41,004 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:17:41,004 - main - INFO - 
2025-12-29 19:17:41,004 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:17:41,005 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:17:41,005 - main - INFO -        - No manual section generation
2025-12-29 19:17:41,005 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:17:41,005 - main - INFO - 
2025-12-29 19:17:41,006 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:17:41,006 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:17:41,006 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:17:41,008 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:17:41,011 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:17:41,012 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:17:41,013 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:17:41,013 - main - INFO - 
2025-12-29 19:17:41,014 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:17:41,014 - main - INFO -      Main:
2025-12-29 19:17:41,014 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:17:41,015 - main - INFO - 
2025-12-29 19:17:41,015 - main - INFO -      Retrieval:
2025-12-29 19:17:41,016 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:17:41,016 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:17:41,016 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:17:41,016 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:17:41,017 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:17:41,017 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:17:41,017 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:17:41,017 - main - INFO - 
2025-12-29 19:17:41,017 - main - INFO -      Management:
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:17:41,018 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:17:41,018 - main - INFO - 
2025-12-29 19:17:41,018 - main - INFO -      Documents (MongoDB):
2025-12-29 19:17:41,018 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:17:41,019 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:17:41,019 - main - INFO - 
2025-12-29 19:17:41,019 - main - INFO -      Diagnostics & Health:
2025-12-29 19:17:41,019 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:17:41,020 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:17:41,020 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:17:41,020 - main - INFO - 
2025-12-29 19:17:41,020 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:17:41,020 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:17:41,021 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:17:41,022 - main - INFO - 
2025-12-29 19:17:41,022 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:17:41,022 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:17:41,022 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:17:41,022 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:17:41,022 - main - INFO -      4. No re-upload needed!
2025-12-29 19:17:41,023 - main - INFO - 
2025-12-29 19:17:41,023 - main - INFO - ================================================================================
2025-12-29 19:17:41,024 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:17:41,025 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:17:41,028 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:17:41,028 - main - INFO - ================================================================================
2025-12-29 19:17:41,029 - main - INFO - 
2025-12-29 19:17:41,029 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:17:53,945 - main - INFO - üì• GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf
2025-12-29 19:17:53,946 - app.api.routes - INFO - üìÑ Generating PDF for comparison: cmp_1767035586_ce2fcde3b892, type: both
2025-12-29 19:17:53,949 - app.services.pdf_generator_service - INFO - üîç Generating 1-page strategic memo for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:53,949 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:17:53,950 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for strategic memo...
2025-12-29 19:17:53,950 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:17:53,951 - app.services.pdf_generator_service - INFO - üìÑ Building strategic executive memo (1-page brief)...
2025-12-29 19:17:53,953 - app.services.pdf_generator_service - INFO - ‚úÖ Strategic memo built successfully with 25 elements
2025-12-29 19:17:54,096 - app.services.pdf_generator_service - INFO - ‚úÖ Generated strategic memo PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,096 - app.services.pdf_generator_service - INFO - üîç Generating detailed comparison PDF for: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,097 - app.services.pdf_generator_service - INFO - ‚úÖ Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-29 19:17:54,097 - app.services.pdf_generator_service - INFO - üìÑ Building cover page for detailed comparison...
2025-12-29 19:17:54,098 - app.services.pdf_generator_service - INFO - ‚úÖ Cover page built successfully
2025-12-29 19:17:54,098 - app.services.pdf_generator_service - INFO - üìÑ Building detailed comparison factors...
2025-12-29 19:17:54,112 - app.services.pdf_generator_service - INFO - ‚úÖ Detailed comparison factors built successfully
2025-12-29 19:17:54,113 - app.services.pdf_generator_service - INFO - üìÑ Building key differences section...
2025-12-29 19:17:54,129 - app.services.pdf_generator_service - INFO - ‚úÖ Key differences section built successfully
2025-12-29 19:17:54,129 - app.services.pdf_generator_service - INFO - üìÑ Building data table section...
2025-12-29 19:17:54,131 - app.services.pdf_generator_service - INFO - ‚úÖ Data table section built successfully
2025-12-29 19:17:54,131 - app.services.pdf_generator_service - INFO - üìÑ Building side-by-side section...
2025-12-29 19:17:54,132 - app.services.pdf_generator_service - INFO - ‚úÖ Side-by-side section built successfully
2025-12-29 19:17:54,133 - app.services.pdf_generator_service - INFO - üìÑ Building analytics section...
2025-12-29 19:17:54,134 - app.services.pdf_generator_service - INFO - ‚úÖ Analytics section built successfully
2025-12-29 19:17:54,356 - app.services.pdf_generator_service - INFO - ‚úÖ Generated detailed comparison PDF for comparison: cmp_1767035586_ce2fcde3b892
2025-12-29 19:17:54,359 - app.api.routes - INFO - ‚úÖ Both PDFs generated: Strategic_Memo_cmp_1767035586_ce2fcde3b892_20251229_191753.pdf (129412 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1767035586_ce2fcde3b892_20251229_191753.pdf (163491 bytes)
2025-12-29 19:17:54,364 - main - INFO - üì§ GET /api/comparison/cmp_1767035586_ce2fcde3b892/pdf - 200 - 0.42s
2025-12-29 19:18:02,109 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:18:02,111 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:18:02,114 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:18:02,122 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:18:02,123 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:18:02,126 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:18:32,408 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:18:32,410 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:18:32,412 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:18:32,417 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:18:32,417 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:18:32,423 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-29 19:19:27,134 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:19:27,137 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:19:27,139 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:19:27,152 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:19:27,153 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:19:27,159 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-29 19:19:54,207 - main - INFO - 
2025-12-29 19:19:54,207 - main - INFO - ================================================================================
2025-12-29 19:19:54,208 - main - INFO -   üõë Shutting down application...
2025-12-29 19:19:54,208 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:19:54,209 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:19:54,209 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:19:54,210 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:19:54,211 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:19:54,211 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:19:54,212 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:19:54,212 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:19:54,213 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:19:54,214 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:19:54,215 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:19:54,216 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:19:54,216 - main - INFO - ================================================================================
2025-12-29 19:19:54,216 - main - INFO - 
2025-12-29 19:19:57,997 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:19:58,025 - main - INFO - 
2025-12-29 19:19:58,025 - main - INFO - ================================================================================
2025-12-29 19:19:58,026 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:19:58,026 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:19:58,027 - main - INFO - ================================================================================
2025-12-29 19:19:58,027 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:19:58,027 - main - INFO -   Upload Directory: uploads
2025-12-29 19:19:58,028 - main - INFO -   Max File Size: 20MB
2025-12-29 19:19:58,030 - main - INFO - ================================================================================
2025-12-29 19:19:58,030 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:19:58,031 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:19:58,031 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:19:58,058 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:19:58,069 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:19:58,070 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:19:58,070 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:19:58,070 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:19:58,071 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:19:58,085 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:19:58,086 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:19:58,088 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:19:58,092 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:19:58,094 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:19:58,094 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:19:58,096 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:19:58,097 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:19:58,107 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:19:58,108 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:19:58,108 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:19:58,124 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:19:58,133 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:19:58,133 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:19:58,134 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:19:58,147 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:19:58,151 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:19:58,152 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:19:58,152 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:19:58,152 - main - INFO - 
2025-12-29 19:19:58,153 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:19:58,153 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:19:58,153 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:19:58,153 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:19:58,153 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:19:58,153 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:19:58,154 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:19:58,154 - main - INFO - 
2025-12-29 19:19:58,154 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:19:58,154 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:19:58,154 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:19:58,154 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:19:58,155 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:19:58,155 - main - INFO - 
2025-12-29 19:19:58,155 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:19:58,155 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:19:58,155 - main - INFO -        - No manual section generation
2025-12-29 19:19:58,156 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:19:58,156 - main - INFO - 
2025-12-29 19:19:58,156 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:19:58,156 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:19:58,157 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:19:58,158 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:19:58,159 - main - INFO - 
2025-12-29 19:19:58,159 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:19:58,159 - main - INFO -      Main:
2025-12-29 19:19:58,160 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:19:58,160 - main - INFO - 
2025-12-29 19:19:58,161 - main - INFO -      Retrieval:
2025-12-29 19:19:58,161 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:19:58,161 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:19:58,162 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:19:58,162 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:19:58,162 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:19:58,163 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:19:58,163 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:19:58,163 - main - INFO - 
2025-12-29 19:19:58,164 - main - INFO -      Management:
2025-12-29 19:19:58,164 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:19:58,164 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:19:58,164 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:19:58,164 - main - INFO - 
2025-12-29 19:19:58,164 - main - INFO -      Documents (MongoDB):
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:19:58,165 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:19:58,165 - main - INFO - 
2025-12-29 19:19:58,165 - main - INFO -      Diagnostics & Health:
2025-12-29 19:19:58,165 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:19:58,166 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:19:58,166 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:19:58,166 - main - INFO - 
2025-12-29 19:19:58,166 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:19:58,166 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:19:58,166 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:19:58,167 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:19:58,168 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:19:58,168 - main - INFO - 
2025-12-29 19:19:58,168 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:19:58,168 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:19:58,168 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:19:58,169 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:19:58,169 - main - INFO -      4. No re-upload needed!
2025-12-29 19:19:58,169 - main - INFO - 
2025-12-29 19:19:58,169 - main - INFO - ================================================================================
2025-12-29 19:19:58,169 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:19:58,169 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:19:58,169 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:19:58,170 - main - INFO - ================================================================================
2025-12-29 19:19:58,170 - main - INFO - 
2025-12-29 19:19:58,170 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:01,608 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:01,627 - main - INFO - 
2025-12-29 19:20:01,627 - main - INFO - ================================================================================
2025-12-29 19:20:01,627 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:01,628 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:01,628 - main - INFO - ================================================================================
2025-12-29 19:20:01,628 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:01,629 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:01,629 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:01,629 - main - INFO - ================================================================================
2025-12-29 19:20:01,630 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:01,631 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:01,631 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:01,684 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:01,691 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:01,692 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:01,692 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:01,692 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:01,693 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:01,706 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:01,708 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:01,710 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:01,713 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:01,713 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:01,713 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:01,714 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:01,714 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:01,725 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:01,725 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:01,726 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:01,736 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:01,742 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:01,742 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:01,742 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:01,751 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:01,758 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:01,758 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:01,758 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:01,759 - main - INFO - 
2025-12-29 19:20:01,759 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:01,759 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:01,759 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:01,759 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:01,760 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:01,760 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:01,760 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:01,760 - main - INFO - 
2025-12-29 19:20:01,761 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:01,761 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:01,761 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:01,761 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:01,762 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:01,762 - main - INFO - 
2025-12-29 19:20:01,762 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:01,763 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:01,763 - main - INFO -        - No manual section generation
2025-12-29 19:20:01,764 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:01,764 - main - INFO - 
2025-12-29 19:20:01,764 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:01,764 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:01,765 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:01,766 - main - INFO - 
2025-12-29 19:20:01,766 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:01,766 - main - INFO -      Main:
2025-12-29 19:20:01,766 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:01,767 - main - INFO - 
2025-12-29 19:20:01,767 - main - INFO -      Retrieval:
2025-12-29 19:20:01,767 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:01,767 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:01,768 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:01,768 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:01,768 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:01,769 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:01,769 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:01,770 - main - INFO - 
2025-12-29 19:20:01,770 - main - INFO -      Management:
2025-12-29 19:20:01,771 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:01,771 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:01,771 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:01,771 - main - INFO - 
2025-12-29 19:20:01,771 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:01,772 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:01,772 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:01,772 - main - INFO - 
2025-12-29 19:20:01,773 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:01,774 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:01,775 - main - INFO - 
2025-12-29 19:20:01,775 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:01,775 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:01,775 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:01,776 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:01,777 - main - INFO - 
2025-12-29 19:20:01,777 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:01,777 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:01,777 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:01,778 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:01,778 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:01,778 - main - INFO - 
2025-12-29 19:20:01,778 - main - INFO - ================================================================================
2025-12-29 19:20:01,778 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:01,779 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:01,779 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:01,779 - main - INFO - ================================================================================
2025-12-29 19:20:01,780 - main - INFO - 
2025-12-29 19:20:01,780 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:05,204 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:05,225 - main - INFO - 
2025-12-29 19:20:05,225 - main - INFO - ================================================================================
2025-12-29 19:20:05,225 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:05,226 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:05,226 - main - INFO - ================================================================================
2025-12-29 19:20:05,226 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:05,226 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:05,227 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:05,227 - main - INFO - ================================================================================
2025-12-29 19:20:05,228 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:05,228 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:05,228 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:05,346 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:05,355 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:05,355 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:05,356 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:05,356 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:05,357 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:05,389 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:05,401 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:05,403 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:05,406 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:05,406 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:05,406 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:05,407 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:05,407 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:05,420 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:05,420 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:05,421 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:05,433 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:05,438 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:05,438 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:05,439 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:05,453 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:05,462 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:05,462 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:05,463 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:05,465 - main - INFO - 
2025-12-29 19:20:05,465 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:05,466 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:05,466 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:05,466 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:05,467 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:05,467 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:05,467 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:05,467 - main - INFO - 
2025-12-29 19:20:05,468 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:05,468 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:05,468 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:05,468 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:05,469 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:05,469 - main - INFO - 
2025-12-29 19:20:05,469 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:05,469 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:05,470 - main - INFO -        - No manual section generation
2025-12-29 19:20:05,470 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:05,470 - main - INFO - 
2025-12-29 19:20:05,471 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:05,471 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:05,472 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:05,473 - main - INFO - 
2025-12-29 19:20:05,476 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:05,478 - main - INFO -      Main:
2025-12-29 19:20:05,478 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:05,480 - main - INFO - 
2025-12-29 19:20:05,481 - main - INFO -      Retrieval:
2025-12-29 19:20:05,482 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:05,482 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:05,482 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:05,483 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:05,483 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:05,483 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:05,483 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:05,484 - main - INFO - 
2025-12-29 19:20:05,484 - main - INFO -      Management:
2025-12-29 19:20:05,484 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:05,484 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:05,485 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:05,485 - main - INFO - 
2025-12-29 19:20:05,485 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:05,486 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:05,486 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:05,487 - main - INFO - 
2025-12-29 19:20:05,487 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:05,487 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:05,487 - main - INFO - 
2025-12-29 19:20:05,488 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:05,488 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:05,489 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:05,490 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:05,492 - main - INFO - 
2025-12-29 19:20:05,492 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:05,492 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:05,493 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:05,493 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:05,493 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:05,494 - main - INFO - 
2025-12-29 19:20:05,495 - main - INFO - ================================================================================
2025-12-29 19:20:05,495 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:05,496 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:05,497 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:05,497 - main - INFO - ================================================================================
2025-12-29 19:20:05,498 - main - INFO - 
2025-12-29 19:20:05,498 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:27,422 - main - INFO - üì• GET /api/comparisons
2025-12-29 19:20:27,423 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-29 19:20:27,425 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-29 19:20:27,430 - app.services.mongodb_service_enhanced - INFO - üìä Found 2 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-29 19:20:27,431 - app.api.routes - INFO - ‚úÖ Found 2 comparisons for user 694edeacc98c1096e3582e38
2025-12-29 19:20:27,435 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-29 19:20:38,990 - main - INFO - 
2025-12-29 19:20:38,990 - main - INFO - ================================================================================
2025-12-29 19:20:38,991 - main - INFO -   üõë Shutting down application...
2025-12-29 19:20:38,992 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:38,993 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:20:38,996 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:38,997 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:20:38,998 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:20:38,998 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:20:38,999 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:20:38,999 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:20:39,000 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:20:39,000 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:20:39,000 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:20:39,001 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:20:39,001 - main - INFO - ================================================================================
2025-12-29 19:20:39,001 - main - INFO - 
2025-12-29 19:20:42,692 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:42,717 - main - INFO - 
2025-12-29 19:20:42,718 - main - INFO - ================================================================================
2025-12-29 19:20:42,718 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:42,718 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:42,718 - main - INFO - ================================================================================
2025-12-29 19:20:42,718 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:42,719 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:42,719 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:42,719 - main - INFO - ================================================================================
2025-12-29 19:20:42,720 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:42,720 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:42,720 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:42,748 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:42,754 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:42,755 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:42,755 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:42,766 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:42,767 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:42,769 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:42,770 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:42,770 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:42,771 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:42,801 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:42,801 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:42,802 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:42,809 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:42,816 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:42,817 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:42,817 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:42,850 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:42,853 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:42,853 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:42,853 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:42,854 - main - INFO - 
2025-12-29 19:20:42,854 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:42,854 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:42,854 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:42,854 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:42,855 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:42,855 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:42,855 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:42,855 - main - INFO - 
2025-12-29 19:20:42,855 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:42,856 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:42,856 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:42,856 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:42,856 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:42,857 - main - INFO - 
2025-12-29 19:20:42,857 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:42,857 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:42,858 - main - INFO -        - No manual section generation
2025-12-29 19:20:42,858 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:42,858 - main - INFO - 
2025-12-29 19:20:42,858 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:42,858 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:42,859 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:42,860 - main - INFO - 
2025-12-29 19:20:42,860 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:42,860 - main - INFO -      Main:
2025-12-29 19:20:42,862 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:42,862 - main - INFO - 
2025-12-29 19:20:42,863 - main - INFO -      Retrieval:
2025-12-29 19:20:42,863 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:42,863 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:42,864 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:42,864 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:42,864 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:42,864 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:42,865 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:42,865 - main - INFO - 
2025-12-29 19:20:42,865 - main - INFO -      Management:
2025-12-29 19:20:42,865 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:42,865 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:42,866 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:42,866 - main - INFO - 
2025-12-29 19:20:42,866 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:42,866 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:42,866 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:42,867 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:42,867 - main - INFO - 
2025-12-29 19:20:42,867 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:42,867 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:42,868 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:42,868 - main - INFO - 
2025-12-29 19:20:42,868 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:42,868 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:42,868 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:42,869 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:42,869 - main - INFO - 
2025-12-29 19:20:42,870 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:42,870 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:42,870 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:42,870 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:42,870 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:42,870 - main - INFO - 
2025-12-29 19:20:42,871 - main - INFO - ================================================================================
2025-12-29 19:20:42,871 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:42,871 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:42,871 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:42,871 - main - INFO - ================================================================================
2025-12-29 19:20:42,871 - main - INFO - 
2025-12-29 19:20:42,872 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:20:46,470 - main - INFO - 
2025-12-29 19:20:46,470 - main - INFO - ================================================================================
2025-12-29 19:20:46,470 - main - INFO -   üõë Shutting down application...
2025-12-29 19:20:46,471 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:46,471 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:20:46,472 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:20:46,472 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:20:46,473 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:20:46,473 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:20:46,475 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:20:46,475 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:20:46,477 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:20:46,478 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:20:46,479 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:20:46,480 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:20:46,480 - main - INFO - ================================================================================
2025-12-29 19:20:46,480 - main - INFO - 
2025-12-29 19:20:50,068 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-29 19:20:50,087 - main - INFO - 
2025-12-29 19:20:50,087 - main - INFO - ================================================================================
2025-12-29 19:20:50,088 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-29 19:20:50,088 - main - INFO -   Production-Ready Complete Integration
2025-12-29 19:20:50,088 - main - INFO - ================================================================================
2025-12-29 19:20:50,088 - main - INFO -   AI Model: gpt-4o-mini
2025-12-29 19:20:50,089 - main - INFO -   Upload Directory: uploads
2025-12-29 19:20:50,089 - main - INFO -   Max File Size: 20MB
2025-12-29 19:20:50,089 - main - INFO - ================================================================================
2025-12-29 19:20:50,090 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-29 19:20:50,091 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-29 19:20:50,091 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:50,117 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-29 19:20:50,122 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-29 19:20:50,122 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-29 19:20:50,122 - app.services.user_subscription_service - INFO - üîå Connecting to MongoDB for user subscription checks
2025-12-29 19:20:50,123 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-29 19:20:50,123 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-29 19:20:50,163 - app.services.user_subscription_service - INFO - ‚úÖ Successfully connected to MongoDB for user subscription checks
2025-12-29 19:20:50,164 - app.services.user_subscription_service - INFO - üìã Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-29 19:20:50,166 - app.services.user_subscription_service - INFO - üìã Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-29 19:20:50,167 - app.services.user_subscription_service - INFO - üìä Users collection has 5 documents
2025-12-29 19:20:50,167 - main - INFO -   ‚úÖ User Subscription Service connected
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-29 19:20:50,168 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-29 19:20:50,195 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-29 19:20:50,196 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-29 19:20:50,197 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-29 19:20:50,203 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-29 19:20:50,207 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-29 19:20:50,207 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-29 19:20:50,208 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-29 19:20:50,237 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-29 19:20:50,242 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-29 19:20:50,243 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-29 19:20:50,243 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-29 19:20:50,243 - main - INFO - 
2025-12-29 19:20:50,244 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-29 19:20:50,244 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-29 19:20:50,245 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-29 19:20:50,245 - main - INFO -        - Separates warranties from extensions
2025-12-29 19:20:50,246 - main - INFO -        - Extracts subjectivities & operational details
2025-12-29 19:20:50,246 - main - INFO -        - Correct deductible tier detection
2025-12-29 19:20:50,246 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-29 19:20:50,247 - main - INFO - 
2025-12-29 19:20:50,247 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-29 19:20:50,247 - main - INFO -        - Generates ALL sections comprehensively
2025-12-29 19:20:50,247 - main - INFO -        - Identifies unique items per provider
2025-12-29 19:20:50,248 - main - INFO -        - Transparent scoring methodology
2025-12-29 19:20:50,248 - main - INFO -        - Uses full _extended_data from parser
2025-12-29 19:20:50,248 - main - INFO - 
2025-12-29 19:20:50,248 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-29 19:20:50,249 - main - INFO -        - Single endpoint auto-populates everything
2025-12-29 19:20:50,249 - main - INFO -        - No manual section generation
2025-12-29 19:20:50,249 - main - INFO -        - Complete MongoDB integration
2025-12-29 19:20:50,249 - main - INFO - 
2025-12-29 19:20:50,249 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-29 19:20:50,250 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-29 19:20:50,251 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-29 19:20:50,251 - main - INFO - 
2025-12-29 19:20:50,251 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-29 19:20:50,251 - main - INFO -      Main:
2025-12-29 19:20:50,251 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-29 19:20:50,252 - main - INFO - 
2025-12-29 19:20:50,252 - main - INFO -      Retrieval:
2025-12-29 19:20:50,252 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-29 19:20:50,252 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-29 19:20:50,252 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-29 19:20:50,252 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-29 19:20:50,253 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-29 19:20:50,253 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-29 19:20:50,253 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-29 19:20:50,253 - main - INFO - 
2025-12-29 19:20:50,253 - main - INFO -      Management:
2025-12-29 19:20:50,253 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-29 19:20:50,253 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-29 19:20:50,254 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-29 19:20:50,254 - main - INFO - 
2025-12-29 19:20:50,254 - main - INFO -      Documents (MongoDB):
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents                All documents
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-29 19:20:50,254 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-29 19:20:50,254 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-29 19:20:50,255 - main - INFO - 
2025-12-29 19:20:50,255 - main - INFO -      Diagnostics & Health:
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/health                   System health
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/status                   Detailed status
2025-12-29 19:20:50,255 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-29 19:20:50,255 - main - INFO - 
2025-12-29 19:20:50,256 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-29 19:20:50,256 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-29 19:20:50,257 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-29 19:20:50,258 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-29 19:20:50,258 - main - INFO - 
2025-12-29 19:20:50,258 - main - INFO -   üéØ WORKFLOW:
2025-12-29 19:20:50,258 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-29 19:20:50,259 - main - INFO -      2. Receive comparison_id + complete data
2025-12-29 19:20:50,259 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-29 19:20:50,259 - main - INFO -      4. No re-upload needed!
2025-12-29 19:20:50,259 - main - INFO - 
2025-12-29 19:20:50,260 - main - INFO - ================================================================================
2025-12-29 19:20:50,260 - main - INFO -   ‚úÖ Application started successfully!
2025-12-29 19:20:50,260 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-29 19:20:50,260 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-29 19:20:50,261 - main - INFO - ================================================================================
2025-12-29 19:20:50,261 - main - INFO - 
2025-12-29 19:20:50,262 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-29 19:21:01,332 - main - INFO - 
2025-12-29 19:21:01,332 - main - INFO - ================================================================================
2025-12-29 19:21:01,333 - main - INFO -   üõë Shutting down application...
2025-12-29 19:21:01,334 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-29 19:21:01,334 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-29 19:21:01,335 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-29 19:21:01,335 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-29 19:21:01,335 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-29 19:21:01,336 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-29 19:21:01,336 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-29 19:21:01,337 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-29 19:21:01,337 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-29 19:21:01,338 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-29 19:21:01,339 - main - INFO - ================================================================================
2025-12-29 19:21:01,339 - main - INFO - 
