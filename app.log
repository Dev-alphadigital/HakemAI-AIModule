    2025-12-26 20:07:48,607 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:07:48,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:07:48,610 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:07:48,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:07:48,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:07:48,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:07:48,615 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:07:48,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:18,297 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:18,307 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:18,308 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:18,309 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:08:48,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:08:48,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:08:48,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:08:48,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:08:48,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:08:48,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:09:30,303 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:09:30,304 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:09:30,306 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:09:30,309 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:09:30,310 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:09:30,313 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:10:30,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:10:30,610 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:10:30,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:10:30,617 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:10:30,618 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:10:30,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:30,301 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:30,302 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:30,303 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:30,305 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:30,306 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:30,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:11:48,547 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:11:48,549 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:11:48,553 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:11:48,559 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:11:48,559 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:11:48,565 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:12:18,240 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:18,240 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:18,242 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:18,244 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:18,244 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:18,246 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:12:48,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:12:48,609 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:12:48,610 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:12:48,611 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:12:48,612 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:12:48,613 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:13:18,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:13:18,299 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:13:18,301 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:13:18,304 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:13:18,304 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:13:18,307 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:14:19,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:14:19,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:14:19,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:14:19,624 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:14:19,624 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:14:19,626 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:15:20,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:15:20,605 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:15:20,606 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:15:20,609 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:15:20,610 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:15:20,612 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:21,616 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:21,617 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:21,618 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:21,620 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:21,620 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:21,622 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:16:48,293 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:16:48,294 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:16:48,296 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:16:48,299 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:16:48,300 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:16:48,302 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:17:18,604 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:17:18,604 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:17:18,605 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:17:18,607 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:17:18,607 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:17:18,609 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:18:19,608 - main - INFO - üì• OPTIONS /api/comparisons
2025-12-26 20:18:19,608 - main - INFO - üì§ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 20:18:19,611 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:18:19,611 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:18:19,612 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:18:19,614 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:18:19,614 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:18:19,616 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:19:06,376 - main - INFO - 
2025-12-26 20:19:06,378 - main - INFO - ================================================================================
2025-12-26 20:19:06,410 - main - INFO -   üõë Shutting down application...
2025-12-26 20:19:06,412 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,466 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:19:06,473 - app.services.user_subscription_service - INFO - üîå Disconnected from MongoDB
2025-12-26 20:19:06,506 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:19:06,525 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:19:06,539 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:19:06,541 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:19:06,541 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:19:06,542 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:19:06,543 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:19:06,544 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:19:06,544 - main - INFO - ================================================================================
2025-12-26 20:19:06,544 - main - INFO - 
2025-12-26 20:19:10,918 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:19:10,941 - main - INFO - 
2025-12-26 20:19:10,941 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:19:10,942 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:19:10,942 - main - INFO - ================================================================================
2025-12-26 20:19:10,942 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:19:10,942 - main - INFO -   Upload Directory: uploads
2025-12-26 20:19:10,942 - main - INFO -   Max File Size: 20MB
2025-12-26 20:19:10,943 - main - INFO - ================================================================================
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:19:10,943 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:19:10,944 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:10,978 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:19:10,982 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:19:10,983 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:19:10,983 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,984 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:10,986 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:19:10,986 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:19:10,987 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:19:11,010 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:19:11,010 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:19:11,010 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:19:11,024 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:19:11,026 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:19:11,027 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:19:11,027 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:19:11,071 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:19:11,075 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:19:11,075 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:19:11,076 - main - INFO - 
2025-12-26 20:19:11,076 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:19:11,076 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:19:11,076 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:19:11,076 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:19:11,077 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:19:11,077 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:19:11,077 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:19:11,077 - main - INFO - 
2025-12-26 20:19:11,077 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:19:11,078 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:19:11,078 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:19:11,078 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:19:11,078 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:19:11,078 - main - INFO - 
2025-12-26 20:19:11,078 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:19:11,079 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:19:11,079 - main - INFO -        - No manual section generation
2025-12-26 20:19:11,079 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:19:11,079 - main - INFO - 
2025-12-26 20:19:11,079 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:19:11,079 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:19:11,080 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:19:11,080 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:19:11,081 - main - INFO -      Main:
2025-12-26 20:19:11,081 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:19:11,081 - main - INFO - 
2025-12-26 20:19:11,081 - main - INFO -      Retrieval:
2025-12-26 20:19:11,081 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:19:11,082 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:19:11,082 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:19:11,082 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:19:11,082 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:19:11,082 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:19:11,082 - main - INFO - 
2025-12-26 20:19:11,083 - main - INFO -      Management:
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:19:11,083 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:19:11,083 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:19:11,084 - main - INFO - 
2025-12-26 20:19:11,084 - main - INFO -      Documents (MongoDB):
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:19:11,084 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:19:11,085 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:19:11,085 - main - INFO - 
2025-12-26 20:19:11,085 - main - INFO -      Diagnostics & Health:
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:19:11,085 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:19:11,086 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:19:11,086 - main - INFO - 
2025-12-26 20:19:11,086 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:19:11,086 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:19:11,087 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:19:11,088 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:19:11,089 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:19:11,090 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:19:11,090 - main - INFO - 
2025-12-26 20:19:11,090 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:19:11,090 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:19:11,091 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:19:11,091 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:19:11,091 - main - INFO -      4. No re-upload needed!
2025-12-26 20:19:11,091 - main - INFO - 
2025-12-26 20:19:11,091 - main - INFO - ================================================================================
2025-12-26 20:19:11,092 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:19:11,092 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:19:11,092 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:19:11,092 - main - INFO - ================================================================================
2025-12-26 20:19:11,093 - main - INFO - 
2025-12-26 20:19:11,093 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
2025-12-26 20:19:21,593 - main - INFO - üì• OPTIONS /api/admin/activity-logs
2025-12-26 20:19:21,596 - main - INFO - üì§ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:19:21,608 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,615 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,616 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,619 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,625 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,628 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,635 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,637 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,643 - main - INFO - üì§ GET /api/comparisons - 200 - 0.03s
2025-12-26 20:19:21,650 - main - INFO - üì• GET /api/admin/activity-logs
2025-12-26 20:19:21,655 - app.api.routes - INFO - üìä Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:19:21,657 - app.api.routes - INFO - ‚úÖ Activity logs service already connected
2025-12-26 20:19:21,658 - app.api.routes - INFO - üîç Calling activity_logs_service.get_activity_logs...
2025-12-26 20:19:21,666 - app.api.routes - INFO - ‚úÖ Retrieved 5 logs (total: 5)
2025-12-26 20:19:21,669 - main - INFO - üì§ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 20:19:21,677 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:21,678 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:21,679 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:21,679 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:21,680 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:21,686 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:21,687 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:21,693 - main - INFO - üì§ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:19:52,298 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:19:52,298 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:19:52,299 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,299 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:19:52,300 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:19:52,302 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:19:52,302 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:19:52,306 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:22,613 - main - INFO - üì• GET /api/comparisons
2025-12-26 20:20:22,614 - app.api.routes - INFO - üìä Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:20:22,614 - app.services.user_subscription_service - WARNING - ‚ö†Ô∏è  MongoDB not connected, attempting to connect...
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.user_subscription_service - ERROR - ‚ùå Error getting user company ID: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:22,615 - app.services.mongodb_service_enhanced - INFO - üîç Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:20:22,618 - app.services.mongodb_service_enhanced - INFO - üìä Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:20:22,619 - app.api.routes - INFO - ‚úÖ Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:20:22,620 - main - INFO - üì§ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:20:29,780 - main - INFO - 
2025-12-26 20:20:29,780 - main - INFO - ================================================================================
2025-12-26 20:20:29,780 - main - INFO -   üõë Shutting down application...
2025-12-26 20:20:29,781 - app.services.mongodb_service_enhanced - INFO - üîå Disconnected from MongoDB
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ Enhanced MongoDB connection closed
2025-12-26 20:20:29,781 - main - INFO -   ‚úÖ User Subscription Service connection closed
2025-12-26 20:20:29,782 - app.services.user_documents_service - INFO - üîå User Documents Service disconnected from MongoDB
2025-12-26 20:20:29,782 - main - INFO -   ‚úÖ User Documents Service connection closed
2025-12-26 20:20:29,783 - app.services.hakim_score_service - INFO - üîå Hakim Score Service disconnected from MongoDB
2025-12-26 20:20:29,784 - main - INFO -   ‚úÖ Hakim Score Service connection closed
2025-12-26 20:20:29,784 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Activity Logs Service connection closed
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Cleaned up 0 temporary files
2025-12-26 20:20:29,785 - main - INFO -   ‚úÖ Application stopped successfully
2025-12-26 20:20:29,786 - main - INFO - ================================================================================
2025-12-26 20:20:29,786 - main - INFO - 
2025-12-26 20:20:34,207 - main - INFO - üîí CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:20:34,227 - main - INFO - 
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,228 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:20:34,228 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:20:34,228 - main - INFO - ================================================================================
2025-12-26 20:20:34,229 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:20:34,229 - main - INFO -   Upload Directory: uploads
2025-12-26 20:20:34,229 - main - INFO -   Max File Size: 20MB
2025-12-26 20:20:34,229 - main - INFO - ================================================================================
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Upload directory ready: uploads
2025-12-26 20:20:34,230 - main - INFO -   ‚úÖ Logs directory ready: logs/
2025-12-26 20:20:34,230 - app.services.mongodb_service_enhanced - INFO - üîå Connecting to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,261 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Successfully connected to MongoDB
2025-12-26 20:20:34,269 - app.services.mongodb_service_enhanced - INFO - ‚úÖ Database indexes created successfully
2025-12-26 20:20:34,270 - main - INFO -   ‚úÖ Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:20:34,270 - app.services.user_subscription_service - ERROR - ‚ùå Failed to connect to MongoDB: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,270 - main - ERROR -   ‚ùå User Subscription Service connection failed: MongoDB connection string not found. Please set MONGO_URI or MONGODB_URL environment variable.
2025-12-26 20:20:34,271 - main - WARNING -   ‚ö†Ô∏è  Application will continue without user subscription checks
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO - üîå Connecting User Documents Service to MongoDB
2025-12-26 20:20:34,271 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017
2025-12-26 20:20:34,272 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:20:34,279 - app.services.user_documents_service - INFO - ‚úÖ User Documents Service connected to MongoDB
2025-12-26 20:20:34,279 - main - INFO -   ‚úÖ User Documents Service connected
2025-12-26 20:20:34,280 - app.services.hakim_score_service - INFO - üîå Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:20:34,293 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score Service connected to MongoDB
2025-12-26 20:20:34,298 - app.services.hakim_score_service - INFO - ‚úÖ Hakim Score indexes created successfully
2025-12-26 20:20:34,298 - main - INFO -   ‚úÖ Hakim Score Service connected
2025-12-26 20:20:34,298 - app.services.activity_logs_service - INFO - üîå Activity Logs Service: Connecting to MongoDB
2025-12-26 20:20:34,310 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:20:34,313 - app.services.activity_logs_service - INFO - ‚úÖ Activity Logs Service: Indexes created successfully
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Activity Logs Service connected
2025-12-26 20:20:34,314 - main - INFO -   ‚úÖ Progress tracker cleanup task started
2025-12-26 20:20:34,314 - main - INFO - 
2025-12-26 20:20:34,314 - main - INFO -   üéØ INTEGRATED COMPONENTS:
2025-12-26 20:20:34,314 - main - INFO -      ‚Ä¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:20:34,315 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:20:34,315 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:20:34,315 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:20:34,315 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:20:34,316 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:20:34,316 - main - INFO - 
2025-12-26 20:20:34,316 - main - INFO -      ‚Ä¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:20:34,316 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:20:34,317 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:20:34,317 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:20:34,318 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:20:34,319 - main - INFO - 
2025-12-26 20:20:34,319 - main - INFO -      ‚Ä¢ Routes v3.1: Simplified orchestration
2025-12-26 20:20:34,319 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:20:34,320 - main - INFO -        - No manual section generation
2025-12-26 20:20:34,320 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:20:34,320 - main - INFO - 
2025-12-26 20:20:34,321 - main - INFO -   üîß CRITICAL FIXES IN v3.1:
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Benefits count: 30+ (was 4)
2025-12-26 20:20:34,321 - main - INFO -      ‚úÖ Warranty categorization: Proper separation
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Subjectivities: Now included
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Operational details: Validity, payment, brokerage
2025-12-26 20:20:34,322 - main - INFO -      ‚úÖ Scoring: Transparent methodology with breakdown
2025-12-26 20:20:34,322 - main - INFO - 
2025-12-26 20:20:34,322 - main - INFO -   üì° AVAILABLE ENDPOINTS:
2025-12-26 20:20:34,323 - main - INFO -      Main:
2025-12-26 20:20:34,323 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:20:34,323 - main - INFO - 
2025-12-26 20:20:34,323 - main - INFO -      Retrieval:
2025-12-26 20:20:34,323 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:20:34,324 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:20:34,324 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:20:34,324 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:20:34,324 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:20:34,324 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:20:34,325 - main - INFO - 
2025-12-26 20:20:34,325 - main - INFO -      Management:
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:20:34,325 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:20:34,325 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:20:34,326 - main - INFO - 
2025-12-26 20:20:34,326 - main - INFO -      Documents (MongoDB):
2025-12-26 20:20:34,326 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:20:34,327 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:20:34,327 - main - INFO - 
2025-12-26 20:20:34,327 - main - INFO -      Diagnostics & Health:
2025-12-26 20:20:34,327 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:20:34,328 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:20:34,328 - main - INFO - 
2025-12-26 20:20:34,328 - main - INFO -   üìä AUTO-GENERATED SECTIONS:
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Summary with rankings & detailed analysis
2025-12-26 20:20:34,328 - main - INFO -      ‚úì Key Differences (unique warranties, exclusions)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Side-by-Side (top providers comparison matrix)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Data Table (sortable, filterable)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Analytics (premium charts, score charts, features)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Provider Cards (UI-ready summaries)
2025-12-26 20:20:34,329 - main - INFO -      ‚úì Extracted Quotes (full data with all benefits)
2025-12-26 20:20:34,329 - main - INFO - 
2025-12-26 20:20:34,330 - main - INFO -   üéØ WORKFLOW:
2025-12-26 20:20:34,330 - main - INFO -      1. Upload 1-10 PDFs ‚Üí POST /api/compare-quotes
2025-12-26 20:20:34,330 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:20:34,330 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:20:34,330 - main - INFO -      4. No re-upload needed!
2025-12-26 20:20:34,331 - main - INFO - 
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,331 - main - INFO -   ‚úÖ Application started successfully!
2025-12-26 20:20:34,331 - main - INFO -   üìö API Docs: http://localhost:8000/docs
2025-12-26 20:20:34,331 - main - INFO -   üìñ ReDoc: http://localhost:8000/redoc
2025-12-26 20:20:34,331 - main - INFO - ================================================================================
2025-12-26 20:20:34,332 - main - INFO - 
2025-12-26 20:20:34,332 - app.services.progress_tracker - INFO - üîÑ Starting progress cleanup task (interval: 300s)
