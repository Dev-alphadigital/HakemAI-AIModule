2025-12-16 17:37:51,771 - main - INFO - 
2025-12-16 17:37:51,771 - main - INFO - ================================================================================
2025-12-16 17:37:51,771 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-16 17:37:51,771 - main - INFO -   Production-Ready Complete Integration
2025-12-16 17:37:51,772 - main - INFO - ================================================================================
2025-12-16 17:37:51,772 - main - INFO -   AI Model: gpt-4o-mini
2025-12-16 17:37:51,772 - main - INFO -   Upload Directory: uploads
2025-12-16 17:37:51,772 - main - INFO -   Max File Size: 20MB
2025-12-16 17:37:51,773 - main - INFO - ================================================================================
2025-12-16 17:37:51,773 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-16 17:37:51,773 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-16 17:37:51,773 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-16 17:37:52,155 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-16 17:37:52,165 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-16 17:37:52,166 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-16 17:37:52,166 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-16 17:37:52,167 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-16 17:37:52,167 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-16 17:37:52,199 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-16 17:37:52,201 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-16 17:37:52,205 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-16 17:37:52,210 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-16 17:37:52,211 - main - INFO -   âœ… User Subscription Service connected
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-16 17:37:52,264 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-16 17:37:52,265 - main - INFO -   âœ… User Documents Service connected
2025-12-16 17:37:52,265 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-16 17:37:52,265 - main - INFO - 
2025-12-16 17:37:52,266 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-16 17:37:52,266 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-16 17:37:52,266 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-16 17:37:52,266 - main - INFO -        - Separates warranties from extensions
2025-12-16 17:37:52,267 - main - INFO -        - Extracts subjectivities & operational details
2025-12-16 17:37:52,267 - main - INFO -        - Correct deductible tier detection
2025-12-16 17:37:52,268 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-16 17:37:52,269 - main - INFO - 
2025-12-16 17:37:52,270 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-16 17:37:52,271 - main - INFO -        - Generates ALL sections comprehensively
2025-12-16 17:37:52,271 - main - INFO -        - Identifies unique items per provider
2025-12-16 17:37:52,271 - main - INFO -        - Transparent scoring methodology
2025-12-16 17:37:52,271 - main - INFO -        - Uses full _extended_data from parser
2025-12-16 17:37:52,272 - main - INFO - 
2025-12-16 17:37:52,272 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-16 17:37:52,272 - main - INFO -        - Single endpoint auto-populates everything
2025-12-16 17:37:52,272 - main - INFO -        - No manual section generation
2025-12-16 17:37:52,273 - main - INFO -        - Complete MongoDB integration
2025-12-16 17:37:52,273 - main - INFO - 
2025-12-16 17:37:52,273 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-16 17:37:52,273 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-16 17:37:52,274 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-16 17:37:52,274 - main - INFO -      âœ… Subjectivities: Now included
2025-12-16 17:37:52,274 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-16 17:37:52,274 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-16 17:37:52,275 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-16 17:37:52,275 - main - INFO - 
2025-12-16 17:37:52,275 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-16 17:37:52,275 - main - INFO -      Main:
2025-12-16 17:37:52,275 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-16 17:37:52,276 - main - INFO - 
2025-12-16 17:37:52,276 - main - INFO -      Retrieval:
2025-12-16 17:37:52,276 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-16 17:37:52,276 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-16 17:37:52,277 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-16 17:37:52,277 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-16 17:37:52,277 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-16 17:37:52,278 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-16 17:37:52,278 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-16 17:37:52,279 - main - INFO - 
2025-12-16 17:37:52,279 - main - INFO -      Management:
2025-12-16 17:37:52,279 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-16 17:37:52,279 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-16 17:37:52,279 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-16 17:37:52,280 - main - INFO - 
2025-12-16 17:37:52,280 - main - INFO -      Documents (MongoDB):
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents                All documents
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-16 17:37:52,280 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-16 17:37:52,281 - main - INFO - 
2025-12-16 17:37:52,281 - main - INFO -      Diagnostics & Health:
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/health                   System health
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/status                   Detailed status
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-16 17:37:52,281 - main - INFO - 
2025-12-16 17:37:52,282 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-16 17:37:52,284 - main - INFO - 
2025-12-16 17:37:52,284 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-16 17:37:52,284 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-16 17:37:52,285 - main - INFO -      2. Receive comparison_id + complete data
2025-12-16 17:37:52,285 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-16 17:37:52,286 - main - INFO -      4. No re-upload needed!
2025-12-16 17:37:52,286 - main - INFO - 
2025-12-16 17:37:52,286 - main - INFO - ================================================================================
2025-12-16 17:37:52,287 - main - INFO -   âœ… Application started successfully!
2025-12-16 17:37:52,287 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-16 17:37:52,288 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-16 17:37:52,288 - main - INFO - ================================================================================
2025-12-16 17:37:52,289 - main - INFO - 
2025-12-16 17:37:52,289 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-16 17:37:53,921 - main - INFO - ğŸ“¥ GET /docs
2025-12-16 17:37:53,922 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-16 17:37:54,166 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-16 17:37:54,176 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.01s
2025-12-16 17:38:31,635 - main - INFO - ğŸ“¥ POST /api/compare-quotes
2025-12-16 17:38:31,640 - app.api.routes - INFO - ğŸ” Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:38:31,644 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:38:31,647 - app.api.routes - INFO - âœ… User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-16 17:38:31,648 - app.api.routes - INFO -    - Remaining comparisons: 247
2025-12-16 17:38:31,649 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-16 17:38:31,649 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-16 17:38:31,649 - app.api.routes - INFO - ğŸ†” Generated comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:38:31,650 - app.services.progress_tracker - INFO - ğŸ“Š Progress initialized for job: job_3d995b93efeb (2 files)
2025-12-16 17:38:31,650 - app.api.routes - INFO - ğŸ“Š Initialized progress tracking: job_3d995b93efeb
2025-12-16 17:38:31,651 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:38:31,651 - app.api.routes - INFO - ğŸ“„ Processing: Malath.pdf
2025-12-16 17:38:31,651 - app.api.routes - INFO - ======================================================================
2025-12-16 17:38:31,653 - app.api.routes - INFO - ğŸ’¾ Saved file: Malath.pdf â†’ e9f131c024e24758b2ecd566b16995a0.pdf (203279 bytes)
2025-12-16 17:38:31,653 - app.api.routes - INFO - ğŸ“– Extracting text from: Malath.pdf
2025-12-16 17:38:31,655 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\e9f131c024e24758b2ecd566b16995a0.pdf
2025-12-16 17:38:31,656 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:38:31,675 - app.api.routes - INFO - ğŸ“„ Processing: GIG.pdf
2025-12-16 17:38:31,693 - app.api.routes - INFO - ======================================================================
2025-12-16 17:38:31,705 - app.services.pdf_extractor - INFO - Successfully extracted 6578 characters from 3 pages
2025-12-16 17:38:31,705 - app.api.routes - INFO - ğŸ’¾ Saved file: GIG.pdf â†’ eaa00614669e42a19e9a7f9a160c362c.pdf (478025 bytes)
2025-12-16 17:38:31,706 - app.api.routes - INFO - ğŸ“– Extracting text from: GIG.pdf
2025-12-16 17:38:31,706 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\eaa00614669e42a19e9a7f9a160c362c.pdf
2025-12-16 17:38:31,706 - app.api.routes - INFO - ğŸ¤– Parsing with AI: Malath.pdf
2025-12-16 17:38:31,707 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for Malath.pdf
2025-12-16 17:38:31,805 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Malath Insurance (pattern: \bmalath\b)
2025-12-16 17:38:31,824 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Malath Insurance
2025-12-16 17:38:31,832 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): M/S. Saudi Amana Contracting Co.
2025-12-16 17:38:31,832 - app.services.pdf_extractor - INFO - Successfully extracted 6549 characters from 3 pages
2025-12-16 17:38:31,832 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:38:31,833 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GENERIC
2025-12-16 17:38:31,869 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 2 sublimits
2025-12-16 17:38:31,869 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:38:32,385 - app.api.routes - INFO - ğŸ¤– Parsing with AI: GIG.pdf
2025-12-16 17:38:32,385 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for GIG.pdf
2025-12-16 17:38:32,386 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Gulf Insurance Group (GIG) (pattern: \bgig\b)
2025-12-16 17:38:32,386 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Gulf Insurance Group (GIG)
2025-12-16 17:38:32,387 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): Saudi Amana Contracting Co. L.L.C
2025-12-16 17:38:32,387 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:38:32,388 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GIG
2025-12-16 17:38:32,432 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 4 sublimits
2025-12-16 17:38:32,433 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:39:00,388 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:00,395 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:39:00,395 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:39:00,396 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:39:00,396 - app.services.ai_parser - WARNING - âš ï¸ Only 4 benefits, using fallback...
2025-12-16 17:39:00,401 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 28 benefits from patterns
2025-12-16 17:39:00,401 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 29 total
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ”„ Rate: 'SR 69,602 @ 0.2%' â†’ '0.2%'
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ’° Calculated: 28590992628.64 from SI: 41077832.0 Ã— Rate: SR 69,602 @ 0.2%
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5%, min SR 10,000
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ“Š Counts: 29 benefits, 20 exclusions, 6 warranties, 3 extensions
2025-12-16 17:39:00,404 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:39:04,101 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:04,107 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:39:04,108 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:39:04,109 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:39:04,110 - app.services.ai_parser - WARNING - âš ï¸ Only 4 warranties, using fallback...
2025-12-16 17:39:04,115 - app.services.ai_parser - INFO - âš ï¸ Fallback extracted 6 warranties from patterns
2025-12-16 17:39:04,115 - app.services.ai_parser - INFO - âœ… Enhanced warranties: 7 total
2025-12-16 17:39:04,115 - app.services.ai_parser - WARNING - âš ï¸ Only 3 benefits, using fallback...
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 10 benefits from patterns
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 10 total
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ”„ Rate: '0.30% (Per Cent)' â†’ '0.30%'
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ’° Calculated: 123233.49 from SI: 41077831.25 Ã— Rate: 0.30% (Per Cent)
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5% of the claim amount, min. SR 10,000
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:39:04,119 - app.services.ai_parser - INFO - ğŸ“Š Counts: 10 benefits, 37 exclusions, 7 warranties, 0 extensions
2025-12-16 17:39:04,119 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:39:08,118 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:08,126 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:39:09,559 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:09,562 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:39:10,852 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:10,860 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:39:10,861 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:39:10,862 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:39:10,863 - app.services.ai_parser - INFO - 
2025-12-16 17:39:10,864 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,864 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - Malath.pdf
2025-12-16 17:39:10,865 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,866 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Malath Insurance
2025-12-16 17:39:10,866 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: M/S. Saudi Amana Contracting Co.
2025-12-16 17:39:10,867 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 169,122.30
2025-12-16 17:39:10,868 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.30%
2025-12-16 17:39:10,868 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:39:10,869 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.0/100
2025-12-16 17:39:10,870 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5% of the claim amount, min. SR 10,000
2025-12-16 17:39:10,870 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:39:10,871 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:39:10,872 - app.services.ai_parser - INFO - 
2025-12-16 17:39:10,872 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:39:10,873 - app.services.ai_parser - INFO -    âœ“ Benefits: 10
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Exclusions: 37
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Warranties: 7
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Extensions: 0
2025-12-16 17:39:10,875 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:39:10,876 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,879 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: e9f131c024e24758b2ecd566b16995a0.pdf â†’ 6941993e06f206f2b4664fbc
2025-12-16 17:39:10,879 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 6941993e06f206f2b4664fbc
2025-12-16 17:39:10,884 - app.services.user_documents_service - INFO - âœ… Saved user document: Malath.pdf â†’ 6941993e06f206f2b4664fbd (203279 bytes)
2025-12-16 17:39:10,884 - app.api.routes - INFO - âœ… Saved user document: Malath.pdf â†’ 6941993e06f206f2b4664fbd
2025-12-16 17:39:10,885 - app.api.routes - INFO - âœ… Successfully processed: Malath.pdf
2025-12-16 17:42:52,069 - main - INFO - ğŸ“¥ GET /docs
2025-12-16 17:42:52,070 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-16 17:42:55,081 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-16 17:42:55,083 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-16 17:43:22,206 - main - INFO - ğŸ“¥ POST /api/compare-quotes
2025-12-16 17:43:22,211 - app.api.routes - INFO - ğŸ” Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-16 17:43:22,213 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:43:22,213 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:43:22,214 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:43:22,216 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:43:22,217 - app.api.routes - INFO - âœ… User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Remaining comparisons: 247
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-16 17:43:22,218 - app.api.routes - INFO - ğŸ†” Generated comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:43:22,218 - app.services.progress_tracker - INFO - ğŸ“Š Progress initialized for job: job_4348dda928d2 (2 files)
2025-12-16 17:43:22,219 - app.api.routes - INFO - ğŸ“Š Initialized progress tracking: job_4348dda928d2
2025-12-16 17:43:22,219 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:43:22,220 - app.api.routes - INFO - ğŸ“„ Processing: GIG.pdf
2025-12-16 17:43:22,220 - app.api.routes - INFO - ======================================================================
2025-12-16 17:43:22,221 - app.api.routes - INFO - ğŸ’¾ Saved file: GIG.pdf â†’ f3b4a52383e94e478e92c67b611eb127.pdf (478025 bytes)
2025-12-16 17:43:22,222 - app.api.routes - INFO - ğŸ“– Extracting text from: GIG.pdf
2025-12-16 17:43:22,222 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:43:22,222 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\f3b4a52383e94e478e92c67b611eb127.pdf
2025-12-16 17:43:22,222 - app.api.routes - INFO - ğŸ“„ Processing: Malath.pdf
2025-12-16 17:43:22,223 - app.api.routes - INFO - ======================================================================
2025-12-16 17:43:22,357 - app.services.pdf_extractor - INFO - Successfully extracted 6549 characters from 3 pages
2025-12-16 17:43:22,357 - app.api.routes - INFO - ğŸ’¾ Saved file: Malath.pdf â†’ e9efe96152c842b2ab137d2dbad80224.pdf (203279 bytes)
2025-12-16 17:43:22,357 - app.api.routes - INFO - ğŸ“– Extracting text from: Malath.pdf
2025-12-16 17:43:22,358 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\e9efe96152c842b2ab137d2dbad80224.pdf
2025-12-16 17:43:22,358 - app.api.routes - INFO - ğŸ¤– Parsing with AI: GIG.pdf
2025-12-16 17:43:22,358 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for GIG.pdf
2025-12-16 17:43:22,386 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Gulf Insurance Group (GIG) (pattern: \bgig\b)
2025-12-16 17:43:22,395 - app.services.pdf_extractor - INFO - Successfully extracted 6578 characters from 3 pages
2025-12-16 17:43:22,395 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Gulf Insurance Group (GIG)
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): Saudi Amana Contracting Co. L.L.C
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GIG
2025-12-16 17:43:22,439 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 4 sublimits
2025-12-16 17:43:22,440 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:43:22,447 - app.api.routes - INFO - ğŸ¤– Parsing with AI: Malath.pdf
2025-12-16 17:43:22,448 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for Malath.pdf
2025-12-16 17:43:22,452 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Malath Insurance (pattern: \bmalath\b)
2025-12-16 17:43:22,452 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Malath Insurance
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): M/S. Saudi Amana Contracting Co.
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GENERIC
2025-12-16 17:43:22,488 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 2 sublimits
2025-12-16 17:43:22,488 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:43:49,587 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:49,591 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:43:49,591 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:43:49,592 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:43:49,592 - app.services.ai_parser - WARNING - âš ï¸ Only 4 benefits, using fallback...
2025-12-16 17:43:49,597 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 28 benefits from patterns
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 29 total
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - ğŸ”„ Rate: 'SR 69,602 @ 0.2%' â†’ '0.2%'
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - ğŸ’° Calculated: 28590992628.64 from SI: 41077832.0 Ã— Rate: SR 69,602 @ 0.2%
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5%, min SR 10,000
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - ğŸ“Š Counts: 29 benefits, 21 exclusions, 6 warranties, 2 extensions
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:43:56,293 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:56,301 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:43:56,644 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:43:56,648 - app.services.ai_parser - WARNING - âš ï¸ Only 4 warranties, using fallback...
2025-12-16 17:43:56,648 - app.services.ai_parser - INFO - âš ï¸ Fallback extracted 6 warranties from patterns
2025-12-16 17:43:56,648 - app.services.ai_parser - INFO - âœ… Enhanced warranties: 7 total
2025-12-16 17:43:56,649 - app.services.ai_parser - WARNING - âš ï¸ Only 0 benefits, using fallback...
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 10 benefits from patterns
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 10 total
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ”„ Rate: '0.30% (Per Cent)' â†’ '0.30%'
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ’° Calculated: 123233.49 from SI: 41077831.25 Ã— Rate: 0.30% (Per Cent)
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5% of the claim amount, min SR 10,000
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:43:56,652 - app.services.ai_parser - INFO - ğŸ“Š Counts: 10 benefits, 37 exclusions, 7 warranties, 0 extensions
2025-12-16 17:43:56,652 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:43:57,537 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:57,791 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - 
2025-12-16 17:43:57,793 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,793 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - GIG.pdf
2025-12-16 17:43:57,794 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,795 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Gulf Insurance Group (GIG)
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: Saudi Amana Contracting Co. L.L.C
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 69,602.00
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.2%
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.7/100
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5%, min SR 10,000
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - 
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Benefits: 29
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Exclusions: 21
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Warranties: 6
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Extensions: 2
2025-12-16 17:43:57,800 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:43:57,800 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,802 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: f3b4a52383e94e478e92c67b611eb127.pdf â†’ 69419a5d06f206f2b4664fbe
2025-12-16 17:43:57,802 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419a5d06f206f2b4664fbe
2025-12-16 17:43:57,807 - app.services.user_documents_service - INFO - âœ… Saved user document: GIG.pdf â†’ 69419a5d06f206f2b4664fbf (478025 bytes)
2025-12-16 17:43:57,808 - app.api.routes - INFO - âœ… Saved user document: GIG.pdf â†’ 69419a5d06f206f2b4664fbf
2025-12-16 17:43:57,808 - app.api.routes - INFO - âœ… Successfully processed: GIG.pdf
2025-12-16 17:44:03,042 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:03,044 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:44:03,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:44:03,661 - app.services.ai_parser - INFO - 
2025-12-16 17:44:03,662 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,662 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - Malath.pdf
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Malath Insurance
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: M/S. Saudi Amana Contracting Co.
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 169,122.30
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.30%
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.0/100
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5% of the claim amount, min SR 10,000
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - 
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO -    âœ“ Benefits: 10
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO -    âœ“ Exclusions: 37
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Warranties: 7
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Extensions: 0
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,668 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: e9efe96152c842b2ab137d2dbad80224.pdf â†’ 69419a6306f206f2b4664fc0
2025-12-16 17:44:03,668 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419a6306f206f2b4664fc0
2025-12-16 17:44:03,671 - app.services.user_documents_service - INFO - âœ… Saved user document: Malath.pdf â†’ 69419a6306f206f2b4664fc1 (203279 bytes)
2025-12-16 17:44:03,671 - app.api.routes - INFO - âœ… Saved user document: Malath.pdf â†’ 69419a6306f206f2b4664fc1
2025-12-16 17:44:03,671 - app.api.routes - INFO - âœ… Successfully processed: Malath.pdf
2025-12-16 17:44:03,672 - app.api.routes - INFO - 
âœ… Successfully extracted 2 quotes
2025-12-16 17:44:03,672 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:44:03,672 - app.api.routes - INFO - ğŸ”€ Generating comparison for 2 quotes
2025-12-16 17:44:03,673 - app.api.routes - INFO - ======================================================================
2025-12-16 17:44:03,673 - app.services.ai_ranker - INFO - ğŸ” Starting comprehensive comparison of 2 quotes
2025-12-16 17:44:03,673 - app.services.ai_ranker - INFO - âš–ï¸ Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ğŸ† Hakim Score integration enabled
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ğŸ” IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ================================================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Gulf Insurance Group (GIG)
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:44:03,676 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:03,676 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:44:03,677 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:44:03,678 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:44:03,679 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:44:03,679 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GIG",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,832",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077832,
    "total_sum_insured": "SR 41,077,832"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 500,000",
        "deductible": "5%, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 1,000,000",
        "deductible": "5%, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 2,000,000",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 2,000,000",
        "deductible": "5%, min SR 75,000",
        "applies_to": "material_damage"
      },
      {
        "range": "Gantry Crane",
        "deductible": "10%, min SR 50,000",
        "applies_to": "material
2025-12-16 17:44:03,683 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Gulf Insurance Group (GIG)
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO - 
ğŸ“Š Gulf Insurance Group (GIG):
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Extensions: 2
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Exclusions: 21
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Malath Insurance
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,831.25",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077831.25,
    "total_sum_insured": "SR 41,077,831.25"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 100,000",
        "deductible": "5% of the claim amount, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100,000 to SR 500,000",
        "deductible": "10% of claim amount, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500,000",
        "deductible": "10% of the claim amount, min SR 75,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "applicable_md_tier": {
      "range": "up to SR 100,000",
      "deductible": "5% of the clai
2025-12-16 17:44:03,693 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,694 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:44:03,695 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:44:03,697 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:44:03,697 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:44:03,698 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,698 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Malath Insurance
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO - 
ğŸ“Š Malath Insurance:
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Extensions: 0
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Exclusions: 37
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Gulf Insurance Group (GIG)
2025-12-16 17:44:03,875 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 6
2025-12-16 17:44:03,875 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 2
2025-12-16 17:44:03,876 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:44:03,877 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:44:03,878 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:44:03,879 - app.services.ai_ranker - INFO -       â€¢ Hot works Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO -       â€¢ No smoking Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO -       â€¢ Housekeeping Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Malath Insurance
2025-12-16 17:44:04,124 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 7
2025-12-16 17:44:04,124 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -       â€¢ Warranted that all plant and equipment is operated and maintained in accordance ...
2025-12-16 17:44:04,126 - app.services.ai_ranker - INFO -       â€¢ Warranted that All operators of the equipment must be licensed to operate such p...
2025-12-16 17:44:04,126 - app.services.ai_ranker - INFO -       â€¢ Warranted that all equipment is fitted with operational overload alarms.
2025-12-16 17:44:04,127 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:44:04,127 - app.services.ai_ranker - INFO - âœ… UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-16 17:44:04,128 - app.services.ai_ranker - INFO - ================================================================================

2025-12-16 17:44:04,128 - app.services.ai_ranker - INFO - ğŸ“Š Gulf Insurance Group (GIG): Hakim Score=88.0 (Strong), Weighted Score=88.13
2025-12-16 17:44:04,129 - app.services.ai_ranker - INFO - ğŸ“Š Malath Insurance: Hakim Score=75.0 (Standard), Weighted Score=58.45
2025-12-16 17:44:04,129 - app.services.ai_ranker - INFO - ğŸ¤– Performing weighted ranking with Hakim Score...
2025-12-16 17:44:04,130 - app.services.ai_ranker - INFO - ğŸ¤– Starting AI ranking analysis (background task)...
2025-12-16 17:44:04,130 - app.services.ai_ranker - INFO - âœ… Weighted ranking with Hakim Score completed
2025-12-16 17:44:12,600 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:12,606 - app.services.ai_ranker - INFO - âœ… AI ranking analysis completed
2025-12-16 17:44:12,606 - app.services.ai_ranker - INFO - ğŸ”¨ Building comprehensive comparison structure...
2025-12-16 17:44:16,220 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:16,225 - app.services.ai_ranker - INFO - âœ… Generated reasoning for Gulf Insurance Group (GIG): Gulf Insurance Group (GIG) stands out as the best insurance provider due to its exceptional score of...
2025-12-16 17:44:16,226 - app.services.ai_ranker - INFO - âœ… Comprehensive comparison complete
2025-12-16 17:44:16,230 - app.api.routes - INFO - ğŸ¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:44:16,230 - app.services.mongodb_service_enhanced - INFO - ğŸ’¾ Saving COMPLETE comparison data to MongoDB
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO - ğŸ“‹ Extracted quotes count: 2
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Gulf Insurance Group (GIG)
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:44:16,233 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:44:16,233 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:44:16,235 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Malath Insurance
2025-12-16 17:44:16,235 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:44:16,237 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:44:16,237 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:44:16,240 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Data sizes:
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,495 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 20,834 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Data table: 9,181 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,500 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 24,825 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Total document: 126,451 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-16 17:44:16,243 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-16 17:44:16,243 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-16 17:44:16,245 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-16 17:44:16,245 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-16 17:44:16,248 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:44:16,248 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:16,249 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-16 17:44:16,253 - app.services.mongodb_service_enhanced - INFO - âœ… Saved new comparison: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,253 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 69419a705a37704a1c0a83f2
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO - âœ… Verification - Saved document has:
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-16 17:44:16,259 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:44:16,259 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-16 17:44:16,260 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-16 17:44:16,261 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-16 17:44:16,261 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-16 17:44:16,262 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-16 17:44:16,262 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:16,263 - app.api.routes - INFO - âœ… Saved comparison result to MongoDB: 69419a705a37704a1c0a83f2
2025-12-16 17:44:16,263 - app.api.routes - INFO -    Database: hakemAI
2025-12-16 17:44:16,263 - app.api.routes - INFO -    Collection: comparisons
2025-12-16 17:44:16,264 - app.api.routes - INFO -    Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,264 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,265 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:44:16,269 - app.services.user_subscription_service - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,269 - app.api.routes - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,270 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:44:16,270 - app.api.routes - INFO - âœ… COMPARISON COMPLETE
2025-12-16 17:44:16,270 - app.api.routes - INFO - ======================================================================
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ“Š Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ‘¤ User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ“„ Files Processed: 2/2
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ’¾ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-16 17:44:16,271 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,272 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:44:16,272 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:44:16,273 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:44:16,275 - app.api.routes - INFO - ğŸ“Š Remaining comparisons: 246
2025-12-16 17:44:16,275 - app.api.routes - INFO - ======================================================================

2025-12-16 17:44:16,275 - app.services.progress_tracker - INFO - âœ… Job completed: job_4348dda928d2 â†’ comparison_id: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,278 - main - INFO - ğŸ“¤ POST /api/compare-quotes - 200 - 54.07s
2025-12-16 17:46:02,387 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:08,493 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 80.0
2025-12-16 17:46:08,494 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:46:08,494 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - 
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - GIG.pdf
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Gulf Insurance Group (GIG)
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: Saudi Amana Contracting Co. L.L.C
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 69,602.00
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.2%
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ¯ Score: 80.0/100
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.3/100
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5%, min SR 10,000
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO - 
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Benefits: 29
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Exclusions: 20
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Warranties: 6
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO -    âœ“ Extensions: 3
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,501 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: eaa00614669e42a19e9a7f9a160c362c.pdf â†’ 69419ae006f206f2b4664fc2
2025-12-16 17:46:08,501 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419ae006f206f2b4664fc2
2025-12-16 17:46:08,504 - app.services.user_documents_service - INFO - âœ… Saved user document: GIG.pdf â†’ 69419ae006f206f2b4664fc3 (478025 bytes)
2025-12-16 17:46:08,504 - app.api.routes - INFO - âœ… Saved user document: GIG.pdf â†’ 69419ae006f206f2b4664fc3
2025-12-16 17:46:08,504 - app.api.routes - INFO - âœ… Successfully processed: GIG.pdf
2025-12-16 17:46:08,504 - app.api.routes - INFO - 
âœ… Successfully extracted 2 quotes
2025-12-16 17:46:08,505 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:46:08,505 - app.api.routes - INFO - ğŸ”€ Generating comparison for 2 quotes
2025-12-16 17:46:08,505 - app.api.routes - INFO - ======================================================================
2025-12-16 17:46:08,505 - app.services.ai_ranker - INFO - ğŸ” Starting comprehensive comparison of 2 quotes
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - âš–ï¸ Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ğŸ† Hakim Score integration enabled
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ğŸ” IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ================================================================================
2025-12-16 17:46:08,507 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:46:08,507 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Malath Insurance
2025-12-16 17:46:08,539 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:46:08,540 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:46:08,576 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:08,612 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:46:08,612 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:46:08,613 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:46:08,613 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:46:08,615 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,831.25",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077831.25,
    "total_sum_insured": "SR 41,077,831.25"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 100,000",
        "deductible": "5% of the claim amount, min. SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100,000 to SR 500,000",
        "deductible": "10% of claim amount, min. SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500,000",
        "deductible": "10% of the claim amount, min. SR 75,000",
        "applies_to": "material_damage"
      }
    ],
    "applicable_md_tier": {
      "range": "up to SR 100,000",
      "deductible": "5% of the claim amount, min. SR 10,000",
      "applies_to": "material_damage"
    },
 
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Malath Insurance
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO - 
ğŸ“Š Malath Insurance:
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Extensions: 0
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Exclusions: 37
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Gulf Insurance Group (GIG)
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:46:08,627 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GIG",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,832",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077832,
    "total_sum_insured": "SR 41,077,832"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 500,000",
        "deductible": "5%, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 1,000,000",
        "deductible": "5%, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 2,000,000",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 2,000,000",
        "deductible": "5%, min SR 75,000",
        "applies_to": "material_damage"
      },
      {
        "range": "Gantry Crane",
        "deductible": "10%, min SR 50,000",
        "applies_to": "material
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Gulf Insurance Group (GIG)
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO - 
ğŸ“Š Gulf Insurance Group (GIG):
2025-12-16 17:46:08,637 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-16 17:46:08,638 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-16 17:46:08,638 - app.services.ai_ranker - INFO -    Exclusions: 20
2025-12-16 17:46:08,651 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:46:08,658 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Malath Insurance
2025-12-16 17:46:08,863 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 7
2025-12-16 17:46:08,863 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -       â€¢ Warranted that all plant and equipment is operated and maintained in accordance ...
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO -       â€¢ Warranted that All operators of the equipment must be licensed to operate such p...
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO -       â€¢ Warranted that all equipment is fitted with operational overload alarms.
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Gulf Insurance Group (GIG)
2025-12-16 17:46:09,055 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 6
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 3
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ Hot works Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ No smoking Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ Housekeeping Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - âœ… UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ================================================================================

2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ğŸ“Š Malath Insurance: Hakim Score=75.0 (Standard), Weighted Score=58.45
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ğŸ“Š Gulf Insurance Group (GIG): Hakim Score=88.0 (Strong), Weighted Score=88.27
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - ğŸ¤– Performing weighted ranking with Hakim Score...
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - ğŸ¤– Starting AI ranking analysis (background task)...
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - âœ… Weighted ranking with Hakim Score completed
2025-12-16 17:46:25,738 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:25,739 - app.services.ai_ranker - INFO - âœ… AI ranking analysis completed
2025-12-16 17:46:25,739 - app.services.ai_ranker - INFO - ğŸ”¨ Building comprehensive comparison structure...
2025-12-16 17:46:29,354 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:29,590 - app.services.ai_ranker - INFO - âœ… Generated reasoning for Gulf Insurance Group (GIG): Gulf Insurance Group (GIG) stands out as the best insurance provider due to its exceptional score of...
2025-12-16 17:46:29,592 - app.services.ai_ranker - INFO - âœ… Comprehensive comparison complete
2025-12-16 17:46:29,596 - app.api.routes - INFO - ğŸ¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:46:29,596 - app.services.mongodb_service_enhanced - INFO - ğŸ’¾ Saving COMPLETE comparison data to MongoDB
2025-12-16 17:46:29,597 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,598 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-16 17:46:29,598 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-16 17:46:29,599 - app.services.mongodb_service_enhanced - INFO - ğŸ“‹ Extracted quotes count: 2
2025-12-16 17:46:29,600 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Malath Insurance
2025-12-16 17:46:29,601 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:46:29,601 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:46:29,602 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:46:29,602 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:46:29,603 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:46:29,604 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:46:29,605 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Gulf Insurance Group (GIG)
2025-12-16 17:46:29,605 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:46:29,606 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:46:29,606 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:46:29,607 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:46:29,608 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:46:29,608 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:46:29,613 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Data sizes:
2025-12-16 17:46:29,614 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,493 bytes
2025-12-16 17:46:29,614 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 22,009 bytes
2025-12-16 17:46:29,615 - app.services.mongodb_service_enhanced - INFO -    Data table: 9,608 bytes
2025-12-16 17:46:29,615 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,500 bytes
2025-12-16 17:46:29,616 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 26,024 bytes
2025-12-16 17:46:29,616 - app.services.mongodb_service_enhanced - INFO -    Total document: 132,137 bytes
2025-12-16 17:46:29,617 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-16 17:46:29,617 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-16 17:46:29,618 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-16 17:46:29,618 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-16 17:46:29,619 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-16 17:46:29,619 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-16 17:46:29,620 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-16 17:46:29,620 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-16 17:46:29,621 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-16 17:46:29,621 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-16 17:46:29,622 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-16 17:46:29,622 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-16 17:46:29,623 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-16 17:46:29,623 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-16 17:46:29,625 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-16 17:46:29,625 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-16 17:46:29,626 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-16 17:46:29,627 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:46:29,627 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:29,628 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-16 17:46:29,632 - app.services.mongodb_service_enhanced - INFO - âœ… Saved new comparison: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,633 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 69419af55a37704a1c0a83f3
2025-12-16 17:46:29,635 - app.services.mongodb_service_enhanced - INFO - âœ… Verification - Saved document has:
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-16 17:46:29,637 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-16 17:46:29,637 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-16 17:46:29,638 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-16 17:46:29,638 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-16 17:46:29,639 - app.services.mongodb_service_enhanced - INFO -    - First row keys (27): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-16 17:46:29,640 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-16 17:46:29,640 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:29,643 - app.api.routes - INFO - âœ… Saved comparison result to MongoDB: 69419af55a37704a1c0a83f3
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Database: hakemAI
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Collection: comparisons
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,644 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,644 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:46:29,646 - app.services.user_subscription_service - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,646 - app.api.routes - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,647 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:46:29,647 - app.api.routes - INFO - âœ… COMPARISON COMPLETE
2025-12-16 17:46:29,648 - app.api.routes - INFO - ======================================================================
2025-12-16 17:46:29,648 - app.api.routes - INFO - ğŸ“Š Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,648 - app.api.routes - INFO - ğŸ‘¤ User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,649 - app.api.routes - INFO - ğŸ“„ Files Processed: 2/2
2025-12-16 17:46:29,649 - app.api.routes - INFO - ğŸ’¾ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-16 17:46:29,649 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,649 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:46:29,650 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:46:29,653 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:46:29,655 - app.api.routes - INFO - ğŸ“Š Remaining comparisons: 245
2025-12-16 17:46:29,655 - app.api.routes - INFO - ======================================================================

2025-12-16 17:46:29,655 - app.services.progress_tracker - INFO - âœ… Job completed: job_3d995b93efeb â†’ comparison_id: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,657 - main - INFO - ğŸ“¤ POST /api/compare-quotes - 200 - 478.02s
2025-12-16 17:52:52,302 - app.services.progress_tracker - INFO - ğŸ§¹ Cleaned up 2 old progress entries
2025-12-16 17:52:52,303 - app.services.progress_tracker - INFO - ğŸ§¹ Cleanup task: Removed 2 old entries
2025-12-22 20:21:57,409 - main - INFO - 
2025-12-22 20:21:57,409 - main - INFO - ================================================================================
2025-12-22 20:21:57,409 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:21:57,409 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:21:57,410 - main - INFO - ================================================================================
2025-12-22 20:21:57,410 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:21:57,410 - main - INFO -   Upload Directory: uploads
2025-12-22 20:21:57,410 - main - INFO -   Max File Size: 20MB
2025-12-22 20:21:57,411 - main - INFO - ================================================================================
2025-12-22 20:21:57,411 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:21:57,411 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:21:57,412 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:21:57,845 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:21:57,869 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:21:57,870 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:21:57,870 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:21:57,870 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:21:57,871 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:21:57,897 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:21:57,905 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:21:57,913 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:21:58,030 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:21:58,030 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:21:58,030 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:21:58,031 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:21:58,031 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:21:58,053 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:21:58,054 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:21:58,054 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:21:58,069 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:21:58,169 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:21:58,169 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:21:58,169 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:21:58,169 - main - INFO - 
2025-12-22 20:21:58,170 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:21:58,170 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:21:58,170 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:21:58,170 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:21:58,171 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:21:58,171 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:21:58,171 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:21:58,171 - main - INFO - 
2025-12-22 20:21:58,171 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:21:58,172 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:21:58,172 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:21:58,172 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:21:58,172 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:21:58,172 - main - INFO - 
2025-12-22 20:21:58,172 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:21:58,173 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:21:58,173 - main - INFO -        - No manual section generation
2025-12-22 20:21:58,173 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:21:58,173 - main - INFO - 
2025-12-22 20:21:58,173 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:21:58,173 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:21:58,173 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:21:58,174 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:21:58,174 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:21:58,174 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:21:58,174 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:21:58,174 - main - INFO - 
2025-12-22 20:21:58,175 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:21:58,175 - main - INFO -      Main:
2025-12-22 20:21:58,175 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:21:58,175 - main - INFO - 
2025-12-22 20:21:58,175 - main - INFO -      Retrieval:
2025-12-22 20:21:58,176 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:21:58,176 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:21:58,176 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:21:58,176 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:21:58,176 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:21:58,176 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:21:58,177 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:21:58,177 - main - INFO - 
2025-12-22 20:21:58,177 - main - INFO -      Management:
2025-12-22 20:21:58,177 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:21:58,177 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:21:58,177 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:21:58,177 - main - INFO - 
2025-12-22 20:21:58,178 - main - INFO -      Documents (MongoDB):
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:21:58,178 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:21:58,179 - main - INFO - 
2025-12-22 20:21:58,179 - main - INFO -      Diagnostics & Health:
2025-12-22 20:21:58,179 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:21:58,179 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:21:58,180 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:21:58,180 - main - INFO - 
2025-12-22 20:21:58,180 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:21:58,181 - main - INFO - 
2025-12-22 20:21:58,181 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:21:58,181 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:21:58,182 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:21:58,182 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:21:58,182 - main - INFO -      4. No re-upload needed!
2025-12-22 20:21:58,182 - main - INFO - 
2025-12-22 20:21:58,182 - main - INFO - ================================================================================
2025-12-22 20:21:58,183 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:21:58,183 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:21:58,183 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:21:58,183 - main - INFO - ================================================================================
2025-12-22 20:21:58,183 - main - INFO - 
2025-12-22 20:21:58,184 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:22:03,330 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 20:22:03,331 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 20:22:03,545 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 20:22:03,565 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.02s
2025-12-22 20:22:44,950 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 20:22:44,951 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 20:22:45,819 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 20:22:45,820 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-22 20:25:50,738 - main - INFO - 
2025-12-22 20:25:50,739 - main - INFO - ================================================================================
2025-12-22 20:25:50,739 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:25:50,742 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:25:50,743 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:25:50,745 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:25:50,746 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:25:50,747 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:25:50,748 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:25:50,749 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:25:50,750 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:25:50,751 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:25:50,752 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:25:50,753 - main - INFO - ================================================================================
2025-12-22 20:25:50,754 - main - INFO - 
2025-12-22 20:25:57,449 - main - INFO - 
2025-12-22 20:25:57,449 - main - INFO - ================================================================================
2025-12-22 20:25:57,449 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:25:57,449 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:25:57,450 - main - INFO - ================================================================================
2025-12-22 20:25:57,450 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:25:57,450 - main - INFO -   Upload Directory: uploads
2025-12-22 20:25:57,450 - main - INFO -   Max File Size: 20MB
2025-12-22 20:25:57,451 - main - INFO - ================================================================================
2025-12-22 20:25:57,451 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:25:57,451 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:25:57,452 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:25:57,798 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:25:57,813 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:25:57,814 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:25:57,814 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:25:57,816 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:25:57,817 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:25:57,854 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:25:57,855 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:25:57,857 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:25:57,864 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:25:57,864 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:25:57,864 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:25:57,865 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:25:57,866 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:25:57,917 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:25:57,917 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:25:57,917 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:25:57,949 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:25:57,951 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:25:57,952 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:25:57,952 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:25:57,952 - main - INFO - 
2025-12-22 20:25:57,952 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:25:57,952 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:25:57,953 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:25:57,953 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:25:57,953 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:25:57,953 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:25:57,953 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:25:57,954 - main - INFO - 
2025-12-22 20:25:57,954 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:25:57,954 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:25:57,954 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:25:57,954 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:25:57,954 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:25:57,955 - main - INFO - 
2025-12-22 20:25:57,955 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:25:57,955 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:25:57,955 - main - INFO -        - No manual section generation
2025-12-22 20:25:57,955 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:25:57,955 - main - INFO - 
2025-12-22 20:25:57,956 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:25:57,956 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:25:57,956 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:25:57,956 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:25:57,956 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:25:57,957 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:25:57,957 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:25:57,957 - main - INFO - 
2025-12-22 20:25:57,957 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:25:57,957 - main - INFO -      Main:
2025-12-22 20:25:57,958 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:25:57,958 - main - INFO - 
2025-12-22 20:25:57,959 - main - INFO -      Retrieval:
2025-12-22 20:25:57,959 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:25:57,961 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:25:57,961 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:25:57,961 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:25:57,962 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:25:57,962 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:25:57,962 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:25:57,962 - main - INFO - 
2025-12-22 20:25:57,963 - main - INFO -      Management:
2025-12-22 20:25:57,963 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:25:57,963 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:25:57,964 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:25:57,964 - main - INFO - 
2025-12-22 20:25:57,964 - main - INFO -      Documents (MongoDB):
2025-12-22 20:25:57,964 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:25:57,965 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:25:57,965 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:25:57,965 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:25:57,966 - main - INFO - 
2025-12-22 20:25:57,966 - main - INFO -      Diagnostics & Health:
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:25:57,967 - main - INFO - 
2025-12-22 20:25:57,967 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:25:57,968 - main - INFO - 
2025-12-22 20:25:57,968 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:25:57,969 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:25:57,969 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:25:57,969 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:25:57,969 - main - INFO -      4. No re-upload needed!
2025-12-22 20:25:57,969 - main - INFO - 
2025-12-22 20:25:57,970 - main - INFO - ================================================================================
2025-12-22 20:25:57,970 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:25:57,970 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:25:57,970 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:25:57,970 - main - INFO - ================================================================================
2025-12-22 20:25:57,971 - main - INFO - 
2025-12-22 20:25:57,971 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:00,873 - main - INFO - 
2025-12-22 20:26:00,874 - main - INFO - ================================================================================
2025-12-22 20:26:00,874 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:00,875 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:00,876 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:00,877 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:00,877 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:00,879 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:00,879 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:00,881 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:00,881 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:00,882 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:00,883 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:00,883 - main - INFO - ================================================================================
2025-12-22 20:26:00,883 - main - INFO - 
2025-12-22 20:26:05,265 - main - INFO - 
2025-12-22 20:26:05,265 - main - INFO - ================================================================================
2025-12-22 20:26:05,265 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:05,266 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:05,266 - main - INFO - ================================================================================
2025-12-22 20:26:05,266 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:05,267 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:05,267 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:05,268 - main - INFO - ================================================================================
2025-12-22 20:26:05,268 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:05,269 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:05,269 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:05,322 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:05,330 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:05,330 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:05,340 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:05,344 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:05,346 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:05,348 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:05,348 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:05,368 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:05,368 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:05,368 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:05,378 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:05,383 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:05,383 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:05,384 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:05,384 - main - INFO - 
2025-12-22 20:26:05,384 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:05,384 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:05,385 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:05,385 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:05,385 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:05,385 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:05,386 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:05,386 - main - INFO - 
2025-12-22 20:26:05,386 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:05,386 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:05,387 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:05,387 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:05,387 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:05,387 - main - INFO - 
2025-12-22 20:26:05,387 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:05,388 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:05,388 - main - INFO -        - No manual section generation
2025-12-22 20:26:05,388 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:05,388 - main - INFO - 
2025-12-22 20:26:05,388 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:05,389 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:05,389 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:05,389 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:05,389 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:05,390 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:05,390 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:05,390 - main - INFO - 
2025-12-22 20:26:05,391 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:05,391 - main - INFO -      Main:
2025-12-22 20:26:05,391 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:05,394 - main - INFO - 
2025-12-22 20:26:05,396 - main - INFO -      Retrieval:
2025-12-22 20:26:05,396 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:05,397 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:05,398 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:05,400 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:05,400 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:05,401 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:05,401 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:05,401 - main - INFO - 
2025-12-22 20:26:05,402 - main - INFO -      Management:
2025-12-22 20:26:05,402 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:05,402 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:05,403 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:05,403 - main - INFO - 
2025-12-22 20:26:05,403 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:05,403 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:05,403 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:05,404 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:05,404 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:05,404 - main - INFO - 
2025-12-22 20:26:05,404 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:05,404 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:05,405 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:05,405 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:05,405 - main - INFO - 
2025-12-22 20:26:05,405 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:05,405 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:05,407 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:05,407 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:05,407 - main - INFO - 
2025-12-22 20:26:05,407 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:05,408 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:05,408 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:05,408 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:05,409 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:05,410 - main - INFO - 
2025-12-22 20:26:05,411 - main - INFO - ================================================================================
2025-12-22 20:26:05,412 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:05,412 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:05,412 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:05,412 - main - INFO - ================================================================================
2025-12-22 20:26:05,413 - main - INFO - 
2025-12-22 20:26:05,413 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:09,502 - main - INFO - 
2025-12-22 20:26:09,502 - main - INFO - ================================================================================
2025-12-22 20:26:09,502 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:09,503 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:09,503 - main - INFO - ================================================================================
2025-12-22 20:26:09,503 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:09,503 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:09,504 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:09,504 - main - INFO - ================================================================================
2025-12-22 20:26:09,504 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:09,504 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:09,505 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:09,532 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:09,537 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:09,537 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:09,537 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:09,538 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:09,538 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:09,572 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:09,573 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:09,574 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:09,579 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:09,579 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:09,579 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:09,580 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:09,581 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:09,606 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:09,606 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:09,606 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:09,638 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:09,645 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:09,645 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:09,646 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:09,647 - main - INFO - 
2025-12-22 20:26:09,648 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:09,649 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:09,649 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:09,650 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:09,650 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:09,651 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:09,652 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:09,652 - main - INFO - 
2025-12-22 20:26:09,653 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:09,654 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:09,654 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:09,655 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:09,655 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:09,655 - main - INFO - 
2025-12-22 20:26:09,656 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:09,656 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:09,657 - main - INFO -        - No manual section generation
2025-12-22 20:26:09,657 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:09,658 - main - INFO - 
2025-12-22 20:26:09,658 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:09,659 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:09,660 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:09,660 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:09,661 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:09,661 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:09,662 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:09,662 - main - INFO - 
2025-12-22 20:26:09,663 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:09,663 - main - INFO -      Main:
2025-12-22 20:26:09,663 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:09,664 - main - INFO - 
2025-12-22 20:26:09,664 - main - INFO -      Retrieval:
2025-12-22 20:26:09,664 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:09,664 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:09,665 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:09,665 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:09,665 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:09,665 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:09,666 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:09,666 - main - INFO - 
2025-12-22 20:26:09,667 - main - INFO -      Management:
2025-12-22 20:26:09,667 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:09,667 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:09,668 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:09,668 - main - INFO - 
2025-12-22 20:26:09,668 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:09,670 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:09,670 - main - INFO - 
2025-12-22 20:26:09,670 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:09,670 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:09,671 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:09,671 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:09,671 - main - INFO - 
2025-12-22 20:26:09,672 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:09,675 - main - INFO - 
2025-12-22 20:26:09,675 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:09,676 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:09,676 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:09,677 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:09,677 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:09,677 - main - INFO - 
2025-12-22 20:26:09,678 - main - INFO - ================================================================================
2025-12-22 20:26:09,678 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:09,678 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:09,678 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:09,679 - main - INFO - ================================================================================
2025-12-22 20:26:09,679 - main - INFO - 
2025-12-22 20:26:09,679 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:24,902 - main - INFO - 
2025-12-22 20:26:24,902 - main - INFO - ================================================================================
2025-12-22 20:26:24,902 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:24,904 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:24,904 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:24,905 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:24,906 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:24,907 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:24,907 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:24,908 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:24,909 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:24,911 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:24,911 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:24,912 - main - INFO - ================================================================================
2025-12-22 20:26:24,912 - main - INFO - 
2025-12-22 20:26:28,542 - main - INFO - 
2025-12-22 20:26:28,543 - main - INFO - ================================================================================
2025-12-22 20:26:28,543 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:28,543 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:28,543 - main - INFO - ================================================================================
2025-12-22 20:26:28,543 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:28,544 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:28,544 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:28,544 - main - INFO - ================================================================================
2025-12-22 20:26:28,545 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:28,545 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:28,545 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:28,567 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:28,578 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:28,578 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:28,578 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:28,578 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:28,579 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:28,587 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:28,588 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:28,589 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:28,590 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:28,590 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:28,600 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:28,600 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:28,601 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:28,634 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:28,637 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:28,637 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:28,637 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:28,638 - main - INFO - 
2025-12-22 20:26:28,638 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:28,638 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:28,638 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:28,639 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:28,639 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:28,639 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:28,639 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:28,639 - main - INFO - 
2025-12-22 20:26:28,639 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:28,640 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:28,640 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:28,640 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:28,640 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:28,640 - main - INFO - 
2025-12-22 20:26:28,641 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:28,641 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:28,641 - main - INFO -        - No manual section generation
2025-12-22 20:26:28,642 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:28,642 - main - INFO - 
2025-12-22 20:26:28,642 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:28,642 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:28,643 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:28,643 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:28,644 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:28,644 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:28,646 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:28,648 - main - INFO - 
2025-12-22 20:26:28,648 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:28,649 - main - INFO -      Main:
2025-12-22 20:26:28,649 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:28,649 - main - INFO - 
2025-12-22 20:26:28,649 - main - INFO -      Retrieval:
2025-12-22 20:26:28,649 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:28,650 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:28,650 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:28,650 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:28,650 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:28,650 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:28,651 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:28,651 - main - INFO - 
2025-12-22 20:26:28,651 - main - INFO -      Management:
2025-12-22 20:26:28,651 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:28,651 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:28,651 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:28,652 - main - INFO - 
2025-12-22 20:26:28,652 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:28,653 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:28,653 - main - INFO - 
2025-12-22 20:26:28,653 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:28,653 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:28,653 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:28,654 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:28,654 - main - INFO - 
2025-12-22 20:26:28,654 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:28,655 - main - INFO - 
2025-12-22 20:26:28,655 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:28,656 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:28,656 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:28,656 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:28,656 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:28,656 - main - INFO - 
2025-12-22 20:26:28,656 - main - INFO - ================================================================================
2025-12-22 20:26:28,657 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:28,657 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:28,657 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:28,657 - main - INFO - ================================================================================
2025-12-22 20:26:28,658 - main - INFO - 
2025-12-22 20:26:28,659 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:32,167 - main - INFO - 
2025-12-22 20:26:32,168 - main - INFO - ================================================================================
2025-12-22 20:26:32,168 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:32,168 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:32,168 - main - INFO - ================================================================================
2025-12-22 20:26:32,168 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:32,169 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:32,169 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:32,169 - main - INFO - ================================================================================
2025-12-22 20:26:32,169 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:32,170 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:32,170 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:32,191 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:32,202 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:32,202 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:32,202 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:32,203 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:32,203 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:32,233 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:32,234 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:32,235 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:32,236 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:32,236 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:32,236 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:32,237 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:32,237 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:32,264 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:32,265 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:32,265 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:32,296 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:32,299 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:32,300 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:32,300 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:32,300 - main - INFO - 
2025-12-22 20:26:32,300 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:32,301 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:32,301 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:32,301 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:32,301 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:32,301 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:32,302 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:32,302 - main - INFO - 
2025-12-22 20:26:32,302 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:32,302 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:32,303 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:32,303 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:32,303 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:32,303 - main - INFO - 
2025-12-22 20:26:32,303 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:32,304 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:32,304 - main - INFO -        - No manual section generation
2025-12-22 20:26:32,304 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:32,304 - main - INFO - 
2025-12-22 20:26:32,304 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:32,304 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:32,305 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:32,305 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:32,305 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:32,305 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:32,305 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:32,306 - main - INFO - 
2025-12-22 20:26:32,306 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:32,306 - main - INFO -      Main:
2025-12-22 20:26:32,306 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:32,306 - main - INFO - 
2025-12-22 20:26:32,306 - main - INFO -      Retrieval:
2025-12-22 20:26:32,307 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:32,307 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:32,307 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:32,307 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:32,307 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:32,307 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:32,308 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:32,308 - main - INFO - 
2025-12-22 20:26:32,308 - main - INFO -      Management:
2025-12-22 20:26:32,309 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:32,309 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:32,310 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:32,311 - main - INFO - 
2025-12-22 20:26:32,311 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:32,311 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:32,312 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:32,312 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:32,312 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:32,312 - main - INFO - 
2025-12-22 20:26:32,313 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:32,314 - main - INFO - 
2025-12-22 20:26:32,314 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:32,314 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:32,316 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:32,316 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:32,316 - main - INFO - 
2025-12-22 20:26:32,316 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:32,317 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:32,317 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:32,317 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:32,317 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:32,317 - main - INFO - 
2025-12-22 20:26:32,318 - main - INFO - ================================================================================
2025-12-22 20:26:32,318 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:32,318 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:32,318 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:32,319 - main - INFO - ================================================================================
2025-12-22 20:26:32,319 - main - INFO - 
2025-12-22 20:26:32,319 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:37,733 - main - INFO - 
2025-12-22 20:26:37,733 - main - INFO - ================================================================================
2025-12-22 20:26:37,734 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:37,735 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:37,735 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:37,736 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:37,737 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:37,738 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:37,738 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:37,740 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:37,740 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:37,741 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:37,741 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:37,741 - main - INFO - ================================================================================
2025-12-22 20:26:37,742 - main - INFO - 
2025-12-22 20:26:41,701 - main - INFO - 
2025-12-22 20:26:41,702 - main - INFO - ================================================================================
2025-12-22 20:26:41,702 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:41,702 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:41,702 - main - INFO - ================================================================================
2025-12-22 20:26:41,703 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:41,703 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:41,703 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:41,703 - main - INFO - ================================================================================
2025-12-22 20:26:41,704 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:41,704 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:41,704 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:41,724 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:41,733 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:41,734 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:41,743 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:41,746 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:41,748 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:41,751 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:41,751 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:41,772 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:41,772 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:41,772 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:41,803 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:41,815 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:41,815 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:41,815 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:41,815 - main - INFO - 
2025-12-22 20:26:41,816 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:41,816 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:41,816 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:41,816 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:41,817 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:41,817 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:41,817 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:41,817 - main - INFO - 
2025-12-22 20:26:41,817 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:41,817 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:41,818 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:41,818 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:41,818 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:41,818 - main - INFO - 
2025-12-22 20:26:41,818 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:41,819 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:41,819 - main - INFO -        - No manual section generation
2025-12-22 20:26:41,819 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:41,819 - main - INFO - 
2025-12-22 20:26:41,819 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:41,819 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:41,819 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:41,820 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:41,820 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:41,820 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:41,820 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:41,820 - main - INFO - 
2025-12-22 20:26:41,821 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:41,821 - main - INFO -      Main:
2025-12-22 20:26:41,821 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:41,821 - main - INFO - 
2025-12-22 20:26:41,821 - main - INFO -      Retrieval:
2025-12-22 20:26:41,821 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:41,822 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:41,822 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:41,822 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:41,822 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:41,823 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:41,823 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:41,823 - main - INFO - 
2025-12-22 20:26:41,823 - main - INFO -      Management:
2025-12-22 20:26:41,823 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:41,823 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:41,823 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:41,824 - main - INFO - 
2025-12-22 20:26:41,824 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:41,825 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:41,825 - main - INFO - 
2025-12-22 20:26:41,826 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:41,827 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:41,828 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:41,828 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:41,828 - main - INFO - 
2025-12-22 20:26:41,829 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:41,831 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:41,831 - main - INFO - 
2025-12-22 20:26:41,832 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:41,832 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:41,832 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:41,832 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:41,833 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:41,833 - main - INFO - 
2025-12-22 20:26:41,833 - main - INFO - ================================================================================
2025-12-22 20:26:41,833 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:41,834 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:41,834 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:41,834 - main - INFO - ================================================================================
2025-12-22 20:26:41,834 - main - INFO - 
2025-12-22 20:26:41,835 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:51,394 - main - INFO - 
2025-12-22 20:26:51,395 - main - INFO - ================================================================================
2025-12-22 20:26:51,396 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:51,398 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:51,399 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:51,400 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:51,401 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:51,403 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:51,403 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:51,405 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:51,406 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:51,407 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:51,408 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:51,408 - main - INFO - ================================================================================
2025-12-22 20:26:51,409 - main - INFO - 
2025-12-22 20:26:54,198 - main - INFO - 
2025-12-22 20:26:54,198 - main - INFO - ================================================================================
2025-12-22 20:26:54,198 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:54,199 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:54,199 - main - INFO - ================================================================================
2025-12-22 20:26:54,199 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:54,199 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:54,200 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:54,200 - main - INFO - ================================================================================
2025-12-22 20:26:54,200 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:54,201 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:54,201 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:54,222 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:54,361 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:54,376 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:54,377 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:54,380 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:54,380 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:54,421 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:54,427 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:54,434 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:54,438 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:54,442 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:54,443 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:54,444 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:54,444 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:54,500 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:54,504 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:54,505 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:54,531 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:54,538 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:54,538 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:54,538 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:54,538 - main - INFO - 
2025-12-22 20:26:54,539 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:54,539 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:54,539 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:54,539 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:54,539 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:54,540 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:54,540 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:54,540 - main - INFO - 
2025-12-22 20:26:54,540 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:54,540 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:54,541 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:54,541 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:54,541 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:54,541 - main - INFO - 
2025-12-22 20:26:54,541 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:54,542 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:54,542 - main - INFO -        - No manual section generation
2025-12-22 20:26:54,542 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:54,542 - main - INFO - 
2025-12-22 20:26:54,542 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:54,543 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:54,543 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:54,543 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:54,543 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:54,543 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:54,543 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:54,544 - main - INFO - 
2025-12-22 20:26:54,544 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:54,544 - main - INFO -      Main:
2025-12-22 20:26:54,544 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:54,544 - main - INFO - 
2025-12-22 20:26:54,544 - main - INFO -      Retrieval:
2025-12-22 20:26:54,545 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:54,545 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:54,545 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:54,545 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:54,545 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:54,546 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:54,546 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:54,546 - main - INFO - 
2025-12-22 20:26:54,546 - main - INFO -      Management:
2025-12-22 20:26:54,547 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:54,547 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:54,547 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:54,547 - main - INFO - 
2025-12-22 20:26:54,548 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:54,549 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:54,549 - main - INFO - 
2025-12-22 20:26:54,550 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:54,552 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:54,552 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:54,553 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:54,554 - main - INFO - 
2025-12-22 20:26:54,554 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:54,554 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:54,556 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:54,556 - main - INFO - 
2025-12-22 20:26:54,556 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:54,556 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:54,556 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:54,557 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:54,557 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:54,557 - main - INFO - 
2025-12-22 20:26:54,557 - main - INFO - ================================================================================
2025-12-22 20:26:54,558 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:54,558 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:54,558 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:54,558 - main - INFO - ================================================================================
2025-12-22 20:26:54,559 - main - INFO - 
2025-12-22 20:26:54,559 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:39:56,142 - main - INFO - 
2025-12-22 22:39:56,143 - main - INFO - ================================================================================
2025-12-22 22:39:56,143 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:39:56,148 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:39:56,150 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:39:56,163 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:39:56,171 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:39:56,176 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:39:56,176 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:39:56,182 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:39:56,182 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:39:56,185 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:39:56,187 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:39:56,190 - main - INFO - ================================================================================
2025-12-22 22:39:56,194 - main - INFO - 
2025-12-22 22:40:02,327 - main - INFO - 
2025-12-22 22:40:02,327 - main - INFO - ================================================================================
2025-12-22 22:40:02,327 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:02,328 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:02,328 - main - INFO - ================================================================================
2025-12-22 22:40:02,328 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:02,328 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:02,328 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:02,329 - main - INFO - ================================================================================
2025-12-22 22:40:02,329 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:02,329 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:02,330 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:02,713 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:02,722 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:02,722 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:02,745 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:02,746 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:02,747 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:02,752 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:02,753 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:02,753 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:02,753 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:02,754 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:02,806 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:02,807 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:02,808 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:02,841 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:02,844 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:02,844 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:02,844 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:02,845 - main - INFO - 
2025-12-22 22:40:02,845 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:02,845 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:02,845 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:02,845 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:02,846 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:02,846 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:02,846 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:02,847 - main - INFO - 
2025-12-22 22:40:02,847 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:02,847 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:02,847 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:02,847 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:02,848 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:02,848 - main - INFO - 
2025-12-22 22:40:02,848 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:02,848 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:02,848 - main - INFO -        - No manual section generation
2025-12-22 22:40:02,848 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:02,849 - main - INFO - 
2025-12-22 22:40:02,849 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:02,849 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:02,849 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:02,849 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:02,850 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:02,850 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:02,851 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:02,853 - main - INFO - 
2025-12-22 22:40:02,853 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:02,854 - main - INFO -      Main:
2025-12-22 22:40:02,854 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:02,854 - main - INFO - 
2025-12-22 22:40:02,854 - main - INFO -      Retrieval:
2025-12-22 22:40:02,855 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:02,855 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:02,855 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:02,856 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:02,856 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:02,857 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:02,857 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:02,857 - main - INFO - 
2025-12-22 22:40:02,857 - main - INFO -      Management:
2025-12-22 22:40:02,857 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:02,858 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:02,858 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:02,858 - main - INFO - 
2025-12-22 22:40:02,858 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:02,859 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:02,859 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:02,860 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:02,860 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:02,860 - main - INFO - 
2025-12-22 22:40:02,860 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:02,861 - main - INFO - 
2025-12-22 22:40:02,861 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:02,863 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:02,863 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:02,863 - main - INFO - 
2025-12-22 22:40:02,863 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:02,863 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:02,864 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:02,864 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:02,864 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:02,864 - main - INFO - 
2025-12-22 22:40:02,864 - main - INFO - ================================================================================
2025-12-22 22:40:02,864 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:02,865 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:02,865 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:02,865 - main - INFO - ================================================================================
2025-12-22 22:40:02,865 - main - INFO - 
2025-12-22 22:40:02,865 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:08,934 - main - INFO - 
2025-12-22 22:40:08,935 - main - INFO - ================================================================================
2025-12-22 22:40:08,936 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:08,940 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:08,943 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:08,947 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:08,948 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:08,950 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:08,953 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:08,955 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:08,955 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:08,956 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:08,957 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:08,957 - main - INFO - ================================================================================
2025-12-22 22:40:08,958 - main - INFO - 
2025-12-22 22:40:13,248 - main - INFO - 
2025-12-22 22:40:13,249 - main - INFO - ================================================================================
2025-12-22 22:40:13,249 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:13,249 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:13,249 - main - INFO - ================================================================================
2025-12-22 22:40:13,250 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:13,250 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:13,251 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:13,252 - main - INFO - ================================================================================
2025-12-22 22:40:13,253 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:13,254 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:13,255 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:13,278 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:13,283 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:13,284 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:13,285 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:13,286 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:13,287 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:13,326 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:13,329 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:13,332 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:13,339 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:13,340 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:13,341 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:13,341 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:13,342 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:13,354 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:13,354 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:13,355 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:13,388 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:13,397 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:13,398 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:13,399 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:13,399 - main - INFO - 
2025-12-22 22:40:13,400 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:13,401 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:13,403 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:13,404 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:13,405 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:13,406 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:13,407 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:13,407 - main - INFO - 
2025-12-22 22:40:13,408 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:13,409 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:13,409 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:13,410 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:13,411 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:13,412 - main - INFO - 
2025-12-22 22:40:13,413 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:13,413 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:13,414 - main - INFO -        - No manual section generation
2025-12-22 22:40:13,414 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:13,415 - main - INFO - 
2025-12-22 22:40:13,416 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:13,417 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:13,418 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:13,420 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:13,420 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:13,421 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:13,422 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:13,423 - main - INFO - 
2025-12-22 22:40:13,424 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:13,424 - main - INFO -      Main:
2025-12-22 22:40:13,424 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:13,425 - main - INFO - 
2025-12-22 22:40:13,425 - main - INFO -      Retrieval:
2025-12-22 22:40:13,426 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:13,427 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:13,427 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:13,428 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:13,428 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:13,429 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:13,429 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:13,429 - main - INFO - 
2025-12-22 22:40:13,430 - main - INFO -      Management:
2025-12-22 22:40:13,430 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:13,430 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:13,431 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:13,431 - main - INFO - 
2025-12-22 22:40:13,432 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:13,432 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:13,432 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:13,433 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:13,433 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:13,435 - main - INFO - 
2025-12-22 22:40:13,436 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:13,438 - main - INFO - 
2025-12-22 22:40:13,439 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:13,439 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:13,440 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:13,440 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:13,442 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:13,442 - main - INFO - 
2025-12-22 22:40:13,442 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:13,442 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:13,443 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:13,443 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:13,443 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:13,444 - main - INFO - 
2025-12-22 22:40:13,444 - main - INFO - ================================================================================
2025-12-22 22:40:13,444 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:13,444 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:13,445 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:13,445 - main - INFO - ================================================================================
2025-12-22 22:40:13,445 - main - INFO - 
2025-12-22 22:40:13,446 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:23,404 - main - INFO - 
2025-12-22 22:40:23,404 - main - INFO - ================================================================================
2025-12-22 22:40:23,404 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:23,406 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:23,406 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:23,408 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:23,408 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:23,410 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:23,410 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:23,412 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:23,413 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:23,414 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:23,415 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:23,416 - main - INFO - ================================================================================
2025-12-22 22:40:23,419 - main - INFO - 
2025-12-22 22:40:27,418 - main - INFO - 
2025-12-22 22:40:27,419 - main - INFO - ================================================================================
2025-12-22 22:40:27,420 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:27,420 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:27,420 - main - INFO - ================================================================================
2025-12-22 22:40:27,421 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:27,421 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:27,421 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:27,421 - main - INFO - ================================================================================
2025-12-22 22:40:27,422 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:27,422 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:27,422 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:27,454 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:27,460 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:27,461 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:27,461 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:27,461 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:27,462 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:27,475 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:27,478 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:27,479 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:27,481 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:27,482 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:27,493 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:27,494 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:27,495 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:27,505 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:27,510 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:27,510 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:27,510 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:27,510 - main - INFO - 
2025-12-22 22:40:27,510 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:27,511 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:27,511 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:27,511 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:27,511 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:27,512 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:27,512 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:27,512 - main - INFO - 
2025-12-22 22:40:27,512 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:27,512 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:27,513 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:27,513 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:27,513 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:27,513 - main - INFO - 
2025-12-22 22:40:27,513 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:27,514 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:27,514 - main - INFO -        - No manual section generation
2025-12-22 22:40:27,514 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:27,514 - main - INFO - 
2025-12-22 22:40:27,514 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:27,515 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:27,515 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:27,515 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:27,515 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:27,515 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:27,516 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:27,516 - main - INFO - 
2025-12-22 22:40:27,516 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:27,516 - main - INFO -      Main:
2025-12-22 22:40:27,517 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:27,518 - main - INFO - 
2025-12-22 22:40:27,518 - main - INFO -      Retrieval:
2025-12-22 22:40:27,519 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:27,520 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:27,520 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:27,520 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:27,521 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:27,521 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:27,521 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:27,521 - main - INFO - 
2025-12-22 22:40:27,522 - main - INFO -      Management:
2025-12-22 22:40:27,522 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:27,523 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:27,523 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:27,523 - main - INFO - 
2025-12-22 22:40:27,524 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:27,524 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:27,525 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:27,525 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:27,525 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:27,526 - main - INFO - 
2025-12-22 22:40:27,526 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:27,526 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:27,526 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:27,527 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:27,527 - main - INFO - 
2025-12-22 22:40:27,527 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:27,527 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:27,527 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:27,529 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:27,529 - main - INFO - 
2025-12-22 22:40:27,529 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:27,529 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:27,529 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:27,530 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:27,530 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:27,530 - main - INFO - 
2025-12-22 22:40:27,530 - main - INFO - ================================================================================
2025-12-22 22:40:27,530 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:27,531 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:27,531 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:27,531 - main - INFO - ================================================================================
2025-12-22 22:40:27,531 - main - INFO - 
2025-12-22 22:40:27,532 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:49,924 - main - INFO - 
2025-12-22 22:40:49,929 - main - INFO - ================================================================================
2025-12-22 22:40:49,929 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:49,931 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:49,932 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:49,937 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:49,937 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:49,939 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:49,939 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:49,941 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:49,941 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:49,942 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:49,943 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:49,943 - main - INFO - ================================================================================
2025-12-22 22:40:49,943 - main - INFO - 
2025-12-22 22:40:53,446 - main - INFO - 
2025-12-22 22:40:53,446 - main - INFO - ================================================================================
2025-12-22 22:40:53,446 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:53,446 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:53,447 - main - INFO - ================================================================================
2025-12-22 22:40:53,447 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:53,447 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:53,447 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:53,448 - main - INFO - ================================================================================
2025-12-22 22:40:53,448 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:53,448 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:53,449 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:53,479 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:53,493 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:53,493 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:53,505 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:53,507 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:53,509 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:53,511 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:53,511 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:53,544 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:53,544 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:53,544 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:53,553 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:53,558 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:53,558 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:53,559 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:53,559 - main - INFO - 
2025-12-22 22:40:53,559 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:53,559 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:53,559 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:53,559 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:53,560 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:53,560 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:53,560 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:53,560 - main - INFO - 
2025-12-22 22:40:53,560 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:53,560 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:53,561 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:53,561 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:53,561 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:53,561 - main - INFO - 
2025-12-22 22:40:53,561 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:53,561 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:53,561 - main - INFO -        - No manual section generation
2025-12-22 22:40:53,562 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:53,562 - main - INFO - 
2025-12-22 22:40:53,562 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:53,562 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:53,562 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:53,562 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:53,563 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:53,563 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:53,563 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:53,563 - main - INFO - 
2025-12-22 22:40:53,563 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:53,563 - main - INFO -      Main:
2025-12-22 22:40:53,564 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:53,564 - main - INFO - 
2025-12-22 22:40:53,564 - main - INFO -      Retrieval:
2025-12-22 22:40:53,564 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:53,564 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:53,564 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:53,564 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:53,565 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:53,565 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:53,565 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:53,565 - main - INFO - 
2025-12-22 22:40:53,565 - main - INFO -      Management:
2025-12-22 22:40:53,565 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:53,566 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:53,566 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:53,566 - main - INFO - 
2025-12-22 22:40:53,566 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:53,566 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:53,567 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:53,567 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:53,568 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:53,569 - main - INFO - 
2025-12-22 22:40:53,569 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:53,570 - main - INFO - 
2025-12-22 22:40:53,570 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:53,572 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:53,572 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:53,572 - main - INFO - 
2025-12-22 22:40:53,572 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:53,573 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:53,573 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:53,573 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:53,573 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:53,574 - main - INFO - 
2025-12-22 22:40:53,574 - main - INFO - ================================================================================
2025-12-22 22:40:53,574 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:53,574 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:53,574 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:53,575 - main - INFO - ================================================================================
2025-12-22 22:40:53,575 - main - INFO - 
2025-12-22 22:40:53,575 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:41:05,381 - main - INFO - 
2025-12-22 22:41:05,382 - main - INFO - ================================================================================
2025-12-22 22:41:05,382 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:41:05,383 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:41:05,384 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:41:05,386 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:41:05,386 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:41:05,387 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:41:05,387 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:41:05,388 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:41:05,388 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:41:05,388 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:41:05,389 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:41:05,389 - main - INFO - ================================================================================
2025-12-22 22:41:05,389 - main - INFO - 
2025-12-22 22:42:04,624 - main - INFO - 
2025-12-22 22:42:04,624 - main - INFO - ================================================================================
2025-12-22 22:42:04,624 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:42:04,624 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:42:04,625 - main - INFO - ================================================================================
2025-12-22 22:42:04,625 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:42:04,625 - main - INFO -   Upload Directory: uploads
2025-12-22 22:42:04,625 - main - INFO -   Max File Size: 20MB
2025-12-22 22:42:04,625 - main - INFO - ================================================================================
2025-12-22 22:42:04,626 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:42:04,626 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:42:04,626 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:04,644 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:42:04,649 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:42:04,650 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:42:04,661 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:42:04,662 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:42:04,663 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:42:04,664 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:42:04,665 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:42:04,674 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:42:04,675 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:42:04,676 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:42:04,700 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:42:04,702 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:42:04,703 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:42:04,703 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:42:04,703 - main - INFO - 
2025-12-22 22:42:04,703 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:42:04,704 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:42:04,704 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:42:04,704 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:42:04,704 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:42:04,705 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:42:04,705 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:42:04,705 - main - INFO - 
2025-12-22 22:42:04,705 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:42:04,705 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:42:04,706 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:42:04,706 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:42:04,707 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:42:04,707 - main - INFO - 
2025-12-22 22:42:04,708 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:42:04,708 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:42:04,708 - main - INFO -        - No manual section generation
2025-12-22 22:42:04,709 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:42:04,709 - main - INFO - 
2025-12-22 22:42:04,709 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:42:04,709 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:42:04,710 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:42:04,710 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:42:04,710 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:42:04,710 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:42:04,710 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:42:04,711 - main - INFO - 
2025-12-22 22:42:04,711 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:42:04,711 - main - INFO -      Main:
2025-12-22 22:42:04,711 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:42:04,711 - main - INFO - 
2025-12-22 22:42:04,711 - main - INFO -      Retrieval:
2025-12-22 22:42:04,712 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:42:04,712 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:42:04,712 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:42:04,712 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:42:04,712 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:42:04,713 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:42:04,713 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:42:04,713 - main - INFO - 
2025-12-22 22:42:04,713 - main - INFO -      Management:
2025-12-22 22:42:04,713 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:42:04,713 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:42:04,714 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:42:04,714 - main - INFO - 
2025-12-22 22:42:04,714 - main - INFO -      Documents (MongoDB):
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:42:04,715 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:42:04,715 - main - INFO - 
2025-12-22 22:42:04,715 - main - INFO -      Diagnostics & Health:
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:42:04,716 - main - INFO - 
2025-12-22 22:42:04,716 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:42:04,717 - main - INFO - 
2025-12-22 22:42:04,717 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:42:04,717 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:42:04,718 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:42:04,718 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:42:04,718 - main - INFO -      4. No re-upload needed!
2025-12-22 22:42:04,718 - main - INFO - 
2025-12-22 22:42:04,718 - main - INFO - ================================================================================
2025-12-22 22:42:04,718 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:42:04,718 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:42:04,719 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:42:04,719 - main - INFO - ================================================================================
2025-12-22 22:42:04,719 - main - INFO - 
2025-12-22 22:42:04,719 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:42:48,917 - main - INFO - 
2025-12-22 22:42:48,918 - main - INFO - ================================================================================
2025-12-22 22:42:48,919 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:42:48,921 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:42:48,922 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:42:48,923 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:42:48,923 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:42:48,925 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:42:48,925 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:42:48,926 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:42:48,926 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:42:48,927 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:42:48,927 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:42:48,927 - main - INFO - ================================================================================
2025-12-22 22:42:48,927 - main - INFO - 
2025-12-22 22:42:54,319 - main - INFO - 
2025-12-22 22:42:54,320 - main - INFO - ================================================================================
2025-12-22 22:42:54,322 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:42:54,322 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:42:54,322 - main - INFO - ================================================================================
2025-12-22 22:42:54,323 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:42:54,323 - main - INFO -   Upload Directory: uploads
2025-12-22 22:42:54,323 - main - INFO -   Max File Size: 20MB
2025-12-22 22:42:54,323 - main - INFO - ================================================================================
2025-12-22 22:42:54,324 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:42:54,324 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:42:54,324 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:54,365 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:42:54,377 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:42:54,377 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:42:54,377 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:42:54,378 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:42:54,378 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:42:54,390 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:42:54,391 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:42:54,392 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:42:54,394 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:42:54,394 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:42:54,426 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:42:54,426 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:42:54,426 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:42:54,470 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:42:54,475 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:42:54,475 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:42:54,475 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:42:54,475 - main - INFO - 
2025-12-22 22:42:54,476 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:42:54,476 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:42:54,476 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:42:54,476 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:42:54,477 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:42:54,477 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:42:54,477 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:42:54,477 - main - INFO - 
2025-12-22 22:42:54,478 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:42:54,478 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:42:54,478 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:42:54,478 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:42:54,478 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:42:54,478 - main - INFO - 
2025-12-22 22:42:54,479 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:42:54,479 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:42:54,479 - main - INFO -        - No manual section generation
2025-12-22 22:42:54,479 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:42:54,479 - main - INFO - 
2025-12-22 22:42:54,479 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:42:54,479 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:42:54,480 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:42:54,480 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:42:54,480 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:42:54,480 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:42:54,480 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:42:54,480 - main - INFO - 
2025-12-22 22:42:54,480 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:42:54,481 - main - INFO -      Main:
2025-12-22 22:42:54,481 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:42:54,481 - main - INFO - 
2025-12-22 22:42:54,481 - main - INFO -      Retrieval:
2025-12-22 22:42:54,481 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:42:54,481 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:42:54,481 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:42:54,482 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:42:54,482 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:42:54,482 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:42:54,482 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:42:54,482 - main - INFO - 
2025-12-22 22:42:54,482 - main - INFO -      Management:
2025-12-22 22:42:54,483 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:42:54,483 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:42:54,483 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:42:54,484 - main - INFO - 
2025-12-22 22:42:54,484 - main - INFO -      Documents (MongoDB):
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:42:54,485 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:42:54,485 - main - INFO - 
2025-12-22 22:42:54,485 - main - INFO -      Diagnostics & Health:
2025-12-22 22:42:54,485 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:42:54,485 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:42:54,486 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:42:54,486 - main - INFO - 
2025-12-22 22:42:54,486 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:42:54,486 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:42:54,486 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:42:54,487 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:42:54,487 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:42:54,488 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:42:54,489 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:42:54,489 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:42:54,489 - main - INFO - 
2025-12-22 22:42:54,490 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:42:54,490 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:42:54,490 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:42:54,490 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:42:54,491 - main - INFO -      4. No re-upload needed!
2025-12-22 22:42:54,491 - main - INFO - 
2025-12-22 22:42:54,491 - main - INFO - ================================================================================
2025-12-22 22:42:54,491 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:42:54,491 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:42:54,491 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:42:54,492 - main - INFO - ================================================================================
2025-12-22 22:42:54,492 - main - INFO - 
2025-12-22 22:42:54,492 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:44:01,286 - main - INFO - 
2025-12-22 22:44:01,287 - main - INFO - ================================================================================
2025-12-22 22:44:01,289 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:44:01,291 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:01,292 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:44:01,293 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:01,293 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:44:01,294 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:44:01,295 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:44:01,296 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:44:01,297 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:44:01,297 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:44:01,298 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:44:01,298 - main - INFO - ================================================================================
2025-12-22 22:44:01,299 - main - INFO - 
2025-12-22 22:44:05,393 - main - INFO - 
2025-12-22 22:44:05,393 - main - INFO - ================================================================================
2025-12-22 22:44:05,394 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:44:05,394 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:44:05,394 - main - INFO - ================================================================================
2025-12-22 22:44:05,394 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:44:05,395 - main - INFO -   Upload Directory: uploads
2025-12-22 22:44:05,395 - main - INFO -   Max File Size: 20MB
2025-12-22 22:44:05,395 - main - INFO - ================================================================================
2025-12-22 22:44:05,395 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:44:05,396 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:44:05,396 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:05,418 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:44:05,428 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:44:05,429 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:44:05,452 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:44:05,453 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:44:05,455 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:44:05,460 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:44:05,460 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:44:05,483 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:44:05,483 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:44:05,483 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:44:05,495 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:44:05,498 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:44:05,498 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:44:05,498 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:44:05,498 - main - INFO - 
2025-12-22 22:44:05,499 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:44:05,499 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:44:05,499 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:44:05,499 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:44:05,499 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:44:05,500 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:44:05,500 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:44:05,500 - main - INFO - 
2025-12-22 22:44:05,500 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:44:05,501 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:44:05,501 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:44:05,501 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:44:05,502 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:44:05,502 - main - INFO - 
2025-12-22 22:44:05,502 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:44:05,502 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:44:05,502 - main - INFO -        - No manual section generation
2025-12-22 22:44:05,503 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:44:05,503 - main - INFO - 
2025-12-22 22:44:05,503 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:44:05,503 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:44:05,504 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:44:05,504 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:44:05,504 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:44:05,505 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:44:05,505 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:44:05,506 - main - INFO - 
2025-12-22 22:44:05,506 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:44:05,507 - main - INFO -      Main:
2025-12-22 22:44:05,507 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:44:05,508 - main - INFO - 
2025-12-22 22:44:05,508 - main - INFO -      Retrieval:
2025-12-22 22:44:05,508 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:44:05,508 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:44:05,509 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:44:05,509 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:44:05,509 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:44:05,509 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:44:05,509 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:44:05,510 - main - INFO - 
2025-12-22 22:44:05,510 - main - INFO -      Management:
2025-12-22 22:44:05,510 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:44:05,510 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:44:05,510 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:44:05,511 - main - INFO - 
2025-12-22 22:44:05,511 - main - INFO -      Documents (MongoDB):
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:44:05,511 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:44:05,512 - main - INFO - 
2025-12-22 22:44:05,512 - main - INFO -      Diagnostics & Health:
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:44:05,513 - main - INFO - 
2025-12-22 22:44:05,513 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:44:05,514 - main - INFO - 
2025-12-22 22:44:05,514 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:44:05,514 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:44:05,515 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:44:05,515 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:44:05,515 - main - INFO -      4. No re-upload needed!
2025-12-22 22:44:05,515 - main - INFO - 
2025-12-22 22:44:05,515 - main - INFO - ================================================================================
2025-12-22 22:44:05,516 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:44:05,516 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:44:05,516 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:44:05,516 - main - INFO - ================================================================================
2025-12-22 22:44:05,516 - main - INFO - 
2025-12-22 22:44:05,517 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:44:22,680 - main - INFO - 
2025-12-22 22:44:22,680 - main - INFO - ================================================================================
2025-12-22 22:44:22,681 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:44:22,682 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:22,682 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:44:22,683 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:22,684 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:44:22,685 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:44:22,685 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:44:22,686 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:44:22,686 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:44:22,687 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:44:22,687 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:44:22,688 - main - INFO - ================================================================================
2025-12-22 22:44:22,688 - main - INFO - 
2025-12-22 22:44:25,533 - main - INFO - 
2025-12-22 22:44:25,534 - main - INFO - ================================================================================
2025-12-22 22:44:25,534 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:44:25,534 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:44:25,535 - main - INFO - ================================================================================
2025-12-22 22:44:25,535 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:44:25,535 - main - INFO -   Upload Directory: uploads
2025-12-22 22:44:25,535 - main - INFO -   Max File Size: 20MB
2025-12-22 22:44:25,536 - main - INFO - ================================================================================
2025-12-22 22:44:25,536 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:44:25,537 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:44:25,537 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:25,556 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:44:25,562 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:44:25,563 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:44:25,563 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:44:25,563 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:44:25,564 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:44:25,572 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:44:25,575 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:44:25,578 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:44:25,580 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:44:25,580 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:44:25,580 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:44:25,580 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:25,581 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:44:25,593 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:44:25,593 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:44:25,594 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:44:25,601 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:44:25,604 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:44:25,605 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:44:25,605 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:44:25,605 - main - INFO - 
2025-12-22 22:44:25,606 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:44:25,606 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:44:25,606 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:44:25,607 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:44:25,607 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:44:25,608 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:44:25,608 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:44:25,609 - main - INFO - 
2025-12-22 22:44:25,609 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:44:25,609 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:44:25,609 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:44:25,610 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:44:25,610 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:44:25,610 - main - INFO - 
2025-12-22 22:44:25,610 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:44:25,610 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:44:25,611 - main - INFO -        - No manual section generation
2025-12-22 22:44:25,611 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:44:25,611 - main - INFO - 
2025-12-22 22:44:25,611 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:44:25,611 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:44:25,611 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:44:25,611 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:44:25,612 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:44:25,612 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:44:25,612 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:44:25,612 - main - INFO - 
2025-12-22 22:44:25,612 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:44:25,612 - main - INFO -      Main:
2025-12-22 22:44:25,613 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:44:25,613 - main - INFO - 
2025-12-22 22:44:25,613 - main - INFO -      Retrieval:
2025-12-22 22:44:25,613 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:44:25,613 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:44:25,613 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:44:25,614 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:44:25,614 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:44:25,614 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:44:25,614 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:44:25,614 - main - INFO - 
2025-12-22 22:44:25,614 - main - INFO -      Management:
2025-12-22 22:44:25,614 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:44:25,615 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:44:25,615 - main - INFO - 
2025-12-22 22:44:25,615 - main - INFO -      Documents (MongoDB):
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:44:25,616 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:44:25,616 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:44:25,616 - main - INFO - 
2025-12-22 22:44:25,616 - main - INFO -      Diagnostics & Health:
2025-12-22 22:44:25,616 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:44:25,617 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:44:25,617 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:44:25,617 - main - INFO - 
2025-12-22 22:44:25,617 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:44:25,618 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:44:25,618 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:44:25,620 - main - INFO - 
2025-12-22 22:44:25,620 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:44:25,620 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:44:25,620 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:44:25,621 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:44:25,621 - main - INFO -      4. No re-upload needed!
2025-12-22 22:44:25,621 - main - INFO - 
2025-12-22 22:44:25,621 - main - INFO - ================================================================================
2025-12-22 22:44:25,621 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:44:25,622 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:44:25,622 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:44:25,622 - main - INFO - ================================================================================
2025-12-22 22:44:25,622 - main - INFO - 
2025-12-22 22:44:25,622 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:45:01,910 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 22:45:01,911 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 22:45:02,224 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 22:45:02,264 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.04s
2025-12-22 22:45:12,621 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 22:45:12,622 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 22:45:13,135 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 22:45:13,138 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-22 22:45:52,604 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:45:52,610 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 422 - 0.01s
2025-12-22 22:46:07,542 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:46:07,544 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 422 - 0.00s
2025-12-22 22:47:18,985 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:47:19,014 - app.services.hakim_score_service - INFO - âœ… Created Hakim score for gig
2025-12-22 22:47:19,021 - app.api.routes - ERROR - âŒ Error creating/updating Hakim score: Object of type datetime is not JSON serializable
2025-12-22 22:47:19,022 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 500 - 0.04s
2025-12-22 22:47:59,665 - main - INFO - 
2025-12-22 22:47:59,665 - main - INFO - ================================================================================
2025-12-22 22:47:59,665 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:47:59,666 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:47:59,667 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:47:59,668 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:47:59,669 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:47:59,671 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:47:59,672 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:47:59,674 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:47:59,674 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:47:59,674 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:47:59,675 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:47:59,675 - main - INFO - ================================================================================
2025-12-22 22:47:59,675 - main - INFO - 
2025-12-22 22:48:05,195 - main - INFO - 
2025-12-22 22:48:05,195 - main - INFO - ================================================================================
2025-12-22 22:48:05,195 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:05,196 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:05,196 - main - INFO - ================================================================================
2025-12-22 22:48:05,196 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:05,197 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:05,197 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:05,197 - main - INFO - ================================================================================
2025-12-22 22:48:05,198 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:05,198 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:05,198 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:05,228 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:05,235 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:05,236 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:05,238 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:05,239 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:05,240 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:05,251 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:05,254 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:05,257 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:05,260 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:05,261 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:05,275 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:05,276 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:05,276 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:05,308 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:05,311 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:05,311 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:05,311 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:05,312 - main - INFO - 
2025-12-22 22:48:05,312 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:05,312 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:05,312 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:05,312 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:05,313 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:05,313 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:05,313 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:05,313 - main - INFO - 
2025-12-22 22:48:05,313 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:05,314 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:05,314 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:05,314 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:05,314 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:05,314 - main - INFO - 
2025-12-22 22:48:05,314 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:05,315 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:05,315 - main - INFO -        - No manual section generation
2025-12-22 22:48:05,315 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:05,315 - main - INFO - 
2025-12-22 22:48:05,315 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:05,316 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:05,316 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:05,316 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:05,317 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:05,317 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:05,317 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:05,317 - main - INFO - 
2025-12-22 22:48:05,317 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:05,318 - main - INFO -      Main:
2025-12-22 22:48:05,318 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:05,318 - main - INFO - 
2025-12-22 22:48:05,318 - main - INFO -      Retrieval:
2025-12-22 22:48:05,319 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:05,319 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:05,320 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:05,322 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:05,322 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:05,323 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:05,323 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:05,323 - main - INFO - 
2025-12-22 22:48:05,324 - main - INFO -      Management:
2025-12-22 22:48:05,324 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:05,324 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:05,324 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:05,324 - main - INFO - 
2025-12-22 22:48:05,325 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:05,325 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:05,326 - main - INFO - 
2025-12-22 22:48:05,326 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:05,326 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:05,326 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:05,327 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:05,327 - main - INFO - 
2025-12-22 22:48:05,327 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:05,327 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:05,327 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:05,329 - main - INFO - 
2025-12-22 22:48:05,329 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:05,329 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:05,329 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:05,329 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:05,330 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:05,330 - main - INFO - 
2025-12-22 22:48:05,330 - main - INFO - ================================================================================
2025-12-22 22:48:05,330 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:05,330 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:05,331 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:05,331 - main - INFO - ================================================================================
2025-12-22 22:48:05,331 - main - INFO - 
2025-12-22 22:48:05,331 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:09,695 - main - INFO - 
2025-12-22 22:48:09,695 - main - INFO - ================================================================================
2025-12-22 22:48:09,696 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:09,696 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:09,696 - main - INFO - ================================================================================
2025-12-22 22:48:09,696 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:09,696 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:09,697 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:09,697 - main - INFO - ================================================================================
2025-12-22 22:48:09,697 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:09,697 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:09,698 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:09,733 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:09,745 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:09,745 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:09,745 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:09,746 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:09,747 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:09,760 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:09,762 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:09,763 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:09,766 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:09,766 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:09,767 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:09,768 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:09,769 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:09,784 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:09,785 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:09,786 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:09,800 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:09,809 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:09,809 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:09,810 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:09,810 - main - INFO - 
2025-12-22 22:48:09,810 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:09,810 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:09,811 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:09,811 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:09,811 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:09,812 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:09,812 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:09,812 - main - INFO - 
2025-12-22 22:48:09,813 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:09,813 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:09,813 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:09,813 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:09,814 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:09,814 - main - INFO - 
2025-12-22 22:48:09,814 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:09,815 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:09,815 - main - INFO -        - No manual section generation
2025-12-22 22:48:09,815 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:09,815 - main - INFO - 
2025-12-22 22:48:09,816 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:09,816 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:09,816 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:09,817 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:09,817 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:09,817 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:09,818 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:09,818 - main - INFO - 
2025-12-22 22:48:09,818 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:09,819 - main - INFO -      Main:
2025-12-22 22:48:09,819 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:09,821 - main - INFO - 
2025-12-22 22:48:09,823 - main - INFO -      Retrieval:
2025-12-22 22:48:09,824 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:09,824 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:09,825 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:09,825 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:09,825 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:09,825 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:09,826 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:09,826 - main - INFO - 
2025-12-22 22:48:09,826 - main - INFO -      Management:
2025-12-22 22:48:09,826 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:09,826 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:09,827 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:09,827 - main - INFO - 
2025-12-22 22:48:09,827 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:09,827 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:09,827 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:09,828 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:09,828 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:09,828 - main - INFO - 
2025-12-22 22:48:09,828 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:09,829 - main - INFO - 
2025-12-22 22:48:09,829 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:09,831 - main - INFO - 
2025-12-22 22:48:09,831 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:09,832 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:09,832 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:09,832 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:09,832 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:09,833 - main - INFO - 
2025-12-22 22:48:09,833 - main - INFO - ================================================================================
2025-12-22 22:48:09,834 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:09,834 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:09,834 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:09,835 - main - INFO - ================================================================================
2025-12-22 22:48:09,835 - main - INFO - 
2025-12-22 22:48:09,837 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:15,083 - main - INFO - 
2025-12-22 22:48:15,083 - main - INFO - ================================================================================
2025-12-22 22:48:15,083 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:15,084 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:15,084 - main - INFO - ================================================================================
2025-12-22 22:48:15,084 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:15,085 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:15,085 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:15,085 - main - INFO - ================================================================================
2025-12-22 22:48:15,086 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:15,087 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:15,087 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:15,117 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:15,128 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:15,129 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:15,129 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:15,129 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:15,130 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:15,144 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:15,145 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:15,146 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:15,150 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:15,151 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:15,151 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:15,152 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:15,152 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:15,165 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:15,165 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:15,166 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:15,201 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:15,208 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:15,209 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:15,209 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:15,209 - main - INFO - 
2025-12-22 22:48:15,209 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:15,210 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:15,210 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:15,210 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:15,210 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:15,210 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:15,211 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:15,211 - main - INFO - 
2025-12-22 22:48:15,211 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:15,211 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:15,211 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:15,212 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:15,212 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:15,212 - main - INFO - 
2025-12-22 22:48:15,212 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:15,212 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:15,212 - main - INFO -        - No manual section generation
2025-12-22 22:48:15,213 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:15,213 - main - INFO - 
2025-12-22 22:48:15,213 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:15,213 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:15,213 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:15,214 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:15,214 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:15,214 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:15,214 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:15,214 - main - INFO - 
2025-12-22 22:48:15,214 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:15,215 - main - INFO -      Main:
2025-12-22 22:48:15,215 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:15,215 - main - INFO - 
2025-12-22 22:48:15,215 - main - INFO -      Retrieval:
2025-12-22 22:48:15,215 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:15,215 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:15,216 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:15,216 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:15,216 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:15,216 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:15,216 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:15,217 - main - INFO - 
2025-12-22 22:48:15,217 - main - INFO -      Management:
2025-12-22 22:48:15,217 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:15,217 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:15,217 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:15,218 - main - INFO - 
2025-12-22 22:48:15,218 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:15,219 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:15,219 - main - INFO - 
2025-12-22 22:48:15,219 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:15,221 - main - INFO - 
2025-12-22 22:48:15,222 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:15,222 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:15,224 - main - INFO - 
2025-12-22 22:48:15,225 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:15,225 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:15,225 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:15,225 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:15,225 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:15,226 - main - INFO - 
2025-12-22 22:48:15,226 - main - INFO - ================================================================================
2025-12-22 22:48:15,226 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:15,226 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:15,226 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:15,227 - main - INFO - ================================================================================
2025-12-22 22:48:15,227 - main - INFO - 
2025-12-22 22:48:15,227 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:19,316 - main - INFO - 
2025-12-22 22:48:19,318 - main - INFO - ================================================================================
2025-12-22 22:48:19,319 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:19,319 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:19,320 - main - INFO - ================================================================================
2025-12-22 22:48:19,320 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:19,320 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:19,321 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:19,321 - main - INFO - ================================================================================
2025-12-22 22:48:19,321 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:19,322 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:19,322 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:19,351 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:19,358 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:19,358 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:19,387 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:19,389 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:19,390 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:19,392 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:19,392 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:19,404 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:19,404 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:19,405 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:19,441 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:19,447 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:19,448 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:19,448 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:19,449 - main - INFO - 
2025-12-22 22:48:19,449 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:19,450 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:19,450 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:19,451 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:19,451 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:19,451 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:19,452 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:19,452 - main - INFO - 
2025-12-22 22:48:19,452 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:19,453 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:19,453 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:19,453 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:19,454 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:19,455 - main - INFO - 
2025-12-22 22:48:19,456 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:19,457 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:19,457 - main - INFO -        - No manual section generation
2025-12-22 22:48:19,457 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:19,458 - main - INFO - 
2025-12-22 22:48:19,458 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:19,458 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:19,459 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:19,459 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:19,459 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:19,459 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:19,460 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:19,460 - main - INFO - 
2025-12-22 22:48:19,460 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:19,460 - main - INFO -      Main:
2025-12-22 22:48:19,461 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:19,461 - main - INFO - 
2025-12-22 22:48:19,461 - main - INFO -      Retrieval:
2025-12-22 22:48:19,461 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:19,461 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:19,462 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:19,462 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:19,462 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:19,462 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:19,462 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:19,462 - main - INFO - 
2025-12-22 22:48:19,463 - main - INFO -      Management:
2025-12-22 22:48:19,463 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:19,463 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:19,463 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:19,463 - main - INFO - 
2025-12-22 22:48:19,464 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:19,464 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:19,464 - main - INFO - 
2025-12-22 22:48:19,465 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:19,465 - main - INFO - 
2025-12-22 22:48:19,466 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:19,467 - main - INFO - 
2025-12-22 22:48:19,467 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:19,468 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:19,468 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:19,468 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:19,468 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:19,468 - main - INFO - 
2025-12-22 22:48:19,469 - main - INFO - ================================================================================
2025-12-22 22:48:19,469 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:19,469 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:19,469 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:19,469 - main - INFO - ================================================================================
2025-12-22 22:48:19,469 - main - INFO - 
2025-12-22 22:48:19,470 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:28,999 - main - INFO - 
2025-12-22 22:48:29,006 - main - INFO - ================================================================================
2025-12-22 22:48:29,010 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:48:29,011 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:29,013 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:48:29,015 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:29,015 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:48:29,017 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:48:29,018 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:48:29,021 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:48:29,023 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:48:29,025 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:48:29,025 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:48:29,025 - main - INFO - ================================================================================
2025-12-22 22:48:29,026 - main - INFO - 
2025-12-22 22:48:33,248 - main - INFO - 
2025-12-22 22:48:33,248 - main - INFO - ================================================================================
2025-12-22 22:48:33,248 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:33,248 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:33,249 - main - INFO - ================================================================================
2025-12-22 22:48:33,249 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:33,249 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:33,249 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:33,250 - main - INFO - ================================================================================
2025-12-22 22:48:33,251 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:33,253 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:33,253 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:33,294 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:33,298 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:33,298 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:33,325 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:33,326 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:33,327 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:33,329 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:33,329 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:33,329 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:33,329 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:33,330 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:33,341 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:33,341 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:33,342 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:33,374 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:33,377 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:33,377 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:33,377 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:33,378 - main - INFO - 
2025-12-22 22:48:33,378 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:33,378 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:33,378 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:33,379 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:33,379 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:33,379 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:33,379 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:33,379 - main - INFO - 
2025-12-22 22:48:33,380 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:33,380 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:33,380 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:33,380 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:33,380 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:33,381 - main - INFO - 
2025-12-22 22:48:33,381 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:33,381 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:33,381 - main - INFO -        - No manual section generation
2025-12-22 22:48:33,381 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:33,382 - main - INFO - 
2025-12-22 22:48:33,382 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:33,382 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:33,382 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:33,382 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:33,382 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:33,383 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:33,383 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:33,383 - main - INFO - 
2025-12-22 22:48:33,384 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:33,386 - main - INFO -      Main:
2025-12-22 22:48:33,386 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:33,387 - main - INFO - 
2025-12-22 22:48:33,387 - main - INFO -      Retrieval:
2025-12-22 22:48:33,387 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:33,388 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:33,388 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:33,389 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:33,389 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:33,389 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:33,389 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:33,389 - main - INFO - 
2025-12-22 22:48:33,390 - main - INFO -      Management:
2025-12-22 22:48:33,390 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:33,390 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:33,390 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:33,390 - main - INFO - 
2025-12-22 22:48:33,391 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:33,391 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:33,391 - main - INFO - 
2025-12-22 22:48:33,392 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:33,392 - main - INFO - 
2025-12-22 22:48:33,392 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:33,394 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:33,394 - main - INFO - 
2025-12-22 22:48:33,394 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:33,394 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:33,394 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:33,394 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:33,395 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:33,395 - main - INFO - 
2025-12-22 22:48:33,395 - main - INFO - ================================================================================
2025-12-22 22:48:33,395 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:33,395 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:33,395 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:33,396 - main - INFO - ================================================================================
2025-12-22 22:48:33,396 - main - INFO - 
2025-12-22 22:48:33,396 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:51,048 - main - INFO - 
2025-12-22 22:48:51,048 - main - INFO - ================================================================================
2025-12-22 22:48:51,048 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:48:51,049 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:51,049 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:48:51,050 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:51,050 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:48:51,051 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:48:51,052 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:48:51,053 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:48:51,053 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:48:51,054 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:48:51,054 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:48:51,054 - main - INFO - ================================================================================
2025-12-22 22:48:51,054 - main - INFO - 
2025-12-22 22:48:56,059 - main - INFO - 
2025-12-22 22:48:56,059 - main - INFO - ================================================================================
2025-12-22 22:48:56,060 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:56,060 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:56,060 - main - INFO - ================================================================================
2025-12-22 22:48:56,061 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:56,061 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:56,061 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:56,062 - main - INFO - ================================================================================
2025-12-22 22:48:56,062 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:56,063 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:56,063 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:56,098 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:56,108 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:56,108 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:56,116 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:56,117 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:56,121 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:56,126 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:56,126 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:56,142 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:56,143 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:56,143 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:56,153 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:56,160 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:56,160 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:56,160 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:56,161 - main - INFO - 
2025-12-22 22:48:56,161 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:56,161 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:56,161 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:56,162 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:56,162 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:56,162 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:56,163 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:56,163 - main - INFO - 
2025-12-22 22:48:56,163 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:56,163 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:56,163 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:56,164 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:56,164 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:56,164 - main - INFO - 
2025-12-22 22:48:56,164 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:56,165 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:56,165 - main - INFO -        - No manual section generation
2025-12-22 22:48:56,165 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:56,165 - main - INFO - 
2025-12-22 22:48:56,165 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:56,165 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:56,166 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:56,166 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:56,166 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:56,166 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:56,167 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:56,167 - main - INFO - 
2025-12-22 22:48:56,167 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:56,167 - main - INFO -      Main:
2025-12-22 22:48:56,168 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:56,168 - main - INFO - 
2025-12-22 22:48:56,168 - main - INFO -      Retrieval:
2025-12-22 22:48:56,168 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:56,168 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:56,169 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:56,169 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:56,169 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:56,170 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:56,170 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:56,171 - main - INFO - 
2025-12-22 22:48:56,172 - main - INFO -      Management:
2025-12-22 22:48:56,173 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:56,173 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:56,174 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:56,174 - main - INFO - 
2025-12-22 22:48:56,175 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:56,176 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:56,176 - main - INFO - 
2025-12-22 22:48:56,176 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:56,176 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:56,177 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:56,177 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:56,177 - main - INFO - 
2025-12-22 22:48:56,177 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:56,180 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:56,180 - main - INFO - 
2025-12-22 22:48:56,180 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:56,180 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:56,181 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:56,181 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:56,181 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:56,181 - main - INFO - 
2025-12-22 22:48:56,181 - main - INFO - ================================================================================
2025-12-22 22:48:56,182 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:56,182 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:56,182 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:56,182 - main - INFO - ================================================================================
2025-12-22 22:48:56,182 - main - INFO - 
2025-12-22 22:48:56,183 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:49:25,599 - main - INFO - 
2025-12-22 22:49:25,599 - main - INFO - ================================================================================
2025-12-22 22:49:25,600 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:49:25,602 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:49:25,602 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:49:25,606 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:49:25,607 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:49:25,608 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:49:25,608 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:49:25,609 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:49:25,609 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:49:25,610 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:49:25,610 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:49:25,610 - main - INFO - ================================================================================
2025-12-22 22:49:25,610 - main - INFO - 
2025-12-22 22:49:29,355 - main - INFO - 
2025-12-22 22:49:29,355 - main - INFO - ================================================================================
2025-12-22 22:49:29,356 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:49:29,356 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:49:29,356 - main - INFO - ================================================================================
2025-12-22 22:49:29,356 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:49:29,357 - main - INFO -   Upload Directory: uploads
2025-12-22 22:49:29,357 - main - INFO -   Max File Size: 20MB
2025-12-22 22:49:29,357 - main - INFO - ================================================================================
2025-12-22 22:49:29,357 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:49:29,358 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:49:29,358 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:49:29,381 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:49:29,388 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:49:29,389 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:49:29,415 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:49:29,416 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:49:29,417 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:49:29,420 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:49:29,420 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:49:29,420 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:49:29,421 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:49:29,421 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:49:29,430 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:49:29,430 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:49:29,430 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:49:29,461 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:49:29,464 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:49:29,464 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:49:29,464 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:49:29,464 - main - INFO - 
2025-12-22 22:49:29,465 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:49:29,465 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:49:29,465 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:49:29,465 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:49:29,465 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:49:29,466 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:49:29,466 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:49:29,466 - main - INFO - 
2025-12-22 22:49:29,466 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:49:29,466 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:49:29,466 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:49:29,467 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:49:29,467 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:49:29,468 - main - INFO - 
2025-12-22 22:49:29,468 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:49:29,468 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:49:29,469 - main - INFO -        - No manual section generation
2025-12-22 22:49:29,469 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:49:29,469 - main - INFO - 
2025-12-22 22:49:29,469 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:49:29,469 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:49:29,470 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:49:29,470 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:49:29,470 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:49:29,470 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:49:29,470 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:49:29,471 - main - INFO - 
2025-12-22 22:49:29,471 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:49:29,471 - main - INFO -      Main:
2025-12-22 22:49:29,471 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:49:29,471 - main - INFO - 
2025-12-22 22:49:29,472 - main - INFO -      Retrieval:
2025-12-22 22:49:29,472 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:49:29,472 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:49:29,472 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:49:29,472 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:49:29,473 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:49:29,473 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:49:29,473 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:49:29,473 - main - INFO - 
2025-12-22 22:49:29,473 - main - INFO -      Management:
2025-12-22 22:49:29,473 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:49:29,474 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:49:29,475 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:49:29,475 - main - INFO - 
2025-12-22 22:49:29,475 - main - INFO -      Documents (MongoDB):
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:49:29,476 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:49:29,476 - main - INFO - 
2025-12-22 22:49:29,476 - main - INFO -      Diagnostics & Health:
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:49:29,476 - main - INFO - 
2025-12-22 22:49:29,477 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:49:29,478 - main - INFO - 
2025-12-22 22:49:29,478 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:49:29,478 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:49:29,479 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:49:29,479 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:49:29,479 - main - INFO -      4. No re-upload needed!
2025-12-22 22:49:29,479 - main - INFO - 
2025-12-22 22:49:29,479 - main - INFO - ================================================================================
2025-12-22 22:49:29,479 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:49:29,480 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:49:29,480 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:49:29,480 - main - INFO - ================================================================================
2025-12-22 22:49:29,480 - main - INFO - 
2025-12-22 22:49:29,480 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:49:34,876 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:49:34,894 - app.services.hakim_score_service - INFO - âœ… Updated Hakim score for gig
2025-12-22 22:49:34,896 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 200 - 0.02s
2025-12-22 23:07:19,574 - main - INFO - 
2025-12-22 23:07:19,574 - main - INFO - ================================================================================
2025-12-22 23:07:19,575 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:07:19,577 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:19,578 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:07:19,580 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:19,580 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:07:19,582 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:07:19,583 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:07:19,587 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:07:19,589 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:07:19,593 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:07:19,594 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:07:19,594 - main - INFO - ================================================================================
2025-12-22 23:07:19,595 - main - INFO - 
2025-12-22 23:07:24,482 - main - INFO - 
2025-12-22 23:07:24,483 - main - INFO - ================================================================================
2025-12-22 23:07:24,483 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:07:24,483 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:07:24,483 - main - INFO - ================================================================================
2025-12-22 23:07:24,484 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:07:24,484 - main - INFO -   Upload Directory: uploads
2025-12-22 23:07:24,484 - main - INFO -   Max File Size: 20MB
2025-12-22 23:07:24,485 - main - INFO - ================================================================================
2025-12-22 23:07:24,486 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:07:24,488 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:07:24,489 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:24,512 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:07:24,519 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:07:24,521 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:07:24,522 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:07:24,522 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:07:24,523 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:07:24,557 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:07:24,558 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:07:24,559 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:07:24,561 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:07:24,561 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:07:24,561 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:07:24,562 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:24,562 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:07:24,585 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:07:24,586 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:07:24,587 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:07:24,630 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:07:24,633 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:07:24,633 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:07:24,633 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:07:24,633 - main - INFO - 
2025-12-22 23:07:24,634 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:07:24,634 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:07:24,634 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:07:24,634 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:07:24,635 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:07:24,635 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:07:24,635 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:07:24,636 - main - INFO - 
2025-12-22 23:07:24,636 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:07:24,637 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:07:24,638 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:07:24,639 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:07:24,639 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:07:24,639 - main - INFO - 
2025-12-22 23:07:24,640 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:07:24,640 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:07:24,640 - main - INFO -        - No manual section generation
2025-12-22 23:07:24,640 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:07:24,641 - main - INFO - 
2025-12-22 23:07:24,641 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:07:24,641 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:07:24,641 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:07:24,641 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:07:24,642 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:07:24,642 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:07:24,642 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:07:24,642 - main - INFO - 
2025-12-22 23:07:24,642 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:07:24,643 - main - INFO -      Main:
2025-12-22 23:07:24,643 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:07:24,643 - main - INFO - 
2025-12-22 23:07:24,643 - main - INFO -      Retrieval:
2025-12-22 23:07:24,643 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:07:24,644 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:07:24,644 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:07:24,644 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:07:24,644 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:07:24,645 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:07:24,645 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:07:24,645 - main - INFO - 
2025-12-22 23:07:24,645 - main - INFO -      Management:
2025-12-22 23:07:24,646 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:07:24,646 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:07:24,646 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:07:24,646 - main - INFO - 
2025-12-22 23:07:24,647 - main - INFO -      Documents (MongoDB):
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:07:24,647 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:07:24,648 - main - INFO - 
2025-12-22 23:07:24,648 - main - INFO -      Diagnostics & Health:
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:07:24,648 - main - INFO - 
2025-12-22 23:07:24,649 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:07:24,650 - main - INFO - 
2025-12-22 23:07:24,651 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:07:24,651 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:07:24,651 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:07:24,652 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:07:24,652 - main - INFO -      4. No re-upload needed!
2025-12-22 23:07:24,653 - main - INFO - 
2025-12-22 23:07:24,653 - main - INFO - ================================================================================
2025-12-22 23:07:24,654 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:07:24,655 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:07:24,655 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:07:24,656 - main - INFO - ================================================================================
2025-12-22 23:07:24,656 - main - INFO - 
2025-12-22 23:07:24,656 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:07:46,854 - main - INFO - 
2025-12-22 23:07:46,854 - main - INFO - ================================================================================
2025-12-22 23:07:46,854 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:07:46,856 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:46,857 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:07:46,858 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:46,858 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:07:46,859 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:07:46,860 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:07:46,861 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:07:46,861 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:07:46,862 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:07:46,862 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:07:46,863 - main - INFO - ================================================================================
2025-12-22 23:07:46,863 - main - INFO - 
2025-12-22 23:07:51,123 - main - INFO - 
2025-12-22 23:07:51,123 - main - INFO - ================================================================================
2025-12-22 23:07:51,123 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:07:51,123 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:07:51,124 - main - INFO - ================================================================================
2025-12-22 23:07:51,124 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:07:51,124 - main - INFO -   Upload Directory: uploads
2025-12-22 23:07:51,124 - main - INFO -   Max File Size: 20MB
2025-12-22 23:07:51,124 - main - INFO - ================================================================================
2025-12-22 23:07:51,125 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:07:51,125 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:07:51,125 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:51,147 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:07:51,157 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:07:51,158 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:07:51,170 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:07:51,172 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:07:51,174 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:07:51,177 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:07:51,177 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:07:51,177 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:07:51,177 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:51,178 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:07:51,189 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:07:51,190 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:07:51,190 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:07:51,230 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:07:51,238 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:07:51,239 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:07:51,240 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:07:51,241 - main - INFO - 
2025-12-22 23:07:51,241 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:07:51,242 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:07:51,243 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:07:51,243 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:07:51,244 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:07:51,244 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:07:51,245 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:07:51,245 - main - INFO - 
2025-12-22 23:07:51,246 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:07:51,246 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:07:51,247 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:07:51,247 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:07:51,248 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:07:51,248 - main - INFO - 
2025-12-22 23:07:51,249 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:07:51,249 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:07:51,250 - main - INFO -        - No manual section generation
2025-12-22 23:07:51,250 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:07:51,252 - main - INFO - 
2025-12-22 23:07:51,252 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:07:51,253 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:07:51,254 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:07:51,254 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:07:51,255 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:07:51,255 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:07:51,256 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:07:51,257 - main - INFO - 
2025-12-22 23:07:51,258 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:07:51,258 - main - INFO -      Main:
2025-12-22 23:07:51,259 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:07:51,259 - main - INFO - 
2025-12-22 23:07:51,260 - main - INFO -      Retrieval:
2025-12-22 23:07:51,260 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:07:51,261 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:07:51,262 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:07:51,262 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:07:51,263 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:07:51,263 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:07:51,264 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:07:51,264 - main - INFO - 
2025-12-22 23:07:51,265 - main - INFO -      Management:
2025-12-22 23:07:51,265 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:07:51,265 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:07:51,266 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:07:51,267 - main - INFO - 
2025-12-22 23:07:51,268 - main - INFO -      Documents (MongoDB):
2025-12-22 23:07:51,269 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:07:51,270 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:07:51,270 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:07:51,271 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:07:51,271 - main - INFO - 
2025-12-22 23:07:51,272 - main - INFO -      Diagnostics & Health:
2025-12-22 23:07:51,273 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:07:51,273 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:07:51,274 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:07:51,275 - main - INFO - 
2025-12-22 23:07:51,275 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:07:51,276 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:07:51,278 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:07:51,278 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:07:51,279 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:07:51,279 - main - INFO - 
2025-12-22 23:07:51,280 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:07:51,280 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:07:51,280 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:07:51,281 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:07:51,281 - main - INFO -      4. No re-upload needed!
2025-12-22 23:07:51,281 - main - INFO - 
2025-12-22 23:07:51,282 - main - INFO - ================================================================================
2025-12-22 23:07:51,282 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:07:51,283 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:07:51,283 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:07:51,284 - main - INFO - ================================================================================
2025-12-22 23:07:51,285 - main - INFO - 
2025-12-22 23:07:51,286 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:07,245 - main - INFO - 
2025-12-22 23:08:07,246 - main - INFO - ================================================================================
2025-12-22 23:08:07,246 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:07,248 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:07,248 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:07,249 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:07,252 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:07,254 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:07,254 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:07,255 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:07,256 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:07,256 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:07,256 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:07,257 - main - INFO - ================================================================================
2025-12-22 23:08:07,257 - main - INFO - 
2025-12-22 23:08:11,948 - main - INFO - 
2025-12-22 23:08:11,948 - main - INFO - ================================================================================
2025-12-22 23:08:11,948 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:11,949 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:11,949 - main - INFO - ================================================================================
2025-12-22 23:08:11,949 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:11,949 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:11,950 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:11,950 - main - INFO - ================================================================================
2025-12-22 23:08:11,950 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:11,951 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:11,951 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:12,110 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:12,115 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:12,117 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:12,118 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:12,120 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:12,120 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:12,131 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:12,133 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:12,137 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:12,140 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:12,141 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:12,154 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:12,154 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:12,155 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:12,164 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:12,182 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:12,183 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:12,184 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:12,189 - main - INFO - 
2025-12-22 23:08:12,191 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:12,191 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:12,192 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:12,192 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:12,192 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:12,193 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:12,193 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:12,193 - main - INFO - 
2025-12-22 23:08:12,194 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:12,194 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:12,194 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:12,194 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:12,195 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:12,200 - main - INFO - 
2025-12-22 23:08:12,201 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:12,202 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:12,202 - main - INFO -        - No manual section generation
2025-12-22 23:08:12,202 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:12,202 - main - INFO - 
2025-12-22 23:08:12,203 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:12,204 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:12,214 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:12,216 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:12,217 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:12,217 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:12,218 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:12,218 - main - INFO - 
2025-12-22 23:08:12,218 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:12,219 - main - INFO -      Main:
2025-12-22 23:08:12,220 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:12,220 - main - INFO - 
2025-12-22 23:08:12,221 - main - INFO -      Retrieval:
2025-12-22 23:08:12,221 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:12,221 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:12,222 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:12,222 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:12,222 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:12,223 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:12,223 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:12,223 - main - INFO - 
2025-12-22 23:08:12,223 - main - INFO -      Management:
2025-12-22 23:08:12,224 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:12,224 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:12,224 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:12,224 - main - INFO - 
2025-12-22 23:08:12,225 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:12,225 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:12,225 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:12,226 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:12,226 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:12,226 - main - INFO - 
2025-12-22 23:08:12,227 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:12,227 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:12,227 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:12,228 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:12,228 - main - INFO - 
2025-12-22 23:08:12,228 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:12,228 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:12,230 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:12,230 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:12,230 - main - INFO - 
2025-12-22 23:08:12,230 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:12,230 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:12,231 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:12,231 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:12,231 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:12,231 - main - INFO - 
2025-12-22 23:08:12,231 - main - INFO - ================================================================================
2025-12-22 23:08:12,232 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:12,232 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:12,232 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:12,233 - main - INFO - ================================================================================
2025-12-22 23:08:12,233 - main - INFO - 
2025-12-22 23:08:12,233 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:16,131 - main - INFO - 
2025-12-22 23:08:16,131 - main - INFO - ================================================================================
2025-12-22 23:08:16,131 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:16,131 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:16,132 - main - INFO - ================================================================================
2025-12-22 23:08:16,132 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:16,132 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:16,132 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:16,132 - main - INFO - ================================================================================
2025-12-22 23:08:16,133 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:16,135 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:16,136 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:16,162 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:16,174 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:16,174 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:16,174 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:16,175 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:16,175 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:16,208 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:16,209 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:16,210 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:16,212 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:16,212 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:16,224 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:16,225 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:16,225 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:16,231 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:16,238 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:16,238 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:16,238 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:16,238 - main - INFO - 
2025-12-22 23:08:16,239 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:16,239 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:16,240 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:16,240 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:16,240 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:16,240 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:16,240 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:16,240 - main - INFO - 
2025-12-22 23:08:16,241 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:16,241 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:16,241 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:16,241 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:16,241 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:16,241 - main - INFO - 
2025-12-22 23:08:16,242 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:16,242 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:16,242 - main - INFO -        - No manual section generation
2025-12-22 23:08:16,242 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:16,242 - main - INFO - 
2025-12-22 23:08:16,242 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:16,243 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:16,243 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:16,243 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:16,243 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:16,243 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:16,243 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:16,244 - main - INFO - 
2025-12-22 23:08:16,244 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:16,244 - main - INFO -      Main:
2025-12-22 23:08:16,244 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:16,244 - main - INFO - 
2025-12-22 23:08:16,244 - main - INFO -      Retrieval:
2025-12-22 23:08:16,245 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:16,245 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:16,245 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:16,245 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:16,245 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:16,245 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:16,245 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:16,246 - main - INFO - 
2025-12-22 23:08:16,246 - main - INFO -      Management:
2025-12-22 23:08:16,246 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:16,246 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:16,246 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:16,246 - main - INFO - 
2025-12-22 23:08:16,246 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:16,247 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:16,247 - main - INFO - 
2025-12-22 23:08:16,247 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:16,248 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:16,248 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:16,248 - main - INFO - 
2025-12-22 23:08:16,248 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:16,249 - main - INFO - 
2025-12-22 23:08:16,250 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:16,251 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:16,252 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:16,253 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:16,253 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:16,253 - main - INFO - 
2025-12-22 23:08:16,254 - main - INFO - ================================================================================
2025-12-22 23:08:16,254 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:16,254 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:16,254 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:16,255 - main - INFO - ================================================================================
2025-12-22 23:08:16,255 - main - INFO - 
2025-12-22 23:08:16,256 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:29,955 - main - INFO - 
2025-12-22 23:08:29,955 - main - INFO - ================================================================================
2025-12-22 23:08:29,955 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:29,956 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:29,957 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:29,958 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:29,958 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:29,959 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:29,960 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:29,960 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:29,961 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:29,961 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:29,962 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:29,963 - main - INFO - ================================================================================
2025-12-22 23:08:29,963 - main - INFO - 
2025-12-22 23:08:34,123 - main - INFO - 
2025-12-22 23:08:34,123 - main - INFO - ================================================================================
2025-12-22 23:08:34,123 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:34,123 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:34,124 - main - INFO - ================================================================================
2025-12-22 23:08:34,124 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:34,124 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:34,124 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:34,124 - main - INFO - ================================================================================
2025-12-22 23:08:34,125 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:34,125 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:34,125 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:34,146 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:34,157 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:34,158 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:34,158 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:34,158 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:34,159 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:34,169 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:34,173 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:34,175 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:34,177 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:34,177 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:34,203 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:34,204 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:34,205 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:34,212 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:34,215 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:34,215 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:34,215 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:34,216 - main - INFO - 
2025-12-22 23:08:34,216 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:34,216 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:34,216 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:34,217 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:34,217 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:34,217 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:34,217 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:34,218 - main - INFO - 
2025-12-22 23:08:34,218 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:34,218 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:34,218 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:34,219 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:34,219 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:34,219 - main - INFO - 
2025-12-22 23:08:34,219 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:34,220 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:34,220 - main - INFO -        - No manual section generation
2025-12-22 23:08:34,221 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:34,221 - main - INFO - 
2025-12-22 23:08:34,222 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:34,222 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:34,223 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:34,223 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:34,223 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:34,223 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:34,223 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:34,224 - main - INFO - 
2025-12-22 23:08:34,224 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:34,224 - main - INFO -      Main:
2025-12-22 23:08:34,224 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:34,224 - main - INFO - 
2025-12-22 23:08:34,225 - main - INFO -      Retrieval:
2025-12-22 23:08:34,225 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:34,225 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:34,225 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:34,225 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:34,226 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:34,226 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:34,226 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:34,226 - main - INFO - 
2025-12-22 23:08:34,226 - main - INFO -      Management:
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:34,227 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:34,227 - main - INFO - 
2025-12-22 23:08:34,227 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:34,228 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:34,228 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:34,228 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:34,228 - main - INFO - 
2025-12-22 23:08:34,228 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:34,229 - main - INFO - 
2025-12-22 23:08:34,229 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:34,229 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:34,231 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:34,231 - main - INFO - 
2025-12-22 23:08:34,231 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:34,231 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:34,231 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:34,231 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:34,231 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:34,232 - main - INFO - 
2025-12-22 23:08:34,232 - main - INFO - ================================================================================
2025-12-22 23:08:34,232 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:34,232 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:34,232 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:34,232 - main - INFO - ================================================================================
2025-12-22 23:08:34,233 - main - INFO - 
2025-12-22 23:08:34,233 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:41,605 - main - INFO - 
2025-12-22 23:08:41,606 - main - INFO - ================================================================================
2025-12-22 23:08:41,606 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:41,607 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:41,607 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:41,608 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:41,609 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:41,610 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:41,612 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:41,614 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:41,616 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:41,617 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:41,620 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:41,624 - main - INFO - ================================================================================
2025-12-22 23:08:41,625 - main - INFO - 
2025-12-22 23:08:45,907 - main - INFO - 
2025-12-22 23:08:45,907 - main - INFO - ================================================================================
2025-12-22 23:08:45,908 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:45,908 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:45,908 - main - INFO - ================================================================================
2025-12-22 23:08:45,908 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:45,908 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:45,909 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:45,909 - main - INFO - ================================================================================
2025-12-22 23:08:45,909 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:45,909 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:45,910 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:45,953 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:45,960 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:45,960 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:45,960 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:45,960 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:45,961 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:45,982 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:45,983 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:45,986 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:45,988 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:45,988 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:45,996 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:45,996 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:45,997 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:46,008 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:46,010 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:46,011 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:46,011 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:46,011 - main - INFO - 
2025-12-22 23:08:46,012 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:46,012 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:46,012 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:46,012 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:46,012 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:46,012 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:46,013 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:46,013 - main - INFO - 
2025-12-22 23:08:46,013 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:46,013 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:46,014 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:46,014 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:46,014 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:46,014 - main - INFO - 
2025-12-22 23:08:46,014 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:46,014 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:46,015 - main - INFO -        - No manual section generation
2025-12-22 23:08:46,015 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:46,015 - main - INFO - 
2025-12-22 23:08:46,015 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:46,015 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:46,015 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:46,016 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:46,016 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:46,016 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:46,016 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:46,017 - main - INFO - 
2025-12-22 23:08:46,018 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:46,018 - main - INFO -      Main:
2025-12-22 23:08:46,019 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:46,019 - main - INFO - 
2025-12-22 23:08:46,020 - main - INFO -      Retrieval:
2025-12-22 23:08:46,020 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:46,020 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:46,020 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:46,020 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:46,021 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:46,021 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:46,021 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:46,022 - main - INFO - 
2025-12-22 23:08:46,022 - main - INFO -      Management:
2025-12-22 23:08:46,022 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:46,022 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:46,022 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:46,023 - main - INFO - 
2025-12-22 23:08:46,023 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:46,024 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:46,024 - main - INFO - 
2025-12-22 23:08:46,024 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:46,025 - main - INFO - 
2025-12-22 23:08:46,025 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:46,026 - main - INFO - 
2025-12-22 23:08:46,027 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:46,027 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:46,027 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:46,027 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:46,027 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:46,027 - main - INFO - 
2025-12-22 23:08:46,028 - main - INFO - ================================================================================
2025-12-22 23:08:46,028 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:46,028 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:46,028 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:46,028 - main - INFO - ================================================================================
2025-12-22 23:08:46,028 - main - INFO - 
2025-12-22 23:08:46,029 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:57,197 - main - INFO - 
2025-12-22 23:08:57,198 - main - INFO - ================================================================================
2025-12-22 23:08:57,198 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:57,199 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:57,199 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:57,200 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:57,201 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:57,202 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:57,203 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:57,204 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:57,204 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:57,205 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:57,205 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:57,205 - main - INFO - ================================================================================
2025-12-22 23:08:57,206 - main - INFO - 
2025-12-22 23:09:01,924 - main - INFO - 
2025-12-22 23:09:01,924 - main - INFO - ================================================================================
2025-12-22 23:09:01,924 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:01,925 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:01,925 - main - INFO - ================================================================================
2025-12-22 23:09:01,925 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:01,925 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:01,925 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:01,925 - main - INFO - ================================================================================
2025-12-22 23:09:01,926 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:01,926 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:01,926 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:01,948 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:01,958 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:01,958 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:01,970 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:01,973 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:01,974 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:01,976 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:01,976 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:02,010 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:02,010 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:02,010 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:02,020 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:02,025 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:02,026 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:02,026 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:02,026 - main - INFO - 
2025-12-22 23:09:02,026 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:02,027 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:02,027 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:02,027 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:02,027 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:02,027 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:02,027 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:02,028 - main - INFO - 
2025-12-22 23:09:02,028 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:02,028 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:02,028 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:02,028 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:02,029 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:02,029 - main - INFO - 
2025-12-22 23:09:02,029 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:02,029 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:02,029 - main - INFO -        - No manual section generation
2025-12-22 23:09:02,029 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:02,030 - main - INFO - 
2025-12-22 23:09:02,030 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:02,030 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:02,030 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:02,030 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:02,030 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:02,030 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:02,031 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:02,031 - main - INFO - 
2025-12-22 23:09:02,031 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:02,031 - main - INFO -      Main:
2025-12-22 23:09:02,031 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:02,031 - main - INFO - 
2025-12-22 23:09:02,031 - main - INFO -      Retrieval:
2025-12-22 23:09:02,032 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:02,032 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:02,032 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:02,032 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:02,032 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:02,033 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:02,033 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:02,033 - main - INFO - 
2025-12-22 23:09:02,034 - main - INFO -      Management:
2025-12-22 23:09:02,035 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:02,036 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:02,036 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:02,037 - main - INFO - 
2025-12-22 23:09:02,037 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:02,038 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:02,039 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:02,039 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:02,039 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:02,039 - main - INFO - 
2025-12-22 23:09:02,039 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:02,040 - main - INFO - 
2025-12-22 23:09:02,040 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:02,042 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:02,042 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:02,042 - main - INFO - 
2025-12-22 23:09:02,042 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:02,042 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:02,043 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:02,043 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:02,043 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:02,043 - main - INFO - 
2025-12-22 23:09:02,043 - main - INFO - ================================================================================
2025-12-22 23:09:02,044 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:02,044 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:02,044 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:02,044 - main - INFO - ================================================================================
2025-12-22 23:09:02,044 - main - INFO - 
2025-12-22 23:09:02,045 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:09:14,187 - main - INFO - 
2025-12-22 23:09:14,187 - main - INFO - ================================================================================
2025-12-22 23:09:14,187 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:09:14,188 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:14,188 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:09:14,189 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:14,190 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:09:14,190 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:09:14,191 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:09:14,192 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:09:14,192 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:09:14,193 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:09:14,193 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:09:14,193 - main - INFO - ================================================================================
2025-12-22 23:09:14,193 - main - INFO - 
2025-12-22 23:09:17,790 - main - INFO - 
2025-12-22 23:09:17,791 - main - INFO - ================================================================================
2025-12-22 23:09:17,791 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:17,791 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:17,791 - main - INFO - ================================================================================
2025-12-22 23:09:17,792 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:17,792 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:17,792 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:17,792 - main - INFO - ================================================================================
2025-12-22 23:09:17,793 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:17,793 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:17,793 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:17,842 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:17,847 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:17,847 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:17,874 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:17,875 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:17,878 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:17,880 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:17,881 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:17,892 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:17,892 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:17,892 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:17,921 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:17,925 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:17,925 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:17,925 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:17,925 - main - INFO - 
2025-12-22 23:09:17,926 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:17,926 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:17,926 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:17,926 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:17,926 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:17,927 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:17,927 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:17,927 - main - INFO - 
2025-12-22 23:09:17,927 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:17,927 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:17,928 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:17,928 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:17,928 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:17,928 - main - INFO - 
2025-12-22 23:09:17,928 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:17,928 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:17,928 - main - INFO -        - No manual section generation
2025-12-22 23:09:17,929 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:17,929 - main - INFO - 
2025-12-22 23:09:17,929 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:17,929 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:17,929 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:17,929 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:17,929 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:17,930 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:17,930 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:17,930 - main - INFO - 
2025-12-22 23:09:17,930 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:17,930 - main - INFO -      Main:
2025-12-22 23:09:17,930 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:17,930 - main - INFO - 
2025-12-22 23:09:17,931 - main - INFO -      Retrieval:
2025-12-22 23:09:17,931 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:17,931 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:17,931 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:17,931 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:17,931 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:17,932 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:17,932 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:17,932 - main - INFO - 
2025-12-22 23:09:17,932 - main - INFO -      Management:
2025-12-22 23:09:17,932 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:17,932 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:17,933 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:17,933 - main - INFO - 
2025-12-22 23:09:17,933 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:17,934 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:17,935 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:17,936 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:17,936 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:17,937 - main - INFO - 
2025-12-22 23:09:17,937 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:17,938 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:17,939 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:17,939 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:17,939 - main - INFO - 
2025-12-22 23:09:17,940 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:17,941 - main - INFO - 
2025-12-22 23:09:17,942 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:17,942 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:17,942 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:17,942 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:17,943 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:17,943 - main - INFO - 
2025-12-22 23:09:17,943 - main - INFO - ================================================================================
2025-12-22 23:09:17,943 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:17,944 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:17,944 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:17,944 - main - INFO - ================================================================================
2025-12-22 23:09:17,944 - main - INFO - 
2025-12-22 23:09:17,945 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:09:40,679 - main - INFO - 
2025-12-22 23:09:40,679 - main - INFO - ================================================================================
2025-12-22 23:09:40,680 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:09:40,681 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:40,681 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:09:40,682 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:40,683 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:09:40,684 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:09:40,684 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:09:40,685 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:09:40,686 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:09:40,686 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:09:40,687 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:09:40,687 - main - INFO - ================================================================================
2025-12-22 23:09:40,687 - main - INFO - 
2025-12-22 23:09:43,688 - main - INFO - 
2025-12-22 23:09:43,689 - main - INFO - ================================================================================
2025-12-22 23:09:43,689 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:43,689 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:43,689 - main - INFO - ================================================================================
2025-12-22 23:09:43,690 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:43,690 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:43,690 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:43,690 - main - INFO - ================================================================================
2025-12-22 23:09:43,691 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:43,691 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:43,691 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:43,708 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:43,714 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:43,714 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:43,714 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:43,715 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:43,715 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:43,723 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:43,725 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:43,726 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:43,729 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:43,730 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:43,731 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:43,731 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:43,732 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:43,755 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:43,756 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:43,756 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:43,783 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:43,788 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:43,788 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:43,789 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:43,789 - main - INFO - 
2025-12-22 23:09:43,789 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:43,789 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:43,790 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:43,790 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:43,790 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:43,791 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:43,791 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:43,791 - main - INFO - 
2025-12-22 23:09:43,791 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:43,792 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:43,792 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:43,792 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:43,793 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:43,793 - main - INFO - 
2025-12-22 23:09:43,793 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:43,793 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:43,794 - main - INFO -        - No manual section generation
2025-12-22 23:09:43,794 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:43,794 - main - INFO - 
2025-12-22 23:09:43,794 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:43,794 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:43,795 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:43,795 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:43,795 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:43,795 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:43,795 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:43,796 - main - INFO - 
2025-12-22 23:09:43,796 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:43,796 - main - INFO -      Main:
2025-12-22 23:09:43,796 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:43,796 - main - INFO - 
2025-12-22 23:09:43,797 - main - INFO -      Retrieval:
2025-12-22 23:09:43,797 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:43,797 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:43,797 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:43,797 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:43,798 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:43,798 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:43,798 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:43,798 - main - INFO - 
2025-12-22 23:09:43,798 - main - INFO -      Management:
2025-12-22 23:09:43,799 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:43,799 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:43,799 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:43,799 - main - INFO - 
2025-12-22 23:09:43,800 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:43,800 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:43,801 - main - INFO - 
2025-12-22 23:09:43,801 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:43,801 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:43,801 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:43,802 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:43,802 - main - INFO - 
2025-12-22 23:09:43,802 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:43,804 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:43,804 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:43,804 - main - INFO - 
2025-12-22 23:09:43,804 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:43,804 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:43,804 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:43,805 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:43,805 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:43,805 - main - INFO - 
2025-12-22 23:09:43,805 - main - INFO - ================================================================================
2025-12-22 23:09:43,805 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:43,805 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:43,806 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:43,806 - main - INFO - ================================================================================
2025-12-22 23:09:43,806 - main - INFO - 
2025-12-22 23:09:43,807 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 01:16:57,623 - main - INFO - ğŸ“¥ OPTIONS /api/scheduler/run
2025-12-23 01:16:57,626 - main - INFO - ğŸ“¤ OPTIONS /api/scheduler/run - 400 - 0.00s
2025-12-23 18:50:05,947 - main - INFO - 
2025-12-23 18:50:05,947 - main - INFO - ================================================================================
2025-12-23 18:50:05,948 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:50:05,948 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:50:05,948 - main - INFO - ================================================================================
2025-12-23 18:50:05,948 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:50:05,948 - main - INFO -   Upload Directory: uploads
2025-12-23 18:50:05,949 - main - INFO -   Max File Size: 20MB
2025-12-23 18:50:05,949 - main - INFO - ================================================================================
2025-12-23 18:50:05,949 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:50:05,950 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:50:05,950 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:50:06,251 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:50:06,259 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:50:06,259 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:50:06,259 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:50:06,260 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:50:06,260 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:50:06,268 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:50:06,269 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:50:06,271 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:50:06,278 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:50:06,279 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:50:06,299 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:50:06,300 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:50:06,300 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:50:06,346 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:50:06,351 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:50:06,352 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:50:06,352 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:50:06,353 - main - INFO - 
2025-12-23 18:50:06,354 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:50:06,354 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:50:06,355 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:50:06,355 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:50:06,356 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:50:06,356 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:50:06,356 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:50:06,357 - main - INFO - 
2025-12-23 18:50:06,357 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:50:06,358 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:50:06,358 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:50:06,359 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:50:06,360 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:50:06,360 - main - INFO - 
2025-12-23 18:50:06,361 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:50:06,361 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:50:06,362 - main - INFO -        - No manual section generation
2025-12-23 18:50:06,362 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:50:06,363 - main - INFO - 
2025-12-23 18:50:06,364 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:50:06,364 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:50:06,364 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:50:06,365 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:50:06,365 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:50:06,366 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:50:06,366 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:50:06,367 - main - INFO - 
2025-12-23 18:50:06,367 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:50:06,367 - main - INFO -      Main:
2025-12-23 18:50:06,368 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:50:06,368 - main - INFO - 
2025-12-23 18:50:06,369 - main - INFO -      Retrieval:
2025-12-23 18:50:06,369 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:50:06,369 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:50:06,370 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:50:06,370 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:50:06,370 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:50:06,371 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:50:06,371 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:50:06,371 - main - INFO - 
2025-12-23 18:50:06,372 - main - INFO -      Management:
2025-12-23 18:50:06,372 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:50:06,372 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:50:06,373 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:50:06,373 - main - INFO - 
2025-12-23 18:50:06,373 - main - INFO -      Documents (MongoDB):
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:50:06,374 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:50:06,375 - main - INFO - 
2025-12-23 18:50:06,375 - main - INFO -      Diagnostics & Health:
2025-12-23 18:50:06,375 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:50:06,376 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:50:06,376 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:50:06,376 - main - INFO - 
2025-12-23 18:50:06,377 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:50:06,379 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:50:06,379 - main - INFO - 
2025-12-23 18:50:06,379 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:50:06,380 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:50:06,380 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:50:06,380 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:50:06,380 - main - INFO -      4. No re-upload needed!
2025-12-23 18:50:06,381 - main - INFO - 
2025-12-23 18:50:06,381 - main - INFO - ================================================================================
2025-12-23 18:50:06,381 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:50:06,381 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:50:06,382 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:50:06,382 - main - INFO - ================================================================================
2025-12-23 18:50:06,382 - main - INFO - 
2025-12-23 18:50:06,382 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:54:09,659 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 18:54:09,660 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 18:54:09,661 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:54:09,663 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:54:09,665 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:54:09,673 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 1 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:54:09,674 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:54:09,677 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:54:09,680 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 1 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:54:09,681 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:56:09,100 - main - INFO - 
2025-12-23 18:56:09,101 - main - INFO - ================================================================================
2025-12-23 18:56:09,101 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:56:09,103 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:09,104 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:56:09,106 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:09,107 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:56:09,109 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:56:09,109 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:56:09,111 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:56:09,111 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:56:09,112 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:56:09,113 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:56:09,113 - main - INFO - ================================================================================
2025-12-23 18:56:09,114 - main - INFO - 
2025-12-23 18:56:12,628 - main - INFO - 
2025-12-23 18:56:12,628 - main - INFO - ================================================================================
2025-12-23 18:56:12,628 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:56:12,629 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:56:12,629 - main - INFO - ================================================================================
2025-12-23 18:56:12,629 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:56:12,629 - main - INFO -   Upload Directory: uploads
2025-12-23 18:56:12,629 - main - INFO -   Max File Size: 20MB
2025-12-23 18:56:12,630 - main - INFO - ================================================================================
2025-12-23 18:56:12,630 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:56:12,630 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:56:12,631 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:12,664 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:56:12,669 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:56:12,669 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:56:12,669 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:56:12,670 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:56:12,670 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:56:12,697 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:56:12,698 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:56:12,700 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:56:12,702 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:56:12,702 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:56:12,703 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:56:12,703 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:12,704 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:56:12,715 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:56:12,715 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:56:12,715 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:56:12,745 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:56:12,750 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:56:12,750 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:56:12,750 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:56:12,751 - main - INFO - 
2025-12-23 18:56:12,751 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:56:12,751 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:56:12,752 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:56:12,752 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:56:12,752 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:56:12,753 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:56:12,753 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:56:12,753 - main - INFO - 
2025-12-23 18:56:12,754 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:56:12,755 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:56:12,755 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:56:12,756 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:56:12,756 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:56:12,757 - main - INFO - 
2025-12-23 18:56:12,757 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:56:12,758 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:56:12,758 - main - INFO -        - No manual section generation
2025-12-23 18:56:12,759 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:56:12,759 - main - INFO - 
2025-12-23 18:56:12,759 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:56:12,760 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:56:12,760 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:56:12,760 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:56:12,761 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:56:12,761 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:56:12,761 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:56:12,762 - main - INFO - 
2025-12-23 18:56:12,762 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:56:12,762 - main - INFO -      Main:
2025-12-23 18:56:12,762 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:56:12,763 - main - INFO - 
2025-12-23 18:56:12,763 - main - INFO -      Retrieval:
2025-12-23 18:56:12,763 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:56:12,763 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:56:12,763 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:56:12,764 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:56:12,764 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:56:12,764 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:56:12,764 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:56:12,765 - main - INFO - 
2025-12-23 18:56:12,765 - main - INFO -      Management:
2025-12-23 18:56:12,765 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:56:12,765 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:56:12,766 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:56:12,766 - main - INFO - 
2025-12-23 18:56:12,766 - main - INFO -      Documents (MongoDB):
2025-12-23 18:56:12,766 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:56:12,766 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:56:12,767 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:56:12,767 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:56:12,767 - main - INFO - 
2025-12-23 18:56:12,767 - main - INFO -      Diagnostics & Health:
2025-12-23 18:56:12,767 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:56:12,768 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:56:12,768 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:56:12,768 - main - INFO - 
2025-12-23 18:56:12,768 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:56:12,770 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:56:12,771 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:56:12,772 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:56:12,773 - main - INFO - 
2025-12-23 18:56:12,773 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:56:12,773 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:56:12,774 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:56:12,774 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:56:12,774 - main - INFO -      4. No re-upload needed!
2025-12-23 18:56:12,774 - main - INFO - 
2025-12-23 18:56:12,774 - main - INFO - ================================================================================
2025-12-23 18:56:12,775 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:56:12,775 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:56:12,776 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:56:12,776 - main - INFO - ================================================================================
2025-12-23 18:56:12,776 - main - INFO - 
2025-12-23 18:56:12,776 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:56:44,177 - main - INFO - 
2025-12-23 18:56:44,177 - main - INFO - ================================================================================
2025-12-23 18:56:44,178 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:56:44,179 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:44,179 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:56:44,180 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:44,180 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:56:44,181 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:56:44,181 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:56:44,182 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:56:44,182 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:56:44,183 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:56:44,183 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:56:44,183 - main - INFO - ================================================================================
2025-12-23 18:56:44,183 - main - INFO - 
2025-12-23 18:56:47,335 - main - INFO - 
2025-12-23 18:56:47,335 - main - INFO - ================================================================================
2025-12-23 18:56:47,336 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:56:47,336 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:56:47,336 - main - INFO - ================================================================================
2025-12-23 18:56:47,336 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:56:47,337 - main - INFO -   Upload Directory: uploads
2025-12-23 18:56:47,337 - main - INFO -   Max File Size: 20MB
2025-12-23 18:56:47,337 - main - INFO - ================================================================================
2025-12-23 18:56:47,338 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:56:47,338 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:56:47,338 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:47,357 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:56:47,363 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:56:47,363 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:56:47,372 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:56:47,373 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:56:47,374 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:56:47,376 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:56:47,376 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:56:47,376 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:56:47,377 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:47,377 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:56:47,383 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:56:47,383 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:56:47,383 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:56:47,421 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:56:47,424 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:56:47,424 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:56:47,424 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:56:47,424 - main - INFO - 
2025-12-23 18:56:47,425 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:56:47,425 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:56:47,425 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:56:47,425 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:56:47,426 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:56:47,426 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:56:47,426 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:56:47,426 - main - INFO - 
2025-12-23 18:56:47,427 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:56:47,427 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:56:47,427 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:56:47,427 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:56:47,427 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:56:47,428 - main - INFO - 
2025-12-23 18:56:47,428 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:56:47,428 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:56:47,428 - main - INFO -        - No manual section generation
2025-12-23 18:56:47,428 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:56:47,429 - main - INFO - 
2025-12-23 18:56:47,429 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:56:47,429 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:56:47,429 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:56:47,429 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:56:47,430 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:56:47,430 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:56:47,430 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:56:47,430 - main - INFO - 
2025-12-23 18:56:47,430 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:56:47,430 - main - INFO -      Main:
2025-12-23 18:56:47,431 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:56:47,431 - main - INFO - 
2025-12-23 18:56:47,431 - main - INFO -      Retrieval:
2025-12-23 18:56:47,431 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:56:47,431 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:56:47,431 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:56:47,432 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:56:47,432 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:56:47,432 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:56:47,432 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:56:47,432 - main - INFO - 
2025-12-23 18:56:47,432 - main - INFO -      Management:
2025-12-23 18:56:47,432 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:56:47,433 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:56:47,433 - main - INFO - 
2025-12-23 18:56:47,433 - main - INFO -      Documents (MongoDB):
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:56:47,434 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:56:47,434 - main - INFO - 
2025-12-23 18:56:47,434 - main - INFO -      Diagnostics & Health:
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:56:47,434 - main - INFO - 
2025-12-23 18:56:47,435 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:56:47,436 - main - INFO - 
2025-12-23 18:56:47,436 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:56:47,436 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:56:47,437 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:56:47,437 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:56:47,437 - main - INFO -      4. No re-upload needed!
2025-12-23 18:56:47,437 - main - INFO - 
2025-12-23 18:56:47,437 - main - INFO - ================================================================================
2025-12-23 18:56:47,437 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:56:47,437 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:56:47,438 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:56:47,438 - main - INFO - ================================================================================
2025-12-23 18:56:47,438 - main - INFO - 
2025-12-23 18:56:47,438 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:56:59,958 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:56:59,965 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:56:59,968 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:56:59,975 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:56:59,984 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:56:59,988 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:58:18,249 - main - INFO - 
2025-12-23 18:58:18,249 - main - INFO - ================================================================================
2025-12-23 18:58:18,250 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:58:18,250 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:18,251 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:58:18,252 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:18,252 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:58:18,253 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:58:18,254 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:58:18,255 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:58:18,255 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:58:18,255 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:58:18,256 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:58:18,256 - main - INFO - ================================================================================
2025-12-23 18:58:18,256 - main - INFO - 
2025-12-23 18:58:22,462 - main - INFO - 
2025-12-23 18:58:22,462 - main - INFO - ================================================================================
2025-12-23 18:58:22,462 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:22,462 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:22,463 - main - INFO - ================================================================================
2025-12-23 18:58:22,463 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:22,463 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:22,463 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:22,463 - main - INFO - ================================================================================
2025-12-23 18:58:22,464 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:22,464 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:22,465 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:22,494 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:22,500 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:22,500 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:22,500 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:22,501 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:22,501 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:22,515 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:22,517 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:22,518 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:22,520 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:22,521 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:22,523 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:22,524 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:22,524 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:22,554 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:22,555 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:22,556 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:22,567 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:22,574 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:22,575 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:22,575 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:22,575 - main - INFO - 
2025-12-23 18:58:22,576 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:22,576 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:22,576 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:22,577 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:22,577 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:22,577 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:22,578 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:22,578 - main - INFO - 
2025-12-23 18:58:22,578 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:22,578 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:22,579 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:22,579 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:22,579 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:22,579 - main - INFO - 
2025-12-23 18:58:22,580 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:22,580 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:22,580 - main - INFO -        - No manual section generation
2025-12-23 18:58:22,581 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:22,581 - main - INFO - 
2025-12-23 18:58:22,581 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:22,582 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:22,582 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:22,583 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:22,583 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:22,583 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:22,583 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:22,584 - main - INFO - 
2025-12-23 18:58:22,584 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:22,584 - main - INFO -      Main:
2025-12-23 18:58:22,585 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:22,585 - main - INFO - 
2025-12-23 18:58:22,585 - main - INFO -      Retrieval:
2025-12-23 18:58:22,586 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:22,586 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:22,587 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:22,587 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:22,588 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:22,589 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:22,589 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:22,590 - main - INFO - 
2025-12-23 18:58:22,590 - main - INFO -      Management:
2025-12-23 18:58:22,590 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:22,591 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:22,592 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:22,593 - main - INFO - 
2025-12-23 18:58:22,593 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:22,593 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:22,593 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:22,594 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:22,594 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:22,594 - main - INFO - 
2025-12-23 18:58:22,594 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:22,595 - main - INFO - 
2025-12-23 18:58:22,596 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:22,596 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:22,597 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:22,597 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:22,599 - main - INFO - 
2025-12-23 18:58:22,599 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:22,599 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:22,600 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:22,600 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:22,600 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:22,600 - main - INFO - 
2025-12-23 18:58:22,601 - main - INFO - ================================================================================
2025-12-23 18:58:22,601 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:22,601 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:22,602 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:22,602 - main - INFO - ================================================================================
2025-12-23 18:58:22,602 - main - INFO - 
2025-12-23 18:58:22,602 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:26,640 - main - INFO - 
2025-12-23 18:58:26,641 - main - INFO - ================================================================================
2025-12-23 18:58:26,641 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:26,641 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:26,641 - main - INFO - ================================================================================
2025-12-23 18:58:26,642 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:26,642 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:26,642 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:26,642 - main - INFO - ================================================================================
2025-12-23 18:58:26,643 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:26,643 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:26,643 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:26,660 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:26,663 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:26,664 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:26,701 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:26,702 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:26,703 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:26,705 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:26,705 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:26,705 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:26,706 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:26,706 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:26,737 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:26,737 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:26,738 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:26,765 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:26,768 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:26,768 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:26,768 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:26,769 - main - INFO - 
2025-12-23 18:58:26,769 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:26,769 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:26,769 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:26,769 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:26,770 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:26,770 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:26,770 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:26,770 - main - INFO - 
2025-12-23 18:58:26,770 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:26,770 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:26,771 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:26,771 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:26,771 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:26,771 - main - INFO - 
2025-12-23 18:58:26,771 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:26,771 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:26,771 - main - INFO -        - No manual section generation
2025-12-23 18:58:26,772 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:26,772 - main - INFO - 
2025-12-23 18:58:26,772 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:26,772 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:26,772 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:26,772 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:26,772 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:26,773 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:26,773 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:26,773 - main - INFO - 
2025-12-23 18:58:26,773 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:26,773 - main - INFO -      Main:
2025-12-23 18:58:26,773 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:26,773 - main - INFO - 
2025-12-23 18:58:26,774 - main - INFO -      Retrieval:
2025-12-23 18:58:26,774 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:26,774 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:26,774 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:26,774 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:26,774 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:26,775 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:26,775 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:26,775 - main - INFO - 
2025-12-23 18:58:26,775 - main - INFO -      Management:
2025-12-23 18:58:26,775 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:26,775 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:26,775 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:26,776 - main - INFO - 
2025-12-23 18:58:26,776 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:26,776 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:26,777 - main - INFO - 
2025-12-23 18:58:26,777 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:26,777 - main - INFO - 
2025-12-23 18:58:26,778 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:26,779 - main - INFO - 
2025-12-23 18:58:26,779 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:26,779 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:26,779 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:26,780 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:26,780 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:26,780 - main - INFO - 
2025-12-23 18:58:26,780 - main - INFO - ================================================================================
2025-12-23 18:58:26,780 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:26,780 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:26,781 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:26,781 - main - INFO - ================================================================================
2025-12-23 18:58:26,781 - main - INFO - 
2025-12-23 18:58:26,781 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:29,815 - main - INFO - 
2025-12-23 18:58:29,815 - main - INFO - ================================================================================
2025-12-23 18:58:29,816 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:29,816 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:29,816 - main - INFO - ================================================================================
2025-12-23 18:58:29,817 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:29,817 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:29,818 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:29,818 - main - INFO - ================================================================================
2025-12-23 18:58:29,819 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:29,821 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:29,822 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:29,863 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:29,871 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:29,871 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:29,871 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:29,872 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:29,872 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:29,883 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:29,884 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:29,886 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:29,893 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:29,894 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:29,894 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:29,895 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:29,895 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:29,906 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:29,907 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:29,907 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:29,917 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:29,922 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:29,923 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:29,924 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:29,924 - main - INFO - 
2025-12-23 18:58:29,925 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:29,926 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:29,926 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:29,926 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:29,927 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:29,927 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:29,927 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:29,927 - main - INFO - 
2025-12-23 18:58:29,927 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:29,928 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:29,928 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:29,928 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:29,928 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:29,929 - main - INFO - 
2025-12-23 18:58:29,929 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:29,929 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:29,929 - main - INFO -        - No manual section generation
2025-12-23 18:58:29,930 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:29,930 - main - INFO - 
2025-12-23 18:58:29,930 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:29,930 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:29,931 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:29,931 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:29,931 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:29,931 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:29,932 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:29,932 - main - INFO - 
2025-12-23 18:58:29,932 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:29,934 - main - INFO -      Main:
2025-12-23 18:58:29,935 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:29,935 - main - INFO - 
2025-12-23 18:58:29,943 - main - INFO -      Retrieval:
2025-12-23 18:58:29,946 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:29,958 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:29,964 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:29,964 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:29,965 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:29,965 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:29,965 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:29,965 - main - INFO - 
2025-12-23 18:58:29,965 - main - INFO -      Management:
2025-12-23 18:58:29,966 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:29,966 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:29,966 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:29,966 - main - INFO - 
2025-12-23 18:58:29,966 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:29,967 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:29,967 - main - INFO - 
2025-12-23 18:58:29,968 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:29,968 - main - INFO - 
2025-12-23 18:58:29,968 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:29,969 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:29,970 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:29,970 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:29,971 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:29,972 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:29,973 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:29,974 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:29,974 - main - INFO - 
2025-12-23 18:58:29,976 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:29,976 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:29,976 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:29,977 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:29,977 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:29,977 - main - INFO - 
2025-12-23 18:58:29,977 - main - INFO - ================================================================================
2025-12-23 18:58:29,977 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:29,978 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:29,978 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:29,978 - main - INFO - ================================================================================
2025-12-23 18:58:29,978 - main - INFO - 
2025-12-23 18:58:29,979 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:35,609 - main - INFO - 
2025-12-23 18:58:35,609 - main - INFO - ================================================================================
2025-12-23 18:58:35,609 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:35,610 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:35,610 - main - INFO - ================================================================================
2025-12-23 18:58:35,610 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:35,610 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:35,610 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:35,610 - main - INFO - ================================================================================
2025-12-23 18:58:35,611 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:35,611 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:35,611 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:35,634 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:35,644 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:35,644 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:35,644 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:35,645 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:35,645 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:35,652 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:35,656 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:35,659 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:35,661 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:35,662 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:35,668 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:35,669 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:35,669 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:35,680 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:35,682 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:35,682 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:35,683 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:35,683 - main - INFO - 
2025-12-23 18:58:35,683 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:35,683 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:35,683 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:35,683 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:35,683 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:35,684 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:35,684 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:35,684 - main - INFO - 
2025-12-23 18:58:35,684 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:35,684 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:35,684 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:35,685 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:35,685 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:35,685 - main - INFO - 
2025-12-23 18:58:35,685 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:35,685 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:35,685 - main - INFO -        - No manual section generation
2025-12-23 18:58:35,685 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:35,686 - main - INFO - 
2025-12-23 18:58:35,686 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:35,686 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:35,686 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:35,686 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:35,686 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:35,687 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:35,689 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:35,690 - main - INFO - 
2025-12-23 18:58:35,690 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:35,691 - main - INFO -      Main:
2025-12-23 18:58:35,691 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:35,692 - main - INFO - 
2025-12-23 18:58:35,692 - main - INFO -      Retrieval:
2025-12-23 18:58:35,692 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:35,692 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:35,693 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:35,693 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:35,693 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:35,693 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:35,693 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:35,693 - main - INFO - 
2025-12-23 18:58:35,694 - main - INFO -      Management:
2025-12-23 18:58:35,694 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:35,694 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:35,694 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:35,694 - main - INFO - 
2025-12-23 18:58:35,694 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:35,695 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:35,695 - main - INFO - 
2025-12-23 18:58:35,695 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:35,696 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:35,696 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:35,696 - main - INFO - 
2025-12-23 18:58:35,696 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:35,697 - main - INFO - 
2025-12-23 18:58:35,697 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:35,698 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:35,698 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:35,698 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:35,698 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:35,698 - main - INFO - 
2025-12-23 18:58:35,698 - main - INFO - ================================================================================
2025-12-23 18:58:35,698 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:35,699 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:35,699 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:35,699 - main - INFO - ================================================================================
2025-12-23 18:58:35,699 - main - INFO - 
2025-12-23 18:58:35,699 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:50,689 - main - INFO - 
2025-12-23 18:58:50,689 - main - INFO - ================================================================================
2025-12-23 18:58:50,689 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:58:50,690 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:50,691 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:58:50,692 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:50,692 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:58:50,693 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:58:50,693 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:58:50,694 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:58:50,695 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:58:50,695 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:58:50,695 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:58:50,696 - main - INFO - ================================================================================
2025-12-23 18:58:50,696 - main - INFO - 
2025-12-23 18:58:54,796 - main - INFO - 
2025-12-23 18:58:54,797 - main - INFO - ================================================================================
2025-12-23 18:58:54,797 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:54,797 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:54,797 - main - INFO - ================================================================================
2025-12-23 18:58:54,797 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:54,798 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:54,798 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:54,798 - main - INFO - ================================================================================
2025-12-23 18:58:54,798 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:54,799 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:54,799 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:54,820 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:54,831 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:54,831 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:54,845 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:54,847 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:54,848 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:54,849 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:54,849 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:54,861 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:54,861 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:54,861 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:54,900 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:54,904 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:54,905 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:54,905 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:54,906 - main - INFO - 
2025-12-23 18:58:54,906 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:54,907 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:54,907 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:54,908 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:54,910 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:54,911 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:54,912 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:54,912 - main - INFO - 
2025-12-23 18:58:54,913 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:54,913 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:54,913 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:54,913 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:54,913 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:54,914 - main - INFO - 
2025-12-23 18:58:54,914 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:54,914 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:54,914 - main - INFO -        - No manual section generation
2025-12-23 18:58:54,915 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:54,915 - main - INFO - 
2025-12-23 18:58:54,915 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:54,915 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:54,916 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:54,916 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:54,916 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:54,916 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:54,917 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:54,917 - main - INFO - 
2025-12-23 18:58:54,917 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:54,917 - main - INFO -      Main:
2025-12-23 18:58:54,918 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:54,918 - main - INFO - 
2025-12-23 18:58:54,918 - main - INFO -      Retrieval:
2025-12-23 18:58:54,918 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:54,918 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:54,919 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:54,919 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:54,919 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:54,919 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:54,920 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:54,920 - main - INFO - 
2025-12-23 18:58:54,920 - main - INFO -      Management:
2025-12-23 18:58:54,920 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:54,921 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:54,921 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:54,921 - main - INFO - 
2025-12-23 18:58:54,921 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:54,923 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:54,923 - main - INFO - 
2025-12-23 18:58:54,923 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:54,924 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:54,924 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:54,925 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:54,926 - main - INFO - 
2025-12-23 18:58:54,926 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:54,927 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:54,927 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:54,929 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:54,929 - main - INFO - 
2025-12-23 18:58:54,929 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:54,930 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:54,930 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:54,930 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:54,930 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:54,931 - main - INFO - 
2025-12-23 18:58:54,931 - main - INFO - ================================================================================
2025-12-23 18:58:54,931 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:54,931 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:54,932 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:54,932 - main - INFO - ================================================================================
2025-12-23 18:58:54,932 - main - INFO - 
2025-12-23 18:58:54,933 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:59:01,209 - main - INFO - 
2025-12-23 18:59:01,209 - main - INFO - ================================================================================
2025-12-23 18:59:01,210 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:59:01,211 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:01,212 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:59:01,213 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:01,213 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:59:01,214 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:59:01,215 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:59:01,216 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:59:01,217 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:59:01,217 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:59:01,218 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:59:01,218 - main - INFO - ================================================================================
2025-12-23 18:59:01,219 - main - INFO - 
2025-12-23 18:59:05,237 - main - INFO - 
2025-12-23 18:59:05,238 - main - INFO - ================================================================================
2025-12-23 18:59:05,238 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:59:05,239 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:59:05,239 - main - INFO - ================================================================================
2025-12-23 18:59:05,241 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:59:05,243 - main - INFO -   Upload Directory: uploads
2025-12-23 18:59:05,244 - main - INFO -   Max File Size: 20MB
2025-12-23 18:59:05,244 - main - INFO - ================================================================================
2025-12-23 18:59:05,244 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:59:05,245 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:59:05,245 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:05,268 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:59:05,278 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:59:05,278 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:59:05,288 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:59:05,293 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:59:05,294 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:59:05,297 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:59:05,297 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:59:05,297 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:59:05,297 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:05,298 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:59:05,304 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:59:05,305 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:59:05,305 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:59:05,315 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:59:05,318 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:59:05,318 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:59:05,319 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:59:05,319 - main - INFO - 
2025-12-23 18:59:05,319 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:59:05,319 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:59:05,320 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:59:05,320 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:59:05,320 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:59:05,320 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:59:05,321 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:59:05,321 - main - INFO - 
2025-12-23 18:59:05,321 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:59:05,322 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:59:05,322 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:59:05,323 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:59:05,324 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:59:05,325 - main - INFO - 
2025-12-23 18:59:05,325 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:59:05,326 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:59:05,326 - main - INFO -        - No manual section generation
2025-12-23 18:59:05,327 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:59:05,327 - main - INFO - 
2025-12-23 18:59:05,327 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:59:05,327 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:59:05,328 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:59:05,328 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:59:05,328 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:59:05,328 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:59:05,328 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:59:05,328 - main - INFO - 
2025-12-23 18:59:05,329 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:59:05,329 - main - INFO -      Main:
2025-12-23 18:59:05,329 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:59:05,329 - main - INFO - 
2025-12-23 18:59:05,330 - main - INFO -      Retrieval:
2025-12-23 18:59:05,330 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:59:05,330 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:59:05,330 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:59:05,330 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:59:05,331 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:59:05,331 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:59:05,331 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:59:05,331 - main - INFO - 
2025-12-23 18:59:05,331 - main - INFO -      Management:
2025-12-23 18:59:05,332 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:59:05,332 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:59:05,332 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:59:05,332 - main - INFO - 
2025-12-23 18:59:05,332 - main - INFO -      Documents (MongoDB):
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:59:05,333 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:59:05,333 - main - INFO - 
2025-12-23 18:59:05,334 - main - INFO -      Diagnostics & Health:
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:59:05,334 - main - INFO - 
2025-12-23 18:59:05,335 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:59:05,336 - main - INFO - 
2025-12-23 18:59:05,337 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:59:05,338 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:59:05,338 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:59:05,338 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:59:05,339 - main - INFO -      4. No re-upload needed!
2025-12-23 18:59:05,339 - main - INFO - 
2025-12-23 18:59:05,340 - main - INFO - ================================================================================
2025-12-23 18:59:05,341 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:59:05,342 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:59:05,343 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:59:05,344 - main - INFO - ================================================================================
2025-12-23 18:59:05,344 - main - INFO - 
2025-12-23 18:59:05,344 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:59:22,579 - main - INFO - 
2025-12-23 18:59:22,580 - main - INFO - ================================================================================
2025-12-23 18:59:22,580 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:59:22,581 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:22,581 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:59:22,582 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:22,582 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:59:22,583 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:59:22,583 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:59:22,584 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:59:22,585 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:59:22,585 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:59:22,586 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:59:22,586 - main - INFO - ================================================================================
2025-12-23 18:59:22,586 - main - INFO - 
2025-12-23 18:59:26,169 - main - INFO - 
2025-12-23 18:59:26,169 - main - INFO - ================================================================================
2025-12-23 18:59:26,170 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:59:26,170 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:59:26,171 - main - INFO - ================================================================================
2025-12-23 18:59:26,171 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:59:26,172 - main - INFO -   Upload Directory: uploads
2025-12-23 18:59:26,172 - main - INFO -   Max File Size: 20MB
2025-12-23 18:59:26,173 - main - INFO - ================================================================================
2025-12-23 18:59:26,173 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:59:26,174 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:59:26,174 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:26,215 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:59:26,219 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:59:26,219 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:59:26,220 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:59:26,220 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:59:26,221 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:59:26,246 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:59:26,247 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:59:26,248 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:59:26,249 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:59:26,249 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:59:26,278 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:59:26,279 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:59:26,279 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:59:26,307 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:59:26,310 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:59:26,311 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:59:26,311 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:59:26,311 - main - INFO - 
2025-12-23 18:59:26,311 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:59:26,312 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:59:26,312 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:59:26,312 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:59:26,312 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:59:26,312 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:59:26,313 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:59:26,313 - main - INFO - 
2025-12-23 18:59:26,313 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:59:26,313 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:59:26,313 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:59:26,313 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:59:26,313 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:59:26,314 - main - INFO - 
2025-12-23 18:59:26,314 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:59:26,314 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:59:26,314 - main - INFO -        - No manual section generation
2025-12-23 18:59:26,314 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:59:26,314 - main - INFO - 
2025-12-23 18:59:26,315 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:59:26,315 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:59:26,315 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:59:26,315 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:59:26,315 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:59:26,315 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:59:26,315 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:59:26,316 - main - INFO - 
2025-12-23 18:59:26,316 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:59:26,316 - main - INFO -      Main:
2025-12-23 18:59:26,316 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:59:26,316 - main - INFO - 
2025-12-23 18:59:26,316 - main - INFO -      Retrieval:
2025-12-23 18:59:26,316 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:59:26,317 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:59:26,317 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:59:26,317 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:59:26,317 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:59:26,317 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:59:26,317 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:59:26,318 - main - INFO - 
2025-12-23 18:59:26,318 - main - INFO -      Management:
2025-12-23 18:59:26,318 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:59:26,318 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:59:26,318 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:59:26,318 - main - INFO - 
2025-12-23 18:59:26,318 - main - INFO -      Documents (MongoDB):
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:59:26,319 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:59:26,319 - main - INFO - 
2025-12-23 18:59:26,320 - main - INFO -      Diagnostics & Health:
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:59:26,321 - main - INFO - 
2025-12-23 18:59:26,321 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:59:26,321 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:59:26,323 - main - INFO - 
2025-12-23 18:59:26,323 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:59:26,324 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:59:26,324 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:59:26,324 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:59:26,324 - main - INFO -      4. No re-upload needed!
2025-12-23 18:59:26,324 - main - INFO - 
2025-12-23 18:59:26,324 - main - INFO - ================================================================================
2025-12-23 18:59:26,324 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:59:26,325 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:59:26,325 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:59:26,325 - main - INFO - ================================================================================
2025-12-23 18:59:26,325 - main - INFO - 
2025-12-23 18:59:26,325 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:24:52,015 - main - INFO - 
2025-12-23 19:24:52,016 - main - INFO - ================================================================================
2025-12-23 19:24:52,016 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:24:52,018 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:24:52,019 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:24:52,020 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:24:52,021 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:24:52,022 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:24:52,023 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:24:52,024 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:24:52,025 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:24:52,026 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:24:52,026 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:24:52,027 - main - INFO - ================================================================================
2025-12-23 19:24:52,027 - main - INFO - 
2025-12-23 19:24:54,903 - main - INFO - 
2025-12-23 19:24:54,903 - main - INFO - ================================================================================
2025-12-23 19:24:54,903 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:24:54,904 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:24:54,904 - main - INFO - ================================================================================
2025-12-23 19:24:54,904 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:24:54,904 - main - INFO -   Upload Directory: uploads
2025-12-23 19:24:54,905 - main - INFO -   Max File Size: 20MB
2025-12-23 19:24:54,905 - main - INFO - ================================================================================
2025-12-23 19:24:54,905 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:24:54,906 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:24:54,906 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:24:54,927 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:24:54,933 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:24:54,934 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:24:54,934 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:24:54,934 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:24:54,935 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:24:54,962 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:24:54,963 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:24:54,965 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:24:54,968 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:24:54,968 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:24:54,969 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:24:54,969 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:24:54,970 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:24:54,978 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:24:54,978 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:24:54,979 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:24:54,986 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:24:54,988 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:24:54,989 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:24:54,989 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:24:54,989 - main - INFO - 
2025-12-23 19:24:54,989 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:24:54,990 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:24:54,990 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:24:54,990 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:24:54,990 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:24:54,990 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:24:54,990 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:24:54,991 - main - INFO - 
2025-12-23 19:24:54,991 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:24:54,991 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:24:54,991 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:24:54,991 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:24:54,992 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:24:54,992 - main - INFO - 
2025-12-23 19:24:54,992 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:24:54,992 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:24:54,992 - main - INFO -        - No manual section generation
2025-12-23 19:24:54,993 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:24:54,993 - main - INFO - 
2025-12-23 19:24:54,993 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:24:54,993 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:24:54,993 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:24:54,993 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:24:54,994 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:24:54,994 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:24:54,994 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:24:54,994 - main - INFO - 
2025-12-23 19:24:54,994 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:24:54,994 - main - INFO -      Main:
2025-12-23 19:24:54,994 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:24:54,995 - main - INFO - 
2025-12-23 19:24:54,995 - main - INFO -      Retrieval:
2025-12-23 19:24:54,995 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:24:54,995 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:24:54,995 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:24:54,995 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:24:54,996 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:24:54,996 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:24:54,996 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:24:54,996 - main - INFO - 
2025-12-23 19:24:54,996 - main - INFO -      Management:
2025-12-23 19:24:54,997 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:24:54,997 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:24:54,997 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:24:54,997 - main - INFO - 
2025-12-23 19:24:54,997 - main - INFO -      Documents (MongoDB):
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:24:54,998 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:24:54,998 - main - INFO - 
2025-12-23 19:24:54,998 - main - INFO -      Diagnostics & Health:
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:24:54,999 - main - INFO - 
2025-12-23 19:24:54,999 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:24:54,999 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:24:54,999 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:24:55,000 - main - INFO - 
2025-12-23 19:24:55,001 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:24:55,001 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:24:55,001 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:24:55,001 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:24:55,001 - main - INFO -      4. No re-upload needed!
2025-12-23 19:24:55,001 - main - INFO - 
2025-12-23 19:24:55,002 - main - INFO - ================================================================================
2025-12-23 19:24:55,002 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:24:55,002 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:24:55,002 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:24:55,002 - main - INFO - ================================================================================
2025-12-23 19:24:55,003 - main - INFO - 
2025-12-23 19:24:55,003 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:26:12,160 - main - INFO - 
2025-12-23 19:26:12,160 - main - INFO - ================================================================================
2025-12-23 19:26:12,161 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:26:12,162 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:26:12,162 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:26:12,163 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:26:12,163 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:26:12,164 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:26:12,164 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:26:12,165 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:26:12,166 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:26:12,166 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:26:12,166 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:26:12,167 - main - INFO - ================================================================================
2025-12-23 19:26:12,167 - main - INFO - 
2025-12-23 19:26:15,762 - main - INFO - 
2025-12-23 19:26:15,762 - main - INFO - ================================================================================
2025-12-23 19:26:15,763 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:26:15,763 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:26:15,763 - main - INFO - ================================================================================
2025-12-23 19:26:15,763 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:26:15,764 - main - INFO -   Upload Directory: uploads
2025-12-23 19:26:15,764 - main - INFO -   Max File Size: 20MB
2025-12-23 19:26:15,764 - main - INFO - ================================================================================
2025-12-23 19:26:15,765 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:26:15,765 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:26:15,765 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:26:15,782 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:26:15,788 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:26:15,789 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:26:15,789 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:26:15,789 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:26:15,790 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:26:15,808 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:26:15,809 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:26:15,810 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:26:15,812 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:26:15,812 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:26:15,812 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:26:15,813 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:26:15,813 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:26:15,838 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:26:15,838 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:26:15,838 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:26:15,845 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:26:15,847 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:26:15,848 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:26:15,848 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:26:15,848 - main - INFO - 
2025-12-23 19:26:15,848 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:26:15,848 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:26:15,849 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:26:15,849 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:26:15,849 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:26:15,849 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:26:15,849 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:26:15,849 - main - INFO - 
2025-12-23 19:26:15,850 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:26:15,850 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:26:15,850 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:26:15,850 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:26:15,850 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:26:15,850 - main - INFO - 
2025-12-23 19:26:15,851 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:26:15,851 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:26:15,851 - main - INFO -        - No manual section generation
2025-12-23 19:26:15,851 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:26:15,851 - main - INFO - 
2025-12-23 19:26:15,852 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:26:15,852 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:26:15,852 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:26:15,852 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:26:15,852 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:26:15,852 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:26:15,853 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:26:15,853 - main - INFO - 
2025-12-23 19:26:15,853 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:26:15,853 - main - INFO -      Main:
2025-12-23 19:26:15,853 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:26:15,853 - main - INFO - 
2025-12-23 19:26:15,853 - main - INFO -      Retrieval:
2025-12-23 19:26:15,854 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:26:15,854 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:26:15,854 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:26:15,854 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:26:15,854 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:26:15,854 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:26:15,854 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:26:15,855 - main - INFO - 
2025-12-23 19:26:15,855 - main - INFO -      Management:
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:26:15,855 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:26:15,855 - main - INFO - 
2025-12-23 19:26:15,855 - main - INFO -      Documents (MongoDB):
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:26:15,856 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:26:15,856 - main - INFO - 
2025-12-23 19:26:15,856 - main - INFO -      Diagnostics & Health:
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:26:15,857 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:26:15,857 - main - INFO - 
2025-12-23 19:26:15,857 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:26:15,858 - main - INFO - 
2025-12-23 19:26:15,858 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:26:15,858 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:26:15,858 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:26:15,859 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:26:15,859 - main - INFO -      4. No re-upload needed!
2025-12-23 19:26:15,859 - main - INFO - 
2025-12-23 19:26:15,859 - main - INFO - ================================================================================
2025-12-23 19:26:15,859 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:26:15,860 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:26:15,860 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:26:15,860 - main - INFO - ================================================================================
2025-12-23 19:26:15,860 - main - INFO - 
2025-12-23 19:26:15,860 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:31:25,244 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:31:25,246 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:31:25,246 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,248 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,250 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:31:25,253 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:31:25,254 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,257 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:31:25,260 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:31:25,261 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,084 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:42:14,084 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:42:14,085 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,086 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,087 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:42:14,089 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:42:14,090 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,092 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:42:14,094 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:42:14,095 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:43:11,069 - main - INFO - 
2025-12-23 19:43:11,069 - main - INFO - ================================================================================
2025-12-23 19:43:11,070 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:43:11,071 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:43:11,071 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:43:11,072 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:43:11,073 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:43:11,074 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:43:11,074 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:43:11,075 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:43:11,076 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:43:11,076 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:43:11,077 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:43:11,077 - main - INFO - ================================================================================
2025-12-23 19:43:11,077 - main - INFO - 
2025-12-23 19:43:14,163 - main - INFO - 
2025-12-23 19:43:14,163 - main - INFO - ================================================================================
2025-12-23 19:43:14,163 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:43:14,164 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:43:14,164 - main - INFO - ================================================================================
2025-12-23 19:43:14,164 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:43:14,164 - main - INFO -   Upload Directory: uploads
2025-12-23 19:43:14,165 - main - INFO -   Max File Size: 20MB
2025-12-23 19:43:14,165 - main - INFO - ================================================================================
2025-12-23 19:43:14,165 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:43:14,165 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:43:14,166 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:43:14,187 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:43:14,193 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:43:14,193 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:43:14,193 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:43:14,194 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:43:14,194 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:43:14,226 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:43:14,228 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:43:14,230 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:43:14,232 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:43:14,232 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:43:14,243 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:43:14,243 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:43:14,245 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:43:14,255 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:43:14,258 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:43:14,259 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:43:14,259 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:43:14,259 - main - INFO - 
2025-12-23 19:43:14,259 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:43:14,260 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:43:14,260 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:43:14,260 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:43:14,260 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:43:14,261 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:43:14,261 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:43:14,261 - main - INFO - 
2025-12-23 19:43:14,261 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:43:14,261 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:43:14,262 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:43:14,262 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:43:14,262 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:43:14,262 - main - INFO - 
2025-12-23 19:43:14,263 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:43:14,263 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:43:14,263 - main - INFO -        - No manual section generation
2025-12-23 19:43:14,263 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:43:14,263 - main - INFO - 
2025-12-23 19:43:14,264 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:43:14,264 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:43:14,264 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:43:14,264 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:43:14,264 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:43:14,264 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:43:14,265 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:43:14,265 - main - INFO - 
2025-12-23 19:43:14,265 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:43:14,265 - main - INFO -      Main:
2025-12-23 19:43:14,265 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:43:14,266 - main - INFO - 
2025-12-23 19:43:14,266 - main - INFO -      Retrieval:
2025-12-23 19:43:14,266 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:43:14,266 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:43:14,267 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:43:14,267 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:43:14,267 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:43:14,267 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:43:14,267 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:43:14,268 - main - INFO - 
2025-12-23 19:43:14,268 - main - INFO -      Management:
2025-12-23 19:43:14,268 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:43:14,268 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:43:14,269 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:43:14,269 - main - INFO - 
2025-12-23 19:43:14,269 - main - INFO -      Documents (MongoDB):
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:43:14,270 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:43:14,271 - main - INFO - 
2025-12-23 19:43:14,271 - main - INFO -      Diagnostics & Health:
2025-12-23 19:43:14,271 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:43:14,271 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:43:14,272 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:43:14,272 - main - INFO - 
2025-12-23 19:43:14,272 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:43:14,272 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:43:14,274 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:43:14,274 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:43:14,274 - main - INFO - 
2025-12-23 19:43:14,274 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:43:14,274 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:43:14,275 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:43:14,275 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:43:14,275 - main - INFO -      4. No re-upload needed!
2025-12-23 19:43:14,275 - main - INFO - 
2025-12-23 19:43:14,276 - main - INFO - ================================================================================
2025-12-23 19:43:14,276 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:43:14,276 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:43:14,276 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:43:14,277 - main - INFO - ================================================================================
2025-12-23 19:43:14,277 - main - INFO - 
2025-12-23 19:43:14,278 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 21:08:45,709 - main - INFO - 
2025-12-23 21:08:45,709 - main - INFO - ================================================================================
2025-12-23 21:08:45,709 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 21:08:45,711 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 21:08:45,711 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 21:08:45,712 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 21:08:45,712 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 21:08:45,713 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 21:08:45,713 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 21:08:45,714 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 21:08:45,714 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 21:08:45,715 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 21:08:45,715 - main - INFO -   âœ… Application stopped successfully
2025-12-23 21:08:45,715 - main - INFO - ================================================================================
2025-12-23 21:08:45,716 - main - INFO - 
2025-12-23 21:08:56,771 - main - INFO - 
2025-12-23 21:08:56,771 - main - INFO - ================================================================================
2025-12-23 21:08:56,771 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 21:08:56,772 - main - INFO -   Production-Ready Complete Integration
2025-12-23 21:08:56,772 - main - INFO - ================================================================================
2025-12-23 21:08:56,772 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 21:08:56,772 - main - INFO -   Upload Directory: uploads
2025-12-23 21:08:56,773 - main - INFO -   Max File Size: 20MB
2025-12-23 21:08:56,773 - main - INFO - ================================================================================
2025-12-23 21:08:56,773 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 21:08:56,774 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 21:08:56,774 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 21:08:57,027 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 21:08:57,031 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 21:08:57,031 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 21:08:57,066 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 21:08:57,067 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 21:08:57,068 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 21:08:57,070 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 21:08:57,070 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 21:08:57,070 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 21:08:57,070 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 21:08:57,071 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 21:08:57,116 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 21:08:57,116 - main - INFO -   âœ… User Documents Service connected
2025-12-23 21:08:57,117 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 21:08:57,142 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 21:08:57,146 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 21:08:57,146 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 21:08:57,146 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 21:08:57,146 - main - INFO - 
2025-12-23 21:08:57,147 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 21:08:57,147 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 21:08:57,147 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 21:08:57,147 - main - INFO -        - Separates warranties from extensions
2025-12-23 21:08:57,148 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 21:08:57,148 - main - INFO -        - Correct deductible tier detection
2025-12-23 21:08:57,148 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 21:08:57,148 - main - INFO - 
2025-12-23 21:08:57,148 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 21:08:57,149 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 21:08:57,149 - main - INFO -        - Identifies unique items per provider
2025-12-23 21:08:57,149 - main - INFO -        - Transparent scoring methodology
2025-12-23 21:08:57,149 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 21:08:57,150 - main - INFO - 
2025-12-23 21:08:57,150 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 21:08:57,150 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 21:08:57,150 - main - INFO -        - No manual section generation
2025-12-23 21:08:57,151 - main - INFO -        - Complete MongoDB integration
2025-12-23 21:08:57,151 - main - INFO - 
2025-12-23 21:08:57,151 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 21:08:57,152 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 21:08:57,152 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 21:08:57,153 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 21:08:57,153 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 21:08:57,153 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 21:08:57,153 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 21:08:57,154 - main - INFO - 
2025-12-23 21:08:57,154 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 21:08:57,154 - main - INFO -      Main:
2025-12-23 21:08:57,154 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 21:08:57,154 - main - INFO - 
2025-12-23 21:08:57,155 - main - INFO -      Retrieval:
2025-12-23 21:08:57,155 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 21:08:57,155 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 21:08:57,155 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 21:08:57,155 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 21:08:57,155 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 21:08:57,156 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 21:08:57,156 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 21:08:57,156 - main - INFO - 
2025-12-23 21:08:57,156 - main - INFO -      Management:
2025-12-23 21:08:57,156 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 21:08:57,156 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 21:08:57,156 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 21:08:57,157 - main - INFO - 
2025-12-23 21:08:57,157 - main - INFO -      Documents (MongoDB):
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents                All documents
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 21:08:57,157 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 21:08:57,157 - main - INFO - 
2025-12-23 21:08:57,157 - main - INFO -      Diagnostics & Health:
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/health                   System health
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 21:08:57,158 - main - INFO - 
2025-12-23 21:08:57,158 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 21:08:57,158 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 21:08:57,160 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 21:08:57,160 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 21:08:57,161 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 21:08:57,161 - main - INFO - 
2025-12-23 21:08:57,161 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 21:08:57,161 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 21:08:57,161 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 21:08:57,161 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 21:08:57,162 - main - INFO -      4. No re-upload needed!
2025-12-23 21:08:57,162 - main - INFO - 
2025-12-23 21:08:57,162 - main - INFO - ================================================================================
2025-12-23 21:08:57,162 - main - INFO -   âœ… Application started successfully!
2025-12-23 21:08:57,162 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 21:08:57,162 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 21:08:57,162 - main - INFO - ================================================================================
2025-12-23 21:08:57,163 - main - INFO - 
2025-12-23 21:08:57,163 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 21:08:59,373 - main - INFO - ğŸ“¥ GET /docs
2025-12-23 21:08:59,375 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-23 21:09:00,021 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-23 21:09:00,063 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.04s
2025-12-23 21:09:07,943 - main - INFO - ğŸ“¥ GET /docs
2025-12-23 21:09:07,944 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-23 21:09:08,134 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-23 21:09:08,135 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-24 21:22:31,038 - main - INFO - 
2025-12-24 21:22:31,038 - main - INFO - ================================================================================
2025-12-24 21:22:31,038 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-24 21:22:31,038 - main - INFO -   Production-Ready Complete Integration
2025-12-24 21:22:31,039 - main - INFO - ================================================================================
2025-12-24 21:22:31,039 - main - INFO -   AI Model: gpt-4o-mini
2025-12-24 21:22:31,039 - main - INFO -   Upload Directory: uploads
2025-12-24 21:22:31,039 - main - INFO -   Max File Size: 20MB
2025-12-24 21:22:31,040 - main - INFO - ================================================================================
2025-12-24 21:22:31,040 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-24 21:22:31,040 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-24 21:22:31,041 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-24 21:22:31,467 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-24 21:22:31,473 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-24 21:22:31,473 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-24 21:22:31,473 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-24 21:22:31,473 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-24 21:22:31,474 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-24 21:22:31,482 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-24 21:22:31,491 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-24 21:22:31,499 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-24 21:22:31,577 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-24 21:22:31,577 - main - INFO -   âœ… User Subscription Service connected
2025-12-24 21:22:31,577 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-24 21:22:31,578 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-24 21:22:31,578 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-24 21:22:31,599 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-24 21:22:31,599 - main - INFO -   âœ… User Documents Service connected
2025-12-24 21:22:31,599 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-24 21:22:31,632 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-24 21:22:31,647 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-24 21:22:31,648 - main - INFO -   âœ… Hakim Score Service connected
2025-12-24 21:22:31,648 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-24 21:22:31,648 - main - INFO - 
2025-12-24 21:22:31,649 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-24 21:22:31,649 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-24 21:22:31,649 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-24 21:22:31,650 - main - INFO -        - Separates warranties from extensions
2025-12-24 21:22:31,650 - main - INFO -        - Extracts subjectivities & operational details
2025-12-24 21:22:31,650 - main - INFO -        - Correct deductible tier detection
2025-12-24 21:22:31,651 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-24 21:22:31,651 - main - INFO - 
2025-12-24 21:22:31,651 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-24 21:22:31,651 - main - INFO -        - Generates ALL sections comprehensively
2025-12-24 21:22:31,652 - main - INFO -        - Identifies unique items per provider
2025-12-24 21:22:31,652 - main - INFO -        - Transparent scoring methodology
2025-12-24 21:22:31,652 - main - INFO -        - Uses full _extended_data from parser
2025-12-24 21:22:31,653 - main - INFO - 
2025-12-24 21:22:31,653 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-24 21:22:31,653 - main - INFO -        - Single endpoint auto-populates everything
2025-12-24 21:22:31,653 - main - INFO -        - No manual section generation
2025-12-24 21:22:31,654 - main - INFO -        - Complete MongoDB integration
2025-12-24 21:22:31,654 - main - INFO - 
2025-12-24 21:22:31,654 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-24 21:22:31,654 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-24 21:22:31,655 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-24 21:22:31,655 - main - INFO -      âœ… Subjectivities: Now included
2025-12-24 21:22:31,656 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-24 21:22:31,656 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-24 21:22:31,656 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-24 21:22:31,657 - main - INFO - 
2025-12-24 21:22:31,657 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-24 21:22:31,659 - main - INFO -      Main:
2025-12-24 21:22:31,659 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-24 21:22:31,660 - main - INFO - 
2025-12-24 21:22:31,662 - main - INFO -      Retrieval:
2025-12-24 21:22:31,663 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-24 21:22:31,664 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-24 21:22:31,664 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-24 21:22:31,665 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-24 21:22:31,665 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-24 21:22:31,665 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-24 21:22:31,665 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-24 21:22:31,666 - main - INFO - 
2025-12-24 21:22:31,666 - main - INFO -      Management:
2025-12-24 21:22:31,666 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-24 21:22:31,666 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-24 21:22:31,667 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-24 21:22:31,667 - main - INFO - 
2025-12-24 21:22:31,667 - main - INFO -      Documents (MongoDB):
2025-12-24 21:22:31,667 - main - INFO -        GET  /api/documents                All documents
2025-12-24 21:22:31,668 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-24 21:22:31,668 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-24 21:22:31,668 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-24 21:22:31,668 - main - INFO - 
2025-12-24 21:22:31,669 - main - INFO -      Diagnostics & Health:
2025-12-24 21:22:31,669 - main - INFO -        GET  /api/health                   System health
2025-12-24 21:22:31,669 - main - INFO -        GET  /api/status                   Detailed status
2025-12-24 21:22:31,669 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-24 21:22:31,670 - main - INFO - 
2025-12-24 21:22:31,670 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-24 21:22:31,670 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-24 21:22:31,671 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-24 21:22:31,671 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-24 21:22:31,671 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-24 21:22:31,672 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-24 21:22:31,672 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-24 21:22:31,672 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-24 21:22:31,673 - main - INFO - 
2025-12-24 21:22:31,673 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-24 21:22:31,673 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-24 21:22:31,673 - main - INFO -      2. Receive comparison_id + complete data
2025-12-24 21:22:31,674 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-24 21:22:31,674 - main - INFO -      4. No re-upload needed!
2025-12-24 21:22:31,674 - main - INFO - 
2025-12-24 21:22:31,675 - main - INFO - ================================================================================
2025-12-24 21:22:31,675 - main - INFO -   âœ… Application started successfully!
2025-12-24 21:22:31,676 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-24 21:22:31,676 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-24 21:22:31,676 - main - INFO - ================================================================================
2025-12-24 21:22:31,677 - main - INFO - 
2025-12-24 21:22:31,678 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-24 21:23:12,108 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-24 21:23:12,109 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-24 21:23:12,110 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-24 21:23:12,111 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-24 21:23:12,115 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-24 21:23:12,127 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-24 21:23:12,128 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-24 21:23:12,131 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-24 21:23:12,134 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-24 21:23:12,135 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-26 19:12:20,376 - main - INFO - 
2025-12-26 19:12:20,376 - main - INFO - ================================================================================
2025-12-26 19:12:20,376 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:12:20,376 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:12:20,377 - main - INFO - ================================================================================
2025-12-26 19:12:20,377 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:12:20,377 - main - INFO -   Upload Directory: uploads
2025-12-26 19:12:20,377 - main - INFO -   Max File Size: 20MB
2025-12-26 19:12:20,377 - main - INFO - ================================================================================
2025-12-26 19:12:20,378 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:12:20,378 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:12:20,379 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:12:20,719 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:12:20,746 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:12:20,746 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:12:20,747 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:12:20,747 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:12:20,748 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:12:20,782 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:12:20,790 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:12:20,797 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:12:20,801 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-26 19:12:20,801 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:12:20,802 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:12:20,802 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:12:20,802 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:12:20,824 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:12:20,824 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:12:20,824 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:12:20,856 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:12:20,871 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:12:20,872 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:12:20,872 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:12:20,872 - main - INFO - 
2025-12-26 19:12:20,872 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:12:20,873 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:12:20,873 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:12:20,873 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:12:20,873 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:12:20,873 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:12:20,874 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:12:20,874 - main - INFO - 
2025-12-26 19:12:20,874 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:12:20,874 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:12:20,874 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:12:20,874 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:12:20,875 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:12:20,875 - main - INFO - 
2025-12-26 19:12:20,875 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:12:20,875 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:12:20,875 - main - INFO -        - No manual section generation
2025-12-26 19:12:20,875 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:12:20,876 - main - INFO - 
2025-12-26 19:12:20,876 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:12:20,876 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:12:20,876 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:12:20,876 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:12:20,876 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:12:20,877 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:12:20,877 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:12:20,877 - main - INFO - 
2025-12-26 19:12:20,877 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:12:20,877 - main - INFO -      Main:
2025-12-26 19:12:20,877 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:12:20,878 - main - INFO - 
2025-12-26 19:12:20,878 - main - INFO -      Retrieval:
2025-12-26 19:12:20,878 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:12:20,878 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:12:20,878 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:12:20,878 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:12:20,879 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:12:20,879 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:12:20,879 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:12:20,879 - main - INFO - 
2025-12-26 19:12:20,879 - main - INFO -      Management:
2025-12-26 19:12:20,879 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:12:20,880 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:12:20,880 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:12:20,880 - main - INFO - 
2025-12-26 19:12:20,880 - main - INFO -      Documents (MongoDB):
2025-12-26 19:12:20,880 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:12:20,880 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:12:20,881 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:12:20,881 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:12:20,881 - main - INFO - 
2025-12-26 19:12:20,881 - main - INFO -      Diagnostics & Health:
2025-12-26 19:12:20,881 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:12:20,881 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:12:20,882 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:12:20,882 - main - INFO - 
2025-12-26 19:12:20,882 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:12:20,882 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:12:20,882 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:12:20,882 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:12:20,883 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:12:20,883 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:12:20,883 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:12:20,883 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:12:20,883 - main - INFO - 
2025-12-26 19:12:20,883 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:12:20,884 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:12:20,884 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:12:20,884 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:12:20,884 - main - INFO -      4. No re-upload needed!
2025-12-26 19:12:20,884 - main - INFO - 
2025-12-26 19:12:20,884 - main - INFO - ================================================================================
2025-12-26 19:12:20,884 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:12:20,885 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:12:20,885 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:12:20,885 - main - INFO - ================================================================================
2025-12-26 19:12:20,885 - main - INFO - 
2025-12-26 19:12:20,886 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:16:28,615 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:16:28,619 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:16:28,620 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:16:28,621 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:16:28,623 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-26 19:16:28,628 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-26 19:16:28,630 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-26 19:16:28,632 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.01s
2025-12-26 19:16:28,858 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:16:28,860 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:16:28,861 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:16:28,867 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 0 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:16:28,867 - app.api.routes - INFO - âœ… Found 0 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:16:28,868 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:16:28,871 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:16:28,872 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:16:28,874 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:16:28,875 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 0 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:16:28,876 - app.api.routes - INFO - âœ… Found 0 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:16:28,876 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.00s
2025-12-26 19:16:28,878 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:16:28,879 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:16:28,881 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:16:28,882 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 0 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:16:28,882 - app.api.routes - INFO - âœ… Found 0 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:16:28,883 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.00s
2025-12-26 19:16:28,885 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:16:28,886 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:16:28,888 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:16:28,889 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 0 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:16:28,890 - app.api.routes - INFO - âœ… Found 0 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:16:28,890 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.00s
2025-12-26 19:16:46,023 - main - INFO - ğŸ“¥ OPTIONS /api/compare-quotes
2025-12-26 19:16:46,024 - main - INFO - ğŸ“¤ OPTIONS /api/compare-quotes - 200 - 0.00s
2025-12-26 19:16:46,027 - main - INFO - ğŸ“¥ POST /api/compare-quotes
2025-12-26 19:16:46,100 - app.api.routes - INFO - ğŸ” Checking user subscription for user: 694edeacc98c1096e3582e38
2025-12-26 19:16:46,101 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-26 19:16:46,101 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-26 19:16:46,102 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-26 19:16:46,103 - app.services.user_subscription_service - INFO - âœ… Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-26 19:16:46,104 - app.api.routes - INFO - âœ… User 694edeacc98c1096e3582e38 can perform comparison
2025-12-26 19:16:46,105 - app.api.routes - INFO -    - Remaining comparisons: -1
2025-12-26 19:16:46,106 - app.api.routes - INFO -    - Quotes per case: 8
2025-12-26 19:16:46,106 - app.api.routes - INFO -    - Files uploaded: 3
2025-12-26 19:16:46,107 - app.api.routes - INFO - ğŸ†” Generated comparison ID: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:16:46,108 - app.services.progress_tracker - INFO - ğŸ“Š Progress initialized for job: job_6a58acb90df9 (3 files)
2025-12-26 19:16:46,108 - app.api.routes - INFO - ğŸ“Š Initialized progress tracking: job_6a58acb90df9
2025-12-26 19:16:46,110 - app.api.routes - INFO - 
======================================================================
2025-12-26 19:16:46,111 - app.api.routes - INFO - ğŸ“„ Processing: AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:16:46,112 - app.api.routes - INFO - ======================================================================
2025-12-26 19:16:46,113 - app.api.routes - INFO - ğŸ’¾ Saved file: AL Salama Hospital - PAR - Liva.pdf â†’ a6c2da18dad84f40b76bec356c82ba78.pdf (331157 bytes)
2025-12-26 19:16:46,113 - app.api.routes - INFO - ğŸ“– Extracting text from: AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:16:46,114 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\a6c2da18dad84f40b76bec356c82ba78.pdf
2025-12-26 19:16:46,114 - app.api.routes - INFO - 
======================================================================
2025-12-26 19:16:46,118 - app.api.routes - INFO - ğŸ“„ Processing: AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:16:46,162 - app.api.routes - INFO - ======================================================================
2025-12-26 19:16:46,248 - app.api.routes - INFO - ğŸ’¾ Saved file: AL Salama Hospital - PAR - GIG.pdf â†’ ed2b575606b84a8c973e4ec2a03a1799.pdf (293280 bytes)
2025-12-26 19:16:46,249 - app.api.routes - INFO - ğŸ“– Extracting text from: AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:16:46,249 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\ed2b575606b84a8c973e4ec2a03a1799.pdf
2025-12-26 19:16:46,250 - app.api.routes - INFO - 
======================================================================
2025-12-26 19:16:46,271 - app.api.routes - INFO - ğŸ“„ Processing: CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:16:46,293 - app.api.routes - INFO - ======================================================================
2025-12-26 19:16:46,323 - app.services.pdf_extractor - INFO - Successfully extracted 18289 characters from 8 pages
2025-12-26 19:16:46,347 - app.services.pdf_extractor - INFO - Successfully extracted 10755 characters from 6 pages
2025-12-26 19:16:46,347 - app.api.routes - INFO - ğŸ¤– Parsing with AI: AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:16:46,348 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:16:46,349 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Liva Insurance (pattern: \bliva\b)
2025-12-26 19:16:46,351 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Liva Insurance
2025-12-26 19:16:46,352 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): No.  Description
2025-12-26 19:16:46,352 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-26 19:16:46,352 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: LIVA
2025-12-26 19:16:46,456 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 7 sublimits
2025-12-26 19:16:46,457 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-26 19:16:47,269 - app.api.routes - INFO - ğŸ¤– Parsing with AI: AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:16:47,270 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:16:47,270 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Gulf Insurance Group (GIG) (pattern: \bgig\b)
2025-12-26 19:16:47,271 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Gulf Insurance Group (GIG)
2025-12-26 19:16:47,271 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-26 19:16:47,271 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-26 19:16:47,271 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GIG
2025-12-26 19:16:47,346 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 15 sublimits
2025-12-26 19:16:47,347 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-26 19:16:47,362 - app.api.routes - INFO - ğŸ’¾ Saved file: CGL 2024 offer - Tawuniya.pdf â†’ 6446a5c12dac43afb44a14cc7280ad60.pdf (2319198 bytes)
2025-12-26 19:16:47,363 - app.api.routes - INFO - ğŸ“– Extracting text from: CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:16:47,363 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\6446a5c12dac43afb44a14cc7280ad60.pdf
2025-12-26 19:16:47,483 - app.services.pdf_extractor - INFO - Successfully extracted 5520 characters from 4 pages
2025-12-26 19:16:47,485 - app.api.routes - INFO - ğŸ¤– Parsing with AI: CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:16:47,486 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:16:47,487 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Tawuniya (pattern: \btawuniya\b)
2025-12-26 19:16:47,487 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Tawuniya
2025-12-26 19:16:47,487 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): TO THEIR PATIENTS SUB
2025-12-26 19:16:47,488 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-26 19:16:47,488 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: TAWUNIYA
2025-12-26 19:16:47,519 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 0 sublimits
2025-12-26 19:16:47,521 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-26 19:17:13,517 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:13,531 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-26 19:17:13,532 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-26 19:17:13,532 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-26 19:17:13,533 - app.services.ai_parser - WARNING - âš ï¸ Only 5 benefits, using fallback...
2025-12-26 19:17:13,541 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 42 benefits from patterns
2025-12-26 19:17:13,543 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 45 total
2025-12-26 19:17:13,543 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-26 19:17:13,544 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-26 19:17:13,545 - app.services.ai_parser - INFO - ğŸ”„ Rate: 'SR 516,335/- @ 0.33%' â†’ '0.33%'
2025-12-26 19:17:13,545 - app.services.ai_parser - INFO - ğŸ’° Calculated: 8078847484185.10 from SI: 1564652306.0 Ã— Rate: SR 516,335/- @ 0.33%
2025-12-26 19:17:13,545 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:13,546 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:13,546 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:13,546 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5% of claim amount, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, min SR 1,500,000
2025-12-26 19:17:13,547 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-26 19:17:13,547 - app.services.ai_parser - INFO - ğŸ“Š Counts: 45 benefits, 13 exclusions, 18 warranties, 5 extensions
2025-12-26 19:17:13,547 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-26 19:17:19,023 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:19,028 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-26 19:17:20,034 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:20,038 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 85.0
2025-12-26 19:17:20,039 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-26 19:17:20,039 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-26 19:17:20,041 - app.services.ai_parser - INFO - 
2025-12-26 19:17:20,041 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:20,042 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:17:20,043 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:20,044 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Gulf Insurance Group (GIG)
2025-12-26 19:17:20,045 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: Mediclinic Al Murjan Hospital &/or Al Murjan Medical Centre Co. &/or Al Murjan
2025-12-26 19:17:20,046 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 516,335.00
2025-12-26 19:17:20,047 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.33%
2025-12-26 19:17:20,047 - app.services.ai_parser - INFO - ğŸ¯ Score: 85.0/100
2025-12-26 19:17:20,048 - app.services.ai_parser - INFO - ğŸ“ Quality: 100.0/100
2025-12-26 19:17:20,049 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5% of claim amount, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5% of claim amount, min SR 1,500,000
2025-12-26 19:17:20,050 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-26 19:17:20,050 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-26 19:17:20,051 - app.services.ai_parser - INFO - 
2025-12-26 19:17:20,052 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-26 19:17:20,052 - app.services.ai_parser - INFO -    âœ“ Benefits: 45
2025-12-26 19:17:20,053 - app.services.ai_parser - INFO -    âœ“ Exclusions: 13
2025-12-26 19:17:20,053 - app.services.ai_parser - INFO -    âœ“ Warranties: 18
2025-12-26 19:17:20,054 - app.services.ai_parser - INFO -    âœ“ Extensions: 5
2025-12-26 19:17:20,055 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-26 19:17:20,055 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:20,058 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: ed2b575606b84a8c973e4ec2a03a1799.pdf â†’ 694edf40c4806e65d8a8abf1
2025-12-26 19:17:20,059 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 694edf40c4806e65d8a8abf1
2025-12-26 19:17:20,065 - app.services.user_documents_service - INFO - âœ… Saved user document: AL Salama Hospital - PAR - GIG.pdf â†’ 694edf40c4806e65d8a8abf2 (293280 bytes)
2025-12-26 19:17:20,066 - app.api.routes - INFO - âœ… Saved user document: AL Salama Hospital - PAR - GIG.pdf â†’ 694edf40c4806e65d8a8abf2
2025-12-26 19:17:20,067 - app.api.routes - INFO - âœ… Successfully processed: AL Salama Hospital - PAR - GIG.pdf
2025-12-26 19:17:25,079 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:25,081 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-26 19:17:25,081 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-26 19:17:25,081 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-26 19:17:25,082 - app.services.ai_parser - WARNING - âš ï¸ Only 2 benefits, using fallback...
2025-12-26 19:17:25,085 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 32 benefits from patterns
2025-12-26 19:17:25,085 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 34 total
2025-12-26 19:17:25,085 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-26 19:17:25,085 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-26 19:17:25,086 - app.services.ai_parser - INFO - ğŸ”„ Rate: '0.379%o on Total Sum insured of SAR 1,564,652,306.28' â†’ '0.379â€°'
2025-12-26 19:17:25,086 - app.services.ai_parser - INFO - ğŸ’° Calculated: 593003.22 from SI: 1564652306.28 Ã— Rate: 0.379%o on Total Sum insured of SAR 1,564,652,306.28
2025-12-26 19:17:25,087 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:25,087 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:25,087 - app.services.ai_parser - INFO - âœ“ Deductible tier: >500M applies (SI: 1564.7M)
2025-12-26 19:17:25,087 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-26 19:17:25,088 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-26 19:17:25,088 - app.services.ai_parser - INFO - ğŸ“Š Counts: 34 benefits, 26 exclusions, 7 warranties, 3 extensions
2025-12-26 19:17:25,088 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-26 19:17:31,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:31,104 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-26 19:17:31,891 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:17:31,894 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 80.0
2025-12-26 19:17:31,895 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-26 19:17:31,896 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-26 19:17:31,897 - app.services.ai_parser - INFO - 
2025-12-26 19:17:31,898 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:31,899 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:17:31,900 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:31,900 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Liva Insurance
2025-12-26 19:17:31,901 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: No.  Description
2025-12-26 19:17:31,902 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 593,003.00
2025-12-26 19:17:31,902 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.379â€°
2025-12-26 19:17:31,902 - app.services.ai_parser - INFO - ğŸ¯ Score: 80.0/100
2025-12-26 19:17:31,903 - app.services.ai_parser - INFO - ğŸ“ Quality: 100.0/100
2025-12-26 19:17:31,903 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5%, min SR 1,000,000 | BI: Minimum 21 days | Nat Cat: 5%, min SR 1,500,000
2025-12-26 19:17:31,903 - app.services.ai_parser - INFO - â° Validity: 15 days from date of indication
2025-12-26 19:17:31,904 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: N/A
2025-12-26 19:17:31,904 - app.services.ai_parser - INFO - 
2025-12-26 19:17:31,904 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-26 19:17:31,904 - app.services.ai_parser - INFO -    âœ“ Benefits: 34
2025-12-26 19:17:31,904 - app.services.ai_parser - INFO -    âœ“ Exclusions: 26
2025-12-26 19:17:31,905 - app.services.ai_parser - INFO -    âœ“ Warranties: 7
2025-12-26 19:17:31,905 - app.services.ai_parser - INFO -    âœ“ Extensions: 3
2025-12-26 19:17:31,905 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-26 19:17:31,907 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:17:31,911 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: a6c2da18dad84f40b76bec356c82ba78.pdf â†’ 694edf4bc4806e65d8a8abf3
2025-12-26 19:17:31,911 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 694edf4bc4806e65d8a8abf3
2025-12-26 19:17:31,920 - app.services.user_documents_service - INFO - âœ… Saved user document: AL Salama Hospital - PAR - Liva.pdf â†’ 694edf4bc4806e65d8a8abf4 (331157 bytes)
2025-12-26 19:17:31,921 - app.api.routes - INFO - âœ… Saved user document: AL Salama Hospital - PAR - Liva.pdf â†’ 694edf4bc4806e65d8a8abf4
2025-12-26 19:17:31,921 - app.api.routes - INFO - âœ… Successfully processed: AL Salama Hospital - PAR - Liva.pdf
2025-12-26 19:18:04,620 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:18:04,635 - app.services.ai_parser - ERROR - âŒ JSON parsing failed: Expecting property name enclosed in double quotes: line 22 column 3913 (char 4522)
2025-12-26 19:18:04,637 - app.services.ai_parser - ERROR - âŒ JSON parsing failed after cleanup: Expecting ',' delimiter: line 1 column 494 (char 493)
2025-12-26 19:18:04,637 - app.services.ai_parser - WARNING - âš ï¸ Proceeding with minimal empty extraction due to JSON errors
2025-12-26 19:18:04,637 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-26 19:18:04,637 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-26 19:18:04,638 - app.services.ai_parser - WARNING - âš ï¸ Deductible missing/invalid, using fallback...
2025-12-26 19:18:04,639 - app.services.ai_parser - INFO - âœ… Extracted deductible: MD: INCLUSIVE OF LEGAL COSTS AND EXPENSES ONLY (I.E. LEGAL &/OR COURT
2025-12-26 19:18:04,640 - app.services.ai_parser - WARNING - âš ï¸ Only 0 warranties, using fallback...
2025-12-26 19:18:04,644 - app.services.ai_parser - INFO - âš ï¸ Fallback extracted 1 warranties from patterns
2025-12-26 19:18:04,644 - app.services.ai_parser - INFO - âœ… Enhanced warranties: 1 total
2025-12-26 19:18:04,644 - app.services.ai_parser - WARNING - âš ï¸ Only 0 exclusions, using fallback...
2025-12-26 19:18:04,649 - app.services.ai_parser - INFO - ğŸš« Fallback extracted 19 exclusions from patterns
2025-12-26 19:18:04,650 - app.services.ai_parser - INFO - âœ… Enhanced exclusions: 19 total
2025-12-26 19:18:04,650 - app.services.ai_parser - WARNING - âš ï¸ Only 0 benefits, using fallback...
2025-12-26 19:18:04,653 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 13 benefits from patterns
2025-12-26 19:18:04,653 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 12 total
2025-12-26 19:18:04,654 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-26 19:18:04,654 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-26 19:18:04,655 - app.services.ai_parser - INFO - ğŸ”„ Rate: '' â†’ 'N/A'
2025-12-26 19:18:04,656 - app.services.ai_parser - INFO - âœ… Applicable deductibles (fallback): MD: INCLUSIVE OF LEGAL COSTS AND EXPENSES ONLY (I.E. LEGAL &/OR COURT
2025-12-26 19:18:04,657 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-26 19:18:04,658 - app.services.ai_parser - INFO - ğŸ“Š Counts: 12 benefits, 19 exclusions, 1 warranties, 0 extensions
2025-12-26 19:18:04,658 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-26 19:18:10,513 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:18:10,514 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 70.0
2025-12-26 19:18:10,548 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:18:10,553 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-26 19:18:10,554 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-26 19:18:10,554 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-26 19:18:10,555 - app.services.ai_parser - INFO - 
2025-12-26 19:18:10,555 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:18:10,555 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:18:10,555 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:18:10,555 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Tawuniya
2025-12-26 19:18:10,556 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: TO THEIR PATIENTS SUB
2025-12-26 19:18:10,556 - app.services.ai_parser - INFO - ğŸ’° Premium: N/A
2025-12-26 19:18:10,556 - app.services.ai_parser - INFO - ğŸ“Š Rate: N/A
2025-12-26 19:18:10,557 - app.services.ai_parser - INFO - ğŸ¯ Score: 70.0/100
2025-12-26 19:18:10,557 - app.services.ai_parser - INFO - ğŸ“ Quality: 70.7/100
2025-12-26 19:18:10,558 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: INCLUSIVE OF LEGAL COSTS AND EXPENSES ONLY (I.E. LEGAL &/OR COURT
2025-12-26 19:18:10,558 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-26 19:18:10,558 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-26 19:18:10,559 - app.services.ai_parser - INFO - 
2025-12-26 19:18:10,559 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-26 19:18:10,559 - app.services.ai_parser - INFO -    âœ“ Benefits: 12
2025-12-26 19:18:10,560 - app.services.ai_parser - INFO -    âœ“ Exclusions: 19
2025-12-26 19:18:10,560 - app.services.ai_parser - INFO -    âœ“ Warranties: 1
2025-12-26 19:18:10,560 - app.services.ai_parser - INFO -    âœ“ Extensions: 0
2025-12-26 19:18:10,560 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-26 19:18:10,561 - app.services.ai_parser - INFO - ======================================================================
2025-12-26 19:18:10,563 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: 6446a5c12dac43afb44a14cc7280ad60.pdf â†’ 694edf72c4806e65d8a8abf5
2025-12-26 19:18:10,563 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 694edf72c4806e65d8a8abf5
2025-12-26 19:18:10,578 - app.services.user_documents_service - INFO - âœ… Saved user document: CGL 2024 offer - Tawuniya.pdf â†’ 694edf72c4806e65d8a8abf6 (2319198 bytes)
2025-12-26 19:18:10,579 - app.api.routes - INFO - âœ… Saved user document: CGL 2024 offer - Tawuniya.pdf â†’ 694edf72c4806e65d8a8abf6
2025-12-26 19:18:10,579 - app.api.routes - INFO - âœ… Successfully processed: CGL 2024 offer - Tawuniya.pdf
2025-12-26 19:18:10,579 - app.api.routes - INFO - 
âœ… Successfully extracted 3 quotes
2025-12-26 19:18:10,580 - app.api.routes - INFO - 
======================================================================
2025-12-26 19:18:10,580 - app.api.routes - INFO - ğŸ”€ Generating comparison for 3 quotes
2025-12-26 19:18:10,580 - app.api.routes - INFO - ======================================================================
2025-12-26 19:18:10,580 - app.services.ai_ranker - INFO - ğŸ” Starting comprehensive comparison of 3 quotes
2025-12-26 19:18:10,580 - app.services.ai_ranker - INFO - âš–ï¸ Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-26 19:18:10,581 - app.services.ai_ranker - INFO - ğŸ† Hakim Score integration enabled
2025-12-26 19:18:10,581 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-26 19:18:10,581 - app.services.ai_ranker - INFO - ğŸ” IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-26 19:18:10,581 - app.services.ai_ranker - INFO - ================================================================================
2025-12-26 19:18:10,582 - app.services.ai_ranker - INFO - 
============================================================
2025-12-26 19:18:10,582 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Gulf Insurance Group (GIG)
2025-12-26 19:18:10,582 - app.services.ai_ranker - INFO - ============================================================
2025-12-26 19:18:10,582 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-26 19:18:10,582 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-26 19:18:10,583 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-26 19:18:10,583 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-26 19:18:10,583 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-26 19:18:10,583 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-26 19:18:10,584 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-26 19:18:10,585 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-26 19:18:10,586 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-26 19:18:10,587 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GIG",
  "sum_insured_breakdown": {
    "material_damage": "SR 914,652,306",
    "business_interruption": "SR 650,000,000",
    "total_sum_insured_numeric": 1564652306.0,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40 million",
        "deductible": "5% of claim amount, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100 million to SR 500 million",
        "deductible": "5% of claim amount, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500 million",
        "deductible": "5% of claim amount, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40 million",
        "deductible": "7 days",
        "applies_to": "business_interrupti
2025-12-26 19:18:10,589 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-26 19:18:10,589 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-26 19:18:10,590 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-26 19:18:10,590 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-26 19:18:10,591 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-26 19:18:10,591 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-26 19:18:10,591 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-26 19:18:10,591 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-26 19:18:10,592 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,592 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-26 19:18:10,592 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-26 19:18:10,593 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,594 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-26 19:18:10,594 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-26 19:18:10,595 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-26 19:18:10,595 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-26 19:18:10,595 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-26 19:18:10,595 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-26 19:18:10,596 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Gulf Insurance Group (GIG)
2025-12-26 19:18:10,596 - app.services.ai_ranker - INFO - 
ğŸ“Š Gulf Insurance Group (GIG):
2025-12-26 19:18:10,596 - app.services.ai_ranker - INFO -    Warranties: 18
2025-12-26 19:18:10,596 - app.services.ai_ranker - INFO -    Extensions: 5
2025-12-26 19:18:10,597 - app.services.ai_ranker - INFO -    Exclusions: 13
2025-12-26 19:18:10,597 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-26 19:18:10,597 - app.services.ai_ranker - INFO - 
============================================================
2025-12-26 19:18:10,597 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Liva Insurance
2025-12-26 19:18:10,598 - app.services.ai_ranker - INFO - ============================================================
2025-12-26 19:18:10,598 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-26 19:18:10,598 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-26 19:18:10,598 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-26 19:18:10,599 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-26 19:18:10,599 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension', 'Professional Valuation Report required for properties with total Sum Insured exceeding SR40m'], 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers'], 'documentation_required': ['Detailed lists of items covered under gross profit for BI', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']}
2025-12-26 19:18:10,599 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-26 19:18:10,600 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-26 19:18:10,600 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-26 19:18:10,600 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-26 19:18:10,600 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "LIVA",
  "sum_insured_breakdown": {
    "material_damage": "1,564,652,306.28",
    "business_interruption": "650,000,000.00",
    "total_sum_insured_numeric": 1564652306.28,
    "total_sum_insured": "SR 1,564,652,306"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible": "5%, min SR 500,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500M",
        "deductible": "5%, min SR 1,000,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [
      {
        "range": "up to SR 40M",
        "deductible": "7 days",
        "applies_to": "business_interruption"
      },
      {
        "range": "SR 100M to SR 500M",
        "deductible
2025-12-26 19:18:10,604 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-26 19:18:10,604 - app.services.ai_ranker - INFO -    âœ… Found 2 items in key 'conditions_precedent': ['No cover given if without business contingency plan', 'No cover given if unable to provide names of Public Utilities/Service Providers']
2025-12-26 19:18:10,605 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'documentation_required': ['Detailed lists of items covered under gross profit for BI', 'Breakdown of the Sum Insured into major components', 'Full description of all stock insured for warehouses']
2025-12-26 19:18:10,605 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-26 19:18:10,606 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-26 19:18:10,606 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-26 19:18:10,606 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-26 19:18:10,606 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-26 19:18:10,607 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,607 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-26 19:18:10,607 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-26 19:18:10,607 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,608 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-26 19:18:10,608 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-26 19:18:10,608 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-26 19:18:10,608 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-26 19:18:10,608 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 9
2025-12-26 19:18:10,609 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Business contingency plan required for BI with sum insured SR20m and above', 'Names of Suppliers and Customers required for BI with Suppliers and Customers Extension', 'Names of Public Utilities/Service Providers required for BI with Public Utilities Extension']
2025-12-26 19:18:10,609 - app.services.ai_ranker - INFO -    âœ… Extracted 9 subjectivities for Liva Insurance
2025-12-26 19:18:10,609 - app.services.ai_ranker - INFO - 
ğŸ“Š Liva Insurance:
2025-12-26 19:18:10,609 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-26 19:18:10,610 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-26 19:18:10,610 - app.services.ai_ranker - INFO -    Exclusions: 26
2025-12-26 19:18:10,610 - app.services.ai_ranker - INFO -    Subjectivities: 9
2025-12-26 19:18:10,610 - app.services.ai_ranker - INFO - 
============================================================
2025-12-26 19:18:10,610 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Tawuniya
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO - ============================================================
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-26 19:18:10,611 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-26 19:18:10,612 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-26 19:18:10,612 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-26 19:18:10,612 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-26 19:18:10,612 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-26 19:18:10,612 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "TAWUNIYA",
  "sum_insured_breakdown": {},
  "deductibles_complete": {
    "fallback_summary": "MD: INCLUSIVE OF LEGAL COSTS AND EXPENSES ONLY (I.E. LEGAL &/OR COURT",
    "applicable_md_tier": {},
    "applicable_bi_tier": {},
    "applicable_nc_tier": {}
  },
  "sublimits_comprehensive": {},
  "exclusions_complete": {
    "all_exclusions_list": [
      "PRODUCT LIABILITY WARRANTY, GUARANTY AND RECALL",
      "PROFESSIONAL LIABILITY AND INDEMNITY",
      "DIRECTORS & OFFICERS LIABILITY",
      "AUTO LIABILITIES",
      "MARINE LIABILITIES",
      "AVIATION LIABILITIES",
      "WORKERS COMPENSATION / EMPLOYERS LIABILITY",
      "OCCUPATIONAL AND INDUSTRIAL DISEASE",
      "MEDICAL MALPRACTICE",
      "FINES, PENALTIES, PUNITIVE AND EXEMPLARY DAMAGES",
      "PURE FINANCIAL LOSS / LOSS OF USE",
      "POLITICAL RISKS",
      "ASBESTOSIS AND SILICOSIS",
      "PRINCIPAL\u2019S EXISTING AND SURROUNDING PROPERTIES",
      "PROPERTY BEING WORKED UPON",
      "RADIOACT
2025-12-26 19:18:10,614 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-26 19:18:10,614 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-26 19:18:10,614 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-26 19:18:10,614 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-26 19:18:10,615 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-26 19:18:10,615 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-26 19:18:10,615 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-26 19:18:10,615 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-26 19:18:10,615 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,616 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-26 19:18:10,616 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-26 19:18:10,616 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-26 19:18:10,616 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-26 19:18:10,616 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-26 19:18:10,617 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-26 19:18:10,617 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-26 19:18:10,617 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-26 19:18:10,619 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-26 19:18:10,620 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Tawuniya
2025-12-26 19:18:10,620 - app.services.ai_ranker - INFO - 
ğŸ“Š Tawuniya:
2025-12-26 19:18:10,620 - app.services.ai_ranker - INFO -    Warranties: 1
2025-12-26 19:18:10,621 - app.services.ai_ranker - INFO -    Extensions: 0
2025-12-26 19:18:10,621 - app.services.ai_ranker - INFO -    Exclusions: 19
2025-12-26 19:18:10,622 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-26 19:18:10,623 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Gulf Insurance Group (GIG)
2025-12-26 19:18:10,770 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 10
2025-12-26 19:18:10,770 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 2
2025-12-26 19:18:10,771 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 8
2025-12-26 19:18:10,771 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-26 19:18:10,771 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-26 19:18:10,771 - app.services.ai_ranker - INFO -       â€¢ Deterioration of stocks following an insured peril
2025-12-26 19:18:10,772 - app.services.ai_ranker - INFO -       â€¢ Boiler explosion coverage
2025-12-26 19:18:10,772 - app.services.ai_ranker - INFO -       â€¢ Underground Services Clause
2025-12-26 19:18:10,772 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Liva Insurance
2025-12-26 19:18:10,968 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 2
2025-12-26 19:18:10,969 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-26 19:18:10,969 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-26 19:18:10,969 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 9
2025-12-26 19:18:10,970 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-26 19:18:10,970 - app.services.ai_ranker - INFO -       â€¢ Hot works Warranty
2025-12-26 19:18:10,970 - app.services.ai_ranker - INFO -       â€¢ Warranted properties in the open and/or open sided sheds are covered against fir...
2025-12-26 19:18:10,970 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Tawuniya
2025-12-26 19:18:11,095 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 1
2025-12-26 19:18:11,096 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-26 19:18:11,096 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 7
2025-12-26 19:18:11,096 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-26 19:18:11,096 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-26 19:18:11,097 - app.services.ai_ranker - INFO -       â€¢ WARRANTED NO KNOWN OR REPORTED LOSSES AND/OR ANY CIRCUMSTANCES THAT
2025-12-26 19:18:11,097 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-26 19:18:11,097 - app.services.ai_ranker - INFO - âœ… UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-26 19:18:11,098 - app.services.ai_ranker - INFO - ================================================================================

2025-12-26 19:18:11,098 - app.services.ai_ranker - INFO - ğŸ“Š Gulf Insurance Group (GIG): Hakim Score=88.0 (Strong), Weighted Score=87.90
2025-12-26 19:18:11,098 - app.services.ai_ranker - INFO - ğŸ“Š Liva Insurance: Hakim Score=84.0 (Solid), Weighted Score=79.17
2025-12-26 19:18:11,099 - app.services.ai_ranker - WARNING - âš ï¸ Tawuniya: Invalid premium (0), applying penalty score
2025-12-26 19:18:11,099 - app.services.ai_ranker - WARNING - âš ï¸ Tawuniya: Invalid rate (0.0), applying penalty score
2025-12-26 19:18:11,099 - app.services.ai_ranker - INFO - ğŸ“Š Tawuniya: Hakim Score=96.0 (Premium), Weighted Score=50.09
2025-12-26 19:18:11,099 - app.services.ai_ranker - INFO - ğŸ¤– Performing weighted ranking with Hakim Score...
2025-12-26 19:18:11,100 - app.services.ai_ranker - INFO - ğŸ¤– Starting AI ranking analysis (background task)...
2025-12-26 19:18:11,100 - app.services.ai_ranker - INFO - âœ… Weighted ranking with Hakim Score completed
2025-12-26 19:18:22,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:18:22,676 - app.services.ai_ranker - INFO - âœ… AI ranking analysis completed
2025-12-26 19:18:22,676 - app.services.ai_ranker - INFO - ğŸ”¨ Building comprehensive comparison structure...
2025-12-26 19:18:26,179 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-26 19:18:26,182 - app.services.ai_ranker - INFO - âœ… Generated reasoning for Gulf Insurance Group (GIG): Gulf Insurance Group (GIG) stands out as the best insurance provider with a top score of 87.9/100 an...
2025-12-26 19:18:26,184 - app.services.ai_ranker - INFO - âœ… Comprehensive comparison complete
2025-12-26 19:18:26,187 - app.api.routes - INFO - ğŸ¢ Main user - using user_id as company_id for sub-user access: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,188 - app.services.mongodb_service_enhanced - INFO - ğŸ’¾ Saving COMPLETE comparison data to MongoDB
2025-12-26 19:18:26,188 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:18:26,189 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 3
2025-12-26 19:18:26,189 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-26 19:18:26,190 - app.services.mongodb_service_enhanced - INFO - ğŸ“‹ Extracted quotes count: 3
2025-12-26 19:18:26,191 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Gulf Insurance Group (GIG)
2025-12-26 19:18:26,191 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-26 19:18:26,192 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-26 19:18:26,192 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-26 19:18:26,193 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-26 19:18:26,193 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-26 19:18:26,194 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-26 19:18:26,195 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Liva Insurance
2025-12-26 19:18:26,195 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-26 19:18:26,196 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-26 19:18:26,196 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-26 19:18:26,196 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-26 19:18:26,197 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-26 19:18:26,197 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-26 19:18:26,203 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Data sizes:
2025-12-26 19:18:26,204 - app.services.mongodb_service_enhanced - INFO -    Summary: 5,049 bytes
2025-12-26 19:18:26,205 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 31,214 bytes
2025-12-26 19:18:26,206 - app.services.mongodb_service_enhanced - INFO -    Data table: 13,890 bytes
2025-12-26 19:18:26,207 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,754 bytes
2025-12-26 19:18:26,207 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 38,358 bytes
2025-12-26 19:18:26,207 - app.services.mongodb_service_enhanced - INFO -    Total document: 188,764 bytes
2025-12-26 19:18:26,208 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-26 19:18:26,208 - app.services.mongodb_service_enhanced - INFO -       premium: 3 items
2025-12-26 19:18:26,208 - app.services.mongodb_service_enhanced - INFO -       rate: 3 items
2025-12-26 19:18:26,209 - app.services.mongodb_service_enhanced - INFO -       score: 3 items
2025-12-26 19:18:26,209 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 3 items
2025-12-26 19:18:26,209 - app.services.mongodb_service_enhanced - INFO -       deductible: 3 items
2025-12-26 19:18:26,209 - app.services.mongodb_service_enhanced - INFO -       coverage: 3 items
2025-12-26 19:18:26,210 - app.services.mongodb_service_enhanced - INFO -       benefits: 3 items
2025-12-26 19:18:26,210 - app.services.mongodb_service_enhanced - INFO -       exclusions: 3 items
2025-12-26 19:18:26,210 - app.services.mongodb_service_enhanced - INFO -       warranties: 3 items
2025-12-26 19:18:26,210 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 3 items
2025-12-26 19:18:26,211 - app.services.mongodb_service_enhanced - INFO -       conditions: 3 items
2025-12-26 19:18:26,211 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 3 items
2025-12-26 19:18:26,211 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 3 items
2025-12-26 19:18:26,212 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 3 items
2025-12-26 19:18:26,212 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-26 19:18:26,212 - app.services.mongodb_service_enhanced - INFO -       - Count: 3
2025-12-26 19:18:26,213 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-26 19:18:26,214 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-26 19:18:26,215 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-26 19:18:26,224 - app.services.mongodb_service_enhanced - INFO - âœ… Saved new comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:18:26,224 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 694edf825a37704a1c0a83f4
2025-12-26 19:18:26,229 - app.services.mongodb_service_enhanced - INFO - âœ… Verification - Saved document has:
2025-12-26 19:18:26,229 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-26 19:18:26,230 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-26 19:18:26,230 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-26 19:18:26,230 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-26 19:18:26,230 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-26 19:18:26,231 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-26 19:18:26,231 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 3
2025-12-26 19:18:26,231 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-26 19:18:26,231 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 3
2025-12-26 19:18:26,232 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-26 19:18:26,232 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 3
2025-12-26 19:18:26,232 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-26 19:18:26,233 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-26 19:18:26,233 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-26 19:18:26,233 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-26 19:18:26,233 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-26 19:18:26,233 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-26 19:18:26,234 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-26 19:18:26,234 - app.api.routes - INFO - âœ… Saved comparison result to MongoDB: 694edf825a37704a1c0a83f4
2025-12-26 19:18:26,234 - app.api.routes - INFO -    Database: hakemAI
2025-12-26 19:18:26,235 - app.api.routes - INFO -    Collection: comparisons
2025-12-26 19:18:26,235 - app.api.routes - INFO -    Comparison ID: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:18:26,235 - app.api.routes - INFO -    User ID: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,235 - app.api.routes - INFO -    Company ID: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,237 - app.services.user_subscription_service - INFO - âœ… Unlimited plan - no usage tracking needed for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,238 - app.api.routes - INFO - âœ… Recorded comparison usage for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,238 - app.api.routes - INFO - 
======================================================================
2025-12-26 19:18:26,238 - app.api.routes - INFO - âœ… COMPARISON COMPLETE
2025-12-26 19:18:26,239 - app.api.routes - INFO - ======================================================================
2025-12-26 19:18:26,239 - app.api.routes - INFO - ğŸ“Š Comparison ID: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:18:26,239 - app.api.routes - INFO - ğŸ‘¤ User ID: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,239 - app.api.routes - INFO - ğŸ“„ Files Processed: 3/3
2025-12-26 19:18:26,239 - app.api.routes - INFO - ğŸ’¾ Saved to MongoDB: 3 PDFs + 1 comparison
2025-12-26 19:18:26,240 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,240 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-26 19:18:26,241 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-26 19:18:26,245 - app.services.user_subscription_service - INFO - âœ… Found user: muneebanwar (muneebanwar5002@gmail.com)
2025-12-26 19:18:26,266 - app.api.routes - INFO - ğŸ“Š Remaining comparisons: -1
2025-12-26 19:18:26,277 - app.api.routes - INFO - ======================================================================

2025-12-26 19:18:26,278 - app.services.progress_tracker - INFO - âœ… Job completed: job_6a58acb90df9 â†’ comparison_id: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:18:26,280 - main - INFO - ğŸ“¤ POST /api/compare-quotes - 200 - 100.25s
2025-12-26 19:18:26,539 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:18:26,540 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,543 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:18:26,547 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:18:26,548 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,552 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:18:26,557 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:18:26,559 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,565 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:18:26,570 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:18:26,572 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,578 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:18:26,583 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:18:26,585 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,595 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:18:26,600 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:18:26,601 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,609 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.03s
2025-12-26 19:18:26,617 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:18:26,619 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:18:26,627 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:18:26,632 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:18:26,633 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:18:26,636 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:18:42,509 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-26 19:18:42,511 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-26 19:18:42,512 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-26 19:18:42,515 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-26 19:18:42,526 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-26 19:18:42,541 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-26 19:18:42,542 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.02s
2025-12-26 19:18:42,545 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-26 19:18:42,555 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-26 19:18:42,558 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-26 19:18:57,295 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:18:57,296 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:18:57,297 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:18:57,299 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:18:57,299 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:18:57,301 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:19:09,911 - main - INFO - ğŸ“¥ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:19:09,913 - main - INFO - ğŸ“¤ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.00s
2025-12-26 19:19:09,916 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:19:09,918 - app.api.routes - INFO - ğŸ“„ Generating PDF reports for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:09,921 - app.api.routes - INFO - ğŸ“„ Generating 1-page Strategic Memo PDF...
2025-12-26 19:19:09,921 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:09,921 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:19:09,922 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:19:09,922 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:19:09,923 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:19:09,927 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:19:10,101 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:10,101 - app.api.routes - INFO - âœ… Strategic memo PDF generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_191909.pdf (129855 bytes)
2025-12-26 19:19:10,102 - app.api.routes - INFO - ğŸ“„ Generating Detailed Comparison PDF...
2025-12-26 19:19:10,102 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:10,102 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:19:10,103 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:19:10,103 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:19:10,103 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:19:10,108 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:19:10,108 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:19:10,120 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:19:10,121 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:19:10,123 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:19:10,123 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:19:10,124 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:19:10,125 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:19:10,128 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:19:10,272 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:10,273 - app.api.routes - INFO - âœ… Detailed comparison PDF generated: HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_191909.pdf (146260 bytes)
2025-12-26 19:19:10,281 - app.api.routes - INFO - âœ… ZIP file created successfully: HAKEM_AI_Reports_cmp_1766776606_50d2e07a4ea3_20251226_191909.zip (219883 bytes) containing 2 PDFs
2025-12-26 19:19:10,283 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.37s
2025-12-26 19:19:27,294 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:19:27,295 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:19:27,296 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:19:27,298 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:19:27,299 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:19:27,300 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:19:40,608 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:19:40,610 - app.api.routes - INFO - ğŸ“„ Generating PDF reports for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:40,613 - app.api.routes - INFO - ğŸ“„ Generating 1-page Strategic Memo PDF...
2025-12-26 19:19:40,613 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:40,613 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:19:40,614 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:19:40,614 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:19:40,615 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:19:40,617 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:19:40,719 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:40,719 - app.api.routes - INFO - âœ… Strategic memo PDF generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_191940.pdf (129855 bytes)
2025-12-26 19:19:40,720 - app.api.routes - INFO - ğŸ“„ Generating Detailed Comparison PDF...
2025-12-26 19:19:40,720 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:40,720 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:19:40,720 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:19:40,721 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:19:40,721 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:19:40,727 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:19:40,727 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:19:40,734 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:19:40,735 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:19:40,736 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:19:40,737 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:19:40,737 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:19:40,738 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:19:40,740 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:19:40,887 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:19:40,887 - app.api.routes - INFO - âœ… Detailed comparison PDF generated: HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_191940.pdf (146260 bytes)
2025-12-26 19:19:40,896 - app.api.routes - INFO - âœ… ZIP file created successfully: HAKEM_AI_Reports_cmp_1766776606_50d2e07a4ea3_20251226_191940.zip (219884 bytes) containing 2 PDFs
2025-12-26 19:19:40,897 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.29s
2025-12-26 19:19:57,303 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:19:57,303 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:19:57,304 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:19:57,306 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:19:57,307 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:19:57,308 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:20:27,602 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:20:27,603 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:20:27,604 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:20:27,606 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:20:27,606 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:20:27,608 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:20:57,302 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:20:57,303 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:20:57,306 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:20:57,312 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:20:57,313 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:20:57,315 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:21:27,631 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:21:27,645 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:21:27,646 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:21:27,649 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:21:27,649 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:21:27,653 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:21:57,305 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:21:57,306 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:21:57,308 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:21:57,311 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:21:57,311 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:21:57,314 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:22:30,614 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:22:30,617 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:22:30,623 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:22:30,628 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:22:30,628 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:22:30,633 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:22:47,944 - main - INFO - 
2025-12-26 19:22:47,945 - main - INFO - ================================================================================
2025-12-26 19:22:47,945 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:22:47,949 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:22:47,950 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:22:47,952 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:22:47,953 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:22:47,955 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:22:47,957 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:22:47,958 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:22:47,960 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:22:47,962 - main - INFO -   âœ… Cleaned up 3 temporary files
2025-12-26 19:22:47,962 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:22:47,963 - main - INFO - ================================================================================
2025-12-26 19:22:47,963 - main - INFO - 
2025-12-26 19:22:54,128 - main - INFO - 
2025-12-26 19:22:54,129 - main - INFO - ================================================================================
2025-12-26 19:22:54,129 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:22:54,129 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:22:54,129 - main - INFO - ================================================================================
2025-12-26 19:22:54,129 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:22:54,130 - main - INFO -   Upload Directory: uploads
2025-12-26 19:22:54,130 - main - INFO -   Max File Size: 20MB
2025-12-26 19:22:54,130 - main - INFO - ================================================================================
2025-12-26 19:22:54,130 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:22:54,131 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:22:54,131 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:22:54,158 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:22:54,164 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:22:54,164 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:22:54,165 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:22:54,165 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:22:54,165 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:22:54,177 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:22:54,178 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:22:54,179 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:22:54,181 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:22:54,182 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:22:54,182 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:22:54,182 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:22:54,182 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:22:54,212 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:22:54,212 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:22:54,212 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:22:54,245 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:22:54,248 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:22:54,248 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:22:54,249 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:22:54,249 - main - INFO - 
2025-12-26 19:22:54,249 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:22:54,249 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:22:54,249 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:22:54,249 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:22:54,250 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:22:54,250 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:22:54,251 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:22:54,253 - main - INFO - 
2025-12-26 19:22:54,254 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:22:54,254 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:22:54,255 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:22:54,255 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:22:54,256 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:22:54,257 - main - INFO - 
2025-12-26 19:22:54,257 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:22:54,257 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:22:54,257 - main - INFO -        - No manual section generation
2025-12-26 19:22:54,258 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:22:54,258 - main - INFO - 
2025-12-26 19:22:54,258 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:22:54,258 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:22:54,259 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:22:54,259 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:22:54,259 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:22:54,259 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:22:54,259 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:22:54,259 - main - INFO - 
2025-12-26 19:22:54,260 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:22:54,260 - main - INFO -      Main:
2025-12-26 19:22:54,260 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:22:54,260 - main - INFO - 
2025-12-26 19:22:54,260 - main - INFO -      Retrieval:
2025-12-26 19:22:54,260 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:22:54,261 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:22:54,261 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:22:54,261 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:22:54,261 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:22:54,261 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:22:54,261 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:22:54,262 - main - INFO - 
2025-12-26 19:22:54,262 - main - INFO -      Management:
2025-12-26 19:22:54,262 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:22:54,262 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:22:54,262 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:22:54,262 - main - INFO - 
2025-12-26 19:22:54,263 - main - INFO -      Documents (MongoDB):
2025-12-26 19:22:54,263 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:22:54,263 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:22:54,263 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:22:54,263 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:22:54,263 - main - INFO - 
2025-12-26 19:22:54,264 - main - INFO -      Diagnostics & Health:
2025-12-26 19:22:54,264 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:22:54,264 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:22:54,264 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:22:54,264 - main - INFO - 
2025-12-26 19:22:54,265 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:22:54,265 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:22:54,265 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:22:54,265 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:22:54,265 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:22:54,266 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:22:54,266 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:22:54,266 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:22:54,266 - main - INFO - 
2025-12-26 19:22:54,266 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:22:54,267 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:22:54,268 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:22:54,269 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:22:54,270 - main - INFO -      4. No re-upload needed!
2025-12-26 19:22:54,271 - main - INFO - 
2025-12-26 19:22:54,271 - main - INFO - ================================================================================
2025-12-26 19:22:54,271 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:22:54,272 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:22:54,273 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:22:54,274 - main - INFO - ================================================================================
2025-12-26 19:22:54,274 - main - INFO - 
2025-12-26 19:22:54,275 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:23:30,612 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:23:30,613 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:23:30,614 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:23:30,617 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:23:30,619 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:23:30,624 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:24:15,509 - main - INFO - 
2025-12-26 19:24:15,509 - main - INFO - ================================================================================
2025-12-26 19:24:15,509 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:24:15,510 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:24:15,511 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:24:15,512 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:24:15,512 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:24:15,513 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:24:15,514 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:24:15,515 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:24:15,515 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:24:15,516 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:24:15,516 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:24:15,517 - main - INFO - ================================================================================
2025-12-26 19:24:15,517 - main - INFO - 
2025-12-26 19:24:20,105 - main - INFO - 
2025-12-26 19:24:20,105 - main - INFO - ================================================================================
2025-12-26 19:24:20,106 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:24:20,106 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:24:20,106 - main - INFO - ================================================================================
2025-12-26 19:24:20,107 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:24:20,107 - main - INFO -   Upload Directory: uploads
2025-12-26 19:24:20,107 - main - INFO -   Max File Size: 20MB
2025-12-26 19:24:20,107 - main - INFO - ================================================================================
2025-12-26 19:24:20,108 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:24:20,108 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:24:20,108 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:24:20,133 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:24:20,145 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:24:20,146 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:24:20,146 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:24:20,146 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:24:20,146 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:24:20,159 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:24:20,161 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:24:20,162 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:24:20,164 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:24:20,164 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:24:20,164 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:24:20,164 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:24:20,165 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:24:20,176 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:24:20,176 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:24:20,177 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:24:20,204 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:24:20,208 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:24:20,208 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:24:20,208 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:24:20,208 - main - INFO - 
2025-12-26 19:24:20,209 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:24:20,209 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:24:20,209 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:24:20,209 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:24:20,209 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:24:20,209 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:24:20,210 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:24:20,210 - main - INFO - 
2025-12-26 19:24:20,210 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:24:20,210 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:24:20,210 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:24:20,211 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:24:20,211 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:24:20,211 - main - INFO - 
2025-12-26 19:24:20,211 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:24:20,211 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:24:20,212 - main - INFO -        - No manual section generation
2025-12-26 19:24:20,212 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:24:20,212 - main - INFO - 
2025-12-26 19:24:20,212 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:24:20,212 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:24:20,212 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:24:20,213 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:24:20,213 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:24:20,213 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:24:20,213 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:24:20,213 - main - INFO - 
2025-12-26 19:24:20,214 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:24:20,214 - main - INFO -      Main:
2025-12-26 19:24:20,214 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:24:20,214 - main - INFO - 
2025-12-26 19:24:20,214 - main - INFO -      Retrieval:
2025-12-26 19:24:20,214 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:24:20,215 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:24:20,215 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:24:20,215 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:24:20,215 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:24:20,215 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:24:20,216 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:24:20,216 - main - INFO - 
2025-12-26 19:24:20,216 - main - INFO -      Management:
2025-12-26 19:24:20,216 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:24:20,216 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:24:20,217 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:24:20,217 - main - INFO - 
2025-12-26 19:24:20,218 - main - INFO -      Documents (MongoDB):
2025-12-26 19:24:20,219 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:24:20,219 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:24:20,220 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:24:20,220 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:24:20,220 - main - INFO - 
2025-12-26 19:24:20,221 - main - INFO -      Diagnostics & Health:
2025-12-26 19:24:20,221 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:24:20,222 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:24:20,222 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:24:20,222 - main - INFO - 
2025-12-26 19:24:20,223 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:24:20,223 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:24:20,223 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:24:20,223 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:24:20,223 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:24:20,224 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:24:20,224 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:24:20,224 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:24:20,224 - main - INFO - 
2025-12-26 19:24:20,224 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:24:20,224 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:24:20,225 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:24:20,225 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:24:20,225 - main - INFO -      4. No re-upload needed!
2025-12-26 19:24:20,225 - main - INFO - 
2025-12-26 19:24:20,225 - main - INFO - ================================================================================
2025-12-26 19:24:20,225 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:24:20,226 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:24:20,226 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:24:20,226 - main - INFO - ================================================================================
2025-12-26 19:24:20,226 - main - INFO - 
2025-12-26 19:24:20,226 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:24:30,614 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:24:30,615 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:24:30,617 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:24:30,625 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:24:30,625 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:24:30,628 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:24:56,774 - main - INFO - 
2025-12-26 19:24:56,774 - main - INFO - ================================================================================
2025-12-26 19:24:56,774 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:24:56,776 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:24:56,776 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:24:56,777 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:24:56,778 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:24:56,779 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:24:56,779 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:24:56,780 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:24:56,780 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:24:56,781 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:24:56,781 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:24:56,782 - main - INFO - ================================================================================
2025-12-26 19:24:56,782 - main - INFO - 
2025-12-26 19:25:01,362 - main - INFO - 
2025-12-26 19:25:01,362 - main - INFO - ================================================================================
2025-12-26 19:25:01,362 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:01,362 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:01,362 - main - INFO - ================================================================================
2025-12-26 19:25:01,362 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:01,363 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:01,363 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:01,363 - main - INFO - ================================================================================
2025-12-26 19:25:01,363 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:01,364 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:01,364 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:01,389 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:01,395 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:01,395 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:01,395 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:01,395 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:01,396 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:01,431 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:01,433 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:01,438 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:25:01,442 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:01,442 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:01,443 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:01,443 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:01,443 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:01,462 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:01,462 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:01,463 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:01,493 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:01,496 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:01,497 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:01,497 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:01,497 - main - INFO - 
2025-12-26 19:25:01,497 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:01,497 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:01,498 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:01,498 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:01,498 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:01,498 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:01,498 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:01,499 - main - INFO - 
2025-12-26 19:25:01,499 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:01,499 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:01,499 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:01,499 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:01,499 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:01,500 - main - INFO - 
2025-12-26 19:25:01,500 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:01,501 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:01,502 - main - INFO -        - No manual section generation
2025-12-26 19:25:01,503 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:01,504 - main - INFO - 
2025-12-26 19:25:01,504 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:01,505 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:01,505 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:01,506 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:01,507 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:01,507 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:01,507 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:01,507 - main - INFO - 
2025-12-26 19:25:01,507 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:01,508 - main - INFO -      Main:
2025-12-26 19:25:01,508 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:01,508 - main - INFO - 
2025-12-26 19:25:01,508 - main - INFO -      Retrieval:
2025-12-26 19:25:01,509 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:01,509 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:01,509 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:01,509 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:01,509 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:01,510 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:01,510 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:01,510 - main - INFO - 
2025-12-26 19:25:01,510 - main - INFO -      Management:
2025-12-26 19:25:01,510 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:01,511 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:01,511 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:01,511 - main - INFO - 
2025-12-26 19:25:01,511 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:01,511 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:01,512 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:01,512 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:01,512 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:01,512 - main - INFO - 
2025-12-26 19:25:01,512 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:01,513 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:01,513 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:01,513 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:01,513 - main - INFO - 
2025-12-26 19:25:01,513 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:01,513 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:01,514 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:01,514 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:01,514 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:01,514 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:01,515 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:01,515 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:01,515 - main - INFO - 
2025-12-26 19:25:01,515 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:01,516 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:01,516 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:01,516 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:01,516 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:01,517 - main - INFO - 
2025-12-26 19:25:01,517 - main - INFO - ================================================================================
2025-12-26 19:25:01,518 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:01,520 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:01,520 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:01,521 - main - INFO - ================================================================================
2025-12-26 19:25:01,521 - main - INFO - 
2025-12-26 19:25:01,523 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:25:17,440 - main - INFO - 
2025-12-26 19:25:17,441 - main - INFO - ================================================================================
2025-12-26 19:25:17,441 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:25:17,442 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:17,442 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:25:17,443 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:17,443 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:25:17,444 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:25:17,444 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:25:17,445 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:25:17,445 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:25:17,445 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:25:17,446 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:25:17,446 - main - INFO - ================================================================================
2025-12-26 19:25:17,446 - main - INFO - 
2025-12-26 19:25:22,241 - main - INFO - 
2025-12-26 19:25:22,241 - main - INFO - ================================================================================
2025-12-26 19:25:22,242 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:22,242 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:22,242 - main - INFO - ================================================================================
2025-12-26 19:25:22,242 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:22,243 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:22,243 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:22,243 - main - INFO - ================================================================================
2025-12-26 19:25:22,244 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:22,244 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:22,245 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:22,274 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:22,280 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:22,281 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:22,281 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:22,281 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:22,281 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:22,292 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:22,293 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:22,295 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:25:22,296 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:22,296 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:22,297 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:22,297 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:22,297 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:22,310 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:22,311 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:22,311 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:22,319 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:22,326 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:22,326 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:22,326 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:22,326 - main - INFO - 
2025-12-26 19:25:22,327 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:22,327 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:22,327 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:22,327 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:22,327 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:22,328 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:22,328 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:22,328 - main - INFO - 
2025-12-26 19:25:22,328 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:22,328 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:22,328 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:22,328 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:22,329 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:22,329 - main - INFO - 
2025-12-26 19:25:22,329 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:22,329 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:22,329 - main - INFO -        - No manual section generation
2025-12-26 19:25:22,329 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:22,330 - main - INFO - 
2025-12-26 19:25:22,330 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:22,330 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:22,330 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:22,330 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:22,330 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:22,331 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:22,331 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:22,331 - main - INFO - 
2025-12-26 19:25:22,331 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:22,331 - main - INFO -      Main:
2025-12-26 19:25:22,332 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:22,332 - main - INFO - 
2025-12-26 19:25:22,332 - main - INFO -      Retrieval:
2025-12-26 19:25:22,332 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:22,333 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:22,333 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:22,333 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:22,333 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:22,335 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:22,335 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:22,336 - main - INFO - 
2025-12-26 19:25:22,336 - main - INFO -      Management:
2025-12-26 19:25:22,340 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:22,341 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:22,342 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:22,342 - main - INFO - 
2025-12-26 19:25:22,342 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:22,343 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:22,343 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:22,343 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:22,343 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:22,344 - main - INFO - 
2025-12-26 19:25:22,344 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:22,344 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:22,344 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:22,345 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:22,345 - main - INFO - 
2025-12-26 19:25:22,345 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:22,346 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:22,346 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:22,346 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:22,346 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:22,347 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:22,347 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:22,348 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:22,348 - main - INFO - 
2025-12-26 19:25:22,348 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:22,349 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:22,349 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:22,349 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:22,349 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:22,349 - main - INFO - 
2025-12-26 19:25:22,350 - main - INFO - ================================================================================
2025-12-26 19:25:22,350 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:22,350 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:22,351 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:22,351 - main - INFO - ================================================================================
2025-12-26 19:25:22,351 - main - INFO - 
2025-12-26 19:25:22,352 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:25:23,410 - main - INFO - 
2025-12-26 19:25:23,410 - main - INFO - ================================================================================
2025-12-26 19:25:23,411 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:25:23,412 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:23,412 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:25:23,414 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:23,414 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:25:23,417 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:25:23,419 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:25:23,420 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:25:23,421 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:25:23,422 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:25:23,424 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:25:23,425 - main - INFO - ================================================================================
2025-12-26 19:25:23,427 - main - INFO - 
2025-12-26 19:25:27,929 - main - INFO - 
2025-12-26 19:25:27,931 - main - INFO - ================================================================================
2025-12-26 19:25:27,932 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:27,932 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:27,933 - main - INFO - ================================================================================
2025-12-26 19:25:27,933 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:27,935 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:27,937 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:27,937 - main - INFO - ================================================================================
2025-12-26 19:25:27,938 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:27,938 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:27,938 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:27,981 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:27,987 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:27,987 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:27,987 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:27,988 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:27,988 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:27,997 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:27,997 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:27,998 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-26 19:25:28,003 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:28,004 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:28,004 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:28,004 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:28,005 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:28,016 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:28,017 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:28,019 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:28,031 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:28,039 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:28,040 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:28,041 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:25:28,055 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:25:28,205 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:25:28,207 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:25:28,208 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:28,209 - main - INFO - 
2025-12-26 19:25:28,211 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:28,212 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:28,213 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:28,214 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:28,214 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:28,215 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:28,215 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:28,216 - main - INFO - 
2025-12-26 19:25:28,216 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:28,221 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:28,222 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:28,223 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:28,224 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:28,224 - main - INFO - 
2025-12-26 19:25:28,225 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:28,225 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:28,225 - main - INFO -        - No manual section generation
2025-12-26 19:25:28,226 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:28,226 - main - INFO - 
2025-12-26 19:25:28,226 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:28,227 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:28,227 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:28,227 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:28,228 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:28,228 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:28,228 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:28,228 - main - INFO - 
2025-12-26 19:25:28,229 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:28,229 - main - INFO -      Main:
2025-12-26 19:25:28,229 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:28,230 - main - INFO - 
2025-12-26 19:25:28,230 - main - INFO -      Retrieval:
2025-12-26 19:25:28,230 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:28,230 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:28,231 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:28,231 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:28,231 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:28,231 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:28,232 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:28,232 - main - INFO - 
2025-12-26 19:25:28,232 - main - INFO -      Management:
2025-12-26 19:25:28,233 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:28,233 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:28,233 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:28,233 - main - INFO - 
2025-12-26 19:25:28,235 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:28,237 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:28,237 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:28,238 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:28,238 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:28,238 - main - INFO - 
2025-12-26 19:25:28,239 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:28,239 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:28,240 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:28,240 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:28,241 - main - INFO - 
2025-12-26 19:25:28,241 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:28,242 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:28,242 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:28,243 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:28,243 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:28,244 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:28,244 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:28,244 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:28,245 - main - INFO - 
2025-12-26 19:25:28,245 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:28,245 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:28,246 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:28,246 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:28,246 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:28,246 - main - INFO - 
2025-12-26 19:25:28,247 - main - INFO - ================================================================================
2025-12-26 19:25:28,247 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:28,247 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:28,248 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:28,248 - main - INFO - ================================================================================
2025-12-26 19:25:28,248 - main - INFO - 
2025-12-26 19:25:28,248 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:25:28,955 - main - INFO - 
2025-12-26 19:25:28,956 - main - INFO - ================================================================================
2025-12-26 19:25:28,956 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:25:28,957 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:28,957 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:25:28,958 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:28,958 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:25:28,959 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:25:28,959 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:25:28,960 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:25:28,960 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:25:28,961 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:25:28,961 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:25:28,962 - main - INFO - ================================================================================
2025-12-26 19:25:28,962 - main - INFO - 
2025-12-26 19:25:33,228 - main - INFO - 
2025-12-26 19:25:33,229 - main - INFO - ================================================================================
2025-12-26 19:25:33,229 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:33,229 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:33,230 - main - INFO - ================================================================================
2025-12-26 19:25:33,230 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:33,230 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:33,230 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:33,231 - main - INFO - ================================================================================
2025-12-26 19:25:33,231 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:33,231 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:33,232 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:33,279 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:33,294 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:33,295 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:33,295 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:33,295 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:33,295 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:33,314 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:33,315 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:33,318 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:25:33,326 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:33,326 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:33,327 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:33,328 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:33,328 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:33,358 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:33,359 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:33,359 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:33,367 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:33,376 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:33,376 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:33,376 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:25:33,390 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:25:33,398 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:25:33,398 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:25:33,399 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:33,399 - main - INFO - 
2025-12-26 19:25:33,400 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:33,400 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:33,401 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:33,404 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:33,405 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:33,405 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:33,405 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:33,405 - main - INFO - 
2025-12-26 19:25:33,406 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:33,406 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:33,406 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:33,407 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:33,408 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:33,409 - main - INFO - 
2025-12-26 19:25:33,410 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:33,411 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:33,411 - main - INFO -        - No manual section generation
2025-12-26 19:25:33,412 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:33,412 - main - INFO - 
2025-12-26 19:25:33,412 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:33,412 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:33,413 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:33,413 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:33,413 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:33,413 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:33,414 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:33,414 - main - INFO - 
2025-12-26 19:25:33,414 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:33,414 - main - INFO -      Main:
2025-12-26 19:25:33,414 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:33,415 - main - INFO - 
2025-12-26 19:25:33,415 - main - INFO -      Retrieval:
2025-12-26 19:25:33,415 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:33,415 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:33,416 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:33,416 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:33,416 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:33,416 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:33,417 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:33,417 - main - INFO - 
2025-12-26 19:25:33,417 - main - INFO -      Management:
2025-12-26 19:25:33,417 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:33,418 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:33,418 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:33,418 - main - INFO - 
2025-12-26 19:25:33,418 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:33,419 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:33,419 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:33,419 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:33,419 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:33,420 - main - INFO - 
2025-12-26 19:25:33,420 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:33,420 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:33,420 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:33,421 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:33,421 - main - INFO - 
2025-12-26 19:25:33,421 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:33,421 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:33,421 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:33,422 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:33,422 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:33,422 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:33,423 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:33,424 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:33,426 - main - INFO - 
2025-12-26 19:25:33,426 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:33,427 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:33,427 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:33,427 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:33,427 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:33,427 - main - INFO - 
2025-12-26 19:25:33,427 - main - INFO - ================================================================================
2025-12-26 19:25:33,428 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:33,428 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:33,428 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:33,428 - main - INFO - ================================================================================
2025-12-26 19:25:33,428 - main - INFO - 
2025-12-26 19:25:33,429 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:25:33,495 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:25:33,496 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:25:33,499 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:25:33,508 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:25:33,511 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:25:33,515 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:25:39,929 - main - INFO - 
2025-12-26 19:25:39,929 - main - INFO - ================================================================================
2025-12-26 19:25:39,930 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:25:39,931 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:39,932 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:25:39,934 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:39,938 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:25:39,941 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:25:39,941 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:25:39,943 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:25:39,945 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:25:39,946 - main - WARNING -   âš ï¸  Activity Logs Service disconnect: 'ActivityLogsService' object has no attribute 'disconnect'
2025-12-26 19:25:39,946 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:25:39,947 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:25:39,947 - main - INFO - ================================================================================
2025-12-26 19:25:39,947 - main - INFO - 
2025-12-26 19:25:44,363 - main - INFO - 
2025-12-26 19:25:44,363 - main - INFO - ================================================================================
2025-12-26 19:25:44,363 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:44,364 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:44,364 - main - INFO - ================================================================================
2025-12-26 19:25:44,364 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:44,365 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:44,365 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:44,365 - main - INFO - ================================================================================
2025-12-26 19:25:44,365 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:44,366 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:44,366 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:44,403 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:44,414 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:44,414 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:44,415 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:44,415 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:44,415 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:44,446 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:44,447 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:44,448 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:25:44,449 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:44,449 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:44,450 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:44,450 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:44,450 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:44,478 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:44,479 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:44,479 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:44,509 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:44,512 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:44,512 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:44,512 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:25:44,525 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:25:44,528 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:25:44,528 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:25:44,529 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:44,529 - main - INFO - 
2025-12-26 19:25:44,529 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:44,529 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:44,529 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:44,530 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:44,530 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:44,530 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:44,530 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:44,530 - main - INFO - 
2025-12-26 19:25:44,530 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:44,531 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:44,531 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:44,531 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:44,531 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:44,531 - main - INFO - 
2025-12-26 19:25:44,531 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:44,532 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:44,532 - main - INFO -        - No manual section generation
2025-12-26 19:25:44,532 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:44,532 - main - INFO - 
2025-12-26 19:25:44,532 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:44,532 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:44,533 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:44,533 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:44,533 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:44,533 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:44,533 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:44,534 - main - INFO - 
2025-12-26 19:25:44,536 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:44,537 - main - INFO -      Main:
2025-12-26 19:25:44,537 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:44,537 - main - INFO - 
2025-12-26 19:25:44,537 - main - INFO -      Retrieval:
2025-12-26 19:25:44,538 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:44,538 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:44,538 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:44,539 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:44,539 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:44,539 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:44,540 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:44,541 - main - INFO - 
2025-12-26 19:25:44,541 - main - INFO -      Management:
2025-12-26 19:25:44,541 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:44,541 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:44,542 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:44,542 - main - INFO - 
2025-12-26 19:25:44,542 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:44,542 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:44,542 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:44,543 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:44,543 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:44,543 - main - INFO - 
2025-12-26 19:25:44,543 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:44,543 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:44,543 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:44,544 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:44,544 - main - INFO - 
2025-12-26 19:25:44,544 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:44,544 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:44,544 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:44,544 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:44,545 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:44,545 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:44,545 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:44,545 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:44,545 - main - INFO - 
2025-12-26 19:25:44,545 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:44,546 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:44,546 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:44,546 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:44,546 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:44,546 - main - INFO - 
2025-12-26 19:25:44,546 - main - INFO - ================================================================================
2025-12-26 19:25:44,546 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:44,547 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:44,547 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:44,547 - main - INFO - ================================================================================
2025-12-26 19:25:44,547 - main - INFO - 
2025-12-26 19:25:44,547 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:25:53,348 - main - INFO - 
2025-12-26 19:25:53,348 - main - INFO - ================================================================================
2025-12-26 19:25:53,348 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:25:53,349 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:53,350 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:25:53,352 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:25:53,352 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:25:53,353 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:25:53,354 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:25:53,355 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:25:53,355 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:25:53,356 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:25:53,357 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:25:53,357 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:25:53,357 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:25:53,358 - main - INFO - ================================================================================
2025-12-26 19:25:53,358 - main - INFO - 
2025-12-26 19:25:57,837 - main - INFO - 
2025-12-26 19:25:57,838 - main - INFO - ================================================================================
2025-12-26 19:25:57,839 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:25:57,839 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:25:57,839 - main - INFO - ================================================================================
2025-12-26 19:25:57,839 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:25:57,840 - main - INFO -   Upload Directory: uploads
2025-12-26 19:25:57,840 - main - INFO -   Max File Size: 20MB
2025-12-26 19:25:57,840 - main - INFO - ================================================================================
2025-12-26 19:25:57,840 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:25:57,841 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:25:57,841 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:57,886 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:25:57,893 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:25:57,894 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:25:57,894 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:25:57,894 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:25:57,894 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:25:57,905 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:25:57,907 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:25:57,909 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:25:57,911 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:25:57,911 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:25:57,911 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:25:57,912 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:25:57,912 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:25:57,931 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:25:57,931 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:25:57,932 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:25:57,943 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:25:57,947 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:25:57,947 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:25:57,947 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:25:57,978 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:25:57,982 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:25:57,982 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:25:57,982 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:25:57,982 - main - INFO - 
2025-12-26 19:25:57,983 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:25:57,983 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:25:57,983 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:25:57,984 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:25:57,986 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:25:57,986 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:25:57,987 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:25:57,987 - main - INFO - 
2025-12-26 19:25:57,987 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:25:57,988 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:25:57,988 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:25:57,988 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:25:57,989 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:25:57,989 - main - INFO - 
2025-12-26 19:25:57,990 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:25:57,990 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:25:57,990 - main - INFO -        - No manual section generation
2025-12-26 19:25:57,990 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:25:57,991 - main - INFO - 
2025-12-26 19:25:57,991 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:25:57,991 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:25:57,991 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:25:57,992 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:25:57,992 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:25:57,992 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:25:57,992 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:25:57,992 - main - INFO - 
2025-12-26 19:25:57,993 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:25:57,993 - main - INFO -      Main:
2025-12-26 19:25:57,993 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:25:57,993 - main - INFO - 
2025-12-26 19:25:57,994 - main - INFO -      Retrieval:
2025-12-26 19:25:57,994 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:25:57,994 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:25:57,994 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:25:57,995 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:25:57,995 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:25:57,995 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:25:57,995 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:25:57,996 - main - INFO - 
2025-12-26 19:25:57,996 - main - INFO -      Management:
2025-12-26 19:25:57,996 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:25:57,996 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:25:57,996 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:25:57,997 - main - INFO - 
2025-12-26 19:25:57,997 - main - INFO -      Documents (MongoDB):
2025-12-26 19:25:57,997 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:25:57,997 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:25:57,997 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:25:57,998 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:25:57,998 - main - INFO - 
2025-12-26 19:25:57,998 - main - INFO -      Diagnostics & Health:
2025-12-26 19:25:57,998 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:25:57,998 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:25:57,998 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:25:57,999 - main - INFO - 
2025-12-26 19:25:57,999 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:25:57,999 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:25:57,999 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:25:57,999 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:25:57,999 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:25:58,000 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:25:58,000 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:25:58,000 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:25:58,001 - main - INFO - 
2025-12-26 19:25:58,002 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:25:58,003 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:25:58,004 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:25:58,004 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:25:58,004 - main - INFO -      4. No re-upload needed!
2025-12-26 19:25:58,004 - main - INFO - 
2025-12-26 19:25:58,005 - main - INFO - ================================================================================
2025-12-26 19:25:58,006 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:25:58,007 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:25:58,007 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:25:58,007 - main - INFO - ================================================================================
2025-12-26 19:25:58,007 - main - INFO - 
2025-12-26 19:25:58,008 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:26:10,827 - main - INFO - 
2025-12-26 19:26:10,827 - main - INFO - ================================================================================
2025-12-26 19:26:10,828 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:26:10,830 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:26:10,831 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:26:10,832 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:26:10,833 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:26:10,834 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:26:10,835 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:26:10,835 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:26:10,836 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:26:10,836 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:26:10,837 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:26:10,838 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:26:10,839 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:26:10,840 - main - INFO - ================================================================================
2025-12-26 19:26:10,841 - main - INFO - 
2025-12-26 19:26:13,458 - main - INFO - 
2025-12-26 19:26:13,458 - main - INFO - ================================================================================
2025-12-26 19:26:13,458 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:26:13,458 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:26:13,458 - main - INFO - ================================================================================
2025-12-26 19:26:13,459 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:26:13,459 - main - INFO -   Upload Directory: uploads
2025-12-26 19:26:13,459 - main - INFO -   Max File Size: 20MB
2025-12-26 19:26:13,459 - main - INFO - ================================================================================
2025-12-26 19:26:13,460 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:26:13,460 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:26:13,460 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:26:13,480 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:26:13,485 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:26:13,486 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:26:13,486 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:26:13,486 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:26:13,486 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:26:13,517 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:26:13,518 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:26:13,519 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:26:13,520 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:26:13,521 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:26:13,521 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:26:13,521 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:26:13,522 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:26:13,550 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:26:13,550 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:26:13,550 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:26:13,560 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:26:13,564 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:26:13,564 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:26:13,564 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:26:13,572 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:26:13,575 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:26:13,575 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:26:13,576 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:26:13,576 - main - INFO - 
2025-12-26 19:26:13,576 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:26:13,576 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:26:13,576 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:26:13,577 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:26:13,577 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:26:13,577 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:26:13,577 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:26:13,577 - main - INFO - 
2025-12-26 19:26:13,577 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:26:13,577 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:26:13,578 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:26:13,578 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:26:13,578 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:26:13,578 - main - INFO - 
2025-12-26 19:26:13,578 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:26:13,578 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:26:13,579 - main - INFO -        - No manual section generation
2025-12-26 19:26:13,579 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:26:13,579 - main - INFO - 
2025-12-26 19:26:13,579 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:26:13,579 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:26:13,579 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:26:13,580 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:26:13,580 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:26:13,580 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:26:13,580 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:26:13,580 - main - INFO - 
2025-12-26 19:26:13,580 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:26:13,581 - main - INFO -      Main:
2025-12-26 19:26:13,581 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:26:13,581 - main - INFO - 
2025-12-26 19:26:13,581 - main - INFO -      Retrieval:
2025-12-26 19:26:13,581 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:26:13,581 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:26:13,582 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:26:13,582 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:26:13,582 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:26:13,582 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:26:13,582 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:26:13,582 - main - INFO - 
2025-12-26 19:26:13,583 - main - INFO -      Management:
2025-12-26 19:26:13,583 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:26:13,583 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:26:13,583 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:26:13,583 - main - INFO - 
2025-12-26 19:26:13,583 - main - INFO -      Documents (MongoDB):
2025-12-26 19:26:13,583 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:26:13,584 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:26:13,584 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:26:13,584 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:26:13,584 - main - INFO - 
2025-12-26 19:26:13,584 - main - INFO -      Diagnostics & Health:
2025-12-26 19:26:13,584 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:26:13,585 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:26:13,585 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:26:13,585 - main - INFO - 
2025-12-26 19:26:13,585 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:26:13,585 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:26:13,585 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:26:13,586 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:26:13,586 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:26:13,586 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:26:13,586 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:26:13,586 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:26:13,586 - main - INFO - 
2025-12-26 19:26:13,587 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:26:13,587 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:26:13,587 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:26:13,587 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:26:13,587 - main - INFO -      4. No re-upload needed!
2025-12-26 19:26:13,587 - main - INFO - 
2025-12-26 19:26:13,588 - main - INFO - ================================================================================
2025-12-26 19:26:13,588 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:26:13,588 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:26:13,588 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:26:13,588 - main - INFO - ================================================================================
2025-12-26 19:26:13,588 - main - INFO - 
2025-12-26 19:26:13,589 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:26:18,748 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:26:18,749 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:26:18,752 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:26:18,755 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:26:18,755 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:26:18,757 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:26:19,582 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:26:19,583 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 404 - 0.00s
2025-12-26 19:26:21,709 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:26:21,710 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 404 - 0.00s
2025-12-26 19:26:22,421 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:26:22,422 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 404 - 0.00s
2025-12-26 19:26:26,549 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:26:26,550 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:26:26,552 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:26:26,555 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:26:26,555 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:26:26,558 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:26:57,294 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:26:57,294 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 19:26:57,297 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:26:57,297 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:26:57,298 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:26:57,301 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:26:57,302 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:26:57,304 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:27:27,612 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:27:27,613 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:27:27,614 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:27:27,616 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:27:27,616 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:27:27,620 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:27:35,269 - main - INFO - 
2025-12-26 19:27:35,269 - main - INFO - ================================================================================
2025-12-26 19:27:35,269 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:27:35,270 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:27:35,271 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:27:35,272 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:27:35,274 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:27:35,275 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:27:35,278 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:27:35,279 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:27:35,280 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:27:35,281 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:27:35,282 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:27:35,282 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:27:35,282 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:27:35,283 - main - INFO - ================================================================================
2025-12-26 19:27:35,283 - main - INFO - 
2025-12-26 19:27:40,613 - main - INFO - 
2025-12-26 19:27:40,613 - main - INFO - ================================================================================
2025-12-26 19:27:40,613 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:27:40,613 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:27:40,614 - main - INFO - ================================================================================
2025-12-26 19:27:40,614 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:27:40,614 - main - INFO -   Upload Directory: uploads
2025-12-26 19:27:40,614 - main - INFO -   Max File Size: 20MB
2025-12-26 19:27:40,614 - main - INFO - ================================================================================
2025-12-26 19:27:40,615 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:27:40,615 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:27:40,615 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:27:40,654 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:27:40,661 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:27:40,662 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:27:40,662 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:27:40,662 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:27:40,662 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:27:40,674 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:27:40,675 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:27:40,677 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:27:40,680 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:27:40,680 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:27:40,680 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:27:40,680 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:27:40,681 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:27:40,726 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:27:40,726 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:27:40,727 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:27:40,759 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:27:40,761 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:27:40,761 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:27:40,762 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:27:40,791 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:27:40,795 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:27:40,795 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:27:40,795 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:27:40,795 - main - INFO - 
2025-12-26 19:27:40,796 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:27:40,796 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:27:40,796 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:27:40,796 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:27:40,797 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:27:40,797 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:27:40,797 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:27:40,797 - main - INFO - 
2025-12-26 19:27:40,797 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:27:40,797 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:27:40,798 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:27:40,798 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:27:40,798 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:27:40,798 - main - INFO - 
2025-12-26 19:27:40,798 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:27:40,798 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:27:40,799 - main - INFO -        - No manual section generation
2025-12-26 19:27:40,799 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:27:40,799 - main - INFO - 
2025-12-26 19:27:40,799 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:27:40,799 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:27:40,799 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:27:40,799 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:27:40,800 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:27:40,800 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:27:40,800 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:27:40,800 - main - INFO - 
2025-12-26 19:27:40,801 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:27:40,802 - main - INFO -      Main:
2025-12-26 19:27:40,803 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:27:40,804 - main - INFO - 
2025-12-26 19:27:40,804 - main - INFO -      Retrieval:
2025-12-26 19:27:40,804 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:27:40,804 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:27:40,804 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:27:40,805 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:27:40,805 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:27:40,805 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:27:40,805 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:27:40,805 - main - INFO - 
2025-12-26 19:27:40,806 - main - INFO -      Management:
2025-12-26 19:27:40,806 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:27:40,806 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:27:40,807 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:27:40,807 - main - INFO - 
2025-12-26 19:27:40,807 - main - INFO -      Documents (MongoDB):
2025-12-26 19:27:40,807 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:27:40,807 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:27:40,807 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:27:40,808 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:27:40,808 - main - INFO - 
2025-12-26 19:27:40,808 - main - INFO -      Diagnostics & Health:
2025-12-26 19:27:40,808 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:27:40,808 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:27:40,809 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:27:40,809 - main - INFO - 
2025-12-26 19:27:40,809 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:27:40,809 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:27:40,809 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:27:40,810 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:27:40,810 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:27:40,810 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:27:40,810 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:27:40,810 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:27:40,810 - main - INFO - 
2025-12-26 19:27:40,811 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:27:40,811 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:27:40,811 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:27:40,811 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:27:40,811 - main - INFO -      4. No re-upload needed!
2025-12-26 19:27:40,811 - main - INFO - 
2025-12-26 19:27:40,811 - main - INFO - ================================================================================
2025-12-26 19:27:40,812 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:27:40,812 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:27:40,812 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:27:40,812 - main - INFO - ================================================================================
2025-12-26 19:27:40,812 - main - INFO - 
2025-12-26 19:27:40,812 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:27:52,142 - main - INFO - 
2025-12-26 19:27:52,142 - main - INFO - ================================================================================
2025-12-26 19:27:52,143 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:27:52,144 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:27:52,145 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:27:52,147 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:27:52,147 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:27:52,149 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:27:52,149 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:27:52,151 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:27:52,152 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:27:52,153 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:27:52,153 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:27:52,154 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:27:52,154 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:27:52,154 - main - INFO - ================================================================================
2025-12-26 19:27:52,154 - main - INFO - 
2025-12-26 19:27:56,386 - main - INFO - 
2025-12-26 19:27:56,386 - main - INFO - ================================================================================
2025-12-26 19:27:56,387 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:27:56,387 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:27:56,388 - main - INFO - ================================================================================
2025-12-26 19:27:56,388 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:27:56,389 - main - INFO -   Upload Directory: uploads
2025-12-26 19:27:56,389 - main - INFO -   Max File Size: 20MB
2025-12-26 19:27:56,390 - main - INFO - ================================================================================
2025-12-26 19:27:56,390 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:27:56,391 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:27:56,391 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:27:56,420 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:27:56,429 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:27:56,429 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:27:56,430 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:27:56,430 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:27:56,430 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:27:56,441 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:27:56,443 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:27:56,444 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:27:56,447 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:27:56,447 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:27:56,447 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:27:56,447 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:27:56,448 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:27:56,459 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:27:56,459 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:27:56,459 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:27:56,468 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:27:56,475 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:27:56,475 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:27:56,476 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:27:56,508 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:27:56,512 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:27:56,512 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:27:56,513 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:27:56,513 - main - INFO - 
2025-12-26 19:27:56,513 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:27:56,513 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:27:56,513 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:27:56,513 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:27:56,514 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:27:56,514 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:27:56,514 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:27:56,514 - main - INFO - 
2025-12-26 19:27:56,515 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:27:56,515 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:27:56,515 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:27:56,515 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:27:56,515 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:27:56,515 - main - INFO - 
2025-12-26 19:27:56,516 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:27:56,516 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:27:56,516 - main - INFO -        - No manual section generation
2025-12-26 19:27:56,516 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:27:56,516 - main - INFO - 
2025-12-26 19:27:56,516 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:27:56,517 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:27:56,517 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:27:56,517 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:27:56,517 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:27:56,517 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:27:56,518 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:27:56,518 - main - INFO - 
2025-12-26 19:27:56,518 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:27:56,518 - main - INFO -      Main:
2025-12-26 19:27:56,519 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:27:56,519 - main - INFO - 
2025-12-26 19:27:56,519 - main - INFO -      Retrieval:
2025-12-26 19:27:56,519 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:27:56,520 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:27:56,520 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:27:56,520 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:27:56,521 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:27:56,521 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:27:56,522 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:27:56,524 - main - INFO - 
2025-12-26 19:27:56,524 - main - INFO -      Management:
2025-12-26 19:27:56,524 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:27:56,525 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:27:56,525 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:27:56,525 - main - INFO - 
2025-12-26 19:27:56,525 - main - INFO -      Documents (MongoDB):
2025-12-26 19:27:56,526 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:27:56,526 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:27:56,526 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:27:56,526 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:27:56,527 - main - INFO - 
2025-12-26 19:27:56,527 - main - INFO -      Diagnostics & Health:
2025-12-26 19:27:56,527 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:27:56,527 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:27:56,527 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:27:56,527 - main - INFO - 
2025-12-26 19:27:56,528 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:27:56,528 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:27:56,528 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:27:56,528 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:27:56,528 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:27:56,529 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:27:56,529 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:27:56,529 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:27:56,529 - main - INFO - 
2025-12-26 19:27:56,529 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:27:56,529 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:27:56,530 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:27:56,530 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:27:56,530 - main - INFO -      4. No re-upload needed!
2025-12-26 19:27:56,530 - main - INFO - 
2025-12-26 19:27:56,530 - main - INFO - ================================================================================
2025-12-26 19:27:56,530 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:27:56,531 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:27:56,531 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:27:56,531 - main - INFO - ================================================================================
2025-12-26 19:27:56,531 - main - INFO - 
2025-12-26 19:27:56,531 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:28:22,370 - main - INFO - 
2025-12-26 19:28:22,373 - main - INFO - ================================================================================
2025-12-26 19:28:22,374 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:28:22,375 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:28:22,376 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:28:22,377 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:28:22,378 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:28:22,379 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:28:22,380 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:28:22,382 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:28:22,391 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:28:22,393 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:28:22,394 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:28:22,395 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:28:22,395 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:28:22,395 - main - INFO - ================================================================================
2025-12-26 19:28:22,395 - main - INFO - 
2025-12-26 19:28:26,695 - main - INFO - 
2025-12-26 19:28:26,695 - main - INFO - ================================================================================
2025-12-26 19:28:26,695 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:28:26,695 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:28:26,696 - main - INFO - ================================================================================
2025-12-26 19:28:26,696 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:28:26,696 - main - INFO -   Upload Directory: uploads
2025-12-26 19:28:26,696 - main - INFO -   Max File Size: 20MB
2025-12-26 19:28:26,696 - main - INFO - ================================================================================
2025-12-26 19:28:26,697 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:28:26,697 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:28:26,697 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:28:26,732 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:28:26,742 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:28:26,743 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:28:26,743 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:28:26,743 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:28:26,743 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:28:26,777 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:28:26,778 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:28:26,779 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:28:26,780 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:28:26,780 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:28:26,781 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:28:26,781 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:28:26,781 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:28:26,792 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:28:26,792 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:28:26,792 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:28:26,826 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:28:26,828 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:28:26,829 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:28:26,829 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:28:26,858 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:28:26,862 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:28:26,862 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:28:26,862 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:28:26,863 - main - INFO - 
2025-12-26 19:28:26,863 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:28:26,863 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:28:26,863 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:28:26,863 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:28:26,864 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:28:26,864 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:28:26,864 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:28:26,864 - main - INFO - 
2025-12-26 19:28:26,864 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:28:26,865 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:28:26,865 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:28:26,865 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:28:26,865 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:28:26,865 - main - INFO - 
2025-12-26 19:28:26,865 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:28:26,866 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:28:26,866 - main - INFO -        - No manual section generation
2025-12-26 19:28:26,866 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:28:26,866 - main - INFO - 
2025-12-26 19:28:26,866 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:28:26,866 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:28:26,866 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:28:26,867 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:28:26,867 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:28:26,868 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:28:26,868 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:28:26,870 - main - INFO - 
2025-12-26 19:28:26,870 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:28:26,871 - main - INFO -      Main:
2025-12-26 19:28:26,871 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:28:26,871 - main - INFO - 
2025-12-26 19:28:26,872 - main - INFO -      Retrieval:
2025-12-26 19:28:26,872 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:28:26,873 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:28:26,873 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:28:26,873 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:28:26,873 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:28:26,873 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:28:26,873 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:28:26,874 - main - INFO - 
2025-12-26 19:28:26,874 - main - INFO -      Management:
2025-12-26 19:28:26,874 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:28:26,874 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:28:26,875 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:28:26,875 - main - INFO - 
2025-12-26 19:28:26,875 - main - INFO -      Documents (MongoDB):
2025-12-26 19:28:26,875 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:28:26,876 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:28:26,876 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:28:26,876 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:28:26,876 - main - INFO - 
2025-12-26 19:28:26,876 - main - INFO -      Diagnostics & Health:
2025-12-26 19:28:26,877 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:28:26,877 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:28:26,877 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:28:26,877 - main - INFO - 
2025-12-26 19:28:26,877 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:28:26,877 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:28:26,878 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:28:26,878 - main - INFO - 
2025-12-26 19:28:26,879 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:28:26,879 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:28:26,879 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:28:26,879 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:28:26,879 - main - INFO -      4. No re-upload needed!
2025-12-26 19:28:26,879 - main - INFO - 
2025-12-26 19:28:26,879 - main - INFO - ================================================================================
2025-12-26 19:28:26,880 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:28:26,880 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:28:26,880 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:28:26,880 - main - INFO - ================================================================================
2025-12-26 19:28:26,880 - main - INFO - 
2025-12-26 19:28:26,881 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:28:28,614 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:28:28,615 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:28:28,620 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:28:28,624 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:28:28,625 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:28:28,627 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:28:52,343 - main - INFO - 
2025-12-26 19:28:52,343 - main - INFO - ================================================================================
2025-12-26 19:28:52,343 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:28:52,344 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:28:52,344 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:28:52,345 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:28:52,345 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:28:52,346 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:28:52,346 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:28:52,347 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:28:52,348 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:28:52,348 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:28:52,349 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:28:52,349 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:28:52,349 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:28:52,350 - main - INFO - ================================================================================
2025-12-26 19:28:52,350 - main - INFO - 
2025-12-26 19:28:55,728 - main - INFO - 
2025-12-26 19:28:55,729 - main - INFO - ================================================================================
2025-12-26 19:28:55,729 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:28:55,730 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:28:55,730 - main - INFO - ================================================================================
2025-12-26 19:28:55,736 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:28:55,743 - main - INFO -   Upload Directory: uploads
2025-12-26 19:28:55,744 - main - INFO -   Max File Size: 20MB
2025-12-26 19:28:55,745 - main - INFO - ================================================================================
2025-12-26 19:28:55,746 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:28:55,748 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:28:55,748 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:28:55,822 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:28:55,835 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:28:55,837 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:28:55,838 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:28:55,839 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:28:55,839 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:28:55,859 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:28:55,860 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:28:55,861 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:28:55,862 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:28:55,863 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:28:55,863 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:28:55,863 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:28:55,863 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:28:55,871 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:28:55,872 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:28:55,872 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:28:55,883 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:28:55,886 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:28:55,887 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:28:55,887 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:28:55,894 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:28:55,899 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:28:55,899 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:28:55,899 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:28:55,899 - main - INFO - 
2025-12-26 19:28:55,899 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:28:55,899 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:28:55,900 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:28:55,900 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:28:55,900 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:28:55,901 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:28:55,902 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:28:55,902 - main - INFO - 
2025-12-26 19:28:55,903 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:28:55,903 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:28:55,903 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:28:55,903 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:28:55,904 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:28:55,904 - main - INFO - 
2025-12-26 19:28:55,904 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:28:55,905 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:28:55,905 - main - INFO -        - No manual section generation
2025-12-26 19:28:55,905 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:28:55,905 - main - INFO - 
2025-12-26 19:28:55,905 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:28:55,906 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:28:55,906 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:28:55,906 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:28:55,906 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:28:55,907 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:28:55,907 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:28:55,908 - main - INFO - 
2025-12-26 19:28:55,908 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:28:55,909 - main - INFO -      Main:
2025-12-26 19:28:55,909 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:28:55,910 - main - INFO - 
2025-12-26 19:28:55,910 - main - INFO -      Retrieval:
2025-12-26 19:28:55,911 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:28:55,911 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:28:55,911 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:28:55,912 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:28:55,912 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:28:55,912 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:28:55,912 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:28:55,912 - main - INFO - 
2025-12-26 19:28:55,913 - main - INFO -      Management:
2025-12-26 19:28:55,913 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:28:55,913 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:28:55,913 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:28:55,913 - main - INFO - 
2025-12-26 19:28:55,913 - main - INFO -      Documents (MongoDB):
2025-12-26 19:28:55,914 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:28:55,914 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:28:55,914 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:28:55,914 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:28:55,914 - main - INFO - 
2025-12-26 19:28:55,914 - main - INFO -      Diagnostics & Health:
2025-12-26 19:28:55,915 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:28:55,915 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:28:55,915 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:28:55,915 - main - INFO - 
2025-12-26 19:28:55,915 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:28:55,915 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:28:55,916 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:28:55,917 - main - INFO - 
2025-12-26 19:28:55,918 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:28:55,918 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:28:55,919 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:28:55,919 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:28:55,919 - main - INFO -      4. No re-upload needed!
2025-12-26 19:28:55,920 - main - INFO - 
2025-12-26 19:28:55,920 - main - INFO - ================================================================================
2025-12-26 19:28:55,921 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:28:55,921 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:28:55,922 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:28:55,922 - main - INFO - ================================================================================
2025-12-26 19:28:55,922 - main - INFO - 
2025-12-26 19:28:55,922 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:28:56,878 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:28:56,880 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:28:56,883 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:28:56,891 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:28:56,892 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:28:56,897 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:28:57,758 - main - INFO - ğŸ“¥ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:28:57,758 - main - INFO - ğŸ“¤ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.00s
2025-12-26 19:28:57,761 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:28:57,761 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:28:57,764 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:28:57,764 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:28:57,764 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:28:57,765 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:28:57,765 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:28:57,768 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:28:57,886 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:28:57,887 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:28:57,887 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:28:57,887 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:28:57,888 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:28:57,888 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:28:57,893 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:28:57,893 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:28:57,898 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:28:57,898 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:28:57,899 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:28:57,899 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:28:57,902 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:28:57,902 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:28:57,904 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:28:58,040 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:28:58,041 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_192857.pdf (129855 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_192857.pdf (146260 bytes)
2025-12-26 19:28:58,044 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.28s
2025-12-26 19:29:26,548 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:29:26,550 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:29:26,554 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:29:26,560 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:29:26,561 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:29:26,566 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:29:57,619 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:29:57,621 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:29:57,623 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:29:57,630 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:29:57,631 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:29:57,634 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:30:27,301 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:30:27,303 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:30:27,306 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:30:27,312 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:30:27,312 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:30:27,316 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:30:39,755 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:30:39,755 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:30:39,757 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:30:39,758 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:30:39,758 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:30:39,758 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:30:39,759 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:30:39,760 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:30:39,855 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:30:39,855 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:30:39,855 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:30:39,856 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:30:39,856 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:30:39,856 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:30:39,861 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:30:39,861 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:30:39,868 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:30:39,868 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:30:39,869 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:30:39,869 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:30:39,870 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:30:39,870 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:30:39,872 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:30:40,011 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:30:40,013 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_193039.pdf (129855 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_193039.pdf (146260 bytes)
2025-12-26 19:30:40,015 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.26s
2025-12-26 19:30:57,293 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:30:57,294 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:30:57,296 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:30:57,298 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:30:57,298 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:30:57,301 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:31:27,256 - main - INFO - 
2025-12-26 19:31:27,256 - main - INFO - ================================================================================
2025-12-26 19:31:27,257 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:31:27,258 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:31:27,259 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:31:27,260 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:31:27,261 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:31:27,263 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:31:27,263 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:31:27,264 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:31:27,265 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:31:27,266 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:31:27,266 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:31:27,267 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:31:27,268 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:31:27,269 - main - INFO - ================================================================================
2025-12-26 19:31:27,269 - main - INFO - 
2025-12-26 19:31:31,639 - main - INFO - 
2025-12-26 19:31:31,639 - main - INFO - ================================================================================
2025-12-26 19:31:31,639 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:31:31,640 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:31:31,640 - main - INFO - ================================================================================
2025-12-26 19:31:31,640 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:31:31,640 - main - INFO -   Upload Directory: uploads
2025-12-26 19:31:31,641 - main - INFO -   Max File Size: 20MB
2025-12-26 19:31:31,641 - main - INFO - ================================================================================
2025-12-26 19:31:31,641 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:31:31,642 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:31:31,642 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:31:31,663 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:31:31,674 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:31:31,675 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:31:31,675 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:31:31,676 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:31:31,676 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:31:31,683 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:31:31,687 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:31:31,689 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:31:31,692 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:31:31,693 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:31:31,693 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:31:31,693 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:31:31,693 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:31:31,713 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:31:31,714 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:31:31,714 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:31:31,745 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:31:31,748 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:31:31,748 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:31:31,748 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:31:31,760 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:31:31,763 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:31:31,764 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:31:31,764 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:31:31,764 - main - INFO - 
2025-12-26 19:31:31,764 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:31:31,765 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:31:31,765 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:31:31,765 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:31:31,765 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:31:31,765 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:31:31,766 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:31:31,766 - main - INFO - 
2025-12-26 19:31:31,766 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:31:31,766 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:31:31,766 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:31:31,766 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:31:31,767 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:31:31,767 - main - INFO - 
2025-12-26 19:31:31,768 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:31:31,768 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:31:31,769 - main - INFO -        - No manual section generation
2025-12-26 19:31:31,770 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:31:31,770 - main - INFO - 
2025-12-26 19:31:31,771 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:31:31,771 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:31:31,771 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:31:31,772 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:31:31,772 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:31:31,772 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:31:31,772 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:31:31,772 - main - INFO - 
2025-12-26 19:31:31,773 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:31:31,773 - main - INFO -      Main:
2025-12-26 19:31:31,773 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:31:31,774 - main - INFO - 
2025-12-26 19:31:31,774 - main - INFO -      Retrieval:
2025-12-26 19:31:31,774 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:31:31,774 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:31:31,774 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:31:31,775 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:31:31,775 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:31:31,775 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:31:31,775 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:31:31,776 - main - INFO - 
2025-12-26 19:31:31,776 - main - INFO -      Management:
2025-12-26 19:31:31,776 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:31:31,776 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:31:31,776 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:31:31,776 - main - INFO - 
2025-12-26 19:31:31,777 - main - INFO -      Documents (MongoDB):
2025-12-26 19:31:31,777 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:31:31,777 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:31:31,777 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:31:31,777 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:31:31,778 - main - INFO - 
2025-12-26 19:31:31,778 - main - INFO -      Diagnostics & Health:
2025-12-26 19:31:31,778 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:31:31,778 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:31:31,778 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:31:31,779 - main - INFO - 
2025-12-26 19:31:31,779 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:31:31,779 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:31:31,779 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:31:31,779 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:31:31,780 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:31:31,780 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:31:31,780 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:31:31,780 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:31:31,780 - main - INFO - 
2025-12-26 19:31:31,780 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:31:31,781 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:31:31,781 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:31:31,781 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:31:31,781 - main - INFO -      4. No re-upload needed!
2025-12-26 19:31:31,781 - main - INFO - 
2025-12-26 19:31:31,781 - main - INFO - ================================================================================
2025-12-26 19:31:31,781 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:31:31,782 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:31:31,782 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:31:31,782 - main - INFO - ================================================================================
2025-12-26 19:31:31,782 - main - INFO - 
2025-12-26 19:31:31,782 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:31:31,838 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:31:31,839 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:31:31,841 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:31:31,843 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:31:31,844 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:31:31,845 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:31:57,086 - main - INFO - 
2025-12-26 19:31:57,087 - main - INFO - ================================================================================
2025-12-26 19:31:57,087 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:31:57,088 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:31:57,089 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:31:57,090 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:31:57,090 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:31:57,091 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:31:57,091 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:31:57,092 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:31:57,093 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:31:57,093 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:31:57,094 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:31:57,094 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:31:57,094 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:31:57,095 - main - INFO - ================================================================================
2025-12-26 19:31:57,095 - main - INFO - 
2025-12-26 19:32:03,485 - main - INFO - 
2025-12-26 19:32:03,486 - main - INFO - ================================================================================
2025-12-26 19:32:03,486 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:32:03,487 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:32:03,487 - main - INFO - ================================================================================
2025-12-26 19:32:03,487 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:32:03,488 - main - INFO -   Upload Directory: uploads
2025-12-26 19:32:03,488 - main - INFO -   Max File Size: 20MB
2025-12-26 19:32:03,489 - main - INFO - ================================================================================
2025-12-26 19:32:03,492 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:32:03,493 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:32:03,493 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:32:03,517 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:32:03,530 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:32:03,530 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:32:03,530 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:32:03,531 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:32:03,531 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:32:03,545 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:32:03,546 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:32:03,547 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:32:03,549 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:32:03,549 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:32:03,550 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:32:03,550 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:32:03,551 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:32:03,589 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:32:03,591 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:32:03,592 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:32:03,599 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:32:03,609 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:32:03,609 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:32:03,610 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:32:03,634 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:32:03,645 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:32:03,645 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:32:03,645 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:32:03,645 - main - INFO - 
2025-12-26 19:32:03,646 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:32:03,646 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:32:03,646 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:32:03,646 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:32:03,646 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:32:03,647 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:32:03,647 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:32:03,647 - main - INFO - 
2025-12-26 19:32:03,647 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:32:03,647 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:32:03,648 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:32:03,648 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:32:03,648 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:32:03,648 - main - INFO - 
2025-12-26 19:32:03,648 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:32:03,649 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:32:03,649 - main - INFO -        - No manual section generation
2025-12-26 19:32:03,649 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:32:03,649 - main - INFO - 
2025-12-26 19:32:03,649 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:32:03,649 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:32:03,649 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:32:03,650 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:32:03,650 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:32:03,651 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:32:03,652 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:32:03,652 - main - INFO - 
2025-12-26 19:32:03,653 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:32:03,653 - main - INFO -      Main:
2025-12-26 19:32:03,653 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:32:03,653 - main - INFO - 
2025-12-26 19:32:03,654 - main - INFO -      Retrieval:
2025-12-26 19:32:03,654 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:32:03,655 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:32:03,655 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:32:03,656 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:32:03,657 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:32:03,657 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:32:03,657 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:32:03,658 - main - INFO - 
2025-12-26 19:32:03,658 - main - INFO -      Management:
2025-12-26 19:32:03,658 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:32:03,658 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:32:03,659 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:32:03,659 - main - INFO - 
2025-12-26 19:32:03,659 - main - INFO -      Documents (MongoDB):
2025-12-26 19:32:03,659 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:32:03,660 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:32:03,660 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:32:03,660 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:32:03,660 - main - INFO - 
2025-12-26 19:32:03,660 - main - INFO -      Diagnostics & Health:
2025-12-26 19:32:03,661 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:32:03,661 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:32:03,661 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:32:03,661 - main - INFO - 
2025-12-26 19:32:03,661 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:32:03,662 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:32:03,663 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:32:03,663 - main - INFO - 
2025-12-26 19:32:03,663 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:32:03,663 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:32:03,663 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:32:03,663 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:32:03,664 - main - INFO -      4. No re-upload needed!
2025-12-26 19:32:03,664 - main - INFO - 
2025-12-26 19:32:03,664 - main - INFO - ================================================================================
2025-12-26 19:32:03,664 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:32:03,664 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:32:03,664 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:32:03,665 - main - INFO - ================================================================================
2025-12-26 19:32:03,665 - main - INFO - 
2025-12-26 19:32:03,665 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:32:03,731 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:32:03,732 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:32:03,735 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:32:03,744 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:32:03,744 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:32:03,746 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:32:09,494 - main - INFO - 
2025-12-26 19:32:09,494 - main - INFO - ================================================================================
2025-12-26 19:32:09,494 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:32:09,495 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:32:09,495 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:32:09,496 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:32:09,496 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:32:09,497 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:32:09,497 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:32:09,497 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:32:09,498 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:32:09,498 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:32:09,498 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:32:09,499 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:32:09,499 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:32:09,499 - main - INFO - ================================================================================
2025-12-26 19:32:09,499 - main - INFO - 
2025-12-26 19:32:12,295 - main - INFO - 
2025-12-26 19:32:12,295 - main - INFO - ================================================================================
2025-12-26 19:32:12,295 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:32:12,295 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:32:12,296 - main - INFO - ================================================================================
2025-12-26 19:32:12,296 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:32:12,296 - main - INFO -   Upload Directory: uploads
2025-12-26 19:32:12,297 - main - INFO -   Max File Size: 20MB
2025-12-26 19:32:12,297 - main - INFO - ================================================================================
2025-12-26 19:32:12,297 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:32:12,298 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:32:12,298 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:32:12,313 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:32:12,319 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:32:12,319 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:32:12,320 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:32:12,320 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:32:12,320 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:32:12,348 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:32:12,349 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:32:12,351 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:32:12,353 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:32:12,354 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:32:12,354 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:32:12,354 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:32:12,355 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:32:12,379 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:32:12,380 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:32:12,380 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:32:12,409 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:32:12,412 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:32:12,413 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:32:12,413 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:32:12,442 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:32:12,445 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:32:12,445 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:32:12,446 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:32:12,446 - main - INFO - 
2025-12-26 19:32:12,446 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:32:12,446 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:32:12,446 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:32:12,447 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:32:12,447 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:32:12,447 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:32:12,447 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:32:12,448 - main - INFO - 
2025-12-26 19:32:12,448 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:32:12,448 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:32:12,448 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:32:12,448 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:32:12,449 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:32:12,449 - main - INFO - 
2025-12-26 19:32:12,449 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:32:12,449 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:32:12,449 - main - INFO -        - No manual section generation
2025-12-26 19:32:12,449 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:32:12,449 - main - INFO - 
2025-12-26 19:32:12,450 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:32:12,450 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:32:12,450 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:32:12,450 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:32:12,450 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:32:12,450 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:32:12,451 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:32:12,451 - main - INFO - 
2025-12-26 19:32:12,451 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:32:12,451 - main - INFO -      Main:
2025-12-26 19:32:12,451 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:32:12,451 - main - INFO - 
2025-12-26 19:32:12,452 - main - INFO -      Retrieval:
2025-12-26 19:32:12,452 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:32:12,452 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:32:12,452 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:32:12,453 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:32:12,453 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:32:12,453 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:32:12,453 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:32:12,453 - main - INFO - 
2025-12-26 19:32:12,454 - main - INFO -      Management:
2025-12-26 19:32:12,454 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:32:12,454 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:32:12,454 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:32:12,454 - main - INFO - 
2025-12-26 19:32:12,454 - main - INFO -      Documents (MongoDB):
2025-12-26 19:32:12,454 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:32:12,455 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:32:12,455 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:32:12,455 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:32:12,455 - main - INFO - 
2025-12-26 19:32:12,455 - main - INFO -      Diagnostics & Health:
2025-12-26 19:32:12,455 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:32:12,456 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:32:12,456 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:32:12,456 - main - INFO - 
2025-12-26 19:32:12,457 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:32:12,457 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:32:12,458 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:32:12,458 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:32:12,458 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:32:12,459 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:32:12,459 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:32:12,459 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:32:12,459 - main - INFO - 
2025-12-26 19:32:12,459 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:32:12,459 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:32:12,459 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:32:12,460 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:32:12,460 - main - INFO -      4. No re-upload needed!
2025-12-26 19:32:12,460 - main - INFO - 
2025-12-26 19:32:12,460 - main - INFO - ================================================================================
2025-12-26 19:32:12,460 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:32:12,460 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:32:12,461 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:32:12,461 - main - INFO - ================================================================================
2025-12-26 19:32:12,461 - main - INFO - 
2025-12-26 19:32:12,461 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:32:27,612 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:32:27,613 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:32:27,614 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:32:27,616 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:32:27,617 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:32:27,618 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:32:57,307 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:32:57,309 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:32:57,312 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:32:57,319 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:32:57,319 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:32:57,321 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:33:16,331 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:33:16,333 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:33:16,338 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:33:16,339 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:33:16,340 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:33:16,342 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:33:16,343 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:33:16,349 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:33:16,477 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:33:16,477 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:33:16,478 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:33:16,478 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:33:16,479 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:33:16,479 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:33:16,484 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:33:16,485 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:33:16,492 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:33:16,492 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:33:16,494 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:33:16,494 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:33:16,495 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:33:16,495 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:33:16,496 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:33:16,631 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:33:16,632 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_193316.pdf (130014 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_193316.pdf (145911 bytes)
2025-12-26 19:33:16,635 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.30s
2025-12-26 19:33:27,292 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:33:27,294 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:33:27,297 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:33:27,302 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:33:27,303 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:33:27,307 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:33:57,614 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:33:57,614 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:33:57,616 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:33:57,618 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:33:57,618 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:33:57,620 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:34:30,307 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:34:30,308 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:34:30,310 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:34:30,312 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:34:30,313 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:34:30,315 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:35:18,726 - main - INFO - 
2025-12-26 19:35:18,728 - main - INFO - ================================================================================
2025-12-26 19:35:18,730 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:35:18,737 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:18,738 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:35:18,744 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:18,746 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:35:18,747 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:35:18,749 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:35:18,750 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:35:18,752 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:35:18,754 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:35:18,755 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:35:18,756 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:35:18,756 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:35:18,756 - main - INFO - ================================================================================
2025-12-26 19:35:18,757 - main - INFO - 
2025-12-26 19:35:25,124 - main - INFO - 
2025-12-26 19:35:25,124 - main - INFO - ================================================================================
2025-12-26 19:35:25,124 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:35:25,124 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:35:25,125 - main - INFO - ================================================================================
2025-12-26 19:35:25,125 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:35:25,125 - main - INFO -   Upload Directory: uploads
2025-12-26 19:35:25,125 - main - INFO -   Max File Size: 20MB
2025-12-26 19:35:25,125 - main - INFO - ================================================================================
2025-12-26 19:35:25,126 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:35:25,126 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:35:25,127 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:25,149 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:35:25,160 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:35:25,160 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:35:25,161 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:35:25,161 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:35:25,161 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:35:25,173 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:35:25,175 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:35:25,176 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:35:25,178 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:35:25,178 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:35:25,179 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:35:25,179 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:25,179 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:35:25,190 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:35:25,190 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:35:25,191 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:35:25,198 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:35:25,205 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:35:25,206 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:35:25,206 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:35:25,215 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:35:25,226 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:35:25,226 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:35:25,226 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:35:25,227 - main - INFO - 
2025-12-26 19:35:25,227 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:35:25,227 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:35:25,227 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:35:25,227 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:35:25,228 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:35:25,228 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:35:25,228 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:35:25,228 - main - INFO - 
2025-12-26 19:35:25,228 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:35:25,229 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:35:25,229 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:35:25,229 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:35:25,229 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:35:25,229 - main - INFO - 
2025-12-26 19:35:25,229 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:35:25,230 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:35:25,230 - main - INFO -        - No manual section generation
2025-12-26 19:35:25,230 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:35:25,230 - main - INFO - 
2025-12-26 19:35:25,230 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:35:25,231 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:35:25,231 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:35:25,231 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:35:25,231 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:35:25,231 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:35:25,232 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:35:25,232 - main - INFO - 
2025-12-26 19:35:25,232 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:35:25,232 - main - INFO -      Main:
2025-12-26 19:35:25,233 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:35:25,233 - main - INFO - 
2025-12-26 19:35:25,233 - main - INFO -      Retrieval:
2025-12-26 19:35:25,233 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:35:25,234 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:35:25,234 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:35:25,235 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:35:25,235 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:35:25,236 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:35:25,236 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:35:25,236 - main - INFO - 
2025-12-26 19:35:25,236 - main - INFO -      Management:
2025-12-26 19:35:25,237 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:35:25,237 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:35:25,237 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:35:25,238 - main - INFO - 
2025-12-26 19:35:25,239 - main - INFO -      Documents (MongoDB):
2025-12-26 19:35:25,239 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:35:25,239 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:35:25,240 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:35:25,240 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:35:25,240 - main - INFO - 
2025-12-26 19:35:25,241 - main - INFO -      Diagnostics & Health:
2025-12-26 19:35:25,241 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:35:25,241 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:35:25,241 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:35:25,241 - main - INFO - 
2025-12-26 19:35:25,242 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:35:25,242 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:35:25,242 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:35:25,242 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:35:25,243 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:35:25,243 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:35:25,243 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:35:25,243 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:35:25,243 - main - INFO - 
2025-12-26 19:35:25,243 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:35:25,243 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:35:25,244 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:35:25,244 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:35:25,244 - main - INFO -      4. No re-upload needed!
2025-12-26 19:35:25,244 - main - INFO - 
2025-12-26 19:35:25,244 - main - INFO - ================================================================================
2025-12-26 19:35:25,244 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:35:25,245 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:35:25,245 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:35:25,245 - main - INFO - ================================================================================
2025-12-26 19:35:25,245 - main - INFO - 
2025-12-26 19:35:25,245 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:35:30,627 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:35:30,629 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:35:30,631 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:35:30,641 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:35:30,642 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:35:30,646 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:35:33,281 - main - INFO - 
2025-12-26 19:35:33,282 - main - INFO - ================================================================================
2025-12-26 19:35:33,282 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:35:33,283 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:33,284 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:35:33,288 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:33,290 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:35:33,291 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:35:33,292 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:35:33,293 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:35:33,293 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:35:33,295 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:35:33,295 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:35:33,296 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:35:33,296 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:35:33,297 - main - INFO - ================================================================================
2025-12-26 19:35:33,297 - main - INFO - 
2025-12-26 19:35:38,194 - main - INFO - 
2025-12-26 19:35:38,195 - main - INFO - ================================================================================
2025-12-26 19:35:38,195 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:35:38,195 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:35:38,195 - main - INFO - ================================================================================
2025-12-26 19:35:38,195 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:35:38,196 - main - INFO -   Upload Directory: uploads
2025-12-26 19:35:38,196 - main - INFO -   Max File Size: 20MB
2025-12-26 19:35:38,196 - main - INFO - ================================================================================
2025-12-26 19:35:38,196 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:35:38,197 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:35:38,197 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:38,217 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:35:38,228 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:35:38,228 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:35:38,228 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:35:38,229 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:35:38,229 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:35:38,274 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:35:38,275 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:35:38,276 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:35:38,278 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:35:38,278 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:35:38,279 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:35:38,279 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:38,279 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:35:38,304 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:35:38,304 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:35:38,305 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:35:38,348 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:35:38,354 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:35:38,354 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:35:38,355 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:35:38,378 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:35:38,382 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:35:38,382 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:35:38,382 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:35:38,382 - main - INFO - 
2025-12-26 19:35:38,383 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:35:38,383 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:35:38,383 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:35:38,383 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:35:38,383 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:35:38,384 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:35:38,384 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:35:38,384 - main - INFO - 
2025-12-26 19:35:38,385 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:35:38,385 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:35:38,385 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:35:38,385 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:35:38,385 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:35:38,386 - main - INFO - 
2025-12-26 19:35:38,386 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:35:38,386 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:35:38,386 - main - INFO -        - No manual section generation
2025-12-26 19:35:38,387 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:35:38,387 - main - INFO - 
2025-12-26 19:35:38,388 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:35:38,388 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:35:38,389 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:35:38,389 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:35:38,390 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:35:38,391 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:35:38,391 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:35:38,391 - main - INFO - 
2025-12-26 19:35:38,392 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:35:38,392 - main - INFO -      Main:
2025-12-26 19:35:38,392 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:35:38,392 - main - INFO - 
2025-12-26 19:35:38,392 - main - INFO -      Retrieval:
2025-12-26 19:35:38,393 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:35:38,393 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:35:38,393 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:35:38,393 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:35:38,394 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:35:38,394 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:35:38,394 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:35:38,394 - main - INFO - 
2025-12-26 19:35:38,394 - main - INFO -      Management:
2025-12-26 19:35:38,394 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:35:38,395 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:35:38,395 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:35:38,395 - main - INFO - 
2025-12-26 19:35:38,395 - main - INFO -      Documents (MongoDB):
2025-12-26 19:35:38,395 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:35:38,396 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:35:38,396 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:35:38,396 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:35:38,396 - main - INFO - 
2025-12-26 19:35:38,396 - main - INFO -      Diagnostics & Health:
2025-12-26 19:35:38,396 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:35:38,396 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:35:38,397 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:35:38,397 - main - INFO - 
2025-12-26 19:35:38,397 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:35:38,397 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:35:38,397 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:35:38,397 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:35:38,398 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:35:38,398 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:35:38,398 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:35:38,398 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:35:38,398 - main - INFO - 
2025-12-26 19:35:38,398 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:35:38,398 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:35:38,399 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:35:38,399 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:35:38,399 - main - INFO -      4. No re-upload needed!
2025-12-26 19:35:38,399 - main - INFO - 
2025-12-26 19:35:38,399 - main - INFO - ================================================================================
2025-12-26 19:35:38,399 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:35:38,400 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:35:38,401 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:35:38,402 - main - INFO - ================================================================================
2025-12-26 19:35:38,402 - main - INFO - 
2025-12-26 19:35:38,403 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:35:53,974 - main - INFO - 
2025-12-26 19:35:53,975 - main - INFO - ================================================================================
2025-12-26 19:35:53,975 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:35:53,977 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:53,978 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:35:53,979 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:35:53,980 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:35:53,981 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:35:53,981 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:35:53,982 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:35:53,983 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:35:53,986 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:35:53,987 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:35:53,988 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:35:53,989 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:35:53,990 - main - INFO - ================================================================================
2025-12-26 19:35:53,991 - main - INFO - 
2025-12-26 19:35:57,774 - main - INFO - 
2025-12-26 19:35:57,774 - main - INFO - ================================================================================
2025-12-26 19:35:57,775 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:35:57,775 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:35:57,775 - main - INFO - ================================================================================
2025-12-26 19:35:57,775 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:35:57,775 - main - INFO -   Upload Directory: uploads
2025-12-26 19:35:57,776 - main - INFO -   Max File Size: 20MB
2025-12-26 19:35:57,776 - main - INFO - ================================================================================
2025-12-26 19:35:57,776 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:35:57,776 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:35:57,777 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:57,809 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:35:57,814 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:35:57,814 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:35:57,814 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:35:57,815 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:35:57,815 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:35:57,841 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:35:57,842 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:35:57,843 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:35:57,844 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:35:57,845 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:35:57,845 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:35:57,845 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:35:57,845 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:35:57,874 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:35:57,875 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:35:57,875 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:35:57,910 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:35:57,917 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:35:57,917 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:35:57,917 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:35:57,948 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:35:57,953 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:35:57,954 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:35:57,954 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:35:57,955 - main - INFO - 
2025-12-26 19:35:57,956 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:35:57,957 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:35:57,958 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:35:57,958 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:35:57,959 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:35:57,959 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:35:57,959 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:35:57,959 - main - INFO - 
2025-12-26 19:35:57,960 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:35:57,960 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:35:57,960 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:35:57,960 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:35:57,960 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:35:57,961 - main - INFO - 
2025-12-26 19:35:57,961 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:35:57,961 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:35:57,961 - main - INFO -        - No manual section generation
2025-12-26 19:35:57,961 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:35:57,962 - main - INFO - 
2025-12-26 19:35:57,962 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:35:57,962 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:35:57,962 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:35:57,962 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:35:57,963 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:35:57,963 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:35:57,963 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:35:57,963 - main - INFO - 
2025-12-26 19:35:57,963 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:35:57,964 - main - INFO -      Main:
2025-12-26 19:35:57,964 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:35:57,964 - main - INFO - 
2025-12-26 19:35:57,964 - main - INFO -      Retrieval:
2025-12-26 19:35:57,964 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:35:57,965 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:35:57,965 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:35:57,965 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:35:57,965 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:35:57,965 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:35:57,966 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:35:57,966 - main - INFO - 
2025-12-26 19:35:57,966 - main - INFO -      Management:
2025-12-26 19:35:57,966 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:35:57,966 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:35:57,967 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:35:57,967 - main - INFO - 
2025-12-26 19:35:57,967 - main - INFO -      Documents (MongoDB):
2025-12-26 19:35:57,967 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:35:57,968 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:35:57,968 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:35:57,968 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:35:57,968 - main - INFO - 
2025-12-26 19:35:57,969 - main - INFO -      Diagnostics & Health:
2025-12-26 19:35:57,969 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:35:57,969 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:35:57,969 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:35:57,970 - main - INFO - 
2025-12-26 19:35:57,970 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:35:57,970 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:35:57,971 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:35:57,971 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:35:57,971 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:35:57,972 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:35:57,972 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:35:57,973 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:35:57,973 - main - INFO - 
2025-12-26 19:35:57,973 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:35:57,974 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:35:57,974 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:35:57,974 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:35:57,975 - main - INFO -      4. No re-upload needed!
2025-12-26 19:35:57,975 - main - INFO - 
2025-12-26 19:35:57,976 - main - INFO - ================================================================================
2025-12-26 19:35:57,976 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:35:57,976 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:35:57,976 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:35:57,977 - main - INFO - ================================================================================
2025-12-26 19:35:57,977 - main - INFO - 
2025-12-26 19:35:57,977 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:36:08,285 - main - INFO - 
2025-12-26 19:36:08,286 - main - INFO - ================================================================================
2025-12-26 19:36:08,286 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:36:08,287 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:36:08,288 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:36:08,289 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:36:08,289 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:36:08,290 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:36:08,290 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:36:08,292 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:36:08,292 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:36:08,293 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:36:08,293 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:36:08,294 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:36:08,294 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:36:08,294 - main - INFO - ================================================================================
2025-12-26 19:36:08,294 - main - INFO - 
2025-12-26 19:36:11,989 - main - INFO - 
2025-12-26 19:36:11,989 - main - INFO - ================================================================================
2025-12-26 19:36:11,990 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:36:11,990 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:36:11,990 - main - INFO - ================================================================================
2025-12-26 19:36:11,990 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:36:11,991 - main - INFO -   Upload Directory: uploads
2025-12-26 19:36:11,991 - main - INFO -   Max File Size: 20MB
2025-12-26 19:36:11,991 - main - INFO - ================================================================================
2025-12-26 19:36:11,992 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:36:11,992 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:36:11,992 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:36:12,042 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:36:12,047 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:36:12,047 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:36:12,048 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:36:12,048 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:36:12,048 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:36:12,072 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:36:12,074 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:36:12,077 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:36:12,079 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:36:12,079 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:36:12,080 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:36:12,080 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:36:12,080 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:36:12,088 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:36:12,088 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:36:12,089 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:36:12,136 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:36:12,139 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:36:12,139 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:36:12,140 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:36:12,170 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:36:12,176 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:36:12,176 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:36:12,176 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:36:12,176 - main - INFO - 
2025-12-26 19:36:12,177 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:36:12,177 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:36:12,177 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:36:12,177 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:36:12,177 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:36:12,178 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:36:12,178 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:36:12,178 - main - INFO - 
2025-12-26 19:36:12,178 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:36:12,178 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:36:12,178 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:36:12,179 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:36:12,179 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:36:12,179 - main - INFO - 
2025-12-26 19:36:12,179 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:36:12,179 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:36:12,180 - main - INFO -        - No manual section generation
2025-12-26 19:36:12,180 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:36:12,180 - main - INFO - 
2025-12-26 19:36:12,180 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:36:12,180 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:36:12,181 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:36:12,181 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:36:12,181 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:36:12,181 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:36:12,182 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:36:12,182 - main - INFO - 
2025-12-26 19:36:12,182 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:36:12,182 - main - INFO -      Main:
2025-12-26 19:36:12,182 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:36:12,183 - main - INFO - 
2025-12-26 19:36:12,183 - main - INFO -      Retrieval:
2025-12-26 19:36:12,183 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:36:12,183 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:36:12,183 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:36:12,184 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:36:12,185 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:36:12,185 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:36:12,186 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:36:12,186 - main - INFO - 
2025-12-26 19:36:12,186 - main - INFO -      Management:
2025-12-26 19:36:12,187 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:36:12,187 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:36:12,188 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:36:12,188 - main - INFO - 
2025-12-26 19:36:12,189 - main - INFO -      Documents (MongoDB):
2025-12-26 19:36:12,189 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:36:12,189 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:36:12,189 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:36:12,190 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:36:12,190 - main - INFO - 
2025-12-26 19:36:12,190 - main - INFO -      Diagnostics & Health:
2025-12-26 19:36:12,190 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:36:12,191 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:36:12,192 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:36:12,192 - main - INFO - 
2025-12-26 19:36:12,193 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:36:12,193 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:36:12,193 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:36:12,194 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:36:12,194 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:36:12,194 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:36:12,194 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:36:12,194 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:36:12,194 - main - INFO - 
2025-12-26 19:36:12,195 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:36:12,195 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:36:12,195 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:36:12,195 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:36:12,195 - main - INFO -      4. No re-upload needed!
2025-12-26 19:36:12,196 - main - INFO - 
2025-12-26 19:36:12,196 - main - INFO - ================================================================================
2025-12-26 19:36:12,196 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:36:12,196 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:36:12,196 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:36:12,196 - main - INFO - ================================================================================
2025-12-26 19:36:12,197 - main - INFO - 
2025-12-26 19:36:12,197 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:36:20,770 - main - INFO - 
2025-12-26 19:36:20,770 - main - INFO - ================================================================================
2025-12-26 19:36:20,770 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:36:20,771 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:36:20,771 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:36:20,772 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:36:20,772 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:36:20,773 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:36:20,773 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:36:20,774 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:36:20,774 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:36:20,775 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:36:20,775 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:36:20,775 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:36:20,775 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:36:20,776 - main - INFO - ================================================================================
2025-12-26 19:36:20,776 - main - INFO - 
2025-12-26 19:36:24,257 - main - INFO - 
2025-12-26 19:36:24,257 - main - INFO - ================================================================================
2025-12-26 19:36:24,258 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:36:24,258 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:36:24,258 - main - INFO - ================================================================================
2025-12-26 19:36:24,258 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:36:24,258 - main - INFO -   Upload Directory: uploads
2025-12-26 19:36:24,259 - main - INFO -   Max File Size: 20MB
2025-12-26 19:36:24,259 - main - INFO - ================================================================================
2025-12-26 19:36:24,259 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:36:24,260 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:36:24,260 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:36:24,296 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:36:24,304 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:36:24,304 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:36:24,304 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:36:24,304 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:36:24,305 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:36:24,328 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:36:24,329 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:36:24,330 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:36:24,332 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:36:24,332 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:36:24,332 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:36:24,333 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:36:24,333 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:36:24,343 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:36:24,344 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:36:24,344 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:36:24,375 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:36:24,378 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:36:24,378 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:36:24,378 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:36:24,406 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:36:24,410 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:36:24,410 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:36:24,410 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:36:24,410 - main - INFO - 
2025-12-26 19:36:24,411 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:36:24,411 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:36:24,411 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:36:24,411 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:36:24,411 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:36:24,412 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:36:24,412 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:36:24,412 - main - INFO - 
2025-12-26 19:36:24,412 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:36:24,412 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:36:24,413 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:36:24,413 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:36:24,413 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:36:24,413 - main - INFO - 
2025-12-26 19:36:24,413 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:36:24,413 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:36:24,414 - main - INFO -        - No manual section generation
2025-12-26 19:36:24,414 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:36:24,414 - main - INFO - 
2025-12-26 19:36:24,414 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:36:24,414 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:36:24,414 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:36:24,414 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:36:24,415 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:36:24,415 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:36:24,415 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:36:24,415 - main - INFO - 
2025-12-26 19:36:24,415 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:36:24,415 - main - INFO -      Main:
2025-12-26 19:36:24,416 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:36:24,416 - main - INFO - 
2025-12-26 19:36:24,416 - main - INFO -      Retrieval:
2025-12-26 19:36:24,416 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:36:24,416 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:36:24,416 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:36:24,416 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:36:24,417 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:36:24,417 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:36:24,418 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:36:24,418 - main - INFO - 
2025-12-26 19:36:24,418 - main - INFO -      Management:
2025-12-26 19:36:24,419 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:36:24,419 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:36:24,419 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:36:24,419 - main - INFO - 
2025-12-26 19:36:24,420 - main - INFO -      Documents (MongoDB):
2025-12-26 19:36:24,420 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:36:24,420 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:36:24,420 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:36:24,420 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:36:24,421 - main - INFO - 
2025-12-26 19:36:24,421 - main - INFO -      Diagnostics & Health:
2025-12-26 19:36:24,421 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:36:24,422 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:36:24,423 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:36:24,423 - main - INFO - 
2025-12-26 19:36:24,423 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:36:24,423 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:36:24,424 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:36:24,425 - main - INFO - 
2025-12-26 19:36:24,425 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:36:24,425 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:36:24,425 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:36:24,425 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:36:24,426 - main - INFO -      4. No re-upload needed!
2025-12-26 19:36:24,426 - main - INFO - 
2025-12-26 19:36:24,426 - main - INFO - ================================================================================
2025-12-26 19:36:24,426 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:36:24,426 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:36:24,426 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:36:24,426 - main - INFO - ================================================================================
2025-12-26 19:36:24,427 - main - INFO - 
2025-12-26 19:36:24,427 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:36:30,626 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:36:30,628 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:36:30,630 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:36:30,634 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:36:30,635 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:36:30,639 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:36:54,719 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:36:54,719 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:36:54,721 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:36:54,722 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:36:54,722 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:36:54,723 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:36:54,723 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:36:54,725 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:36:54,848 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:36:54,848 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:36:54,849 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:36:54,849 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:36:54,850 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:36:54,850 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:36:54,856 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:36:54,856 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:36:54,862 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:36:54,863 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:36:54,864 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:36:54,864 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:36:54,865 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:36:54,865 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:36:54,867 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:36:55,019 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:36:55,020 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_193654.pdf (130014 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_193654.pdf (146102 bytes)
2025-12-26 19:36:55,023 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.30s
2025-12-26 19:36:56,553 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:36:56,554 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:36:56,555 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:36:56,557 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:36:56,557 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:36:56,558 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:37:27,617 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:37:27,618 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 19:37:27,624 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:37:27,625 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:37:27,626 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:37:27,629 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:37:27,629 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:37:27,631 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:37:57,291 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:37:57,292 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:37:57,293 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:37:57,295 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:37:57,295 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:37:57,297 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:38:26,973 - main - INFO - 
2025-12-26 19:38:26,974 - main - INFO - ================================================================================
2025-12-26 19:38:26,974 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:38:26,976 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:26,976 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:38:26,978 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:26,979 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:38:26,980 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:38:26,981 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:38:26,983 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:38:26,984 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:38:26,985 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:38:26,986 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:38:26,987 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:38:26,989 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:38:26,990 - main - INFO - ================================================================================
2025-12-26 19:38:26,990 - main - INFO - 
2025-12-26 19:38:33,415 - main - INFO - 
2025-12-26 19:38:33,415 - main - INFO - ================================================================================
2025-12-26 19:38:33,416 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:38:33,416 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:38:33,417 - main - INFO - ================================================================================
2025-12-26 19:38:33,419 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:38:33,420 - main - INFO -   Upload Directory: uploads
2025-12-26 19:38:33,421 - main - INFO -   Max File Size: 20MB
2025-12-26 19:38:33,421 - main - INFO - ================================================================================
2025-12-26 19:38:33,424 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:38:33,427 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:38:33,427 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:38:33,451 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:38:33,460 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:38:33,461 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:38:33,461 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:38:33,461 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:38:33,461 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:38:33,471 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:38:33,473 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:38:33,474 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:38:33,476 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:38:33,476 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:38:33,477 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:38:33,477 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:38:33,477 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:38:33,488 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:38:33,488 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:38:33,489 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:38:33,497 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:38:33,499 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:38:33,499 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:38:33,499 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:38:33,511 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:38:33,514 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:38:33,515 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:38:33,515 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:38:33,515 - main - INFO - 
2025-12-26 19:38:33,515 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:38:33,516 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:38:33,516 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:38:33,516 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:38:33,516 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:38:33,517 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:38:33,519 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:38:33,520 - main - INFO - 
2025-12-26 19:38:33,520 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:38:33,521 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:38:33,521 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:38:33,522 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:38:33,522 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:38:33,523 - main - INFO - 
2025-12-26 19:38:33,523 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:38:33,523 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:38:33,523 - main - INFO -        - No manual section generation
2025-12-26 19:38:33,524 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:38:33,524 - main - INFO - 
2025-12-26 19:38:33,524 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:38:33,524 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:38:33,524 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:38:33,525 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:38:33,525 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:38:33,525 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:38:33,525 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:38:33,525 - main - INFO - 
2025-12-26 19:38:33,526 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:38:33,526 - main - INFO -      Main:
2025-12-26 19:38:33,526 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:38:33,526 - main - INFO - 
2025-12-26 19:38:33,526 - main - INFO -      Retrieval:
2025-12-26 19:38:33,526 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:38:33,527 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:38:33,527 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:38:33,527 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:38:33,527 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:38:33,527 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:38:33,527 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:38:33,528 - main - INFO - 
2025-12-26 19:38:33,528 - main - INFO -      Management:
2025-12-26 19:38:33,528 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:38:33,528 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:38:33,528 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:38:33,529 - main - INFO - 
2025-12-26 19:38:33,529 - main - INFO -      Documents (MongoDB):
2025-12-26 19:38:33,529 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:38:33,529 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:38:33,529 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:38:33,529 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:38:33,530 - main - INFO - 
2025-12-26 19:38:33,530 - main - INFO -      Diagnostics & Health:
2025-12-26 19:38:33,530 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:38:33,530 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:38:33,530 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:38:33,530 - main - INFO - 
2025-12-26 19:38:33,531 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:38:33,531 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:38:33,531 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:38:33,531 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:38:33,532 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:38:33,532 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:38:33,532 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:38:33,532 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:38:33,532 - main - INFO - 
2025-12-26 19:38:33,532 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:38:33,533 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:38:33,533 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:38:33,533 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:38:33,534 - main - INFO -      4. No re-upload needed!
2025-12-26 19:38:33,535 - main - INFO - 
2025-12-26 19:38:33,536 - main - INFO - ================================================================================
2025-12-26 19:38:33,537 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:38:33,537 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:38:33,538 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:38:33,538 - main - INFO - ================================================================================
2025-12-26 19:38:33,540 - main - INFO - 
2025-12-26 19:38:33,540 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:38:33,596 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:38:33,597 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:38:33,598 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:38:33,603 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:38:33,603 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:38:33,606 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:38:48,090 - main - INFO - 
2025-12-26 19:38:48,110 - main - INFO - ================================================================================
2025-12-26 19:38:48,111 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:38:48,112 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:48,113 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:38:48,115 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:48,127 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:38:48,129 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:38:48,151 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:38:48,162 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:38:48,169 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:38:48,172 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:38:48,199 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:38:48,200 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:38:48,203 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:38:48,203 - main - INFO - ================================================================================
2025-12-26 19:38:48,203 - main - INFO - 
2025-12-26 19:38:53,073 - main - INFO - 
2025-12-26 19:38:53,074 - main - INFO - ================================================================================
2025-12-26 19:38:53,074 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:38:53,074 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:38:53,074 - main - INFO - ================================================================================
2025-12-26 19:38:53,074 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:38:53,075 - main - INFO -   Upload Directory: uploads
2025-12-26 19:38:53,075 - main - INFO -   Max File Size: 20MB
2025-12-26 19:38:53,075 - main - INFO - ================================================================================
2025-12-26 19:38:53,075 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:38:53,076 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:38:53,076 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:38:53,097 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:38:53,108 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:38:53,108 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:38:53,108 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:38:53,109 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:38:53,109 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:38:53,133 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:38:53,135 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:38:53,138 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:38:53,142 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:38:53,143 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:38:53,143 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:38:53,144 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:38:53,144 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:38:53,152 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:38:53,153 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:38:53,153 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:38:53,162 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:38:53,165 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:38:53,165 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:38:53,165 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:38:53,195 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:38:53,202 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:38:53,203 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:38:53,203 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:38:53,204 - main - INFO - 
2025-12-26 19:38:53,205 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:38:53,206 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:38:53,207 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:38:53,207 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:38:53,207 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:38:53,208 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:38:53,208 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:38:53,208 - main - INFO - 
2025-12-26 19:38:53,209 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:38:53,209 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:38:53,209 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:38:53,209 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:38:53,210 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:38:53,210 - main - INFO - 
2025-12-26 19:38:53,210 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:38:53,210 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:38:53,211 - main - INFO -        - No manual section generation
2025-12-26 19:38:53,211 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:38:53,211 - main - INFO - 
2025-12-26 19:38:53,211 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:38:53,212 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:38:53,212 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:38:53,212 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:38:53,212 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:38:53,212 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:38:53,212 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:38:53,213 - main - INFO - 
2025-12-26 19:38:53,213 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:38:53,213 - main - INFO -      Main:
2025-12-26 19:38:53,213 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:38:53,213 - main - INFO - 
2025-12-26 19:38:53,213 - main - INFO -      Retrieval:
2025-12-26 19:38:53,214 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:38:53,214 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:38:53,214 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:38:53,214 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:38:53,214 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:38:53,214 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:38:53,215 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:38:53,215 - main - INFO - 
2025-12-26 19:38:53,215 - main - INFO -      Management:
2025-12-26 19:38:53,215 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:38:53,215 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:38:53,215 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:38:53,216 - main - INFO - 
2025-12-26 19:38:53,216 - main - INFO -      Documents (MongoDB):
2025-12-26 19:38:53,216 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:38:53,216 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:38:53,216 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:38:53,216 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:38:53,217 - main - INFO - 
2025-12-26 19:38:53,217 - main - INFO -      Diagnostics & Health:
2025-12-26 19:38:53,217 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:38:53,217 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:38:53,217 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:38:53,217 - main - INFO - 
2025-12-26 19:38:53,218 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:38:53,218 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:38:53,218 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:38:53,218 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:38:53,218 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:38:53,218 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:38:53,219 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:38:53,219 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:38:53,219 - main - INFO - 
2025-12-26 19:38:53,219 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:38:53,220 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:38:53,220 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:38:53,220 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:38:53,221 - main - INFO -      4. No re-upload needed!
2025-12-26 19:38:53,221 - main - INFO - 
2025-12-26 19:38:53,221 - main - INFO - ================================================================================
2025-12-26 19:38:53,222 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:38:53,223 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:38:53,223 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:38:53,224 - main - INFO - ================================================================================
2025-12-26 19:38:53,224 - main - INFO - 
2025-12-26 19:38:53,224 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:38:59,064 - main - INFO - 
2025-12-26 19:38:59,064 - main - INFO - ================================================================================
2025-12-26 19:38:59,065 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:38:59,065 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:59,065 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:38:59,066 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:38:59,066 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:38:59,067 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:38:59,067 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:38:59,068 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:38:59,068 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:38:59,069 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:38:59,069 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:38:59,070 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:38:59,070 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:38:59,070 - main - INFO - ================================================================================
2025-12-26 19:38:59,070 - main - INFO - 
2025-12-26 19:39:02,228 - main - INFO - 
2025-12-26 19:39:02,228 - main - INFO - ================================================================================
2025-12-26 19:39:02,228 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:39:02,229 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:39:02,229 - main - INFO - ================================================================================
2025-12-26 19:39:02,229 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:39:02,229 - main - INFO -   Upload Directory: uploads
2025-12-26 19:39:02,230 - main - INFO -   Max File Size: 20MB
2025-12-26 19:39:02,230 - main - INFO - ================================================================================
2025-12-26 19:39:02,230 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:39:02,231 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:39:02,231 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:39:02,249 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:39:02,260 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:39:02,260 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:39:02,260 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:39:02,260 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:39:02,261 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:39:02,270 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:39:02,272 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:39:02,273 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:39:02,278 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:39:02,278 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:39:02,278 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:39:02,278 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:39:02,279 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:39:02,287 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:39:02,287 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:39:02,288 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:39:02,298 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:39:02,300 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:39:02,302 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:39:02,302 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:39:02,346 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:39:02,353 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:39:02,354 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:39:02,354 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:39:02,355 - main - INFO - 
2025-12-26 19:39:02,355 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:39:02,356 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:39:02,356 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:39:02,357 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:39:02,357 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:39:02,357 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:39:02,357 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:39:02,358 - main - INFO - 
2025-12-26 19:39:02,358 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:39:02,358 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:39:02,358 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:39:02,359 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:39:02,359 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:39:02,359 - main - INFO - 
2025-12-26 19:39:02,359 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:39:02,359 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:39:02,359 - main - INFO -        - No manual section generation
2025-12-26 19:39:02,360 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:39:02,360 - main - INFO - 
2025-12-26 19:39:02,360 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:39:02,360 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:39:02,360 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:39:02,360 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:39:02,361 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:39:02,361 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:39:02,361 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:39:02,361 - main - INFO - 
2025-12-26 19:39:02,361 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:39:02,361 - main - INFO -      Main:
2025-12-26 19:39:02,362 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:39:02,362 - main - INFO - 
2025-12-26 19:39:02,362 - main - INFO -      Retrieval:
2025-12-26 19:39:02,362 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:39:02,362 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:39:02,362 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:39:02,362 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:39:02,363 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:39:02,363 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:39:02,363 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:39:02,363 - main - INFO - 
2025-12-26 19:39:02,363 - main - INFO -      Management:
2025-12-26 19:39:02,363 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:39:02,364 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:39:02,364 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:39:02,364 - main - INFO - 
2025-12-26 19:39:02,364 - main - INFO -      Documents (MongoDB):
2025-12-26 19:39:02,364 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:39:02,364 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:39:02,364 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:39:02,365 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:39:02,365 - main - INFO - 
2025-12-26 19:39:02,365 - main - INFO -      Diagnostics & Health:
2025-12-26 19:39:02,365 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:39:02,365 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:39:02,365 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:39:02,366 - main - INFO - 
2025-12-26 19:39:02,366 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:39:02,366 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:39:02,366 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:39:02,366 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:39:02,366 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:39:02,366 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:39:02,367 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:39:02,367 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:39:02,367 - main - INFO - 
2025-12-26 19:39:02,368 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:39:02,368 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:39:02,369 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:39:02,369 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:39:02,369 - main - INFO -      4. No re-upload needed!
2025-12-26 19:39:02,369 - main - INFO - 
2025-12-26 19:39:02,369 - main - INFO - ================================================================================
2025-12-26 19:39:02,370 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:39:02,370 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:39:02,370 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:39:02,370 - main - INFO - ================================================================================
2025-12-26 19:39:02,371 - main - INFO - 
2025-12-26 19:39:02,371 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:39:07,435 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:39:07,437 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:39:07,439 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:39:07,444 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:39:07,444 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:39:07,446 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:39:08,206 - main - INFO - ğŸ“¥ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:39:08,206 - main - INFO - ğŸ“¤ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.00s
2025-12-26 19:39:08,209 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:39:08,209 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:39:08,211 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:39:08,212 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:39:08,212 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:39:08,213 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:39:08,213 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:39:08,215 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:39:08,334 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:39:08,335 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:39:08,335 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:39:08,335 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:39:08,336 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:39:08,336 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:39:08,343 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:39:08,343 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:39:08,348 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:39:08,349 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:39:08,350 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:39:08,351 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:39:08,352 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:39:08,352 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:39:08,354 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:39:08,516 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:39:08,518 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_193908.pdf (129950 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_193908.pdf (149022 bytes)
2025-12-26 19:39:08,521 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.31s
2025-12-26 19:39:27,309 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:39:27,310 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:39:27,312 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:39:27,314 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:39:27,314 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:39:27,317 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:39:57,607 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:39:57,608 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:39:57,609 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:39:57,612 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:39:57,612 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:39:57,614 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:40:16,101 - main - INFO - 
2025-12-26 19:40:16,101 - main - INFO - ================================================================================
2025-12-26 19:40:16,102 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:40:16,103 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:16,104 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:40:16,107 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:16,108 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:40:16,111 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:40:16,112 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:40:16,113 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:40:16,113 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:40:16,114 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:40:16,114 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:40:16,115 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:40:16,116 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:40:16,116 - main - INFO - ================================================================================
2025-12-26 19:40:16,116 - main - INFO - 
2025-12-26 19:40:21,656 - main - INFO - 
2025-12-26 19:40:21,656 - main - INFO - ================================================================================
2025-12-26 19:40:21,657 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:40:21,657 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:40:21,658 - main - INFO - ================================================================================
2025-12-26 19:40:21,658 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:40:21,658 - main - INFO -   Upload Directory: uploads
2025-12-26 19:40:21,658 - main - INFO -   Max File Size: 20MB
2025-12-26 19:40:21,659 - main - INFO - ================================================================================
2025-12-26 19:40:21,659 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:40:21,659 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:40:21,660 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:21,699 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:40:21,710 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:40:21,710 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:40:21,711 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:40:21,711 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:40:21,711 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:40:21,722 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:40:21,723 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:40:21,725 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:40:21,727 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:40:21,727 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:40:21,727 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:40:21,728 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:21,728 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:40:21,739 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:40:21,740 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:40:21,740 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:40:21,747 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:40:21,750 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:40:21,751 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:40:21,752 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:40:21,761 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:40:21,765 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:40:21,766 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:40:21,766 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:40:21,766 - main - INFO - 
2025-12-26 19:40:21,766 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:40:21,767 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:40:21,767 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:40:21,768 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:40:21,769 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:40:21,769 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:40:21,770 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:40:21,770 - main - INFO - 
2025-12-26 19:40:21,770 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:40:21,771 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:40:21,771 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:40:21,771 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:40:21,771 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:40:21,772 - main - INFO - 
2025-12-26 19:40:21,772 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:40:21,772 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:40:21,772 - main - INFO -        - No manual section generation
2025-12-26 19:40:21,773 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:40:21,773 - main - INFO - 
2025-12-26 19:40:21,773 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:40:21,773 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:40:21,774 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:40:21,774 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:40:21,774 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:40:21,775 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:40:21,775 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:40:21,775 - main - INFO - 
2025-12-26 19:40:21,775 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:40:21,775 - main - INFO -      Main:
2025-12-26 19:40:21,775 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:40:21,776 - main - INFO - 
2025-12-26 19:40:21,776 - main - INFO -      Retrieval:
2025-12-26 19:40:21,776 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:40:21,776 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:40:21,776 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:40:21,777 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:40:21,777 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:40:21,777 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:40:21,777 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:40:21,777 - main - INFO - 
2025-12-26 19:40:21,777 - main - INFO -      Management:
2025-12-26 19:40:21,778 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:40:21,778 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:40:21,778 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:40:21,778 - main - INFO - 
2025-12-26 19:40:21,778 - main - INFO -      Documents (MongoDB):
2025-12-26 19:40:21,778 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:40:21,778 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:40:21,779 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:40:21,779 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:40:21,779 - main - INFO - 
2025-12-26 19:40:21,779 - main - INFO -      Diagnostics & Health:
2025-12-26 19:40:21,779 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:40:21,779 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:40:21,779 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:40:21,780 - main - INFO - 
2025-12-26 19:40:21,780 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:40:21,780 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:40:21,780 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:40:21,780 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:40:21,780 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:40:21,781 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:40:21,781 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:40:21,781 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:40:21,781 - main - INFO - 
2025-12-26 19:40:21,781 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:40:21,781 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:40:21,782 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:40:21,782 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:40:21,782 - main - INFO -      4. No re-upload needed!
2025-12-26 19:40:21,782 - main - INFO - 
2025-12-26 19:40:21,782 - main - INFO - ================================================================================
2025-12-26 19:40:21,782 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:40:21,782 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:40:21,783 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:40:21,783 - main - INFO - ================================================================================
2025-12-26 19:40:21,783 - main - INFO - 
2025-12-26 19:40:21,783 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:40:26,115 - main - INFO - 
2025-12-26 19:40:26,116 - main - INFO - ================================================================================
2025-12-26 19:40:26,117 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:40:26,120 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:26,122 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:40:26,129 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:26,131 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:40:26,133 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:40:26,134 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:40:26,138 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:40:26,141 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:40:26,142 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:40:26,143 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:40:26,143 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:40:26,144 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:40:26,144 - main - INFO - ================================================================================
2025-12-26 19:40:26,144 - main - INFO - 
2025-12-26 19:40:31,514 - main - INFO - 
2025-12-26 19:40:31,514 - main - INFO - ================================================================================
2025-12-26 19:40:31,514 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:40:31,514 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:40:31,514 - main - INFO - ================================================================================
2025-12-26 19:40:31,515 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:40:31,515 - main - INFO -   Upload Directory: uploads
2025-12-26 19:40:31,515 - main - INFO -   Max File Size: 20MB
2025-12-26 19:40:31,515 - main - INFO - ================================================================================
2025-12-26 19:40:31,516 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:40:31,516 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:40:31,516 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:31,543 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:40:31,548 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:40:31,548 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:40:31,548 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:40:31,548 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:40:31,548 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:40:31,561 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:40:31,562 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:40:31,564 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:40:31,566 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:40:31,566 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:40:31,567 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:40:31,568 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:31,570 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:40:31,605 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:40:31,606 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:40:31,606 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:40:31,614 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:40:31,616 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:40:31,616 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:40:31,617 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:40:31,646 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:40:31,650 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:40:31,650 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:40:31,652 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:40:31,654 - main - INFO - 
2025-12-26 19:40:31,654 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:40:31,654 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:40:31,654 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:40:31,655 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:40:31,655 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:40:31,656 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:40:31,656 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:40:31,656 - main - INFO - 
2025-12-26 19:40:31,657 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:40:31,657 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:40:31,657 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:40:31,657 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:40:31,657 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:40:31,658 - main - INFO - 
2025-12-26 19:40:31,658 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:40:31,658 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:40:31,658 - main - INFO -        - No manual section generation
2025-12-26 19:40:31,658 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:40:31,659 - main - INFO - 
2025-12-26 19:40:31,659 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:40:31,659 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:40:31,659 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:40:31,659 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:40:31,660 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:40:31,660 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:40:31,660 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:40:31,660 - main - INFO - 
2025-12-26 19:40:31,660 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:40:31,661 - main - INFO -      Main:
2025-12-26 19:40:31,661 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:40:31,661 - main - INFO - 
2025-12-26 19:40:31,661 - main - INFO -      Retrieval:
2025-12-26 19:40:31,662 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:40:31,662 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:40:31,662 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:40:31,662 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:40:31,663 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:40:31,663 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:40:31,663 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:40:31,663 - main - INFO - 
2025-12-26 19:40:31,663 - main - INFO -      Management:
2025-12-26 19:40:31,663 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:40:31,664 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:40:31,664 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:40:31,664 - main - INFO - 
2025-12-26 19:40:31,664 - main - INFO -      Documents (MongoDB):
2025-12-26 19:40:31,664 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:40:31,664 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:40:31,665 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:40:31,665 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:40:31,665 - main - INFO - 
2025-12-26 19:40:31,665 - main - INFO -      Diagnostics & Health:
2025-12-26 19:40:31,665 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:40:31,665 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:40:31,666 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:40:31,666 - main - INFO - 
2025-12-26 19:40:31,666 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:40:31,666 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:40:31,667 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:40:31,668 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:40:31,669 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:40:31,670 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:40:31,670 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:40:31,671 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:40:31,671 - main - INFO - 
2025-12-26 19:40:31,671 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:40:31,672 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:40:31,672 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:40:31,672 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:40:31,673 - main - INFO -      4. No re-upload needed!
2025-12-26 19:40:31,673 - main - INFO - 
2025-12-26 19:40:31,673 - main - INFO - ================================================================================
2025-12-26 19:40:31,673 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:40:31,674 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:40:31,674 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:40:31,674 - main - INFO - ================================================================================
2025-12-26 19:40:31,674 - main - INFO - 
2025-12-26 19:40:31,675 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:40:31,727 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:40:31,728 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:40:31,729 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:40:31,732 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:40:31,732 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:40:31,735 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:40:43,086 - main - INFO - 
2025-12-26 19:40:43,086 - main - INFO - ================================================================================
2025-12-26 19:40:43,087 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:40:43,089 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:43,089 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:40:43,091 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:40:43,092 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:40:43,093 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:40:43,094 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:40:43,096 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:40:43,097 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:40:43,098 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:40:43,099 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:40:43,099 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:40:43,101 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:40:43,103 - main - INFO - ================================================================================
2025-12-26 19:40:43,103 - main - INFO - 
2025-12-26 19:40:46,887 - main - INFO - 
2025-12-26 19:40:46,887 - main - INFO - ================================================================================
2025-12-26 19:40:46,888 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:40:46,888 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:40:46,888 - main - INFO - ================================================================================
2025-12-26 19:40:46,888 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:40:46,889 - main - INFO -   Upload Directory: uploads
2025-12-26 19:40:46,889 - main - INFO -   Max File Size: 20MB
2025-12-26 19:40:46,889 - main - INFO - ================================================================================
2025-12-26 19:40:46,889 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:40:46,890 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:40:46,890 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:46,906 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:40:46,915 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:40:46,915 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:40:46,916 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:40:46,916 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:40:46,916 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:40:46,958 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:40:46,959 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:40:46,960 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:40:46,961 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:40:46,962 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:40:46,962 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:40:46,962 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:40:46,962 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:40:46,991 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:40:46,992 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:40:46,992 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:40:47,035 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:40:47,040 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:40:47,040 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:40:47,041 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:40:47,073 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:40:47,084 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:40:47,085 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:40:47,085 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:40:47,086 - main - INFO - 
2025-12-26 19:40:47,086 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:40:47,086 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:40:47,087 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:40:47,087 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:40:47,088 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:40:47,089 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:40:47,089 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:40:47,090 - main - INFO - 
2025-12-26 19:40:47,091 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:40:47,092 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:40:47,093 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:40:47,094 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:40:47,095 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:40:47,095 - main - INFO - 
2025-12-26 19:40:47,095 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:40:47,095 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:40:47,101 - main - INFO -        - No manual section generation
2025-12-26 19:40:47,101 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:40:47,102 - main - INFO - 
2025-12-26 19:40:47,102 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:40:47,103 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:40:47,103 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:40:47,104 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:40:47,104 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:40:47,105 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:40:47,105 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:40:47,105 - main - INFO - 
2025-12-26 19:40:47,106 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:40:47,106 - main - INFO -      Main:
2025-12-26 19:40:47,106 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:40:47,107 - main - INFO - 
2025-12-26 19:40:47,108 - main - INFO -      Retrieval:
2025-12-26 19:40:47,108 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:40:47,108 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:40:47,108 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:40:47,109 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:40:47,109 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:40:47,109 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:40:47,109 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:40:47,110 - main - INFO - 
2025-12-26 19:40:47,111 - main - INFO -      Management:
2025-12-26 19:40:47,112 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:40:47,112 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:40:47,113 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:40:47,113 - main - INFO - 
2025-12-26 19:40:47,114 - main - INFO -      Documents (MongoDB):
2025-12-26 19:40:47,115 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:40:47,116 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:40:47,116 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:40:47,117 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:40:47,117 - main - INFO - 
2025-12-26 19:40:47,117 - main - INFO -      Diagnostics & Health:
2025-12-26 19:40:47,118 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:40:47,118 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:40:47,119 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:40:47,119 - main - INFO - 
2025-12-26 19:40:47,120 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:40:47,120 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:40:47,121 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:40:47,121 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:40:47,121 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:40:47,121 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:40:47,122 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:40:47,122 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:40:47,123 - main - INFO - 
2025-12-26 19:40:47,124 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:40:47,125 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:40:47,126 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:40:47,127 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:40:47,127 - main - INFO -      4. No re-upload needed!
2025-12-26 19:40:47,127 - main - INFO - 
2025-12-26 19:40:47,127 - main - INFO - ================================================================================
2025-12-26 19:40:47,128 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:40:47,128 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:40:47,128 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:40:47,129 - main - INFO - ================================================================================
2025-12-26 19:40:47,129 - main - INFO - 
2025-12-26 19:40:47,130 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:41:01,354 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:41:01,355 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:41:01,356 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:41:01,359 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:41:01,359 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:41:01,361 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:41:02,294 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:41:02,295 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:41:02,298 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:02,299 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:41:02,299 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:41:02,300 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:41:02,301 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:41:02,304 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:41:02,428 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:02,429 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:02,429 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:41:02,429 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:41:02,430 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:41:02,430 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:41:02,442 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:41:02,442 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:41:02,447 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:41:02,448 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:41:02,449 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:41:02,449 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:41:02,451 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:41:02,451 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:41:02,452 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:41:02,608 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:02,609 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_194102.pdf (129950 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_194102.pdf (151151 bytes)
2025-12-26 19:41:02,612 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.32s
2025-12-26 19:41:27,303 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:41:27,304 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:41:27,305 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:41:27,307 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:41:27,307 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:41:27,308 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.00s
2025-12-26 19:41:29,222 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:41:29,223 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:41:29,226 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:29,226 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:41:29,227 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:41:29,228 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:41:29,228 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:41:29,229 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:41:29,325 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:29,325 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:29,326 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:41:29,326 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:41:29,326 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:41:29,327 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:41:29,336 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:41:29,336 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:41:29,341 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:41:29,343 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:41:29,346 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:41:29,346 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:41:29,347 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:41:29,347 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:41:29,348 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:41:29,515 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:41:29,516 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_194129.pdf (129950 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_194129.pdf (151151 bytes)
2025-12-26 19:41:29,519 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.30s
2025-12-26 19:41:57,605 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:41:57,606 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:41:57,609 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:41:57,615 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:41:57,616 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:41:57,620 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:42:27,305 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:42:27,306 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:42:27,308 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:42:27,311 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:42:27,312 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:42:27,314 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:42:58,658 - main - INFO - 
2025-12-26 19:42:58,658 - main - INFO - ================================================================================
2025-12-26 19:42:58,659 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:42:58,660 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:42:58,661 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:42:58,662 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:42:58,663 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:42:58,664 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:42:58,665 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:42:58,668 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:42:58,669 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:42:58,670 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:42:58,671 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:42:58,672 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:42:58,673 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:42:58,673 - main - INFO - ================================================================================
2025-12-26 19:42:58,673 - main - INFO - 
2025-12-26 19:43:04,207 - main - INFO - 
2025-12-26 19:43:04,207 - main - INFO - ================================================================================
2025-12-26 19:43:04,207 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:43:04,208 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:43:04,208 - main - INFO - ================================================================================
2025-12-26 19:43:04,208 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:43:04,208 - main - INFO -   Upload Directory: uploads
2025-12-26 19:43:04,209 - main - INFO -   Max File Size: 20MB
2025-12-26 19:43:04,209 - main - INFO - ================================================================================
2025-12-26 19:43:04,209 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:43:04,209 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:43:04,210 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:43:04,230 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:43:04,241 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:43:04,241 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:43:04,242 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:43:04,242 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:43:04,242 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:43:04,251 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:43:04,255 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:43:04,258 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:43:04,260 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:43:04,261 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:43:04,261 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:43:04,262 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:43:04,262 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:43:04,292 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:43:04,292 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:43:04,293 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:43:04,327 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:43:04,334 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:43:04,335 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:43:04,337 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:43:04,374 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:43:04,380 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:43:04,381 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:43:04,381 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:43:04,381 - main - INFO - 
2025-12-26 19:43:04,382 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:43:04,382 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:43:04,382 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:43:04,382 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:43:04,383 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:43:04,383 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:43:04,384 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:43:04,385 - main - INFO - 
2025-12-26 19:43:04,386 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:43:04,387 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:43:04,387 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:43:04,387 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:43:04,388 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:43:04,389 - main - INFO - 
2025-12-26 19:43:04,389 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:43:04,389 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:43:04,390 - main - INFO -        - No manual section generation
2025-12-26 19:43:04,390 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:43:04,390 - main - INFO - 
2025-12-26 19:43:04,390 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:43:04,391 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:43:04,391 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:43:04,391 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:43:04,391 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:43:04,391 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:43:04,392 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:43:04,392 - main - INFO - 
2025-12-26 19:43:04,392 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:43:04,392 - main - INFO -      Main:
2025-12-26 19:43:04,392 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:43:04,393 - main - INFO - 
2025-12-26 19:43:04,393 - main - INFO -      Retrieval:
2025-12-26 19:43:04,393 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:43:04,393 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:43:04,394 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:43:04,394 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:43:04,394 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:43:04,394 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:43:04,395 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:43:04,395 - main - INFO - 
2025-12-26 19:43:04,395 - main - INFO -      Management:
2025-12-26 19:43:04,395 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:43:04,396 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:43:04,396 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:43:04,396 - main - INFO - 
2025-12-26 19:43:04,396 - main - INFO -      Documents (MongoDB):
2025-12-26 19:43:04,396 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:43:04,397 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:43:04,397 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:43:04,397 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:43:04,397 - main - INFO - 
2025-12-26 19:43:04,398 - main - INFO -      Diagnostics & Health:
2025-12-26 19:43:04,398 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:43:04,398 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:43:04,398 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:43:04,398 - main - INFO - 
2025-12-26 19:43:04,399 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:43:04,399 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:43:04,399 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:43:04,399 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:43:04,399 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:43:04,400 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:43:04,400 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:43:04,400 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:43:04,401 - main - INFO - 
2025-12-26 19:43:04,402 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:43:04,403 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:43:04,404 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:43:04,404 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:43:04,404 - main - INFO -      4. No re-upload needed!
2025-12-26 19:43:04,405 - main - INFO - 
2025-12-26 19:43:04,405 - main - INFO - ================================================================================
2025-12-26 19:43:04,405 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:43:04,406 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:43:04,406 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:43:04,406 - main - INFO - ================================================================================
2025-12-26 19:43:04,406 - main - INFO - 
2025-12-26 19:43:04,407 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:43:13,526 - main - INFO - 
2025-12-26 19:43:13,526 - main - INFO - ================================================================================
2025-12-26 19:43:13,527 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:43:13,527 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:43:13,528 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:43:13,528 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:43:13,529 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:43:13,529 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:43:13,529 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:43:13,530 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:43:13,530 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:43:13,531 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:43:13,531 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:43:13,531 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:43:13,532 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:43:13,532 - main - INFO - ================================================================================
2025-12-26 19:43:13,532 - main - INFO - 
2025-12-26 19:43:16,961 - main - INFO - 
2025-12-26 19:43:16,961 - main - INFO - ================================================================================
2025-12-26 19:43:16,961 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:43:16,962 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:43:16,962 - main - INFO - ================================================================================
2025-12-26 19:43:16,962 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:43:16,962 - main - INFO -   Upload Directory: uploads
2025-12-26 19:43:16,963 - main - INFO -   Max File Size: 20MB
2025-12-26 19:43:16,963 - main - INFO - ================================================================================
2025-12-26 19:43:16,963 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:43:16,964 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:43:16,964 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:43:16,982 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:43:16,987 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:43:16,987 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:43:16,988 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:43:16,988 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:43:16,988 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:43:16,999 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:43:17,003 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:43:17,004 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:43:17,006 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:43:17,007 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:43:17,007 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:43:17,008 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:43:17,008 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:43:17,030 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:43:17,030 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:43:17,031 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:43:17,061 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:43:17,063 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:43:17,063 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:43:17,064 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:43:17,089 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:43:17,095 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:43:17,095 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:43:17,095 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:43:17,096 - main - INFO - 
2025-12-26 19:43:17,096 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:43:17,096 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:43:17,096 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:43:17,097 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:43:17,097 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:43:17,097 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:43:17,097 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:43:17,098 - main - INFO - 
2025-12-26 19:43:17,098 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:43:17,098 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:43:17,098 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:43:17,098 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:43:17,099 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:43:17,099 - main - INFO - 
2025-12-26 19:43:17,099 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:43:17,099 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:43:17,099 - main - INFO -        - No manual section generation
2025-12-26 19:43:17,100 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:43:17,100 - main - INFO - 
2025-12-26 19:43:17,101 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:43:17,104 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:43:17,104 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:43:17,105 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:43:17,105 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:43:17,105 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:43:17,106 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:43:17,106 - main - INFO - 
2025-12-26 19:43:17,106 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:43:17,107 - main - INFO -      Main:
2025-12-26 19:43:17,107 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:43:17,107 - main - INFO - 
2025-12-26 19:43:17,107 - main - INFO -      Retrieval:
2025-12-26 19:43:17,108 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:43:17,108 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:43:17,108 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:43:17,108 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:43:17,108 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:43:17,109 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:43:17,109 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:43:17,109 - main - INFO - 
2025-12-26 19:43:17,109 - main - INFO -      Management:
2025-12-26 19:43:17,110 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:43:17,110 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:43:17,110 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:43:17,110 - main - INFO - 
2025-12-26 19:43:17,110 - main - INFO -      Documents (MongoDB):
2025-12-26 19:43:17,111 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:43:17,111 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:43:17,111 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:43:17,111 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:43:17,112 - main - INFO - 
2025-12-26 19:43:17,112 - main - INFO -      Diagnostics & Health:
2025-12-26 19:43:17,112 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:43:17,112 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:43:17,112 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:43:17,113 - main - INFO - 
2025-12-26 19:43:17,113 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:43:17,113 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:43:17,113 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:43:17,113 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:43:17,114 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:43:17,114 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:43:17,114 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:43:17,114 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:43:17,114 - main - INFO - 
2025-12-26 19:43:17,114 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:43:17,115 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:43:17,115 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:43:17,115 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:43:17,115 - main - INFO -      4. No re-upload needed!
2025-12-26 19:43:17,115 - main - INFO - 
2025-12-26 19:43:17,115 - main - INFO - ================================================================================
2025-12-26 19:43:17,116 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:43:17,116 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:43:17,116 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:43:17,116 - main - INFO - ================================================================================
2025-12-26 19:43:17,116 - main - INFO - 
2025-12-26 19:43:17,117 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:43:28,616 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:43:28,617 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:43:28,618 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:43:28,620 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:43:28,621 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:43:28,622 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:44:04,171 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:44:04,172 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:44:04,175 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:44:04,179 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:44:04,179 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:44:04,182 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:44:05,149 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:44:05,150 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:44:05,153 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:44:05,153 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:44:05,154 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:44:05,154 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:44:05,155 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:44:05,156 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:44:05,273 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:44:05,273 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:44:05,274 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:44:05,274 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:44:05,275 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:44:05,275 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:44:05,283 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:44:05,283 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:44:05,289 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:44:05,289 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:44:05,291 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:44:05,291 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:44:05,292 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:44:05,293 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:44:05,294 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:44:05,457 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:44:05,458 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_194405.pdf (129175 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_194405.pdf (151151 bytes)
2025-12-26 19:44:05,460 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.31s
2025-12-26 19:44:27,628 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:44:27,630 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:44:27,633 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:44:27,642 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:44:27,643 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:44:27,648 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:44:57,295 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:44:57,295 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:44:57,296 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:44:57,298 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:44:57,299 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:44:57,302 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:45:30,614 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:45:30,620 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:45:30,627 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:45:30,632 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:45:30,633 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:45:30,642 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.03s
2025-12-26 19:46:30,308 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:46:30,309 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:46:30,311 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:46:30,315 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:46:30,315 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:46:30,320 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:46:51,460 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 19:46:51,461 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:46:51,463 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:46:51,464 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:46:51,465 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:46:51,468 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:46:51,468 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:46:51,471 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:46:51,477 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:46:51,483 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:46:51,533 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:46:51,535 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.06s
2025-12-26 19:46:51,538 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:46:51,540 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:46:51,543 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:46:51,547 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:46:51,550 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:46:51,553 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:46:53,328 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:46:53,330 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:46:53,334 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:46:53,338 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:46:53,370 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:46:53,371 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:46:53,374 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:46:53,380 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:46:53,383 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:46:53,392 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:46:53,398 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:46:53,399 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:46:53,404 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:46:53,412 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:46:53,413 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:46:53,415 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:46:57,858 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:46:57,860 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:46:57,863 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:46:57,865 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:47:21,752 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:47:21,754 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:47:21,756 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:47:21,762 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:47:35,759 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:47:35,762 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:47:35,763 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 19:47:35,766 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 19:47:35,774 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:47:35,776 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:47:35,780 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:47:35,784 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:47:35,785 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:47:35,788 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:47:35,792 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:47:35,794 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:47:35,799 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:47:35,804 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:47:35,805 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:47:35,809 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:47:38,582 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 19:47:38,583 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 19:47:38,585 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:47:38,586 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:47:38,586 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 19:47:38,587 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:47:38,587 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 19:47:38,589 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 19:47:38,675 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:47:38,676 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:47:38,676 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 19:47:38,676 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 19:47:38,677 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 19:47:38,677 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 19:47:38,686 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 19:47:38,686 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 19:47:38,691 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 19:47:38,692 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 19:47:38,693 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 19:47:38,693 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 19:47:38,694 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 19:47:38,694 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 19:47:38,695 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 19:47:38,861 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 19:47:38,862 - app.api.routes - INFO - âœ… Both PDFs generated: HAKEM_AI_Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_194738.pdf (129175 bytes), HAKEM_AI_Detailed_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_194738.pdf (151151 bytes)
2025-12-26 19:47:38,864 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.28s
2025-12-26 19:47:45,493 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:47:45,494 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:47:45,494 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:47:45,496 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:47:46,787 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 19:47:46,788 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:47:46,791 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:47:46,792 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:47:46,794 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:47:46,795 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:47:50,747 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:47:50,748 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:47:50,749 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:47:50,751 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:47:58,935 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:47:58,936 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:47:58,937 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:47:58,939 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:48:00,130 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:48:00,132 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:48:00,141 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:48:00,147 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 19:48:01,321 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:48:01,323 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:48:01,324 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:48:01,326 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:48:03,539 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:48:03,541 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:48:03,542 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1717, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:48:03,545 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:49:56,207 - main - INFO - 
2025-12-26 19:49:56,207 - main - INFO - ================================================================================
2025-12-26 19:49:56,207 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:49:56,208 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:49:56,209 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:49:56,210 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:49:56,210 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:49:56,211 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:49:56,212 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:49:56,213 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:49:56,213 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:49:56,214 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:49:56,214 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:49:56,215 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:49:56,215 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:49:56,216 - main - INFO - ================================================================================
2025-12-26 19:49:56,216 - main - INFO - 
2025-12-26 19:50:03,075 - main - INFO - 
2025-12-26 19:50:03,075 - main - INFO - ================================================================================
2025-12-26 19:50:03,075 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:50:03,076 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:50:03,076 - main - INFO - ================================================================================
2025-12-26 19:50:03,076 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:50:03,076 - main - INFO -   Upload Directory: uploads
2025-12-26 19:50:03,076 - main - INFO -   Max File Size: 20MB
2025-12-26 19:50:03,077 - main - INFO - ================================================================================
2025-12-26 19:50:03,077 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:50:03,078 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:50:03,078 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:50:03,108 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:50:03,115 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:50:03,115 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:50:03,115 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:50:03,116 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:50:03,116 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:50:03,129 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:50:03,130 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:50:03,132 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:50:03,136 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:50:03,137 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:50:03,137 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:50:03,138 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:50:03,138 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:50:03,148 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:50:03,149 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:50:03,149 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:50:03,175 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:50:03,191 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:50:03,192 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:50:03,192 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:50:03,209 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:50:03,215 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:50:03,215 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:50:03,215 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:50:03,216 - main - INFO - 
2025-12-26 19:50:03,216 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:50:03,216 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:50:03,217 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:50:03,217 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:50:03,220 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:50:03,222 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:50:03,223 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:50:03,223 - main - INFO - 
2025-12-26 19:50:03,224 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:50:03,224 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:50:03,224 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:50:03,224 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:50:03,225 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:50:03,225 - main - INFO - 
2025-12-26 19:50:03,225 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:50:03,226 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:50:03,226 - main - INFO -        - No manual section generation
2025-12-26 19:50:03,226 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:50:03,226 - main - INFO - 
2025-12-26 19:50:03,227 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:50:03,227 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:50:03,227 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:50:03,227 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:50:03,228 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:50:03,228 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:50:03,228 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:50:03,228 - main - INFO - 
2025-12-26 19:50:03,229 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:50:03,229 - main - INFO -      Main:
2025-12-26 19:50:03,229 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:50:03,229 - main - INFO - 
2025-12-26 19:50:03,230 - main - INFO -      Retrieval:
2025-12-26 19:50:03,230 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:50:03,230 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:50:03,230 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:50:03,230 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:50:03,231 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:50:03,231 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:50:03,231 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:50:03,231 - main - INFO - 
2025-12-26 19:50:03,232 - main - INFO -      Management:
2025-12-26 19:50:03,232 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:50:03,232 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:50:03,232 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:50:03,233 - main - INFO - 
2025-12-26 19:50:03,233 - main - INFO -      Documents (MongoDB):
2025-12-26 19:50:03,233 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:50:03,235 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:50:03,236 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:50:03,236 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:50:03,237 - main - INFO - 
2025-12-26 19:50:03,237 - main - INFO -      Diagnostics & Health:
2025-12-26 19:50:03,237 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:50:03,238 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:50:03,239 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:50:03,240 - main - INFO - 
2025-12-26 19:50:03,240 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:50:03,240 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:50:03,240 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:50:03,240 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:50:03,241 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:50:03,241 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:50:03,241 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:50:03,241 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:50:03,241 - main - INFO - 
2025-12-26 19:50:03,242 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:50:03,242 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:50:03,242 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:50:03,242 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:50:03,243 - main - INFO -      4. No re-upload needed!
2025-12-26 19:50:03,244 - main - INFO - 
2025-12-26 19:50:03,245 - main - INFO - ================================================================================
2025-12-26 19:50:03,245 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:50:03,245 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:50:03,246 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:50:03,246 - main - INFO - ================================================================================
2025-12-26 19:50:03,247 - main - INFO - 
2025-12-26 19:50:03,248 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:50:25,661 - main - INFO - 
2025-12-26 19:50:25,662 - main - INFO - ================================================================================
2025-12-26 19:50:25,662 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:50:25,664 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:50:25,665 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:50:25,667 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:50:25,667 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:50:25,669 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:50:25,670 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:50:25,671 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:50:25,672 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:50:25,673 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:50:25,674 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:50:25,675 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:50:25,676 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:50:25,677 - main - INFO - ================================================================================
2025-12-26 19:50:25,678 - main - INFO - 
2025-12-26 19:50:28,653 - main - INFO - 
2025-12-26 19:50:28,653 - main - INFO - ================================================================================
2025-12-26 19:50:28,654 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:50:28,654 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:50:28,654 - main - INFO - ================================================================================
2025-12-26 19:50:28,654 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:50:28,655 - main - INFO -   Upload Directory: uploads
2025-12-26 19:50:28,655 - main - INFO -   Max File Size: 20MB
2025-12-26 19:50:28,655 - main - INFO - ================================================================================
2025-12-26 19:50:28,656 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:50:28,656 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:50:28,656 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:50:28,698 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:50:28,702 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:50:28,702 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:50:28,703 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:50:28,703 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:50:28,703 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:50:28,709 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:50:28,710 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:50:28,711 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:50:28,712 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:50:28,713 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:50:28,713 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:50:28,713 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:50:28,714 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:50:28,731 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:50:28,731 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:50:28,731 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:50:28,775 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:50:28,778 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:50:28,778 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:50:28,778 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:50:28,808 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:50:28,812 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:50:28,812 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:50:28,813 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:50:28,813 - main - INFO - 
2025-12-26 19:50:28,813 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:50:28,814 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:50:28,814 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:50:28,814 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:50:28,814 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:50:28,815 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:50:28,815 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:50:28,815 - main - INFO - 
2025-12-26 19:50:28,815 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:50:28,815 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:50:28,816 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:50:28,816 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:50:28,816 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:50:28,816 - main - INFO - 
2025-12-26 19:50:28,817 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:50:28,817 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:50:28,817 - main - INFO -        - No manual section generation
2025-12-26 19:50:28,817 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:50:28,817 - main - INFO - 
2025-12-26 19:50:28,818 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:50:28,818 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:50:28,818 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:50:28,818 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:50:28,819 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:50:28,819 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:50:28,819 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:50:28,819 - main - INFO - 
2025-12-26 19:50:28,819 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:50:28,820 - main - INFO -      Main:
2025-12-26 19:50:28,820 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:50:28,820 - main - INFO - 
2025-12-26 19:50:28,820 - main - INFO -      Retrieval:
2025-12-26 19:50:28,820 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:50:28,821 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:50:28,821 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:50:28,821 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:50:28,821 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:50:28,821 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:50:28,821 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:50:28,822 - main - INFO - 
2025-12-26 19:50:28,822 - main - INFO -      Management:
2025-12-26 19:50:28,822 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:50:28,822 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:50:28,822 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:50:28,822 - main - INFO - 
2025-12-26 19:50:28,823 - main - INFO -      Documents (MongoDB):
2025-12-26 19:50:28,823 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:50:28,823 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:50:28,823 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:50:28,823 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:50:28,823 - main - INFO - 
2025-12-26 19:50:28,823 - main - INFO -      Diagnostics & Health:
2025-12-26 19:50:28,824 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:50:28,824 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:50:28,824 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:50:28,824 - main - INFO - 
2025-12-26 19:50:28,824 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:50:28,824 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:50:28,824 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:50:28,825 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:50:28,825 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:50:28,825 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:50:28,825 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:50:28,825 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:50:28,825 - main - INFO - 
2025-12-26 19:50:28,825 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:50:28,826 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:50:28,826 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:50:28,826 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:50:28,826 - main - INFO -      4. No re-upload needed!
2025-12-26 19:50:28,826 - main - INFO - 
2025-12-26 19:50:28,826 - main - INFO - ================================================================================
2025-12-26 19:50:28,826 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:50:28,827 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:50:28,827 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:50:28,827 - main - INFO - ================================================================================
2025-12-26 19:50:28,827 - main - INFO - 
2025-12-26 19:50:28,827 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:52:04,764 - main - INFO - 
2025-12-26 19:52:04,765 - main - INFO - ================================================================================
2025-12-26 19:52:04,765 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:52:04,765 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:52:04,766 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:52:04,767 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:52:04,767 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:52:04,768 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:52:04,769 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:52:04,770 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:52:04,770 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:52:04,772 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:52:04,772 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:52:04,774 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:52:04,775 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:52:04,776 - main - INFO - ================================================================================
2025-12-26 19:52:04,776 - main - INFO - 
2025-12-26 19:52:08,196 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 19:52:08,216 - main - INFO - 
2025-12-26 19:52:08,217 - main - INFO - ================================================================================
2025-12-26 19:52:08,217 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:52:08,218 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:52:08,219 - main - INFO - ================================================================================
2025-12-26 19:52:08,220 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:52:08,220 - main - INFO -   Upload Directory: uploads
2025-12-26 19:52:08,220 - main - INFO -   Max File Size: 20MB
2025-12-26 19:52:08,220 - main - INFO - ================================================================================
2025-12-26 19:52:08,221 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:52:08,222 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:52:08,223 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:52:08,261 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:52:08,274 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:52:08,275 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:52:08,275 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:52:08,275 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:52:08,276 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:52:08,313 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:52:08,315 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:52:08,320 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:52:08,326 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:52:08,326 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:52:08,327 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:52:08,328 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:52:08,328 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:52:08,344 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:52:08,344 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:52:08,345 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:52:08,357 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:52:08,360 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:52:08,360 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:52:08,360 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:52:08,392 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:52:08,404 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:52:08,406 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:52:08,407 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:52:08,408 - main - INFO - 
2025-12-26 19:52:08,409 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:52:08,409 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:52:08,410 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:52:08,410 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:52:08,411 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:52:08,411 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:52:08,412 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:52:08,413 - main - INFO - 
2025-12-26 19:52:08,413 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:52:08,414 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:52:08,414 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:52:08,415 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:52:08,415 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:52:08,416 - main - INFO - 
2025-12-26 19:52:08,417 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:52:08,418 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:52:08,419 - main - INFO -        - No manual section generation
2025-12-26 19:52:08,421 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:52:08,422 - main - INFO - 
2025-12-26 19:52:08,423 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:52:08,423 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:52:08,424 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:52:08,424 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:52:08,425 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:52:08,426 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:52:08,426 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:52:08,427 - main - INFO - 
2025-12-26 19:52:08,427 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:52:08,428 - main - INFO -      Main:
2025-12-26 19:52:08,428 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:52:08,429 - main - INFO - 
2025-12-26 19:52:08,429 - main - INFO -      Retrieval:
2025-12-26 19:52:08,430 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:52:08,430 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:52:08,431 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:52:08,431 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:52:08,432 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:52:08,433 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:52:08,433 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:52:08,434 - main - INFO - 
2025-12-26 19:52:08,435 - main - INFO -      Management:
2025-12-26 19:52:08,436 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:52:08,438 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:52:08,439 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:52:08,441 - main - INFO - 
2025-12-26 19:52:08,441 - main - INFO -      Documents (MongoDB):
2025-12-26 19:52:08,441 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:52:08,442 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:52:08,443 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:52:08,443 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:52:08,444 - main - INFO - 
2025-12-26 19:52:08,444 - main - INFO -      Diagnostics & Health:
2025-12-26 19:52:08,444 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:52:08,445 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:52:08,445 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:52:08,445 - main - INFO - 
2025-12-26 19:52:08,445 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:52:08,446 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:52:08,446 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:52:08,446 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:52:08,447 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:52:08,447 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:52:08,447 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:52:08,447 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:52:08,447 - main - INFO - 
2025-12-26 19:52:08,448 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:52:08,448 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:52:08,448 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:52:08,448 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:52:08,448 - main - INFO -      4. No re-upload needed!
2025-12-26 19:52:08,448 - main - INFO - 
2025-12-26 19:52:08,449 - main - INFO - ================================================================================
2025-12-26 19:52:08,449 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:52:08,449 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:52:08,449 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:52:08,449 - main - INFO - ================================================================================
2025-12-26 19:52:08,450 - main - INFO - 
2025-12-26 19:52:08,451 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:52:17,269 - main - INFO - 
2025-12-26 19:52:17,269 - main - INFO - ================================================================================
2025-12-26 19:52:17,270 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:52:17,272 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:52:17,272 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:52:17,274 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:52:17,275 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:52:17,277 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:52:17,278 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:52:17,279 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:52:17,280 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:52:17,281 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:52:17,282 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:52:17,283 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:52:17,284 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:52:17,285 - main - INFO - ================================================================================
2025-12-26 19:52:17,285 - main - INFO - 
2025-12-26 19:52:20,320 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 19:52:20,345 - main - INFO - 
2025-12-26 19:52:20,346 - main - INFO - ================================================================================
2025-12-26 19:52:20,346 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:52:20,346 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:52:20,346 - main - INFO - ================================================================================
2025-12-26 19:52:20,347 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:52:20,347 - main - INFO -   Upload Directory: uploads
2025-12-26 19:52:20,347 - main - INFO -   Max File Size: 20MB
2025-12-26 19:52:20,347 - main - INFO - ================================================================================
2025-12-26 19:52:20,347 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:52:20,348 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:52:20,348 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:52:20,377 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:52:20,381 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:52:20,381 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:52:20,381 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:52:20,382 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:52:20,382 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:52:20,409 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:52:20,410 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:52:20,414 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:52:20,415 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:52:20,416 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:52:20,416 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:52:20,416 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:52:20,416 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:52:20,439 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:52:20,439 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:52:20,440 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:52:20,445 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:52:20,448 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:52:20,448 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:52:20,448 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:52:20,471 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:52:20,474 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:52:20,475 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:52:20,475 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:52:20,475 - main - INFO - 
2025-12-26 19:52:20,476 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:52:20,476 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:52:20,476 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:52:20,476 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:52:20,477 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:52:20,477 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:52:20,477 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:52:20,477 - main - INFO - 
2025-12-26 19:52:20,477 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:52:20,478 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:52:20,478 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:52:20,478 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:52:20,478 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:52:20,478 - main - INFO - 
2025-12-26 19:52:20,478 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:52:20,479 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:52:20,479 - main - INFO -        - No manual section generation
2025-12-26 19:52:20,479 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:52:20,479 - main - INFO - 
2025-12-26 19:52:20,479 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:52:20,479 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:52:20,480 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:52:20,480 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:52:20,480 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:52:20,480 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:52:20,480 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:52:20,480 - main - INFO - 
2025-12-26 19:52:20,480 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:52:20,481 - main - INFO -      Main:
2025-12-26 19:52:20,481 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:52:20,481 - main - INFO - 
2025-12-26 19:52:20,481 - main - INFO -      Retrieval:
2025-12-26 19:52:20,481 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:52:20,482 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:52:20,482 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:52:20,482 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:52:20,482 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:52:20,482 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:52:20,482 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:52:20,483 - main - INFO - 
2025-12-26 19:52:20,483 - main - INFO -      Management:
2025-12-26 19:52:20,483 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:52:20,483 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:52:20,483 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:52:20,483 - main - INFO - 
2025-12-26 19:52:20,484 - main - INFO -      Documents (MongoDB):
2025-12-26 19:52:20,484 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:52:20,484 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:52:20,484 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:52:20,484 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:52:20,484 - main - INFO - 
2025-12-26 19:52:20,485 - main - INFO -      Diagnostics & Health:
2025-12-26 19:52:20,485 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:52:20,485 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:52:20,485 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:52:20,485 - main - INFO - 
2025-12-26 19:52:20,485 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:52:20,486 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:52:20,486 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:52:20,486 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:52:20,486 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:52:20,486 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:52:20,487 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:52:20,487 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:52:20,487 - main - INFO - 
2025-12-26 19:52:20,487 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:52:20,487 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:52:20,488 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:52:20,488 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:52:20,488 - main - INFO -      4. No re-upload needed!
2025-12-26 19:52:20,488 - main - INFO - 
2025-12-26 19:52:20,488 - main - INFO - ================================================================================
2025-12-26 19:52:20,488 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:52:20,489 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:52:20,489 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:52:20,489 - main - INFO - ================================================================================
2025-12-26 19:52:20,489 - main - INFO - 
2025-12-26 19:52:20,489 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:52:37,445 - main - INFO - ğŸ“¥ OPTIONS /api/activity-logs/create
2025-12-26 19:52:37,446 - main - INFO - ğŸ“¤ OPTIONS /api/activity-logs/create - 200 - 0.00s
2025-12-26 19:52:37,449 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 19:52:37,459 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 422 - 0.01s
2025-12-26 19:52:37,624 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:52:37,642 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:52:37,645 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:52:37,650 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:52:37,651 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:52:37,656 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.03s
2025-12-26 19:52:37,661 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:52:37,663 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:52:37,666 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:52:37,678 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:52:37,681 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:52:37,687 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.03s
2025-12-26 19:52:37,704 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:52:37,709 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:52:37,714 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:52:37,721 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:52:37,724 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:52:37,729 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:52:37,734 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:52:37,736 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:52:37,739 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:52:37,746 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:52:37,746 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:52:37,750 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:52:43,418 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:43,424 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:43,433 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:43,440 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 19:52:45,714 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 19:52:45,715 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:52:45,718 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:45,718 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:45,720 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:45,721 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:52:48,327 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:48,328 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:48,330 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:48,331 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:52:49,787 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:49,788 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:49,789 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:49,790 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:52:50,888 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:50,889 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:50,895 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:50,897 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:52:53,241 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:52:53,242 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:52:53,243 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:52:53,245 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:53:08,603 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:53:08,603 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:53:08,604 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:53:08,606 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:53:08,606 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:53:08,608 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:53:38,303 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:53:38,304 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:53:38,305 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:53:38,307 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:53:38,307 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:53:38,309 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:54:08,603 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:54:08,605 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:54:08,608 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:54:08,614 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:54:08,614 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:54:08,617 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:54:38,306 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:54:38,307 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:54:38,308 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:54:38,310 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:54:38,311 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:54:38,313 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:55:08,612 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:55:08,613 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:55:08,616 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:55:08,623 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:55:08,623 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:55:08,627 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:55:38,332 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:55:38,345 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:55:38,356 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:55:38,399 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:55:38,401 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:55:38,410 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.08s
2025-12-26 19:56:08,608 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:56:08,608 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:56:08,609 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:56:08,612 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:56:08,612 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:56:08,614 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:56:26,882 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:26,890 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:26,893 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:26,929 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.05s
2025-12-26 19:56:37,388 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:37,389 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:37,390 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:37,391 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:37,394 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:37,396 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:37,398 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:37,408 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:56:39,194 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:39,195 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:39,196 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:39,197 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:39,939 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:39,940 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:39,941 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:39,941 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:40,946 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 19:56:40,947 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:40,949 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:40,950 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:40,951 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:40,952 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:45,761 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:45,764 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:45,765 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:45,768 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:56:49,126 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:56:49,128 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:56:49,129 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:56:49,133 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:56:49,135 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:56:49,137 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:56:54,464 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 19:56:54,465 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 19:56:54,474 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:56:54,476 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:56:54,478 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:56:54,481 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:57:01,387 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:57:01,389 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:57:01,391 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:57:01,394 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:57:01,397 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:57:01,399 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:57:01,401 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:57:01,405 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:57:04,145 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:57:04,147 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:57:04,149 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1773, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:57:04,153 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 19:57:05,141 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs/statistics
2025-12-26 19:57:05,141 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs/statistics - 200 - 0.00s
2025-12-26 19:57:05,143 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs/statistics
2025-12-26 19:57:05,187 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs/statistics - 200 - 0.04s
2025-12-26 19:57:08,296 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:57:08,296 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:57:08,297 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:57:08,299 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:57:08,299 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:57:08,301 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.00s
2025-12-26 19:57:38,305 - main - INFO - ğŸ“¥ OPTIONS /api/comparisons
2025-12-26 19:57:38,307 - main - INFO - ğŸ“¤ OPTIONS /api/comparisons - 200 - 0.00s
2025-12-26 19:57:38,311 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:57:38,313 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:57:38,315 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:57:38,318 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:57:38,319 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:57:38,321 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:58:30,621 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:58:30,624 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:58:30,628 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:58:30,636 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:58:30,637 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:58:30,642 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 19:58:41,387 - main - INFO - 
2025-12-26 19:58:41,388 - main - INFO - ================================================================================
2025-12-26 19:58:41,389 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:58:41,391 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:58:41,391 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:58:41,393 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:58:41,393 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:58:41,394 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:58:41,395 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:58:41,396 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:58:41,396 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:58:41,398 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:58:41,399 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:58:41,399 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:58:41,400 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:58:41,403 - main - INFO - ================================================================================
2025-12-26 19:58:41,404 - main - INFO - 
2025-12-26 19:58:46,419 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 19:58:46,445 - main - INFO - 
2025-12-26 19:58:46,445 - main - INFO - ================================================================================
2025-12-26 19:58:46,445 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:58:46,446 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:58:46,446 - main - INFO - ================================================================================
2025-12-26 19:58:46,446 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:58:46,446 - main - INFO -   Upload Directory: uploads
2025-12-26 19:58:46,446 - main - INFO -   Max File Size: 20MB
2025-12-26 19:58:46,447 - main - INFO - ================================================================================
2025-12-26 19:58:46,447 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:58:46,447 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:58:46,448 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:58:46,507 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:58:46,512 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:58:46,512 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:58:46,513 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:58:46,513 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:58:46,513 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:58:46,524 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:58:46,525 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:58:46,526 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:58:46,528 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:58:46,528 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:58:46,528 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:58:46,528 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:58:46,529 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:58:46,540 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:58:46,540 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:58:46,541 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:58:46,587 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:58:46,591 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:58:46,592 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:58:46,592 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:58:46,620 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:58:46,625 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:58:46,626 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:58:46,626 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:58:46,626 - main - INFO - 
2025-12-26 19:58:46,626 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:58:46,627 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:58:46,627 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:58:46,627 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:58:46,627 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:58:46,628 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:58:46,628 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:58:46,628 - main - INFO - 
2025-12-26 19:58:46,628 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:58:46,628 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:58:46,629 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:58:46,629 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:58:46,629 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:58:46,629 - main - INFO - 
2025-12-26 19:58:46,629 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:58:46,629 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:58:46,630 - main - INFO -        - No manual section generation
2025-12-26 19:58:46,630 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:58:46,630 - main - INFO - 
2025-12-26 19:58:46,630 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:58:46,630 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:58:46,630 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:58:46,631 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:58:46,631 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:58:46,631 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:58:46,631 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:58:46,632 - main - INFO - 
2025-12-26 19:58:46,632 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:58:46,632 - main - INFO -      Main:
2025-12-26 19:58:46,632 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:58:46,632 - main - INFO - 
2025-12-26 19:58:46,633 - main - INFO -      Retrieval:
2025-12-26 19:58:46,633 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:58:46,633 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:58:46,633 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:58:46,634 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:58:46,634 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:58:46,634 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:58:46,635 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:58:46,635 - main - INFO - 
2025-12-26 19:58:46,635 - main - INFO -      Management:
2025-12-26 19:58:46,636 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:58:46,636 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:58:46,636 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:58:46,636 - main - INFO - 
2025-12-26 19:58:46,636 - main - INFO -      Documents (MongoDB):
2025-12-26 19:58:46,637 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:58:46,637 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:58:46,637 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:58:46,637 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:58:46,638 - main - INFO - 
2025-12-26 19:58:46,638 - main - INFO -      Diagnostics & Health:
2025-12-26 19:58:46,638 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:58:46,638 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:58:46,638 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:58:46,639 - main - INFO - 
2025-12-26 19:58:46,639 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:58:46,639 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:58:46,639 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:58:46,639 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:58:46,640 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:58:46,640 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:58:46,640 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:58:46,640 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:58:46,640 - main - INFO - 
2025-12-26 19:58:46,640 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:58:46,641 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:58:46,641 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:58:46,641 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:58:46,641 - main - INFO -      4. No re-upload needed!
2025-12-26 19:58:46,641 - main - INFO - 
2025-12-26 19:58:46,642 - main - INFO - ================================================================================
2025-12-26 19:58:46,642 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:58:46,642 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:58:46,642 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:58:46,642 - main - INFO - ================================================================================
2025-12-26 19:58:46,642 - main - INFO - 
2025-12-26 19:58:46,643 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:59:04,963 - main - INFO - 
2025-12-26 19:59:04,963 - main - INFO - ================================================================================
2025-12-26 19:59:04,963 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 19:59:04,964 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:59:04,965 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 19:59:04,966 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 19:59:04,968 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 19:59:04,970 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 19:59:04,971 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 19:59:04,972 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 19:59:04,973 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 19:59:04,973 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 19:59:04,975 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 19:59:04,975 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 19:59:04,976 - main - INFO -   âœ… Application stopped successfully
2025-12-26 19:59:04,976 - main - INFO - ================================================================================
2025-12-26 19:59:04,976 - main - INFO - 
2025-12-26 19:59:10,138 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 19:59:10,159 - main - INFO - 
2025-12-26 19:59:10,159 - main - INFO - ================================================================================
2025-12-26 19:59:10,159 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 19:59:10,159 - main - INFO -   Production-Ready Complete Integration
2025-12-26 19:59:10,160 - main - INFO - ================================================================================
2025-12-26 19:59:10,160 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 19:59:10,160 - main - INFO -   Upload Directory: uploads
2025-12-26 19:59:10,160 - main - INFO -   Max File Size: 20MB
2025-12-26 19:59:10,160 - main - INFO - ================================================================================
2025-12-26 19:59:10,161 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 19:59:10,161 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 19:59:10,161 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 19:59:10,188 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 19:59:10,195 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 19:59:10,195 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 19:59:10,195 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 19:59:10,195 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 19:59:10,195 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 19:59:10,239 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 19:59:10,242 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 19:59:10,244 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 19:59:10,248 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 19:59:10,248 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 19:59:10,248 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 19:59:10,249 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 19:59:10,249 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 19:59:10,263 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 19:59:10,264 - main - INFO -   âœ… User Documents Service connected
2025-12-26 19:59:10,264 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 19:59:10,291 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 19:59:10,300 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 19:59:10,302 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 19:59:10,303 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 19:59:10,325 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 19:59:10,331 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 19:59:10,331 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 19:59:10,331 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 19:59:10,332 - main - INFO - 
2025-12-26 19:59:10,332 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 19:59:10,332 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 19:59:10,333 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 19:59:10,333 - main - INFO -        - Separates warranties from extensions
2025-12-26 19:59:10,333 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 19:59:10,334 - main - INFO -        - Correct deductible tier detection
2025-12-26 19:59:10,334 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 19:59:10,335 - main - INFO - 
2025-12-26 19:59:10,336 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 19:59:10,337 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 19:59:10,337 - main - INFO -        - Identifies unique items per provider
2025-12-26 19:59:10,338 - main - INFO -        - Transparent scoring methodology
2025-12-26 19:59:10,338 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 19:59:10,339 - main - INFO - 
2025-12-26 19:59:10,339 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 19:59:10,339 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 19:59:10,339 - main - INFO -        - No manual section generation
2025-12-26 19:59:10,340 - main - INFO -        - Complete MongoDB integration
2025-12-26 19:59:10,340 - main - INFO - 
2025-12-26 19:59:10,341 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 19:59:10,341 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 19:59:10,341 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 19:59:10,341 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 19:59:10,342 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 19:59:10,342 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 19:59:10,342 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 19:59:10,343 - main - INFO - 
2025-12-26 19:59:10,343 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 19:59:10,343 - main - INFO -      Main:
2025-12-26 19:59:10,343 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 19:59:10,344 - main - INFO - 
2025-12-26 19:59:10,344 - main - INFO -      Retrieval:
2025-12-26 19:59:10,344 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 19:59:10,344 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 19:59:10,344 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 19:59:10,345 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 19:59:10,345 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 19:59:10,345 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 19:59:10,345 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 19:59:10,346 - main - INFO - 
2025-12-26 19:59:10,346 - main - INFO -      Management:
2025-12-26 19:59:10,347 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 19:59:10,348 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 19:59:10,348 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 19:59:10,348 - main - INFO - 
2025-12-26 19:59:10,349 - main - INFO -      Documents (MongoDB):
2025-12-26 19:59:10,349 - main - INFO -        GET  /api/documents                All documents
2025-12-26 19:59:10,349 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 19:59:10,350 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 19:59:10,351 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 19:59:10,354 - main - INFO - 
2025-12-26 19:59:10,354 - main - INFO -      Diagnostics & Health:
2025-12-26 19:59:10,355 - main - INFO -        GET  /api/health                   System health
2025-12-26 19:59:10,355 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 19:59:10,355 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 19:59:10,356 - main - INFO - 
2025-12-26 19:59:10,356 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 19:59:10,357 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 19:59:10,357 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 19:59:10,357 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 19:59:10,358 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 19:59:10,358 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 19:59:10,358 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 19:59:10,359 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 19:59:10,359 - main - INFO - 
2025-12-26 19:59:10,359 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 19:59:10,359 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 19:59:10,360 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 19:59:10,360 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 19:59:10,360 - main - INFO -      4. No re-upload needed!
2025-12-26 19:59:10,361 - main - INFO - 
2025-12-26 19:59:10,361 - main - INFO - ================================================================================
2025-12-26 19:59:10,361 - main - INFO -   âœ… Application started successfully!
2025-12-26 19:59:10,361 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 19:59:10,362 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 19:59:10,362 - main - INFO - ================================================================================
2025-12-26 19:59:10,363 - main - INFO - 
2025-12-26 19:59:10,363 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 19:59:30,625 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 19:59:30,626 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 19:59:30,628 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 19:59:30,630 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 19:59:30,631 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 19:59:30,633 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 19:59:56,771 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 19:59:56,773 - app.api.routes - INFO - ğŸ“ Creating activity log: test_login for user test_user_123
2025-12-26 19:59:56,787 - app.api.routes - INFO - âœ… Activity log created: 694ee93ca899af3810696059
2025-12-26 19:59:56,788 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 200 - 0.02s
2025-12-26 19:59:58,833 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 19:59:58,834 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 19:59:58,839 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1803, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 19:59:58,840 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 20:00:30,295 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:00:30,296 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:00:30,298 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:00:30,306 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:00:30,307 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:00:30,309 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:00:45,133 - main - INFO - 
2025-12-26 20:00:45,133 - main - INFO - ================================================================================
2025-12-26 20:00:45,134 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 20:00:45,135 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:00:45,135 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 20:00:45,136 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:00:45,136 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 20:00:45,137 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 20:00:45,138 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 20:00:45,138 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 20:00:45,139 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 20:00:45,139 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:00:45,140 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 20:00:45,140 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 20:00:45,140 - main - INFO -   âœ… Application stopped successfully
2025-12-26 20:00:45,141 - main - INFO - ================================================================================
2025-12-26 20:00:45,141 - main - INFO - 
2025-12-26 20:00:49,912 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:00:49,932 - main - INFO - 
2025-12-26 20:00:49,932 - main - INFO - ================================================================================
2025-12-26 20:00:49,932 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:00:49,933 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:00:49,933 - main - INFO - ================================================================================
2025-12-26 20:00:49,933 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:00:49,934 - main - INFO -   Upload Directory: uploads
2025-12-26 20:00:49,935 - main - INFO -   Max File Size: 20MB
2025-12-26 20:00:49,936 - main - INFO - ================================================================================
2025-12-26 20:00:49,937 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:00:49,940 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:00:49,941 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:00:49,990 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:00:49,996 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:00:49,996 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:00:49,997 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:00:49,997 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:00:49,997 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:00:50,031 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:00:50,032 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:00:50,033 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:00:50,038 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:00:50,038 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:00:50,038 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:00:50,039 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:00:50,039 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:00:50,063 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:00:50,063 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:00:50,064 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:00:50,093 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:00:50,096 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:00:50,097 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:00:50,097 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:00:50,111 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:00:50,115 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:00:50,116 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:00:50,116 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:00:50,116 - main - INFO - 
2025-12-26 20:00:50,116 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:00:50,117 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:00:50,118 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:00:50,119 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:00:50,120 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:00:50,120 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:00:50,120 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:00:50,122 - main - INFO - 
2025-12-26 20:00:50,123 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:00:50,123 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:00:50,124 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:00:50,124 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:00:50,124 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:00:50,125 - main - INFO - 
2025-12-26 20:00:50,125 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:00:50,125 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:00:50,125 - main - INFO -        - No manual section generation
2025-12-26 20:00:50,126 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:00:50,126 - main - INFO - 
2025-12-26 20:00:50,126 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:00:50,126 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:00:50,127 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:00:50,127 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:00:50,127 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:00:50,127 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:00:50,127 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:00:50,128 - main - INFO - 
2025-12-26 20:00:50,128 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:00:50,128 - main - INFO -      Main:
2025-12-26 20:00:50,128 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:00:50,128 - main - INFO - 
2025-12-26 20:00:50,129 - main - INFO -      Retrieval:
2025-12-26 20:00:50,129 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:00:50,129 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:00:50,129 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:00:50,130 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:00:50,130 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:00:50,130 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:00:50,130 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:00:50,131 - main - INFO - 
2025-12-26 20:00:50,131 - main - INFO -      Management:
2025-12-26 20:00:50,131 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:00:50,131 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:00:50,132 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:00:50,132 - main - INFO - 
2025-12-26 20:00:50,132 - main - INFO -      Documents (MongoDB):
2025-12-26 20:00:50,132 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:00:50,133 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:00:50,133 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:00:50,136 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:00:50,138 - main - INFO - 
2025-12-26 20:00:50,139 - main - INFO -      Diagnostics & Health:
2025-12-26 20:00:50,139 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:00:50,140 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:00:50,140 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:00:50,140 - main - INFO - 
2025-12-26 20:00:50,140 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:00:50,141 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:00:50,141 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:00:50,142 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:00:50,142 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:00:50,142 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:00:50,143 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:00:50,144 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:00:50,144 - main - INFO - 
2025-12-26 20:00:50,144 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:00:50,145 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:00:50,145 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:00:50,146 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:00:50,146 - main - INFO -      4. No re-upload needed!
2025-12-26 20:00:50,147 - main - INFO - 
2025-12-26 20:00:50,147 - main - INFO - ================================================================================
2025-12-26 20:00:50,147 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:00:50,150 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:00:50,158 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:00:50,158 - main - INFO - ================================================================================
2025-12-26 20:00:50,158 - main - INFO - 
2025-12-26 20:00:50,159 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:00:51,010 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 20:00:51,011 - app.api.routes - INFO - ğŸ“ Creating activity log: test_login for user test_user_123
2025-12-26 20:00:51,013 - app.api.routes - INFO - âœ… Activity log created: 694ee97325e45aea306946a9
2025-12-26 20:00:51,013 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 200 - 0.00s
2025-12-26 20:00:53,069 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:00:53,071 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=10, userId=None, activityType=None
2025-12-26 20:00:53,072 - app.api.routes - ERROR - âŒ Error getting activity logs: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None
2025-12-26 20:00:53,076 - app.api.routes - ERROR - Traceback (most recent call last):
  File "C:\Users\Admin\Music\HakimAI-AIModule\app\api\routes.py", line 1805, in get_activity_logs
    if not activity_logs_service.activity_logs_collection:
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\pymongo\synchronous\collection.py", line 311, in __bool__
    raise NotImplementedError(
    ...<3 lines>...
    )
NotImplementedError: Collection objects do not implement truth value testing or bool(). Please compare with None instead: collection is not None

2025-12-26 20:00:53,077 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 20:01:09,598 - main - INFO - 
2025-12-26 20:01:09,598 - main - INFO - ================================================================================
2025-12-26 20:01:09,598 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 20:01:09,599 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:01:09,600 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 20:01:09,601 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:01:09,601 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 20:01:09,602 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 20:01:09,602 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 20:01:09,603 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 20:01:09,603 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 20:01:09,604 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:01:09,605 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 20:01:09,606 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 20:01:09,606 - main - INFO -   âœ… Application stopped successfully
2025-12-26 20:01:09,606 - main - INFO - ================================================================================
2025-12-26 20:01:09,606 - main - INFO - 
2025-12-26 20:01:14,155 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:01:14,177 - main - INFO - 
2025-12-26 20:01:14,177 - main - INFO - ================================================================================
2025-12-26 20:01:14,177 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:01:14,177 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:01:14,177 - main - INFO - ================================================================================
2025-12-26 20:01:14,178 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:01:14,178 - main - INFO -   Upload Directory: uploads
2025-12-26 20:01:14,178 - main - INFO -   Max File Size: 20MB
2025-12-26 20:01:14,178 - main - INFO - ================================================================================
2025-12-26 20:01:14,179 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:01:14,179 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:01:14,179 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:01:14,210 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:01:14,215 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:01:14,215 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:01:14,216 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:01:14,216 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:01:14,216 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:01:14,241 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:01:14,242 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:01:14,243 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:01:14,244 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:01:14,245 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:01:14,245 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:01:14,245 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:01:14,245 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:01:14,273 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:01:14,273 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:01:14,273 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:01:14,304 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:01:14,306 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:01:14,307 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:01:14,307 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:01:14,336 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:01:14,340 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:01:14,340 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:01:14,340 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:01:14,341 - main - INFO - 
2025-12-26 20:01:14,341 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:01:14,341 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:01:14,341 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:01:14,341 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:01:14,342 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:01:14,342 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:01:14,342 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:01:14,342 - main - INFO - 
2025-12-26 20:01:14,342 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:01:14,342 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:01:14,343 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:01:14,343 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:01:14,343 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:01:14,343 - main - INFO - 
2025-12-26 20:01:14,343 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:01:14,343 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:01:14,343 - main - INFO -        - No manual section generation
2025-12-26 20:01:14,344 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:01:14,344 - main - INFO - 
2025-12-26 20:01:14,344 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:01:14,344 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:01:14,344 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:01:14,344 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:01:14,344 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:01:14,345 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:01:14,345 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:01:14,345 - main - INFO - 
2025-12-26 20:01:14,345 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:01:14,345 - main - INFO -      Main:
2025-12-26 20:01:14,345 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:01:14,345 - main - INFO - 
2025-12-26 20:01:14,345 - main - INFO -      Retrieval:
2025-12-26 20:01:14,346 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:01:14,346 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:01:14,346 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:01:14,346 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:01:14,346 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:01:14,346 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:01:14,346 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:01:14,347 - main - INFO - 
2025-12-26 20:01:14,347 - main - INFO -      Management:
2025-12-26 20:01:14,347 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:01:14,347 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:01:14,348 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:01:14,348 - main - INFO - 
2025-12-26 20:01:14,348 - main - INFO -      Documents (MongoDB):
2025-12-26 20:01:14,348 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:01:14,348 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:01:14,348 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:01:14,349 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:01:14,349 - main - INFO - 
2025-12-26 20:01:14,349 - main - INFO -      Diagnostics & Health:
2025-12-26 20:01:14,350 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:01:14,350 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:01:14,350 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:01:14,350 - main - INFO - 
2025-12-26 20:01:14,351 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:01:14,351 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:01:14,351 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:01:14,351 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:01:14,351 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:01:14,352 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:01:14,352 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:01:14,352 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:01:14,352 - main - INFO - 
2025-12-26 20:01:14,352 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:01:14,353 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:01:14,353 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:01:14,353 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:01:14,353 - main - INFO -      4. No re-upload needed!
2025-12-26 20:01:14,353 - main - INFO - 
2025-12-26 20:01:14,353 - main - INFO - ================================================================================
2025-12-26 20:01:14,353 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:01:14,353 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:01:14,354 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:01:14,354 - main - INFO - ================================================================================
2025-12-26 20:01:14,354 - main - INFO - 
2025-12-26 20:01:14,354 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:01:17,177 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 20:01:17,179 - app.api.routes - INFO - ğŸ“ Creating activity log: test_login for user test_user_123
2025-12-26 20:01:17,181 - app.api.routes - INFO - âœ… Activity log created: 694ee98d71e079327af17452
2025-12-26 20:01:17,182 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 200 - 0.01s
2025-12-26 20:01:19,232 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:01:19,232 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=10, userId=None, activityType=None
2025-12-26 20:01:19,233 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:01:19,233 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:01:19,239 - app.api.routes - INFO - âœ… Retrieved 3 logs (total: 3)
2025-12-26 20:01:19,240 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 20:01:30,638 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:01:30,640 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:01:30,641 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:01:30,645 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:01:30,645 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:01:30,647 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:01:54,099 - main - INFO - 
2025-12-26 20:01:54,099 - main - INFO - ================================================================================
2025-12-26 20:01:54,099 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 20:01:54,100 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:01:54,101 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 20:01:54,102 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:01:54,103 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 20:01:54,104 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 20:01:54,104 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 20:01:54,105 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 20:01:54,105 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 20:01:54,106 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:01:54,106 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 20:01:54,107 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 20:01:54,107 - main - INFO -   âœ… Application stopped successfully
2025-12-26 20:01:54,107 - main - INFO - ================================================================================
2025-12-26 20:01:54,107 - main - INFO - 
2025-12-26 20:01:57,381 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:01:57,396 - main - INFO - 
2025-12-26 20:01:57,396 - main - INFO - ================================================================================
2025-12-26 20:01:57,396 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:01:57,396 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:01:57,397 - main - INFO - ================================================================================
2025-12-26 20:01:57,397 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:01:57,397 - main - INFO -   Upload Directory: uploads
2025-12-26 20:01:57,397 - main - INFO -   Max File Size: 20MB
2025-12-26 20:01:57,397 - main - INFO - ================================================================================
2025-12-26 20:01:57,398 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:01:57,398 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:01:57,398 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:01:57,447 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:01:57,452 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:01:57,453 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:01:57,453 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:01:57,453 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:01:57,453 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:01:57,493 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:01:57,494 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:01:57,495 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:01:57,496 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:01:57,497 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:01:57,497 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:01:57,497 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:01:57,497 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:01:57,527 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:01:57,528 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:01:57,528 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:01:57,559 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:01:57,561 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:01:57,562 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:01:57,562 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:01:57,591 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:01:57,595 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:01:57,595 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:01:57,595 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:01:57,596 - main - INFO - 
2025-12-26 20:01:57,596 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:01:57,596 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:01:57,596 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:01:57,596 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:01:57,597 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:01:57,597 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:01:57,597 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:01:57,597 - main - INFO - 
2025-12-26 20:01:57,597 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:01:57,597 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:01:57,598 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:01:57,598 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:01:57,598 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:01:57,598 - main - INFO - 
2025-12-26 20:01:57,598 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:01:57,598 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:01:57,599 - main - INFO -        - No manual section generation
2025-12-26 20:01:57,599 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:01:57,599 - main - INFO - 
2025-12-26 20:01:57,599 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:01:57,599 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:01:57,599 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:01:57,599 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:01:57,600 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:01:57,600 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:01:57,600 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:01:57,601 - main - INFO - 
2025-12-26 20:01:57,602 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:01:57,602 - main - INFO -      Main:
2025-12-26 20:01:57,603 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:01:57,603 - main - INFO - 
2025-12-26 20:01:57,603 - main - INFO -      Retrieval:
2025-12-26 20:01:57,603 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:01:57,604 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:01:57,604 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:01:57,604 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:01:57,604 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:01:57,604 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:01:57,605 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:01:57,605 - main - INFO - 
2025-12-26 20:01:57,605 - main - INFO -      Management:
2025-12-26 20:01:57,605 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:01:57,606 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:01:57,606 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:01:57,606 - main - INFO - 
2025-12-26 20:01:57,607 - main - INFO -      Documents (MongoDB):
2025-12-26 20:01:57,607 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:01:57,607 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:01:57,607 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:01:57,608 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:01:57,608 - main - INFO - 
2025-12-26 20:01:57,608 - main - INFO -      Diagnostics & Health:
2025-12-26 20:01:57,608 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:01:57,608 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:01:57,609 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:01:57,609 - main - INFO - 
2025-12-26 20:01:57,609 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:01:57,609 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:01:57,609 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:01:57,610 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:01:57,610 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:01:57,610 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:01:57,610 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:01:57,610 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:01:57,610 - main - INFO - 
2025-12-26 20:01:57,611 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:01:57,611 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:01:57,611 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:01:57,611 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:01:57,611 - main - INFO -      4. No re-upload needed!
2025-12-26 20:01:57,611 - main - INFO - 
2025-12-26 20:01:57,612 - main - INFO - ================================================================================
2025-12-26 20:01:57,612 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:01:57,612 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:01:57,612 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:01:57,612 - main - INFO - ================================================================================
2025-12-26 20:01:57,613 - main - INFO - 
2025-12-26 20:01:57,613 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:02:02,520 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:02,521 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:02:02,521 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:02,522 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:02,524 - app.api.routes - INFO - âœ… Retrieved 3 logs (total: 3)
2025-12-26 20:02:02,525 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:02:02,527 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:02,528 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:02:02,528 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:02,529 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:02,532 - app.api.routes - INFO - âœ… Retrieved 3 logs (total: 3)
2025-12-26 20:02:02,532 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 20:02:10,486 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:02:10,487 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:02:10,489 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:02:10,491 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:02:10,492 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:02:10,494 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:02:12,965 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 20:02:12,967 - app.api.routes - INFO - ğŸ“ Creating activity log: logout for user 694edeacc98c1096e3582e38
2025-12-26 20:02:12,969 - app.api.routes - INFO - âœ… Activity log created: 694ee9c467dff96fa888db59
2025-12-26 20:02:12,970 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 200 - 0.00s
2025-12-26 20:02:17,063 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:17,065 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:02:17,066 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:17,066 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:17,073 - app.api.routes - INFO - âœ… Retrieved 4 logs (total: 4)
2025-12-26 20:02:17,075 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.01s
2025-12-26 20:02:28,006 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs/statistics
2025-12-26 20:02:28,017 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs/statistics - 200 - 0.01s
2025-12-26 20:02:38,642 - main - INFO - ğŸ“¥ OPTIONS /api/admin/activity-logs
2025-12-26 20:02:38,643 - main - INFO - ğŸ“¤ OPTIONS /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:02:38,649 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:38,651 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=logout
2025-12-26 20:02:38,652 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:38,653 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:38,668 - app.api.routes - INFO - âœ… Retrieved 1 logs (total: 1)
2025-12-26 20:02:38,669 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.02s
2025-12-26 20:02:40,571 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:40,572 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=None
2025-12-26 20:02:40,572 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:40,573 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:40,576 - app.api.routes - INFO - âœ… Retrieved 4 logs (total: 4)
2025-12-26 20:02:40,576 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:02:42,556 - main - INFO - ğŸ“¥ GET /api/admin/activity-logs
2025-12-26 20:02:42,557 - app.api.routes - INFO - ğŸ“Š Fetching activity logs: page=1, limit=50, userId=None, activityType=login
2025-12-26 20:02:42,558 - app.api.routes - INFO - âœ… Activity logs service already connected
2025-12-26 20:02:42,558 - app.api.routes - INFO - ğŸ” Calling activity_logs_service.get_activity_logs...
2025-12-26 20:02:42,561 - app.api.routes - INFO - âœ… Retrieved 0 logs (total: 0)
2025-12-26 20:02:42,561 - main - INFO - ğŸ“¤ GET /api/admin/activity-logs - 200 - 0.00s
2025-12-26 20:04:11,887 - main - INFO - 
2025-12-26 20:04:11,887 - main - INFO - ================================================================================
2025-12-26 20:04:11,887 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 20:04:11,888 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:04:11,889 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 20:04:11,890 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:04:11,890 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 20:04:11,891 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 20:04:11,892 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 20:04:11,893 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 20:04:11,894 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 20:04:11,895 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:04:11,896 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 20:04:11,897 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 20:04:11,897 - main - INFO -   âœ… Application stopped successfully
2025-12-26 20:04:11,897 - main - INFO - ================================================================================
2025-12-26 20:04:11,897 - main - INFO - 
2025-12-26 20:04:18,581 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:04:18,638 - main - INFO - 
2025-12-26 20:04:18,641 - main - INFO - ================================================================================
2025-12-26 20:04:18,642 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:04:18,642 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:04:18,644 - main - INFO - ================================================================================
2025-12-26 20:04:18,644 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:04:18,644 - main - INFO -   Upload Directory: uploads
2025-12-26 20:04:18,644 - main - INFO -   Max File Size: 20MB
2025-12-26 20:04:18,645 - main - INFO - ================================================================================
2025-12-26 20:04:18,645 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:04:18,646 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:04:18,646 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:18,687 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:04:18,700 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:04:18,709 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:04:18,710 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:04:18,712 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:04:18,712 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:04:18,741 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:04:18,743 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:04:18,749 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:04:18,760 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:04:18,761 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:04:18,761 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:04:18,762 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:18,762 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:04:18,781 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:04:18,788 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:04:18,789 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:04:18,798 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:04:18,807 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:04:18,807 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:04:18,808 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:04:18,823 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:04:18,828 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:04:18,829 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:04:18,829 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:04:18,829 - main - INFO - 
2025-12-26 20:04:18,830 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:04:18,830 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:04:18,830 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:04:18,830 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:04:18,831 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:04:18,831 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:04:18,831 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:04:18,831 - main - INFO - 
2025-12-26 20:04:18,832 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:04:18,832 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:04:18,832 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:04:18,832 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:04:18,833 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:04:18,833 - main - INFO - 
2025-12-26 20:04:18,839 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:04:18,840 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:04:18,840 - main - INFO -        - No manual section generation
2025-12-26 20:04:18,841 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:04:18,841 - main - INFO - 
2025-12-26 20:04:18,841 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:04:18,841 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:04:18,842 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:04:18,842 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:04:18,842 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:04:18,842 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:04:18,843 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:04:18,843 - main - INFO - 
2025-12-26 20:04:18,843 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:04:18,843 - main - INFO -      Main:
2025-12-26 20:04:18,844 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:04:18,844 - main - INFO - 
2025-12-26 20:04:18,844 - main - INFO -      Retrieval:
2025-12-26 20:04:18,844 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:04:18,845 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:04:18,845 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:04:18,845 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:04:18,846 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:04:18,846 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:04:18,846 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:04:18,846 - main - INFO - 
2025-12-26 20:04:18,847 - main - INFO -      Management:
2025-12-26 20:04:18,847 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:04:18,847 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:04:18,847 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:04:18,848 - main - INFO - 
2025-12-26 20:04:18,848 - main - INFO -      Documents (MongoDB):
2025-12-26 20:04:18,848 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:04:18,848 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:04:18,849 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:04:18,849 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:04:18,849 - main - INFO - 
2025-12-26 20:04:18,853 - main - INFO -      Diagnostics & Health:
2025-12-26 20:04:18,854 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:04:18,855 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:04:18,856 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:04:18,856 - main - INFO - 
2025-12-26 20:04:18,856 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:04:18,857 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:04:18,857 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:04:18,857 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:04:18,857 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:04:18,858 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:04:18,858 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:04:18,858 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:04:18,858 - main - INFO - 
2025-12-26 20:04:18,859 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:04:18,859 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:04:18,859 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:04:18,860 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:04:18,860 - main - INFO -      4. No re-upload needed!
2025-12-26 20:04:18,860 - main - INFO - 
2025-12-26 20:04:18,860 - main - INFO - ================================================================================
2025-12-26 20:04:18,861 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:04:18,861 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:04:18,861 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:04:18,862 - main - INFO - ================================================================================
2025-12-26 20:04:18,862 - main - INFO - 
2025-12-26 20:04:18,862 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:04:25,861 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:04:25,910 - main - INFO - 
2025-12-26 20:04:25,911 - main - INFO - ================================================================================
2025-12-26 20:04:25,911 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:04:25,911 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:04:25,911 - main - INFO - ================================================================================
2025-12-26 20:04:25,912 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:04:25,912 - main - INFO -   Upload Directory: uploads
2025-12-26 20:04:25,912 - main - INFO -   Max File Size: 20MB
2025-12-26 20:04:25,913 - main - INFO - ================================================================================
2025-12-26 20:04:25,913 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:04:25,914 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:04:25,915 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:25,962 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:04:25,976 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:04:25,976 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:04:25,977 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:04:25,977 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:04:25,977 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:04:25,996 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:04:25,998 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:04:26,000 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:04:26,009 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:04:26,010 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:04:26,011 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:04:26,011 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:26,012 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:04:26,030 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:04:26,030 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:04:26,030 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:04:26,045 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:04:26,051 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:04:26,057 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:04:26,058 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:04:26,076 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:04:26,083 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:04:26,085 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:04:26,087 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:04:26,088 - main - INFO - 
2025-12-26 20:04:26,089 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:04:26,091 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:04:26,091 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:04:26,091 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:04:26,092 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:04:26,092 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:04:26,092 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:04:26,092 - main - INFO - 
2025-12-26 20:04:26,093 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:04:26,093 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:04:26,093 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:04:26,093 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:04:26,094 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:04:26,094 - main - INFO - 
2025-12-26 20:04:26,094 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:04:26,094 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:04:26,095 - main - INFO -        - No manual section generation
2025-12-26 20:04:26,095 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:04:26,095 - main - INFO - 
2025-12-26 20:04:26,095 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:04:26,096 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:04:26,096 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:04:26,097 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:04:26,097 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:04:26,097 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:04:26,098 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:04:26,098 - main - INFO - 
2025-12-26 20:04:26,098 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:04:26,098 - main - INFO -      Main:
2025-12-26 20:04:26,099 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:04:26,099 - main - INFO - 
2025-12-26 20:04:26,099 - main - INFO -      Retrieval:
2025-12-26 20:04:26,100 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:04:26,104 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:04:26,105 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:04:26,106 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:04:26,107 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:04:26,108 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:04:26,108 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:04:26,108 - main - INFO - 
2025-12-26 20:04:26,109 - main - INFO -      Management:
2025-12-26 20:04:26,109 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:04:26,109 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:04:26,110 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:04:26,110 - main - INFO - 
2025-12-26 20:04:26,111 - main - INFO -      Documents (MongoDB):
2025-12-26 20:04:26,111 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:04:26,111 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:04:26,112 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:04:26,112 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:04:26,113 - main - INFO - 
2025-12-26 20:04:26,113 - main - INFO -      Diagnostics & Health:
2025-12-26 20:04:26,114 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:04:26,114 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:04:26,114 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:04:26,115 - main - INFO - 
2025-12-26 20:04:26,115 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:04:26,116 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:04:26,116 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:04:26,116 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:04:26,117 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:04:26,119 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:04:26,120 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:04:26,121 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:04:26,123 - main - INFO - 
2025-12-26 20:04:26,123 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:04:26,124 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:04:26,125 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:04:26,125 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:04:26,125 - main - INFO -      4. No re-upload needed!
2025-12-26 20:04:26,125 - main - INFO - 
2025-12-26 20:04:26,126 - main - INFO - ================================================================================
2025-12-26 20:04:26,126 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:04:26,126 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:04:26,126 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:04:26,127 - main - INFO - ================================================================================
2025-12-26 20:04:26,127 - main - INFO - 
2025-12-26 20:04:26,128 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:04:32,744 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:04:32,776 - main - INFO - 
2025-12-26 20:04:32,776 - main - INFO - ================================================================================
2025-12-26 20:04:32,776 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:04:32,777 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:04:32,777 - main - INFO - ================================================================================
2025-12-26 20:04:32,777 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:04:32,777 - main - INFO -   Upload Directory: uploads
2025-12-26 20:04:32,778 - main - INFO -   Max File Size: 20MB
2025-12-26 20:04:32,778 - main - INFO - ================================================================================
2025-12-26 20:04:32,778 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:04:32,779 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:04:32,779 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:32,814 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:04:32,825 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:04:32,826 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:04:32,826 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:04:32,826 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:04:32,827 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:04:32,843 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:04:32,845 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:04:32,846 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:04:32,848 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:04:32,849 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:04:32,849 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:04:32,849 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:32,850 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:04:32,863 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:04:32,863 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:04:32,863 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:04:32,877 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:04:32,880 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:04:32,880 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:04:32,881 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:04:32,892 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:04:32,897 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:04:32,898 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:04:32,898 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:04:32,898 - main - INFO - 
2025-12-26 20:04:32,899 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:04:32,899 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:04:32,899 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:04:32,899 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:04:32,900 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:04:32,900 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:04:32,902 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:04:32,903 - main - INFO - 
2025-12-26 20:04:32,904 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:04:32,904 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:04:32,905 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:04:32,905 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:04:32,906 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:04:32,906 - main - INFO - 
2025-12-26 20:04:32,906 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:04:32,907 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:04:32,907 - main - INFO -        - No manual section generation
2025-12-26 20:04:32,907 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:04:32,907 - main - INFO - 
2025-12-26 20:04:32,907 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:04:32,908 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:04:32,908 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:04:32,908 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:04:32,908 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:04:32,908 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:04:32,909 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:04:32,909 - main - INFO - 
2025-12-26 20:04:32,909 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:04:32,909 - main - INFO -      Main:
2025-12-26 20:04:32,909 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:04:32,910 - main - INFO - 
2025-12-26 20:04:32,910 - main - INFO -      Retrieval:
2025-12-26 20:04:32,910 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:04:32,910 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:04:32,911 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:04:32,911 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:04:32,911 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:04:32,911 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:04:32,911 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:04:32,912 - main - INFO - 
2025-12-26 20:04:32,912 - main - INFO -      Management:
2025-12-26 20:04:32,912 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:04:32,912 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:04:32,912 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:04:32,913 - main - INFO - 
2025-12-26 20:04:32,913 - main - INFO -      Documents (MongoDB):
2025-12-26 20:04:32,913 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:04:32,913 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:04:32,913 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:04:32,914 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:04:32,914 - main - INFO - 
2025-12-26 20:04:32,914 - main - INFO -      Diagnostics & Health:
2025-12-26 20:04:32,914 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:04:32,914 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:04:32,914 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:04:32,915 - main - INFO - 
2025-12-26 20:04:32,915 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:04:32,915 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:04:32,915 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:04:32,915 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:04:32,915 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:04:32,916 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:04:32,916 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:04:32,916 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:04:32,916 - main - INFO - 
2025-12-26 20:04:32,917 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:04:32,918 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:04:32,919 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:04:32,920 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:04:32,921 - main - INFO -      4. No re-upload needed!
2025-12-26 20:04:32,922 - main - INFO - 
2025-12-26 20:04:32,923 - main - INFO - ================================================================================
2025-12-26 20:04:32,924 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:04:32,925 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:04:32,926 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:04:32,927 - main - INFO - ================================================================================
2025-12-26 20:04:32,927 - main - INFO - 
2025-12-26 20:04:32,928 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:04:37,200 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:04:37,225 - main - INFO - 
2025-12-26 20:04:37,226 - main - INFO - ================================================================================
2025-12-26 20:04:37,226 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:04:37,226 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:04:37,226 - main - INFO - ================================================================================
2025-12-26 20:04:37,227 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:04:37,227 - main - INFO -   Upload Directory: uploads
2025-12-26 20:04:37,227 - main - INFO -   Max File Size: 20MB
2025-12-26 20:04:37,227 - main - INFO - ================================================================================
2025-12-26 20:04:37,228 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:04:37,228 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:04:37,228 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:37,252 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:04:37,262 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:04:37,262 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:04:37,262 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:04:37,263 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:04:37,263 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:04:37,274 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:04:37,276 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:04:37,277 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:04:37,279 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:04:37,279 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:04:37,279 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:04:37,279 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:37,280 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:04:37,303 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:04:37,303 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:04:37,304 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:04:37,319 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:04:37,327 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:04:37,327 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:04:37,327 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:04:37,335 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:04:37,342 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:04:37,342 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:04:37,343 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:04:37,343 - main - INFO - 
2025-12-26 20:04:37,343 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:04:37,343 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:04:37,343 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:04:37,344 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:04:37,344 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:04:37,344 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:04:37,344 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:04:37,344 - main - INFO - 
2025-12-26 20:04:37,344 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:04:37,345 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:04:37,345 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:04:37,345 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:04:37,345 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:04:37,345 - main - INFO - 
2025-12-26 20:04:37,345 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:04:37,346 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:04:37,346 - main - INFO -        - No manual section generation
2025-12-26 20:04:37,346 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:04:37,346 - main - INFO - 
2025-12-26 20:04:37,346 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:04:37,346 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:04:37,347 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:04:37,347 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:04:37,347 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:04:37,347 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:04:37,347 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:04:37,347 - main - INFO - 
2025-12-26 20:04:37,348 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:04:37,348 - main - INFO -      Main:
2025-12-26 20:04:37,348 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:04:37,348 - main - INFO - 
2025-12-26 20:04:37,348 - main - INFO -      Retrieval:
2025-12-26 20:04:37,348 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:04:37,349 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:04:37,349 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:04:37,349 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:04:37,349 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:04:37,349 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:04:37,349 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:04:37,349 - main - INFO - 
2025-12-26 20:04:37,350 - main - INFO -      Management:
2025-12-26 20:04:37,350 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:04:37,350 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:04:37,350 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:04:37,350 - main - INFO - 
2025-12-26 20:04:37,350 - main - INFO -      Documents (MongoDB):
2025-12-26 20:04:37,350 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:04:37,351 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:04:37,351 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:04:37,351 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:04:37,351 - main - INFO - 
2025-12-26 20:04:37,351 - main - INFO -      Diagnostics & Health:
2025-12-26 20:04:37,351 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:04:37,351 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:04:37,352 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:04:37,352 - main - INFO - 
2025-12-26 20:04:37,352 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:04:37,352 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:04:37,352 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:04:37,352 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:04:37,353 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:04:37,353 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:04:37,353 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:04:37,353 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:04:37,353 - main - INFO - 
2025-12-26 20:04:37,354 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:04:37,354 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:04:37,354 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:04:37,354 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:04:37,354 - main - INFO -      4. No re-upload needed!
2025-12-26 20:04:37,354 - main - INFO - 
2025-12-26 20:04:37,355 - main - INFO - ================================================================================
2025-12-26 20:04:37,355 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:04:37,355 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:04:37,355 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:04:37,355 - main - INFO - ================================================================================
2025-12-26 20:04:37,355 - main - INFO - 
2025-12-26 20:04:37,356 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:04:54,711 - main - INFO - 
2025-12-26 20:04:54,711 - main - INFO - ================================================================================
2025-12-26 20:04:54,711 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-26 20:04:54,712 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:04:54,713 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-26 20:04:54,713 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-26 20:04:54,714 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-26 20:04:54,715 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-26 20:04:54,715 - main - INFO -   âœ… User Documents Service connection closed
2025-12-26 20:04:54,716 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-26 20:04:54,716 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-26 20:04:54,717 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Disconnected from MongoDB
2025-12-26 20:04:54,717 - main - INFO -   âœ… Activity Logs Service connection closed
2025-12-26 20:04:54,718 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-26 20:04:54,718 - main - INFO -   âœ… Application stopped successfully
2025-12-26 20:04:54,718 - main - INFO - ================================================================================
2025-12-26 20:04:54,719 - main - INFO - 
2025-12-26 20:04:58,018 - main - INFO - ğŸ”’ CORS enabled for origins: ['http://localhost:3000', 'http://localhost:3001', 'http://localhost:8080', 'https://www.hakem.ai', 'https://hakem.ai']
2025-12-26 20:04:58,033 - main - INFO - 
2025-12-26 20:04:58,033 - main - INFO - ================================================================================
2025-12-26 20:04:58,033 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-26 20:04:58,034 - main - INFO -   Production-Ready Complete Integration
2025-12-26 20:04:58,034 - main - INFO - ================================================================================
2025-12-26 20:04:58,034 - main - INFO -   AI Model: gpt-4o-mini
2025-12-26 20:04:58,035 - main - INFO -   Upload Directory: uploads
2025-12-26 20:04:58,035 - main - INFO -   Max File Size: 20MB
2025-12-26 20:04:58,035 - main - INFO - ================================================================================
2025-12-26 20:04:58,036 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-26 20:04:58,036 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-26 20:04:58,036 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:58,063 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-26 20:04:58,068 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-26 20:04:58,069 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-26 20:04:58,069 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-26 20:04:58,069 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-26 20:04:58,070 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-26 20:04:58,097 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-26 20:04:58,098 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-26 20:04:58,099 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins', 'activity_logs']
2025-12-26 20:04:58,102 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 5 documents
2025-12-26 20:04:58,102 - main - INFO -   âœ… User Subscription Service connected
2025-12-26 20:04:58,103 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-26 20:04:58,103 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-26 20:04:58,103 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-26 20:04:58,127 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-26 20:04:58,127 - main - INFO -   âœ… User Documents Service connected
2025-12-26 20:04:58,127 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-26 20:04:58,174 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-26 20:04:58,176 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-26 20:04:58,177 - main - INFO -   âœ… Hakim Score Service connected
2025-12-26 20:04:58,177 - app.services.activity_logs_service - INFO - ğŸ”Œ Activity Logs Service: Connecting to MongoDB
2025-12-26 20:04:58,209 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Successfully connected to MongoDB
2025-12-26 20:04:58,212 - app.services.activity_logs_service - INFO - âœ… Activity Logs Service: Indexes created successfully
2025-12-26 20:04:58,213 - main - INFO -   âœ… Activity Logs Service connected
2025-12-26 20:04:58,213 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-26 20:04:58,213 - main - INFO - 
2025-12-26 20:04:58,213 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-26 20:04:58,214 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-26 20:04:58,214 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-26 20:04:58,214 - main - INFO -        - Separates warranties from extensions
2025-12-26 20:04:58,214 - main - INFO -        - Extracts subjectivities & operational details
2025-12-26 20:04:58,214 - main - INFO -        - Correct deductible tier detection
2025-12-26 20:04:58,215 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-26 20:04:58,215 - main - INFO - 
2025-12-26 20:04:58,215 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-26 20:04:58,215 - main - INFO -        - Generates ALL sections comprehensively
2025-12-26 20:04:58,215 - main - INFO -        - Identifies unique items per provider
2025-12-26 20:04:58,216 - main - INFO -        - Transparent scoring methodology
2025-12-26 20:04:58,216 - main - INFO -        - Uses full _extended_data from parser
2025-12-26 20:04:58,216 - main - INFO - 
2025-12-26 20:04:58,216 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-26 20:04:58,216 - main - INFO -        - Single endpoint auto-populates everything
2025-12-26 20:04:58,216 - main - INFO -        - No manual section generation
2025-12-26 20:04:58,217 - main - INFO -        - Complete MongoDB integration
2025-12-26 20:04:58,217 - main - INFO - 
2025-12-26 20:04:58,218 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-26 20:04:58,219 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-26 20:04:58,219 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-26 20:04:58,219 - main - INFO -      âœ… Subjectivities: Now included
2025-12-26 20:04:58,220 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-26 20:04:58,220 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-26 20:04:58,220 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-26 20:04:58,221 - main - INFO - 
2025-12-26 20:04:58,221 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-26 20:04:58,221 - main - INFO -      Main:
2025-12-26 20:04:58,221 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-26 20:04:58,222 - main - INFO - 
2025-12-26 20:04:58,222 - main - INFO -      Retrieval:
2025-12-26 20:04:58,222 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-26 20:04:58,222 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-26 20:04:58,223 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-26 20:04:58,224 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-26 20:04:58,224 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-26 20:04:58,225 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-26 20:04:58,225 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-26 20:04:58,225 - main - INFO - 
2025-12-26 20:04:58,225 - main - INFO -      Management:
2025-12-26 20:04:58,226 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-26 20:04:58,226 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-26 20:04:58,226 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-26 20:04:58,226 - main - INFO - 
2025-12-26 20:04:58,227 - main - INFO -      Documents (MongoDB):
2025-12-26 20:04:58,227 - main - INFO -        GET  /api/documents                All documents
2025-12-26 20:04:58,227 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-26 20:04:58,227 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-26 20:04:58,227 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-26 20:04:58,228 - main - INFO - 
2025-12-26 20:04:58,228 - main - INFO -      Diagnostics & Health:
2025-12-26 20:04:58,228 - main - INFO -        GET  /api/health                   System health
2025-12-26 20:04:58,228 - main - INFO -        GET  /api/status                   Detailed status
2025-12-26 20:04:58,228 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-26 20:04:58,228 - main - INFO - 
2025-12-26 20:04:58,229 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-26 20:04:58,229 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-26 20:04:58,229 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-26 20:04:58,229 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-26 20:04:58,229 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-26 20:04:58,229 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-26 20:04:58,230 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-26 20:04:58,230 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-26 20:04:58,230 - main - INFO - 
2025-12-26 20:04:58,230 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-26 20:04:58,230 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-26 20:04:58,230 - main - INFO -      2. Receive comparison_id + complete data
2025-12-26 20:04:58,230 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-26 20:04:58,231 - main - INFO -      4. No re-upload needed!
2025-12-26 20:04:58,231 - main - INFO - 
2025-12-26 20:04:58,231 - main - INFO - ================================================================================
2025-12-26 20:04:58,231 - main - INFO -   âœ… Application started successfully!
2025-12-26 20:04:58,231 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-26 20:04:58,231 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-26 20:04:58,232 - main - INFO - ================================================================================
2025-12-26 20:04:58,232 - main - INFO - 
2025-12-26 20:04:58,232 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-26 20:05:18,292 - main - INFO - ğŸ“¥ OPTIONS /api/activity-logs/create
2025-12-26 20:05:18,292 - main - INFO - ğŸ“¤ OPTIONS /api/activity-logs/create - 200 - 0.00s
2025-12-26 20:05:18,294 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:05:18,295 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:05:18,296 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:05:18,299 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:05:18,299 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:05:18,302 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:05:18,306 - main - INFO - ğŸ“¥ POST /api/activity-logs/create
2025-12-26 20:05:18,307 - app.api.routes - INFO - ğŸ“ Creating activity log: login for user 694edeacc98c1096e3582e38
2025-12-26 20:05:18,311 - app.api.routes - INFO - âœ… Activity log created: 694eea7e8679397e85434e98
2025-12-26 20:05:18,313 - main - INFO - ğŸ“¤ POST /api/activity-logs/create - 200 - 0.01s
2025-12-26 20:05:18,318 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:05:18,320 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:05:18,323 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:05:18,331 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:05:18,332 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:05:18,338 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:05:18,353 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:05:18,356 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:05:18,361 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:05:18,369 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:05:18,370 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:05:18,373 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:05:18,382 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:05:18,385 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:05:18,388 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:05:18,400 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:05:18,402 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:05:18,406 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
2025-12-26 20:05:20,838 - main - INFO - ğŸ“¥ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 20:05:20,839 - main - INFO - ğŸ“¤ OPTIONS /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.00s
2025-12-26 20:05:20,841 - main - INFO - ğŸ“¥ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf
2025-12-26 20:05:20,842 - app.api.routes - INFO - ğŸ“„ Generating PDF for comparison: cmp_1766776606_50d2e07a4ea3, type: both
2025-12-26 20:05:20,843 - app.services.pdf_generator_service - INFO - ğŸ” Generating 1-page strategic memo for: cmp_1766776606_50d2e07a4ea3
2025-12-26 20:05:20,844 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 20:05:20,844 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for strategic memo...
2025-12-26 20:05:20,845 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 20:05:20,845 - app.services.pdf_generator_service - INFO - ğŸ“„ Building strategic executive memo (1-page brief)...
2025-12-26 20:05:20,847 - app.services.pdf_generator_service - INFO - âœ… Strategic memo built successfully
2025-12-26 20:05:20,959 - app.services.pdf_generator_service - INFO - âœ… Generated strategic memo PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 20:05:20,959 - app.services.pdf_generator_service - INFO - ğŸ” Generating detailed comparison PDF for: cmp_1766776606_50d2e07a4ea3
2025-12-26 20:05:20,960 - app.services.pdf_generator_service - INFO - âœ… Comparison data validated: summary=True, data_table=True, side_by_side=True
2025-12-26 20:05:20,960 - app.services.pdf_generator_service - INFO - ğŸ“„ Building cover page for detailed comparison...
2025-12-26 20:05:20,961 - app.services.pdf_generator_service - INFO - âœ… Cover page built successfully
2025-12-26 20:05:20,961 - app.services.pdf_generator_service - INFO - ğŸ“„ Building detailed comparison factors...
2025-12-26 20:05:20,981 - app.services.pdf_generator_service - INFO - âœ… Detailed comparison factors built successfully
2025-12-26 20:05:20,981 - app.services.pdf_generator_service - INFO - ğŸ“„ Building key differences section...
2025-12-26 20:05:20,989 - app.services.pdf_generator_service - INFO - âœ… Key differences section built successfully
2025-12-26 20:05:20,990 - app.services.pdf_generator_service - INFO - ğŸ“„ Building data table section...
2025-12-26 20:05:20,991 - app.services.pdf_generator_service - INFO - âœ… Data table section built successfully
2025-12-26 20:05:20,992 - app.services.pdf_generator_service - INFO - ğŸ“„ Building side-by-side section...
2025-12-26 20:05:20,994 - app.services.pdf_generator_service - INFO - âœ… Side-by-side section built successfully
2025-12-26 20:05:20,995 - app.services.pdf_generator_service - INFO - ğŸ“„ Building analytics section...
2025-12-26 20:05:20,996 - app.services.pdf_generator_service - INFO - âœ… Analytics section built successfully
2025-12-26 20:05:21,154 - app.services.pdf_generator_service - INFO - âœ… Generated detailed comparison PDF for comparison: cmp_1766776606_50d2e07a4ea3
2025-12-26 20:05:21,155 - app.api.routes - INFO - âœ… Both PDFs generated: Strategic_Memo_cmp_1766776606_50d2e07a4ea3_20251226_200520.pdf (129175 bytes), HAKEM_AI_Detailed_Technical_Comparison_cmp_1766776606_50d2e07a4ea3_20251226_200520.pdf (151151 bytes)
2025-12-26 20:05:21,158 - main - INFO - ğŸ“¤ GET /api/comparison/cmp_1766776606_50d2e07a4ea3/pdf - 200 - 0.32s
2025-12-26 20:05:48,306 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:05:48,306 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:05:48,307 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:05:48,309 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:05:48,309 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:05:48,311 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.01s
2025-12-26 20:06:18,307 - main - INFO - ğŸ“¥ GET /api/comparisons
2025-12-26 20:06:18,308 - app.api.routes - INFO - ğŸ“Š Fetching all comparisons for user: 694edeacc98c1096e3582e38
2025-12-26 20:06:18,311 - app.services.mongodb_service_enhanced - INFO - ğŸ” Query for comparisons: {'user_id': '694edeacc98c1096e3582e38'}
2025-12-26 20:06:18,317 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Found 1 comparisons for user 694edeacc98c1096e3582e38 (company: None)
2025-12-26 20:06:18,318 - app.api.routes - INFO - âœ… Found 1 comparisons for user 694edeacc98c1096e3582e38
2025-12-26 20:06:18,323 - main - INFO - ğŸ“¤ GET /api/comparisons - 200 - 0.02s
