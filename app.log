2025-12-16 17:37:51,771 - main - INFO - 
2025-12-16 17:37:51,771 - main - INFO - ================================================================================
2025-12-16 17:37:51,771 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-16 17:37:51,771 - main - INFO -   Production-Ready Complete Integration
2025-12-16 17:37:51,772 - main - INFO - ================================================================================
2025-12-16 17:37:51,772 - main - INFO -   AI Model: gpt-4o-mini
2025-12-16 17:37:51,772 - main - INFO -   Upload Directory: uploads
2025-12-16 17:37:51,772 - main - INFO -   Max File Size: 20MB
2025-12-16 17:37:51,773 - main - INFO - ================================================================================
2025-12-16 17:37:51,773 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-16 17:37:51,773 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-16 17:37:51,773 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-16 17:37:52,155 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-16 17:37:52,165 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-16 17:37:52,166 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-16 17:37:52,166 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-16 17:37:52,167 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-16 17:37:52,167 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-16 17:37:52,199 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-16 17:37:52,201 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-16 17:37:52,205 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-16 17:37:52,210 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-16 17:37:52,211 - main - INFO -   âœ… User Subscription Service connected
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-16 17:37:52,212 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-16 17:37:52,264 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-16 17:37:52,265 - main - INFO -   âœ… User Documents Service connected
2025-12-16 17:37:52,265 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-16 17:37:52,265 - main - INFO - 
2025-12-16 17:37:52,266 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-16 17:37:52,266 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-16 17:37:52,266 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-16 17:37:52,266 - main - INFO -        - Separates warranties from extensions
2025-12-16 17:37:52,267 - main - INFO -        - Extracts subjectivities & operational details
2025-12-16 17:37:52,267 - main - INFO -        - Correct deductible tier detection
2025-12-16 17:37:52,268 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-16 17:37:52,269 - main - INFO - 
2025-12-16 17:37:52,270 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-16 17:37:52,271 - main - INFO -        - Generates ALL sections comprehensively
2025-12-16 17:37:52,271 - main - INFO -        - Identifies unique items per provider
2025-12-16 17:37:52,271 - main - INFO -        - Transparent scoring methodology
2025-12-16 17:37:52,271 - main - INFO -        - Uses full _extended_data from parser
2025-12-16 17:37:52,272 - main - INFO - 
2025-12-16 17:37:52,272 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-16 17:37:52,272 - main - INFO -        - Single endpoint auto-populates everything
2025-12-16 17:37:52,272 - main - INFO -        - No manual section generation
2025-12-16 17:37:52,273 - main - INFO -        - Complete MongoDB integration
2025-12-16 17:37:52,273 - main - INFO - 
2025-12-16 17:37:52,273 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-16 17:37:52,273 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-16 17:37:52,274 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-16 17:37:52,274 - main - INFO -      âœ… Subjectivities: Now included
2025-12-16 17:37:52,274 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-16 17:37:52,274 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-16 17:37:52,275 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-16 17:37:52,275 - main - INFO - 
2025-12-16 17:37:52,275 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-16 17:37:52,275 - main - INFO -      Main:
2025-12-16 17:37:52,275 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-16 17:37:52,276 - main - INFO - 
2025-12-16 17:37:52,276 - main - INFO -      Retrieval:
2025-12-16 17:37:52,276 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-16 17:37:52,276 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-16 17:37:52,277 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-16 17:37:52,277 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-16 17:37:52,277 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-16 17:37:52,278 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-16 17:37:52,278 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-16 17:37:52,279 - main - INFO - 
2025-12-16 17:37:52,279 - main - INFO -      Management:
2025-12-16 17:37:52,279 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-16 17:37:52,279 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-16 17:37:52,279 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-16 17:37:52,280 - main - INFO - 
2025-12-16 17:37:52,280 - main - INFO -      Documents (MongoDB):
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents                All documents
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-16 17:37:52,280 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-16 17:37:52,280 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-16 17:37:52,281 - main - INFO - 
2025-12-16 17:37:52,281 - main - INFO -      Diagnostics & Health:
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/health                   System health
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/status                   Detailed status
2025-12-16 17:37:52,281 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-16 17:37:52,281 - main - INFO - 
2025-12-16 17:37:52,282 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-16 17:37:52,282 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-16 17:37:52,283 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-16 17:37:52,284 - main - INFO - 
2025-12-16 17:37:52,284 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-16 17:37:52,284 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-16 17:37:52,285 - main - INFO -      2. Receive comparison_id + complete data
2025-12-16 17:37:52,285 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-16 17:37:52,286 - main - INFO -      4. No re-upload needed!
2025-12-16 17:37:52,286 - main - INFO - 
2025-12-16 17:37:52,286 - main - INFO - ================================================================================
2025-12-16 17:37:52,287 - main - INFO -   âœ… Application started successfully!
2025-12-16 17:37:52,287 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-16 17:37:52,288 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-16 17:37:52,288 - main - INFO - ================================================================================
2025-12-16 17:37:52,289 - main - INFO - 
2025-12-16 17:37:52,289 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-16 17:37:53,921 - main - INFO - ğŸ“¥ GET /docs
2025-12-16 17:37:53,922 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-16 17:37:54,166 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-16 17:37:54,176 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.01s
2025-12-16 17:38:31,635 - main - INFO - ğŸ“¥ POST /api/compare-quotes
2025-12-16 17:38:31,640 - app.api.routes - INFO - ğŸ” Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:38:31,641 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:38:31,644 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:38:31,647 - app.api.routes - INFO - âœ… User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-16 17:38:31,648 - app.api.routes - INFO -    - Remaining comparisons: 247
2025-12-16 17:38:31,649 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-16 17:38:31,649 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-16 17:38:31,649 - app.api.routes - INFO - ğŸ†” Generated comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:38:31,650 - app.services.progress_tracker - INFO - ğŸ“Š Progress initialized for job: job_3d995b93efeb (2 files)
2025-12-16 17:38:31,650 - app.api.routes - INFO - ğŸ“Š Initialized progress tracking: job_3d995b93efeb
2025-12-16 17:38:31,651 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:38:31,651 - app.api.routes - INFO - ğŸ“„ Processing: Malath.pdf
2025-12-16 17:38:31,651 - app.api.routes - INFO - ======================================================================
2025-12-16 17:38:31,653 - app.api.routes - INFO - ğŸ’¾ Saved file: Malath.pdf â†’ e9f131c024e24758b2ecd566b16995a0.pdf (203279 bytes)
2025-12-16 17:38:31,653 - app.api.routes - INFO - ğŸ“– Extracting text from: Malath.pdf
2025-12-16 17:38:31,655 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\e9f131c024e24758b2ecd566b16995a0.pdf
2025-12-16 17:38:31,656 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:38:31,675 - app.api.routes - INFO - ğŸ“„ Processing: GIG.pdf
2025-12-16 17:38:31,693 - app.api.routes - INFO - ======================================================================
2025-12-16 17:38:31,705 - app.services.pdf_extractor - INFO - Successfully extracted 6578 characters from 3 pages
2025-12-16 17:38:31,705 - app.api.routes - INFO - ğŸ’¾ Saved file: GIG.pdf â†’ eaa00614669e42a19e9a7f9a160c362c.pdf (478025 bytes)
2025-12-16 17:38:31,706 - app.api.routes - INFO - ğŸ“– Extracting text from: GIG.pdf
2025-12-16 17:38:31,706 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\eaa00614669e42a19e9a7f9a160c362c.pdf
2025-12-16 17:38:31,706 - app.api.routes - INFO - ğŸ¤– Parsing with AI: Malath.pdf
2025-12-16 17:38:31,707 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for Malath.pdf
2025-12-16 17:38:31,805 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Malath Insurance (pattern: \bmalath\b)
2025-12-16 17:38:31,824 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Malath Insurance
2025-12-16 17:38:31,832 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): M/S. Saudi Amana Contracting Co.
2025-12-16 17:38:31,832 - app.services.pdf_extractor - INFO - Successfully extracted 6549 characters from 3 pages
2025-12-16 17:38:31,832 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:38:31,833 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GENERIC
2025-12-16 17:38:31,869 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 2 sublimits
2025-12-16 17:38:31,869 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:38:32,385 - app.api.routes - INFO - ğŸ¤– Parsing with AI: GIG.pdf
2025-12-16 17:38:32,385 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for GIG.pdf
2025-12-16 17:38:32,386 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Gulf Insurance Group (GIG) (pattern: \bgig\b)
2025-12-16 17:38:32,386 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Gulf Insurance Group (GIG)
2025-12-16 17:38:32,387 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): Saudi Amana Contracting Co. L.L.C
2025-12-16 17:38:32,387 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:38:32,388 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GIG
2025-12-16 17:38:32,432 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 4 sublimits
2025-12-16 17:38:32,433 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:39:00,388 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:00,395 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:39:00,395 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:39:00,396 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:39:00,396 - app.services.ai_parser - WARNING - âš ï¸ Only 4 benefits, using fallback...
2025-12-16 17:39:00,401 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 28 benefits from patterns
2025-12-16 17:39:00,401 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 29 total
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:39:00,402 - app.services.ai_parser - INFO - ğŸ”„ Rate: 'SR 69,602 @ 0.2%' â†’ '0.2%'
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ’° Calculated: 28590992628.64 from SI: 41077832.0 Ã— Rate: SR 69,602 @ 0.2%
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5%, min SR 10,000
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:39:00,403 - app.services.ai_parser - INFO - ğŸ“Š Counts: 29 benefits, 20 exclusions, 6 warranties, 3 extensions
2025-12-16 17:39:00,404 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:39:04,101 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:04,107 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:39:04,108 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:39:04,109 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:39:04,110 - app.services.ai_parser - WARNING - âš ï¸ Only 4 warranties, using fallback...
2025-12-16 17:39:04,115 - app.services.ai_parser - INFO - âš ï¸ Fallback extracted 6 warranties from patterns
2025-12-16 17:39:04,115 - app.services.ai_parser - INFO - âœ… Enhanced warranties: 7 total
2025-12-16 17:39:04,115 - app.services.ai_parser - WARNING - âš ï¸ Only 3 benefits, using fallback...
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 10 benefits from patterns
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 10 total
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:39:04,117 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ”„ Rate: '0.30% (Per Cent)' â†’ '0.30%'
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ’° Calculated: 123233.49 from SI: 41077831.25 Ã— Rate: 0.30% (Per Cent)
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5% of the claim amount, min. SR 10,000
2025-12-16 17:39:04,118 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:39:04,119 - app.services.ai_parser - INFO - ğŸ“Š Counts: 10 benefits, 37 exclusions, 7 warranties, 0 extensions
2025-12-16 17:39:04,119 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:39:08,118 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:08,126 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:39:09,559 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:09,562 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:39:10,852 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:39:10,860 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:39:10,861 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:39:10,862 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:39:10,863 - app.services.ai_parser - INFO - 
2025-12-16 17:39:10,864 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,864 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - Malath.pdf
2025-12-16 17:39:10,865 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,866 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Malath Insurance
2025-12-16 17:39:10,866 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: M/S. Saudi Amana Contracting Co.
2025-12-16 17:39:10,867 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 169,122.30
2025-12-16 17:39:10,868 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.30%
2025-12-16 17:39:10,868 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:39:10,869 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.0/100
2025-12-16 17:39:10,870 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5% of the claim amount, min. SR 10,000
2025-12-16 17:39:10,870 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:39:10,871 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:39:10,872 - app.services.ai_parser - INFO - 
2025-12-16 17:39:10,872 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:39:10,873 - app.services.ai_parser - INFO -    âœ“ Benefits: 10
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Exclusions: 37
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Warranties: 7
2025-12-16 17:39:10,874 - app.services.ai_parser - INFO -    âœ“ Extensions: 0
2025-12-16 17:39:10,875 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:39:10,876 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:39:10,879 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: e9f131c024e24758b2ecd566b16995a0.pdf â†’ 6941993e06f206f2b4664fbc
2025-12-16 17:39:10,879 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 6941993e06f206f2b4664fbc
2025-12-16 17:39:10,884 - app.services.user_documents_service - INFO - âœ… Saved user document: Malath.pdf â†’ 6941993e06f206f2b4664fbd (203279 bytes)
2025-12-16 17:39:10,884 - app.api.routes - INFO - âœ… Saved user document: Malath.pdf â†’ 6941993e06f206f2b4664fbd
2025-12-16 17:39:10,885 - app.api.routes - INFO - âœ… Successfully processed: Malath.pdf
2025-12-16 17:42:52,069 - main - INFO - ğŸ“¥ GET /docs
2025-12-16 17:42:52,070 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-16 17:42:55,081 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-16 17:42:55,083 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-16 17:43:22,206 - main - INFO - ğŸ“¥ POST /api/compare-quotes
2025-12-16 17:43:22,211 - app.api.routes - INFO - ğŸ” Checking user subscription for user: 693ae751e9ed6d204b2fc06e
2025-12-16 17:43:22,213 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:43:22,213 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:43:22,214 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:43:22,216 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:43:22,217 - app.api.routes - INFO - âœ… User 693ae751e9ed6d204b2fc06e can perform comparison
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Remaining comparisons: 247
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Quotes per case: 3
2025-12-16 17:43:22,218 - app.api.routes - INFO -    - Files uploaded: 2
2025-12-16 17:43:22,218 - app.api.routes - INFO - ğŸ†” Generated comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:43:22,218 - app.services.progress_tracker - INFO - ğŸ“Š Progress initialized for job: job_4348dda928d2 (2 files)
2025-12-16 17:43:22,219 - app.api.routes - INFO - ğŸ“Š Initialized progress tracking: job_4348dda928d2
2025-12-16 17:43:22,219 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:43:22,220 - app.api.routes - INFO - ğŸ“„ Processing: GIG.pdf
2025-12-16 17:43:22,220 - app.api.routes - INFO - ======================================================================
2025-12-16 17:43:22,221 - app.api.routes - INFO - ğŸ’¾ Saved file: GIG.pdf â†’ f3b4a52383e94e478e92c67b611eb127.pdf (478025 bytes)
2025-12-16 17:43:22,222 - app.api.routes - INFO - ğŸ“– Extracting text from: GIG.pdf
2025-12-16 17:43:22,222 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:43:22,222 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\f3b4a52383e94e478e92c67b611eb127.pdf
2025-12-16 17:43:22,222 - app.api.routes - INFO - ğŸ“„ Processing: Malath.pdf
2025-12-16 17:43:22,223 - app.api.routes - INFO - ======================================================================
2025-12-16 17:43:22,357 - app.services.pdf_extractor - INFO - Successfully extracted 6549 characters from 3 pages
2025-12-16 17:43:22,357 - app.api.routes - INFO - ğŸ’¾ Saved file: Malath.pdf â†’ e9efe96152c842b2ab137d2dbad80224.pdf (203279 bytes)
2025-12-16 17:43:22,357 - app.api.routes - INFO - ğŸ“– Extracting text from: Malath.pdf
2025-12-16 17:43:22,358 - app.services.pdf_extractor - INFO - Extracting text from PDF: uploads\e9efe96152c842b2ab137d2dbad80224.pdf
2025-12-16 17:43:22,358 - app.api.routes - INFO - ğŸ¤– Parsing with AI: GIG.pdf
2025-12-16 17:43:22,358 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for GIG.pdf
2025-12-16 17:43:22,386 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Gulf Insurance Group (GIG) (pattern: \bgig\b)
2025-12-16 17:43:22,395 - app.services.pdf_extractor - INFO - Successfully extracted 6578 characters from 3 pages
2025-12-16 17:43:22,395 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Gulf Insurance Group (GIG)
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): Saudi Amana Contracting Co. L.L.C
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:43:22,396 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GIG
2025-12-16 17:43:22,439 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 4 sublimits
2025-12-16 17:43:22,440 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:43:22,447 - app.api.routes - INFO - ğŸ¤– Parsing with AI: Malath.pdf
2025-12-16 17:43:22,448 - app.services.ai_parser - INFO - ğŸ” Stage 1: Entity identification for Malath.pdf
2025-12-16 17:43:22,452 - app.services.ai_parser - INFO - âœ… Detected insurer from filename: Malath Insurance (pattern: \bmalath\b)
2025-12-16 17:43:22,452 - app.services.ai_parser - INFO - ğŸ¢ Insurer (Insurance Company): Malath Insurance
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ‘¤ Insured (Customer): M/S. Saudi Amana Contracting Co.
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ” Stage 2: Document format detection
2025-12-16 17:43:22,453 - app.services.ai_parser - INFO - ğŸ“‹ Detected format: GENERIC
2025-12-16 17:43:22,488 - app.services.ai_parser - INFO - ğŸ¯ Pre-extracted 2 sublimits
2025-12-16 17:43:22,488 - app.services.ai_parser - INFO - ğŸ” Stage 3: Comprehensive extraction
2025-12-16 17:43:49,587 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:49,591 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:43:49,591 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:43:49,592 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:43:49,592 - app.services.ai_parser - WARNING - âš ï¸ Only 4 benefits, using fallback...
2025-12-16 17:43:49,597 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 28 benefits from patterns
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 29 total
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:43:49,598 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - ğŸ”„ Rate: 'SR 69,602 @ 0.2%' â†’ '0.2%'
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - ğŸ’° Calculated: 28590992628.64 from SI: 41077832.0 Ã— Rate: SR 69,602 @ 0.2%
2025-12-16 17:43:49,599 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5%, min SR 10,000
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - ğŸ“Š Counts: 29 benefits, 21 exclusions, 6 warranties, 2 extensions
2025-12-16 17:43:49,600 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:43:56,293 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:56,301 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:43:56,644 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - âœ… Stage 3: JSON parsed successfully
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validation and Fallback
2025-12-16 17:43:56,647 - app.services.ai_parser - INFO - ğŸ” Stage 3.5: Validating and enhancing extraction...
2025-12-16 17:43:56,648 - app.services.ai_parser - WARNING - âš ï¸ Only 4 warranties, using fallback...
2025-12-16 17:43:56,648 - app.services.ai_parser - INFO - âš ï¸ Fallback extracted 6 warranties from patterns
2025-12-16 17:43:56,648 - app.services.ai_parser - INFO - âœ… Enhanced warranties: 7 total
2025-12-16 17:43:56,649 - app.services.ai_parser - WARNING - âš ï¸ Only 0 benefits, using fallback...
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ“‹ Fallback extracted 10 benefits from patterns
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - âœ… Enhanced benefits: 10 total
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ” Stage 4: Extracting subjectivities and binding requirements
2025-12-16 17:43:56,650 - app.services.ai_parser - INFO - ğŸ§® Stage 5: Calculations and tier detection
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ”„ Rate: '0.30% (Per Cent)' â†’ '0.30%'
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ’° Calculated: 123233.49 from SI: 41077831.25 Ã— Rate: 0.30% (Per Cent)
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - âœ… Applicable deductibles: MD: 5% of the claim amount, min SR 10,000
2025-12-16 17:43:56,651 - app.services.ai_parser - INFO - ğŸ¯ Stage 6: Analysis and scoring
2025-12-16 17:43:56,652 - app.services.ai_parser - INFO - ğŸ“Š Counts: 10 benefits, 37 exclusions, 7 warranties, 0 extensions
2025-12-16 17:43:56,652 - app.services.ai_parser - INFO - â³ Waiting for parallel API calls (Stage 4 + Stage 6)...
2025-12-16 17:43:57,537 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:43:57,791 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:43:57,792 - app.services.ai_parser - INFO - 
2025-12-16 17:43:57,793 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,793 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - GIG.pdf
2025-12-16 17:43:57,794 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,795 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Gulf Insurance Group (GIG)
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: Saudi Amana Contracting Co. L.L.C
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 69,602.00
2025-12-16 17:43:57,796 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.2%
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.7/100
2025-12-16 17:43:57,797 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5%, min SR 10,000
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - 
2025-12-16 17:43:57,798 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Benefits: 29
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Exclusions: 21
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Warranties: 6
2025-12-16 17:43:57,799 - app.services.ai_parser - INFO -    âœ“ Extensions: 2
2025-12-16 17:43:57,800 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:43:57,800 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:43:57,802 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: f3b4a52383e94e478e92c67b611eb127.pdf â†’ 69419a5d06f206f2b4664fbe
2025-12-16 17:43:57,802 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419a5d06f206f2b4664fbe
2025-12-16 17:43:57,807 - app.services.user_documents_service - INFO - âœ… Saved user document: GIG.pdf â†’ 69419a5d06f206f2b4664fbf (478025 bytes)
2025-12-16 17:43:57,808 - app.api.routes - INFO - âœ… Saved user document: GIG.pdf â†’ 69419a5d06f206f2b4664fbf
2025-12-16 17:43:57,808 - app.api.routes - INFO - âœ… Successfully processed: GIG.pdf
2025-12-16 17:44:03,042 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:03,044 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 78.0
2025-12-16 17:44:03,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - âœ… Stage 4: Subjectivities extracted
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:44:03,659 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:44:03,661 - app.services.ai_parser - INFO - 
2025-12-16 17:44:03,662 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,662 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - Malath.pdf
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Malath Insurance
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: M/S. Saudi Amana Contracting Co.
2025-12-16 17:44:03,663 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 169,122.30
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.30%
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ¯ Score: 78.0/100
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.0/100
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5% of the claim amount, min SR 10,000
2025-12-16 17:44:03,664 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - 
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO -    âœ“ Benefits: 10
2025-12-16 17:44:03,665 - app.services.ai_parser - INFO -    âœ“ Exclusions: 37
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Warranties: 7
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Extensions: 0
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:44:03,666 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:44:03,668 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: e9efe96152c842b2ab137d2dbad80224.pdf â†’ 69419a6306f206f2b4664fc0
2025-12-16 17:44:03,668 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419a6306f206f2b4664fc0
2025-12-16 17:44:03,671 - app.services.user_documents_service - INFO - âœ… Saved user document: Malath.pdf â†’ 69419a6306f206f2b4664fc1 (203279 bytes)
2025-12-16 17:44:03,671 - app.api.routes - INFO - âœ… Saved user document: Malath.pdf â†’ 69419a6306f206f2b4664fc1
2025-12-16 17:44:03,671 - app.api.routes - INFO - âœ… Successfully processed: Malath.pdf
2025-12-16 17:44:03,672 - app.api.routes - INFO - 
âœ… Successfully extracted 2 quotes
2025-12-16 17:44:03,672 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:44:03,672 - app.api.routes - INFO - ğŸ”€ Generating comparison for 2 quotes
2025-12-16 17:44:03,673 - app.api.routes - INFO - ======================================================================
2025-12-16 17:44:03,673 - app.services.ai_ranker - INFO - ğŸ” Starting comprehensive comparison of 2 quotes
2025-12-16 17:44:03,673 - app.services.ai_ranker - INFO - âš–ï¸ Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ğŸ† Hakim Score integration enabled
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ğŸ” IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-16 17:44:03,674 - app.services.ai_ranker - INFO - ================================================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Gulf Insurance Group (GIG)
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:44:03,675 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:44:03,676 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:03,676 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:44:03,677 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:44:03,678 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:44:03,679 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:44:03,679 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:44:03,680 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GIG",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,832",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077832,
    "total_sum_insured": "SR 41,077,832"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 500,000",
        "deductible": "5%, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 1,000,000",
        "deductible": "5%, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 2,000,000",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 2,000,000",
        "deductible": "5%, min SR 75,000",
        "applies_to": "material_damage"
      },
      {
        "range": "Gantry Crane",
        "deductible": "10%, min SR 50,000",
        "applies_to": "material
2025-12-16 17:44:03,683 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:44:03,684 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:44:03,685 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:44:03,686 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Gulf Insurance Group (GIG)
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO - 
ğŸ“Š Gulf Insurance Group (GIG):
2025-12-16 17:44:03,687 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Extensions: 2
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Exclusions: 21
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:44:03,688 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Malath Insurance
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:44:03,689 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:44:03,690 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:44:03,691 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,831.25",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077831.25,
    "total_sum_insured": "SR 41,077,831.25"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 100,000",
        "deductible": "5% of the claim amount, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100,000 to SR 500,000",
        "deductible": "10% of claim amount, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500,000",
        "deductible": "10% of the claim amount, min SR 75,000",
        "applies_to": "material_damage"
      }
    ],
    "business_interruption_tiers": [],
    "natural_catastrophe_tiers": [],
    "applicable_md_tier": {
      "range": "up to SR 100,000",
      "deductible": "5% of the clai
2025-12-16 17:44:03,693 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,694 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:44:03,695 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:44:03,696 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:44:03,697 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:44:03,697 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:44:03,698 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,698 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:44:03,699 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:44:03,700 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Malath Insurance
2025-12-16 17:44:03,701 - app.services.ai_ranker - INFO - 
ğŸ“Š Malath Insurance:
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Extensions: 0
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Exclusions: 37
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:44:03,702 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Gulf Insurance Group (GIG)
2025-12-16 17:44:03,875 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 6
2025-12-16 17:44:03,875 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 2
2025-12-16 17:44:03,876 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:44:03,877 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:44:03,878 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:44:03,879 - app.services.ai_ranker - INFO -       â€¢ Hot works Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO -       â€¢ No smoking Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO -       â€¢ Housekeeping Warranty
2025-12-16 17:44:03,880 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Malath Insurance
2025-12-16 17:44:04,124 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 7
2025-12-16 17:44:04,124 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:44:04,125 - app.services.ai_ranker - INFO -       â€¢ Warranted that all plant and equipment is operated and maintained in accordance ...
2025-12-16 17:44:04,126 - app.services.ai_ranker - INFO -       â€¢ Warranted that All operators of the equipment must be licensed to operate such p...
2025-12-16 17:44:04,126 - app.services.ai_ranker - INFO -       â€¢ Warranted that all equipment is fitted with operational overload alarms.
2025-12-16 17:44:04,127 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:44:04,127 - app.services.ai_ranker - INFO - âœ… UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-16 17:44:04,128 - app.services.ai_ranker - INFO - ================================================================================

2025-12-16 17:44:04,128 - app.services.ai_ranker - INFO - ğŸ“Š Gulf Insurance Group (GIG): Hakim Score=88.0 (Strong), Weighted Score=88.13
2025-12-16 17:44:04,129 - app.services.ai_ranker - INFO - ğŸ“Š Malath Insurance: Hakim Score=75.0 (Standard), Weighted Score=58.45
2025-12-16 17:44:04,129 - app.services.ai_ranker - INFO - ğŸ¤– Performing weighted ranking with Hakim Score...
2025-12-16 17:44:04,130 - app.services.ai_ranker - INFO - ğŸ¤– Starting AI ranking analysis (background task)...
2025-12-16 17:44:04,130 - app.services.ai_ranker - INFO - âœ… Weighted ranking with Hakim Score completed
2025-12-16 17:44:12,600 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:12,606 - app.services.ai_ranker - INFO - âœ… AI ranking analysis completed
2025-12-16 17:44:12,606 - app.services.ai_ranker - INFO - ğŸ”¨ Building comprehensive comparison structure...
2025-12-16 17:44:16,220 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:44:16,225 - app.services.ai_ranker - INFO - âœ… Generated reasoning for Gulf Insurance Group (GIG): Gulf Insurance Group (GIG) stands out as the best insurance provider due to its exceptional score of...
2025-12-16 17:44:16,226 - app.services.ai_ranker - INFO - âœ… Comprehensive comparison complete
2025-12-16 17:44:16,230 - app.api.routes - INFO - ğŸ¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:44:16,230 - app.services.mongodb_service_enhanced - INFO - ğŸ’¾ Saving COMPLETE comparison data to MongoDB
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-16 17:44:16,231 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO - ğŸ“‹ Extracted quotes count: 2
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Gulf Insurance Group (GIG)
2025-12-16 17:44:16,232 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:44:16,233 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:44:16,233 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:44:16,234 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:44:16,235 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Malath Insurance
2025-12-16 17:44:16,235 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:44:16,236 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:44:16,237 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:44:16,237 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:44:16,240 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Data sizes:
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,495 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 20,834 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Data table: 9,181 bytes
2025-12-16 17:44:16,241 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,500 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 24,825 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Total document: 126,451 bytes
2025-12-16 17:44:16,242 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-16 17:44:16,243 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-16 17:44:16,243 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-16 17:44:16,244 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-16 17:44:16,245 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-16 17:44:16,245 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-16 17:44:16,246 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-16 17:44:16,247 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-16 17:44:16,248 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:44:16,248 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:16,249 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-16 17:44:16,253 - app.services.mongodb_service_enhanced - INFO - âœ… Saved new comparison: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,253 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 69419a705a37704a1c0a83f2
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO - âœ… Verification - Saved document has:
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-16 17:44:16,256 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-16 17:44:16,257 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - First row keys (30): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-16 17:44:16,258 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-16 17:44:16,259 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:44:16,259 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-16 17:44:16,260 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-16 17:44:16,261 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-16 17:44:16,261 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-16 17:44:16,262 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-16 17:44:16,262 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:44:16,263 - app.api.routes - INFO - âœ… Saved comparison result to MongoDB: 69419a705a37704a1c0a83f2
2025-12-16 17:44:16,263 - app.api.routes - INFO -    Database: hakemAI
2025-12-16 17:44:16,263 - app.api.routes - INFO -    Collection: comparisons
2025-12-16 17:44:16,264 - app.api.routes - INFO -    Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,264 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,265 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:44:16,269 - app.services.user_subscription_service - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,269 - app.api.routes - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,270 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:44:16,270 - app.api.routes - INFO - âœ… COMPARISON COMPLETE
2025-12-16 17:44:16,270 - app.api.routes - INFO - ======================================================================
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ“Š Comparison ID: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ‘¤ User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ“„ Files Processed: 2/2
2025-12-16 17:44:16,271 - app.api.routes - INFO - ğŸ’¾ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-16 17:44:16,271 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:44:16,272 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:44:16,272 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:44:16,273 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:44:16,275 - app.api.routes - INFO - ğŸ“Š Remaining comparisons: 246
2025-12-16 17:44:16,275 - app.api.routes - INFO - ======================================================================

2025-12-16 17:44:16,275 - app.services.progress_tracker - INFO - âœ… Job completed: job_4348dda928d2 â†’ comparison_id: cmp_1765907002_1727f56e6d2b
2025-12-16 17:44:16,278 - main - INFO - ğŸ“¤ POST /api/compare-quotes - 200 - 54.07s
2025-12-16 17:46:02,387 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:08,493 - app.services.ai_parser - INFO - âœ… Stage 6 complete - Score: 80.0
2025-12-16 17:46:08,494 - app.services.ai_parser - INFO - âœ… Parallel stages complete
2025-12-16 17:46:08,494 - app.services.ai_parser - INFO - ğŸ“¦ Assembling final data structure
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - 
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,495 - app.services.ai_parser - INFO - âœ… EXTRACTION COMPLETE - GIG.pdf
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ğŸ¢ Insurer: Gulf Insurance Group (GIG)
2025-12-16 17:46:08,496 - app.services.ai_parser - INFO - ğŸ‘¤ Insured: Saudi Amana Contracting Co. L.L.C
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ’° Premium: SAR 69,602.00
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ“Š Rate: 0.2%
2025-12-16 17:46:08,497 - app.services.ai_parser - INFO - ğŸ¯ Score: 80.0/100
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ“ Quality: 98.3/100
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ”§ Deductible: MD: 5%, min SR 10,000
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - â° Validity: 15 days from date shown
2025-12-16 17:46:08,498 - app.services.ai_parser - INFO - ğŸ’¼ Brokerage: 15%
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO - 
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO - ğŸ“¦ Extracted:
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Benefits: 29
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Exclusions: 20
2025-12-16 17:46:08,499 - app.services.ai_parser - INFO -    âœ“ Warranties: 6
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO -    âœ“ Extensions: 3
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO -    âœ“ Subjectivities: 4
2025-12-16 17:46:08,500 - app.services.ai_parser - INFO - ======================================================================
2025-12-16 17:46:08,501 - app.services.mongodb_service_enhanced - INFO - âœ… Saved individual PDF: eaa00614669e42a19e9a7f9a160c362c.pdf â†’ 69419ae006f206f2b4664fc2
2025-12-16 17:46:08,501 - app.api.routes - INFO - âœ… Saved individual PDF to MongoDB: 69419ae006f206f2b4664fc2
2025-12-16 17:46:08,504 - app.services.user_documents_service - INFO - âœ… Saved user document: GIG.pdf â†’ 69419ae006f206f2b4664fc3 (478025 bytes)
2025-12-16 17:46:08,504 - app.api.routes - INFO - âœ… Saved user document: GIG.pdf â†’ 69419ae006f206f2b4664fc3
2025-12-16 17:46:08,504 - app.api.routes - INFO - âœ… Successfully processed: GIG.pdf
2025-12-16 17:46:08,504 - app.api.routes - INFO - 
âœ… Successfully extracted 2 quotes
2025-12-16 17:46:08,505 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:46:08,505 - app.api.routes - INFO - ğŸ”€ Generating comparison for 2 quotes
2025-12-16 17:46:08,505 - app.api.routes - INFO - ======================================================================
2025-12-16 17:46:08,505 - app.services.ai_ranker - INFO - ğŸ” Starting comprehensive comparison of 2 quotes
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - âš–ï¸ Using weights: {'premium': 0.25, 'rate': 0.2, 'benefits': 0.1, 'exclusions': 0.05, 'warranties': 0.04, 'extensions': 0.04, 'subjectivities': 0.02, 'provider_reputation': 0.3}
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ğŸ† Hakim Score integration enabled
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ğŸ” IDENTIFYING UNIQUE ITEMS using SEMANTIC MATCHING v7.1
2025-12-16 17:46:08,506 - app.services.ai_ranker - INFO - ================================================================================
2025-12-16 17:46:08,507 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:46:08,507 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Malath Insurance
2025-12-16 17:46:08,539 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:46:08,540 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:46:08,576 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:08,612 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:46:08,612 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:46:08,613 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:46:08,613 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:46:08,614 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:46:08,615 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GENERIC",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,831.25",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077831.25,
    "total_sum_insured": "SR 41,077,831.25"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 100,000",
        "deductible": "5% of the claim amount, min. SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "SR 100,000 to SR 500,000",
        "deductible": "10% of claim amount, min. SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 500,000",
        "deductible": "10% of the claim amount, min. SR 75,000",
        "applies_to": "material_damage"
      }
    ],
    "applicable_md_tier": {
      "range": "up to SR 100,000",
      "deductible": "5% of the claim amount, min. SR 10,000",
      "applies_to": "material_damage"
    },
 
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:46:08,618 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:46:08,619 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:46:08,620 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:46:08,621 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,622 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Malath Insurance
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO - 
ğŸ“Š Malath Insurance:
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Warranties: 7
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Extensions: 0
2025-12-16 17:46:08,623 - app.services.ai_ranker - INFO -    Exclusions: 37
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - 
============================================================
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - ğŸ” EXTRACTING SUBJECTIVITIES for: Gulf Insurance Group (GIG)
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO - ============================================================
2025-12-16 17:46:08,624 - app.services.ai_ranker - INFO -    Extended data exists: True
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Extended data keys: ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data exists: True
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data type: <class 'dict'>
2025-12-16 17:46:08,625 - app.services.ai_ranker - INFO -    Subjectivities data: {'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance', '... all requirements'], 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions'], 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property', 'Civil Defense License', '... all documents']}
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has _extended_data attr: True
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has subscriptions: True
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has subjectivities: False
2025-12-16 17:46:08,626 - app.services.ai_ranker - INFO -    Quote has additional_info: True
2025-12-16 17:46:08,627 - app.services.ai_ranker - INFO -    Extended data preview (first 1000 chars):
{
  "document_format": "GIG",
  "sum_insured_breakdown": {
    "material_damage": "SR 41,077,832",
    "business_interruption": "N/A",
    "total_sum_insured_numeric": 41077832,
    "total_sum_insured": "SR 41,077,832"
  },
  "deductibles_complete": {
    "structure_type": "tiered_by_sum_insured",
    "material_damage_tiers": [
      {
        "range": "up to SR 500,000",
        "deductible": "5%, min SR 10,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 1,000,000",
        "deductible": "5%, min SR 25,000",
        "applies_to": "material_damage"
      },
      {
        "range": "up to SR 2,000,000",
        "deductible": "5%, min SR 50,000",
        "applies_to": "material_damage"
      },
      {
        "range": "above SR 2,000,000",
        "deductible": "5%, min SR 75,000",
        "applies_to": "material_damage"
      },
      {
        "range": "Gantry Crane",
        "deductible": "10%, min SR 50,000",
        "applies_to": "material
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 4 items in key 'binding_requirements': ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 3 items in key 'conditions_precedent': ['No deterioration of loss record', 'Survey and fulfillment of recommendations', '... all conditions']
2025-12-16 17:46:08,630 - app.services.ai_ranker - INFO -    âœ… Found 5 items in key 'documentation_required': ['Signed proposal form', 'GPS coordinates', 'Photographs of property']
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities_list': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'requirements': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'all_subjectivities': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in key 'subjectivities': []
2025-12-16 17:46:08,631 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['binding_requirements']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['subjectivities_and_requirements']['documentation_required']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['binding_requirements']: []
2025-12-16 17:46:08,632 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['conditions_precedent']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['binding_requirements']['documentation_required']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['binding_requirements']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['conditions_precedent']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    âœ… Found 0 items in extended_data['conditions_precedent']['documentation_required']: []
2025-12-16 17:46:08,633 - app.services.ai_ranker - INFO -    ğŸ“Š Total unique subjectivities extracted: 12
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO -    ğŸ“ Sample subjectivities: ['Risk survey within 30 days', 'Civil Defense certificate required', 'KYC/AML clearance']
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO -    âœ… Extracted 12 subjectivities for Gulf Insurance Group (GIG)
2025-12-16 17:46:08,634 - app.services.ai_ranker - INFO - 
ğŸ“Š Gulf Insurance Group (GIG):
2025-12-16 17:46:08,637 - app.services.ai_ranker - INFO -    Warranties: 6
2025-12-16 17:46:08,638 - app.services.ai_ranker - INFO -    Extensions: 3
2025-12-16 17:46:08,638 - app.services.ai_ranker - INFO -    Exclusions: 20
2025-12-16 17:46:08,651 - app.services.ai_ranker - INFO -    Subjectivities: 12
2025-12-16 17:46:08,658 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Malath Insurance
2025-12-16 17:46:08,863 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 7
2025-12-16 17:46:08,863 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 0
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:46:08,864 - app.services.ai_ranker - INFO -       â€¢ Warranted that all plant and equipment is operated and maintained in accordance ...
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO -       â€¢ Warranted that All operators of the equipment must be licensed to operate such p...
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO -       â€¢ Warranted that all equipment is fitted with operational overload alarms.
2025-12-16 17:46:08,865 - app.services.ai_ranker - INFO - 
ğŸ” Analyzing unique items for: Gulf Insurance Group (GIG)
2025-12-16 17:46:09,055 - app.services.ai_ranker - INFO -    âœ“ Unique Warranties: 6
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Extensions: 3
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Exclusions: 10
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    âœ“ Unique Subjectivities: 0
2025-12-16 17:46:09,056 - app.services.ai_ranker - INFO -    ğŸ“ Sample unique warranties:
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ Hot works Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ No smoking Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO -       â€¢ Housekeeping Warranty
2025-12-16 17:46:09,057 - app.services.ai_ranker - INFO - 
================================================================================
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - âœ… UNIQUE ITEMS IDENTIFICATION COMPLETE
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ================================================================================

2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ğŸ“Š Malath Insurance: Hakim Score=75.0 (Standard), Weighted Score=58.45
2025-12-16 17:46:09,058 - app.services.ai_ranker - INFO - ğŸ“Š Gulf Insurance Group (GIG): Hakim Score=88.0 (Strong), Weighted Score=88.27
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - ğŸ¤– Performing weighted ranking with Hakim Score...
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - ğŸ¤– Starting AI ranking analysis (background task)...
2025-12-16 17:46:09,059 - app.services.ai_ranker - INFO - âœ… Weighted ranking with Hakim Score completed
2025-12-16 17:46:25,738 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:25,739 - app.services.ai_ranker - INFO - âœ… AI ranking analysis completed
2025-12-16 17:46:25,739 - app.services.ai_ranker - INFO - ğŸ”¨ Building comprehensive comparison structure...
2025-12-16 17:46:29,354 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-12-16 17:46:29,590 - app.services.ai_ranker - INFO - âœ… Generated reasoning for Gulf Insurance Group (GIG): Gulf Insurance Group (GIG) stands out as the best insurance provider due to its exceptional score of...
2025-12-16 17:46:29,592 - app.services.ai_ranker - INFO - âœ… Comprehensive comparison complete
2025-12-16 17:46:29,596 - app.api.routes - INFO - ğŸ¢ User belongs to company: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:46:29,596 - app.services.mongodb_service_enhanced - INFO - ğŸ’¾ Saving COMPLETE comparison data to MongoDB
2025-12-16 17:46:29,597 - app.services.mongodb_service_enhanced - INFO -    Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,598 - app.services.mongodb_service_enhanced - INFO -    Total PDFs: 2
2025-12-16 17:46:29,598 - app.services.mongodb_service_enhanced - INFO -    Data keys: ['comparison_id', 'status', 'total_quotes', 'hakim_score_enabled', 'summary', 'key_differences', 'side_by_side', 'data_table', 'analytics', 'provider_cards', 'extracted_quotes', 'files_processed', 'processing_timestamp', 'processing_summary']
2025-12-16 17:46:29,599 - app.services.mongodb_service_enhanced - INFO - ğŸ“‹ Extracted quotes count: 2
2025-12-16 17:46:29,600 - app.services.mongodb_service_enhanced - INFO -    Quote 1: Malath Insurance
2025-12-16 17:46:29,601 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:46:29,601 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:46:29,602 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:46:29,602 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:46:29,603 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:46:29,604 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:46:29,605 - app.services.mongodb_service_enhanced - INFO -    Quote 2: Gulf Insurance Group (GIG)
2025-12-16 17:46:29,605 - app.services.mongodb_service_enhanced - INFO -       - Has _extended_data: True
2025-12-16 17:46:29,606 - app.services.mongodb_service_enhanced - INFO -       - Has _analysis_details: True
2025-12-16 17:46:29,606 - app.services.mongodb_service_enhanced - INFO -       - Has _calculation_log: True
2025-12-16 17:46:29,607 - app.services.mongodb_service_enhanced - INFO -       - Has _quote_fingerprint: True
2025-12-16 17:46:29,608 - app.services.mongodb_service_enhanced - INFO -       - Has _quality_metrics: True
2025-12-16 17:46:29,608 - app.services.mongodb_service_enhanced - INFO -       - All keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible']...
2025-12-16 17:46:29,613 - app.services.mongodb_service_enhanced - INFO - ğŸ“Š Data sizes:
2025-12-16 17:46:29,614 - app.services.mongodb_service_enhanced - INFO -    Summary: 3,493 bytes
2025-12-16 17:46:29,614 - app.services.mongodb_service_enhanced - INFO -    Side-by-side: 22,009 bytes
2025-12-16 17:46:29,615 - app.services.mongodb_service_enhanced - INFO -    Data table: 9,608 bytes
2025-12-16 17:46:29,615 - app.services.mongodb_service_enhanced - INFO -    Analytics: 1,500 bytes
2025-12-16 17:46:29,616 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes: 26,024 bytes
2025-12-16 17:46:29,616 - app.services.mongodb_service_enhanced - INFO -    Total document: 132,137 bytes
2025-12-16 17:46:29,617 - app.services.mongodb_service_enhanced - INFO -    Comparison matrix keys: ['premium', 'rate', 'score', 'hakim_score', 'deductible', 'coverage', 'benefits', 'exclusions', 'warranties', 'subjectivities', 'conditions', 'benefits_count', 'exclusions_count', 'warranties_count']
2025-12-16 17:46:29,617 - app.services.mongodb_service_enhanced - INFO -       premium: 2 items
2025-12-16 17:46:29,618 - app.services.mongodb_service_enhanced - INFO -       rate: 2 items
2025-12-16 17:46:29,618 - app.services.mongodb_service_enhanced - INFO -       score: 2 items
2025-12-16 17:46:29,619 - app.services.mongodb_service_enhanced - INFO -       hakim_score: 2 items
2025-12-16 17:46:29,619 - app.services.mongodb_service_enhanced - INFO -       deductible: 2 items
2025-12-16 17:46:29,620 - app.services.mongodb_service_enhanced - INFO -       coverage: 2 items
2025-12-16 17:46:29,620 - app.services.mongodb_service_enhanced - INFO -       benefits: 2 items
2025-12-16 17:46:29,621 - app.services.mongodb_service_enhanced - INFO -       exclusions: 2 items
2025-12-16 17:46:29,621 - app.services.mongodb_service_enhanced - INFO -       warranties: 2 items
2025-12-16 17:46:29,622 - app.services.mongodb_service_enhanced - INFO -       subjectivities: 2 items
2025-12-16 17:46:29,622 - app.services.mongodb_service_enhanced - INFO -       conditions: 2 items
2025-12-16 17:46:29,623 - app.services.mongodb_service_enhanced - INFO -       benefits_count: 2 items
2025-12-16 17:46:29,623 - app.services.mongodb_service_enhanced - INFO -       exclusions_count: 2 items
2025-12-16 17:46:29,625 - app.services.mongodb_service_enhanced - INFO -       warranties_count: 2 items
2025-12-16 17:46:29,625 - app.services.mongodb_service_enhanced - INFO -    Extracted quotes structure:
2025-12-16 17:46:29,626 - app.services.mongodb_service_enhanced - INFO -       - Count: 2
2025-12-16 17:46:29,627 - app.services.mongodb_service_enhanced - INFO -       - First quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:46:29,627 - app.services.mongodb_service_enhanced - INFO -       - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:29,628 - app.services.mongodb_service_enhanced - INFO -       - _analysis_details keys (7): ['overall_score', 'score_breakdown', 'strengths', 'weaknesses', 'value_assessment', 'recommendation', 'score_methodology']
2025-12-16 17:46:29,632 - app.services.mongodb_service_enhanced - INFO - âœ… Saved new comparison: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,633 - app.services.mongodb_service_enhanced - INFO -    MongoDB ID: 69419af55a37704a1c0a83f3
2025-12-16 17:46:29,635 - app.services.mongodb_service_enhanced - INFO - âœ… Verification - Saved document has:
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - comparison_data: True
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - summary: True
2025-12-16 17:46:29,636 - app.services.mongodb_service_enhanced - INFO -    - side_by_side: True
2025-12-16 17:46:29,637 - app.services.mongodb_service_enhanced - INFO -    - data_table: True
2025-12-16 17:46:29,637 - app.services.mongodb_service_enhanced - INFO -    - analytics: True
2025-12-16 17:46:29,638 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes: True
2025-12-16 17:46:29,638 - app.services.mongodb_service_enhanced - INFO -    - data_table rows: 2
2025-12-16 17:46:29,639 - app.services.mongodb_service_enhanced - INFO -    - First row keys (27): ['provider', 'provider_name', 'company', 'score', 'weighted_score', 'premium', 'premium_amount', 'rate', 'coverage', 'coverage_limit', 'benefits', 'benefits_count', 'key_benefits', 'exclusions', 'exclusions_count']...
2025-12-16 17:46:29,640 - app.services.mongodb_service_enhanced - INFO -    - side_by_side providers: 2
2025-12-16 17:46:29,640 - app.services.mongodb_service_enhanced - INFO -    - First provider keys (28): ['name', 'client_name', 'ia_compliant', 'hakim_score', 'hakim_tier', 'hakim_rank', 'rank', 'score', 'premium', 'rate', 'coverage_limit', 'deductible', 'warranties', 'warranties_count', 'unique_warranties']...
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - extracted_quotes count: 2
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - First saved quote keys (25): ['company_name', 'insured_name', 'policy_type', 'policy_number', 'premium_amount', 'premium_frequency', 'rate', 'total_annual_cost', 'score', 'deductible', 'coverage_limit', 'sum_insured_total', 'key_benefits', 'exclusions', 'warranties', 'strengths', 'weaknesses', 'file_name', 'extraction_confidence', 'additional_info', '_extended_data', '_analysis_details', '_calculation_log', '_quote_fingerprint', '_quality_metrics']
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - Has _extended_data: True
2025-12-16 17:46:29,641 - app.services.mongodb_service_enhanced - INFO -    - Has _analysis_details: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _calculation_log: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _quote_fingerprint: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - Has _quality_metrics: True
2025-12-16 17:46:29,642 - app.services.mongodb_service_enhanced - INFO -    - _extended_data keys (15): ['document_format', 'sum_insured_breakdown', 'deductibles_complete', 'sublimits_comprehensive', 'exclusions_complete', 'warranties_actual', 'extensions_and_conditions', 'coverage_details', 'subjectivities', 'operational_details', 'brokerage_info', 'special_conditions', 'validity_period', 'geographical_limits', 'jurisdiction']
2025-12-16 17:46:29,643 - app.api.routes - INFO - âœ… Saved comparison result to MongoDB: 69419af55a37704a1c0a83f3
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Database: hakemAI
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Collection: comparisons
2025-12-16 17:46:29,643 - app.api.routes - INFO -    Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,644 - app.api.routes - INFO -    User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,644 - app.api.routes - INFO -    Company ID: 693ae8f2e9ed6d204b2fc0ef
2025-12-16 17:46:29,646 - app.services.user_subscription_service - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,646 - app.api.routes - INFO - âœ… Recorded comparison usage for user 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,647 - app.api.routes - INFO - 
======================================================================
2025-12-16 17:46:29,647 - app.api.routes - INFO - âœ… COMPARISON COMPLETE
2025-12-16 17:46:29,648 - app.api.routes - INFO - ======================================================================
2025-12-16 17:46:29,648 - app.api.routes - INFO - ğŸ“Š Comparison ID: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,648 - app.api.routes - INFO - ğŸ‘¤ User ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,649 - app.api.routes - INFO - ğŸ“„ Files Processed: 2/2
2025-12-16 17:46:29,649 - app.api.routes - INFO - ğŸ’¾ Saved to MongoDB: 2 PDFs + 1 comparison
2025-12-16 17:46:29,649 - app.services.user_subscription_service - INFO - ğŸ” Searching for user with ID: 693ae751e9ed6d204b2fc06e
2025-12-16 17:46:29,649 - app.services.user_subscription_service - INFO - ğŸ“Š Database: hakemAI
2025-12-16 17:46:29,650 - app.services.user_subscription_service - INFO - ğŸ“Š Collection: users
2025-12-16 17:46:29,653 - app.services.user_subscription_service - INFO - âœ… Found user: abdul (wasay7757@gmail.com)
2025-12-16 17:46:29,655 - app.api.routes - INFO - ğŸ“Š Remaining comparisons: 245
2025-12-16 17:46:29,655 - app.api.routes - INFO - ======================================================================

2025-12-16 17:46:29,655 - app.services.progress_tracker - INFO - âœ… Job completed: job_3d995b93efeb â†’ comparison_id: cmp_1765906711_c310243c424f
2025-12-16 17:46:29,657 - main - INFO - ğŸ“¤ POST /api/compare-quotes - 200 - 478.02s
2025-12-16 17:52:52,302 - app.services.progress_tracker - INFO - ğŸ§¹ Cleaned up 2 old progress entries
2025-12-16 17:52:52,303 - app.services.progress_tracker - INFO - ğŸ§¹ Cleanup task: Removed 2 old entries
2025-12-22 20:21:57,409 - main - INFO - 
2025-12-22 20:21:57,409 - main - INFO - ================================================================================
2025-12-22 20:21:57,409 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:21:57,409 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:21:57,410 - main - INFO - ================================================================================
2025-12-22 20:21:57,410 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:21:57,410 - main - INFO -   Upload Directory: uploads
2025-12-22 20:21:57,410 - main - INFO -   Max File Size: 20MB
2025-12-22 20:21:57,411 - main - INFO - ================================================================================
2025-12-22 20:21:57,411 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:21:57,411 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:21:57,412 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:21:57,845 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:21:57,869 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:21:57,870 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:21:57,870 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:21:57,870 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:21:57,871 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:21:57,897 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:21:57,905 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:21:57,913 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:21:58,030 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:21:58,030 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:21:58,030 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:21:58,031 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:21:58,031 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:21:58,053 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:21:58,054 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:21:58,054 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:21:58,069 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:21:58,169 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:21:58,169 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:21:58,169 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:21:58,169 - main - INFO - 
2025-12-22 20:21:58,170 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:21:58,170 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:21:58,170 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:21:58,170 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:21:58,171 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:21:58,171 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:21:58,171 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:21:58,171 - main - INFO - 
2025-12-22 20:21:58,171 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:21:58,172 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:21:58,172 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:21:58,172 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:21:58,172 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:21:58,172 - main - INFO - 
2025-12-22 20:21:58,172 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:21:58,173 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:21:58,173 - main - INFO -        - No manual section generation
2025-12-22 20:21:58,173 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:21:58,173 - main - INFO - 
2025-12-22 20:21:58,173 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:21:58,173 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:21:58,173 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:21:58,174 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:21:58,174 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:21:58,174 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:21:58,174 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:21:58,174 - main - INFO - 
2025-12-22 20:21:58,175 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:21:58,175 - main - INFO -      Main:
2025-12-22 20:21:58,175 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:21:58,175 - main - INFO - 
2025-12-22 20:21:58,175 - main - INFO -      Retrieval:
2025-12-22 20:21:58,176 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:21:58,176 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:21:58,176 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:21:58,176 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:21:58,176 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:21:58,176 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:21:58,177 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:21:58,177 - main - INFO - 
2025-12-22 20:21:58,177 - main - INFO -      Management:
2025-12-22 20:21:58,177 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:21:58,177 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:21:58,177 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:21:58,177 - main - INFO - 
2025-12-22 20:21:58,178 - main - INFO -      Documents (MongoDB):
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:21:58,178 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:21:58,178 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:21:58,179 - main - INFO - 
2025-12-22 20:21:58,179 - main - INFO -      Diagnostics & Health:
2025-12-22 20:21:58,179 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:21:58,179 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:21:58,180 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:21:58,180 - main - INFO - 
2025-12-22 20:21:58,180 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:21:58,180 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:21:58,181 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:21:58,181 - main - INFO - 
2025-12-22 20:21:58,181 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:21:58,181 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:21:58,182 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:21:58,182 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:21:58,182 - main - INFO -      4. No re-upload needed!
2025-12-22 20:21:58,182 - main - INFO - 
2025-12-22 20:21:58,182 - main - INFO - ================================================================================
2025-12-22 20:21:58,183 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:21:58,183 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:21:58,183 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:21:58,183 - main - INFO - ================================================================================
2025-12-22 20:21:58,183 - main - INFO - 
2025-12-22 20:21:58,184 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:22:03,330 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 20:22:03,331 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 20:22:03,545 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 20:22:03,565 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.02s
2025-12-22 20:22:44,950 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 20:22:44,951 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 20:22:45,819 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 20:22:45,820 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-22 20:25:50,738 - main - INFO - 
2025-12-22 20:25:50,739 - main - INFO - ================================================================================
2025-12-22 20:25:50,739 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:25:50,742 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:25:50,743 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:25:50,745 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:25:50,746 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:25:50,747 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:25:50,748 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:25:50,749 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:25:50,750 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:25:50,751 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:25:50,752 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:25:50,753 - main - INFO - ================================================================================
2025-12-22 20:25:50,754 - main - INFO - 
2025-12-22 20:25:57,449 - main - INFO - 
2025-12-22 20:25:57,449 - main - INFO - ================================================================================
2025-12-22 20:25:57,449 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:25:57,449 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:25:57,450 - main - INFO - ================================================================================
2025-12-22 20:25:57,450 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:25:57,450 - main - INFO -   Upload Directory: uploads
2025-12-22 20:25:57,450 - main - INFO -   Max File Size: 20MB
2025-12-22 20:25:57,451 - main - INFO - ================================================================================
2025-12-22 20:25:57,451 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:25:57,451 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:25:57,452 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:25:57,798 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:25:57,813 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:25:57,814 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:25:57,814 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:25:57,816 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:25:57,817 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:25:57,854 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:25:57,855 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:25:57,857 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:25:57,864 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:25:57,864 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:25:57,864 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:25:57,865 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:25:57,866 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:25:57,917 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:25:57,917 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:25:57,917 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:25:57,949 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:25:57,951 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:25:57,952 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:25:57,952 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:25:57,952 - main - INFO - 
2025-12-22 20:25:57,952 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:25:57,952 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:25:57,953 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:25:57,953 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:25:57,953 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:25:57,953 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:25:57,953 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:25:57,954 - main - INFO - 
2025-12-22 20:25:57,954 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:25:57,954 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:25:57,954 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:25:57,954 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:25:57,954 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:25:57,955 - main - INFO - 
2025-12-22 20:25:57,955 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:25:57,955 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:25:57,955 - main - INFO -        - No manual section generation
2025-12-22 20:25:57,955 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:25:57,955 - main - INFO - 
2025-12-22 20:25:57,956 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:25:57,956 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:25:57,956 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:25:57,956 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:25:57,956 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:25:57,957 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:25:57,957 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:25:57,957 - main - INFO - 
2025-12-22 20:25:57,957 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:25:57,957 - main - INFO -      Main:
2025-12-22 20:25:57,958 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:25:57,958 - main - INFO - 
2025-12-22 20:25:57,959 - main - INFO -      Retrieval:
2025-12-22 20:25:57,959 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:25:57,961 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:25:57,961 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:25:57,961 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:25:57,962 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:25:57,962 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:25:57,962 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:25:57,962 - main - INFO - 
2025-12-22 20:25:57,963 - main - INFO -      Management:
2025-12-22 20:25:57,963 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:25:57,963 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:25:57,964 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:25:57,964 - main - INFO - 
2025-12-22 20:25:57,964 - main - INFO -      Documents (MongoDB):
2025-12-22 20:25:57,964 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:25:57,965 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:25:57,965 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:25:57,965 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:25:57,966 - main - INFO - 
2025-12-22 20:25:57,966 - main - INFO -      Diagnostics & Health:
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:25:57,966 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:25:57,967 - main - INFO - 
2025-12-22 20:25:57,967 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:25:57,967 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:25:57,968 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:25:57,968 - main - INFO - 
2025-12-22 20:25:57,968 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:25:57,969 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:25:57,969 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:25:57,969 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:25:57,969 - main - INFO -      4. No re-upload needed!
2025-12-22 20:25:57,969 - main - INFO - 
2025-12-22 20:25:57,970 - main - INFO - ================================================================================
2025-12-22 20:25:57,970 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:25:57,970 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:25:57,970 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:25:57,970 - main - INFO - ================================================================================
2025-12-22 20:25:57,971 - main - INFO - 
2025-12-22 20:25:57,971 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:00,873 - main - INFO - 
2025-12-22 20:26:00,874 - main - INFO - ================================================================================
2025-12-22 20:26:00,874 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:00,875 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:00,876 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:00,877 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:00,877 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:00,879 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:00,879 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:00,881 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:00,881 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:00,882 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:00,883 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:00,883 - main - INFO - ================================================================================
2025-12-22 20:26:00,883 - main - INFO - 
2025-12-22 20:26:05,265 - main - INFO - 
2025-12-22 20:26:05,265 - main - INFO - ================================================================================
2025-12-22 20:26:05,265 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:05,266 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:05,266 - main - INFO - ================================================================================
2025-12-22 20:26:05,266 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:05,267 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:05,267 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:05,268 - main - INFO - ================================================================================
2025-12-22 20:26:05,268 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:05,269 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:05,269 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:05,322 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:05,330 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:05,330 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:05,331 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:05,340 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:05,344 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:05,346 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:05,348 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:05,348 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:05,349 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:05,368 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:05,368 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:05,368 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:05,378 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:05,383 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:05,383 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:05,384 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:05,384 - main - INFO - 
2025-12-22 20:26:05,384 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:05,384 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:05,385 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:05,385 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:05,385 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:05,385 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:05,386 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:05,386 - main - INFO - 
2025-12-22 20:26:05,386 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:05,386 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:05,387 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:05,387 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:05,387 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:05,387 - main - INFO - 
2025-12-22 20:26:05,387 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:05,388 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:05,388 - main - INFO -        - No manual section generation
2025-12-22 20:26:05,388 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:05,388 - main - INFO - 
2025-12-22 20:26:05,388 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:05,389 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:05,389 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:05,389 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:05,389 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:05,390 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:05,390 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:05,390 - main - INFO - 
2025-12-22 20:26:05,391 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:05,391 - main - INFO -      Main:
2025-12-22 20:26:05,391 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:05,394 - main - INFO - 
2025-12-22 20:26:05,396 - main - INFO -      Retrieval:
2025-12-22 20:26:05,396 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:05,397 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:05,398 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:05,400 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:05,400 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:05,401 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:05,401 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:05,401 - main - INFO - 
2025-12-22 20:26:05,402 - main - INFO -      Management:
2025-12-22 20:26:05,402 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:05,402 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:05,403 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:05,403 - main - INFO - 
2025-12-22 20:26:05,403 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:05,403 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:05,403 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:05,404 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:05,404 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:05,404 - main - INFO - 
2025-12-22 20:26:05,404 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:05,404 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:05,405 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:05,405 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:05,405 - main - INFO - 
2025-12-22 20:26:05,405 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:05,405 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:05,406 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:05,407 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:05,407 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:05,407 - main - INFO - 
2025-12-22 20:26:05,407 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:05,408 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:05,408 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:05,408 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:05,409 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:05,410 - main - INFO - 
2025-12-22 20:26:05,411 - main - INFO - ================================================================================
2025-12-22 20:26:05,412 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:05,412 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:05,412 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:05,412 - main - INFO - ================================================================================
2025-12-22 20:26:05,413 - main - INFO - 
2025-12-22 20:26:05,413 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:09,502 - main - INFO - 
2025-12-22 20:26:09,502 - main - INFO - ================================================================================
2025-12-22 20:26:09,502 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:09,503 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:09,503 - main - INFO - ================================================================================
2025-12-22 20:26:09,503 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:09,503 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:09,504 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:09,504 - main - INFO - ================================================================================
2025-12-22 20:26:09,504 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:09,504 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:09,505 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:09,532 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:09,537 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:09,537 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:09,537 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:09,538 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:09,538 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:09,572 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:09,573 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:09,574 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:09,579 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:09,579 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:09,579 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:09,580 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:09,581 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:09,606 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:09,606 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:09,606 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:09,638 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:09,645 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:09,645 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:09,646 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:09,647 - main - INFO - 
2025-12-22 20:26:09,648 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:09,649 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:09,649 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:09,650 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:09,650 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:09,651 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:09,652 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:09,652 - main - INFO - 
2025-12-22 20:26:09,653 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:09,654 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:09,654 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:09,655 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:09,655 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:09,655 - main - INFO - 
2025-12-22 20:26:09,656 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:09,656 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:09,657 - main - INFO -        - No manual section generation
2025-12-22 20:26:09,657 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:09,658 - main - INFO - 
2025-12-22 20:26:09,658 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:09,659 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:09,660 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:09,660 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:09,661 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:09,661 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:09,662 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:09,662 - main - INFO - 
2025-12-22 20:26:09,663 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:09,663 - main - INFO -      Main:
2025-12-22 20:26:09,663 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:09,664 - main - INFO - 
2025-12-22 20:26:09,664 - main - INFO -      Retrieval:
2025-12-22 20:26:09,664 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:09,664 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:09,665 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:09,665 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:09,665 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:09,665 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:09,666 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:09,666 - main - INFO - 
2025-12-22 20:26:09,667 - main - INFO -      Management:
2025-12-22 20:26:09,667 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:09,667 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:09,668 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:09,668 - main - INFO - 
2025-12-22 20:26:09,668 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:09,669 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:09,670 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:09,670 - main - INFO - 
2025-12-22 20:26:09,670 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:09,670 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:09,671 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:09,671 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:09,671 - main - INFO - 
2025-12-22 20:26:09,672 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:09,673 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:09,674 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:09,675 - main - INFO - 
2025-12-22 20:26:09,675 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:09,676 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:09,676 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:09,677 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:09,677 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:09,677 - main - INFO - 
2025-12-22 20:26:09,678 - main - INFO - ================================================================================
2025-12-22 20:26:09,678 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:09,678 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:09,678 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:09,679 - main - INFO - ================================================================================
2025-12-22 20:26:09,679 - main - INFO - 
2025-12-22 20:26:09,679 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:24,902 - main - INFO - 
2025-12-22 20:26:24,902 - main - INFO - ================================================================================
2025-12-22 20:26:24,902 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:24,904 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:24,904 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:24,905 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:24,906 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:24,907 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:24,907 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:24,908 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:24,909 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:24,911 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:24,911 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:24,912 - main - INFO - ================================================================================
2025-12-22 20:26:24,912 - main - INFO - 
2025-12-22 20:26:28,542 - main - INFO - 
2025-12-22 20:26:28,543 - main - INFO - ================================================================================
2025-12-22 20:26:28,543 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:28,543 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:28,543 - main - INFO - ================================================================================
2025-12-22 20:26:28,543 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:28,544 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:28,544 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:28,544 - main - INFO - ================================================================================
2025-12-22 20:26:28,545 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:28,545 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:28,545 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:28,567 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:28,578 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:28,578 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:28,578 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:28,578 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:28,579 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:28,587 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:28,588 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:28,589 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:28,590 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:28,590 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:28,591 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:28,600 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:28,600 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:28,601 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:28,634 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:28,637 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:28,637 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:28,637 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:28,638 - main - INFO - 
2025-12-22 20:26:28,638 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:28,638 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:28,638 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:28,639 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:28,639 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:28,639 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:28,639 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:28,639 - main - INFO - 
2025-12-22 20:26:28,639 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:28,640 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:28,640 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:28,640 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:28,640 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:28,640 - main - INFO - 
2025-12-22 20:26:28,641 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:28,641 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:28,641 - main - INFO -        - No manual section generation
2025-12-22 20:26:28,642 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:28,642 - main - INFO - 
2025-12-22 20:26:28,642 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:28,642 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:28,643 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:28,643 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:28,644 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:28,644 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:28,646 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:28,648 - main - INFO - 
2025-12-22 20:26:28,648 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:28,649 - main - INFO -      Main:
2025-12-22 20:26:28,649 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:28,649 - main - INFO - 
2025-12-22 20:26:28,649 - main - INFO -      Retrieval:
2025-12-22 20:26:28,649 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:28,650 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:28,650 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:28,650 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:28,650 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:28,650 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:28,651 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:28,651 - main - INFO - 
2025-12-22 20:26:28,651 - main - INFO -      Management:
2025-12-22 20:26:28,651 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:28,651 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:28,651 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:28,652 - main - INFO - 
2025-12-22 20:26:28,652 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:28,652 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:28,653 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:28,653 - main - INFO - 
2025-12-22 20:26:28,653 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:28,653 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:28,653 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:28,654 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:28,654 - main - INFO - 
2025-12-22 20:26:28,654 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:28,654 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:28,655 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:28,655 - main - INFO - 
2025-12-22 20:26:28,655 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:28,656 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:28,656 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:28,656 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:28,656 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:28,656 - main - INFO - 
2025-12-22 20:26:28,656 - main - INFO - ================================================================================
2025-12-22 20:26:28,657 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:28,657 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:28,657 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:28,657 - main - INFO - ================================================================================
2025-12-22 20:26:28,658 - main - INFO - 
2025-12-22 20:26:28,659 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:32,167 - main - INFO - 
2025-12-22 20:26:32,168 - main - INFO - ================================================================================
2025-12-22 20:26:32,168 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:32,168 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:32,168 - main - INFO - ================================================================================
2025-12-22 20:26:32,168 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:32,169 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:32,169 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:32,169 - main - INFO - ================================================================================
2025-12-22 20:26:32,169 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:32,170 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:32,170 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:32,191 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:32,202 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:32,202 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:32,202 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:32,203 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:32,203 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:32,233 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:32,234 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:32,235 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:32,236 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:32,236 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:32,236 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:32,237 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:32,237 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:32,264 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:32,265 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:32,265 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:32,296 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:32,299 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:32,300 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:32,300 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:32,300 - main - INFO - 
2025-12-22 20:26:32,300 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:32,301 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:32,301 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:32,301 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:32,301 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:32,301 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:32,302 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:32,302 - main - INFO - 
2025-12-22 20:26:32,302 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:32,302 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:32,303 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:32,303 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:32,303 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:32,303 - main - INFO - 
2025-12-22 20:26:32,303 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:32,304 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:32,304 - main - INFO -        - No manual section generation
2025-12-22 20:26:32,304 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:32,304 - main - INFO - 
2025-12-22 20:26:32,304 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:32,304 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:32,305 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:32,305 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:32,305 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:32,305 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:32,305 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:32,306 - main - INFO - 
2025-12-22 20:26:32,306 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:32,306 - main - INFO -      Main:
2025-12-22 20:26:32,306 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:32,306 - main - INFO - 
2025-12-22 20:26:32,306 - main - INFO -      Retrieval:
2025-12-22 20:26:32,307 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:32,307 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:32,307 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:32,307 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:32,307 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:32,307 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:32,308 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:32,308 - main - INFO - 
2025-12-22 20:26:32,308 - main - INFO -      Management:
2025-12-22 20:26:32,309 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:32,309 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:32,310 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:32,311 - main - INFO - 
2025-12-22 20:26:32,311 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:32,311 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:32,312 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:32,312 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:32,312 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:32,312 - main - INFO - 
2025-12-22 20:26:32,313 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:32,313 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:32,314 - main - INFO - 
2025-12-22 20:26:32,314 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:32,314 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:32,315 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:32,316 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:32,316 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:32,316 - main - INFO - 
2025-12-22 20:26:32,316 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:32,317 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:32,317 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:32,317 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:32,317 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:32,317 - main - INFO - 
2025-12-22 20:26:32,318 - main - INFO - ================================================================================
2025-12-22 20:26:32,318 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:32,318 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:32,318 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:32,319 - main - INFO - ================================================================================
2025-12-22 20:26:32,319 - main - INFO - 
2025-12-22 20:26:32,319 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:37,733 - main - INFO - 
2025-12-22 20:26:37,733 - main - INFO - ================================================================================
2025-12-22 20:26:37,734 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:37,735 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:37,735 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:37,736 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:37,737 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:37,738 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:37,738 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:37,740 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:37,740 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:37,741 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:37,741 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:37,741 - main - INFO - ================================================================================
2025-12-22 20:26:37,742 - main - INFO - 
2025-12-22 20:26:41,701 - main - INFO - 
2025-12-22 20:26:41,702 - main - INFO - ================================================================================
2025-12-22 20:26:41,702 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:41,702 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:41,702 - main - INFO - ================================================================================
2025-12-22 20:26:41,703 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:41,703 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:41,703 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:41,703 - main - INFO - ================================================================================
2025-12-22 20:26:41,704 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:41,704 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:41,704 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:41,724 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:41,733 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:41,734 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:41,734 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:41,743 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:41,746 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:41,748 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:41,751 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:41,751 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:41,752 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:41,772 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:41,772 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:41,772 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:41,803 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:41,815 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:41,815 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:41,815 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:41,815 - main - INFO - 
2025-12-22 20:26:41,816 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:41,816 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:41,816 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:41,816 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:41,817 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:41,817 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:41,817 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:41,817 - main - INFO - 
2025-12-22 20:26:41,817 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:41,817 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:41,818 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:41,818 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:41,818 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:41,818 - main - INFO - 
2025-12-22 20:26:41,818 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:41,819 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:41,819 - main - INFO -        - No manual section generation
2025-12-22 20:26:41,819 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:41,819 - main - INFO - 
2025-12-22 20:26:41,819 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:41,819 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:41,819 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:41,820 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:41,820 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:41,820 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:41,820 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:41,820 - main - INFO - 
2025-12-22 20:26:41,821 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:41,821 - main - INFO -      Main:
2025-12-22 20:26:41,821 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:41,821 - main - INFO - 
2025-12-22 20:26:41,821 - main - INFO -      Retrieval:
2025-12-22 20:26:41,821 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:41,822 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:41,822 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:41,822 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:41,822 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:41,823 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:41,823 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:41,823 - main - INFO - 
2025-12-22 20:26:41,823 - main - INFO -      Management:
2025-12-22 20:26:41,823 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:41,823 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:41,823 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:41,824 - main - INFO - 
2025-12-22 20:26:41,824 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:41,824 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:41,825 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:41,825 - main - INFO - 
2025-12-22 20:26:41,826 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:41,827 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:41,828 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:41,828 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:41,828 - main - INFO - 
2025-12-22 20:26:41,829 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:41,829 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:41,830 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:41,831 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:41,831 - main - INFO - 
2025-12-22 20:26:41,832 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:41,832 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:41,832 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:41,832 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:41,833 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:41,833 - main - INFO - 
2025-12-22 20:26:41,833 - main - INFO - ================================================================================
2025-12-22 20:26:41,833 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:41,834 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:41,834 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:41,834 - main - INFO - ================================================================================
2025-12-22 20:26:41,834 - main - INFO - 
2025-12-22 20:26:41,835 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 20:26:51,394 - main - INFO - 
2025-12-22 20:26:51,395 - main - INFO - ================================================================================
2025-12-22 20:26:51,396 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 20:26:51,398 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:51,399 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 20:26:51,400 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 20:26:51,401 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 20:26:51,403 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 20:26:51,403 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 20:26:51,405 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 20:26:51,406 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 20:26:51,407 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 20:26:51,408 - main - INFO -   âœ… Application stopped successfully
2025-12-22 20:26:51,408 - main - INFO - ================================================================================
2025-12-22 20:26:51,409 - main - INFO - 
2025-12-22 20:26:54,198 - main - INFO - 
2025-12-22 20:26:54,198 - main - INFO - ================================================================================
2025-12-22 20:26:54,198 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 20:26:54,199 - main - INFO -   Production-Ready Complete Integration
2025-12-22 20:26:54,199 - main - INFO - ================================================================================
2025-12-22 20:26:54,199 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 20:26:54,199 - main - INFO -   Upload Directory: uploads
2025-12-22 20:26:54,200 - main - INFO -   Max File Size: 20MB
2025-12-22 20:26:54,200 - main - INFO - ================================================================================
2025-12-22 20:26:54,200 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 20:26:54,201 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 20:26:54,201 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:54,222 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 20:26:54,361 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 20:26:54,376 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 20:26:54,377 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 20:26:54,380 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 20:26:54,380 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 20:26:54,421 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 20:26:54,427 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 20:26:54,434 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 20:26:54,438 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 20:26:54,442 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 20:26:54,443 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 20:26:54,444 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 20:26:54,444 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 20:26:54,500 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 20:26:54,504 - main - INFO -   âœ… User Documents Service connected
2025-12-22 20:26:54,505 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 20:26:54,531 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 20:26:54,538 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 20:26:54,538 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 20:26:54,538 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 20:26:54,538 - main - INFO - 
2025-12-22 20:26:54,539 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 20:26:54,539 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 20:26:54,539 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 20:26:54,539 - main - INFO -        - Separates warranties from extensions
2025-12-22 20:26:54,539 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 20:26:54,540 - main - INFO -        - Correct deductible tier detection
2025-12-22 20:26:54,540 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 20:26:54,540 - main - INFO - 
2025-12-22 20:26:54,540 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 20:26:54,540 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 20:26:54,541 - main - INFO -        - Identifies unique items per provider
2025-12-22 20:26:54,541 - main - INFO -        - Transparent scoring methodology
2025-12-22 20:26:54,541 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 20:26:54,541 - main - INFO - 
2025-12-22 20:26:54,541 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 20:26:54,542 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 20:26:54,542 - main - INFO -        - No manual section generation
2025-12-22 20:26:54,542 - main - INFO -        - Complete MongoDB integration
2025-12-22 20:26:54,542 - main - INFO - 
2025-12-22 20:26:54,542 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 20:26:54,543 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 20:26:54,543 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 20:26:54,543 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 20:26:54,543 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 20:26:54,543 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 20:26:54,543 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 20:26:54,544 - main - INFO - 
2025-12-22 20:26:54,544 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 20:26:54,544 - main - INFO -      Main:
2025-12-22 20:26:54,544 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 20:26:54,544 - main - INFO - 
2025-12-22 20:26:54,544 - main - INFO -      Retrieval:
2025-12-22 20:26:54,545 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 20:26:54,545 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 20:26:54,545 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 20:26:54,545 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 20:26:54,545 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 20:26:54,546 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 20:26:54,546 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 20:26:54,546 - main - INFO - 
2025-12-22 20:26:54,546 - main - INFO -      Management:
2025-12-22 20:26:54,547 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 20:26:54,547 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 20:26:54,547 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 20:26:54,547 - main - INFO - 
2025-12-22 20:26:54,548 - main - INFO -      Documents (MongoDB):
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents                All documents
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 20:26:54,548 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 20:26:54,549 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 20:26:54,549 - main - INFO - 
2025-12-22 20:26:54,550 - main - INFO -      Diagnostics & Health:
2025-12-22 20:26:54,552 - main - INFO -        GET  /api/health                   System health
2025-12-22 20:26:54,552 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 20:26:54,553 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 20:26:54,554 - main - INFO - 
2025-12-22 20:26:54,554 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 20:26:54,554 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 20:26:54,555 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 20:26:54,556 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 20:26:54,556 - main - INFO - 
2025-12-22 20:26:54,556 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 20:26:54,556 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 20:26:54,556 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 20:26:54,557 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 20:26:54,557 - main - INFO -      4. No re-upload needed!
2025-12-22 20:26:54,557 - main - INFO - 
2025-12-22 20:26:54,557 - main - INFO - ================================================================================
2025-12-22 20:26:54,558 - main - INFO -   âœ… Application started successfully!
2025-12-22 20:26:54,558 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 20:26:54,558 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 20:26:54,558 - main - INFO - ================================================================================
2025-12-22 20:26:54,559 - main - INFO - 
2025-12-22 20:26:54,559 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:39:56,142 - main - INFO - 
2025-12-22 22:39:56,143 - main - INFO - ================================================================================
2025-12-22 22:39:56,143 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:39:56,148 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:39:56,150 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:39:56,163 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:39:56,171 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:39:56,176 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:39:56,176 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:39:56,182 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:39:56,182 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:39:56,185 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:39:56,187 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:39:56,190 - main - INFO - ================================================================================
2025-12-22 22:39:56,194 - main - INFO - 
2025-12-22 22:40:02,327 - main - INFO - 
2025-12-22 22:40:02,327 - main - INFO - ================================================================================
2025-12-22 22:40:02,327 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:02,328 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:02,328 - main - INFO - ================================================================================
2025-12-22 22:40:02,328 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:02,328 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:02,328 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:02,329 - main - INFO - ================================================================================
2025-12-22 22:40:02,329 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:02,329 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:02,330 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:02,713 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:02,722 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:02,722 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:02,723 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:02,745 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:02,746 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:02,747 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:02,752 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:02,753 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:02,753 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:02,753 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:02,754 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:02,806 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:02,807 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:02,808 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:02,841 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:02,844 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:02,844 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:02,844 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:02,845 - main - INFO - 
2025-12-22 22:40:02,845 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:02,845 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:02,845 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:02,845 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:02,846 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:02,846 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:02,846 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:02,847 - main - INFO - 
2025-12-22 22:40:02,847 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:02,847 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:02,847 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:02,847 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:02,848 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:02,848 - main - INFO - 
2025-12-22 22:40:02,848 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:02,848 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:02,848 - main - INFO -        - No manual section generation
2025-12-22 22:40:02,848 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:02,849 - main - INFO - 
2025-12-22 22:40:02,849 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:02,849 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:02,849 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:02,849 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:02,850 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:02,850 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:02,851 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:02,853 - main - INFO - 
2025-12-22 22:40:02,853 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:02,854 - main - INFO -      Main:
2025-12-22 22:40:02,854 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:02,854 - main - INFO - 
2025-12-22 22:40:02,854 - main - INFO -      Retrieval:
2025-12-22 22:40:02,855 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:02,855 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:02,855 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:02,856 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:02,856 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:02,857 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:02,857 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:02,857 - main - INFO - 
2025-12-22 22:40:02,857 - main - INFO -      Management:
2025-12-22 22:40:02,857 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:02,858 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:02,858 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:02,858 - main - INFO - 
2025-12-22 22:40:02,858 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:02,859 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:02,859 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:02,860 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:02,860 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:02,860 - main - INFO - 
2025-12-22 22:40:02,860 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:02,861 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:02,861 - main - INFO - 
2025-12-22 22:40:02,861 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:02,862 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:02,863 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:02,863 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:02,863 - main - INFO - 
2025-12-22 22:40:02,863 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:02,863 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:02,864 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:02,864 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:02,864 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:02,864 - main - INFO - 
2025-12-22 22:40:02,864 - main - INFO - ================================================================================
2025-12-22 22:40:02,864 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:02,865 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:02,865 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:02,865 - main - INFO - ================================================================================
2025-12-22 22:40:02,865 - main - INFO - 
2025-12-22 22:40:02,865 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:08,934 - main - INFO - 
2025-12-22 22:40:08,935 - main - INFO - ================================================================================
2025-12-22 22:40:08,936 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:08,940 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:08,943 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:08,947 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:08,948 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:08,950 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:08,953 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:08,955 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:08,955 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:08,956 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:08,957 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:08,957 - main - INFO - ================================================================================
2025-12-22 22:40:08,958 - main - INFO - 
2025-12-22 22:40:13,248 - main - INFO - 
2025-12-22 22:40:13,249 - main - INFO - ================================================================================
2025-12-22 22:40:13,249 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:13,249 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:13,249 - main - INFO - ================================================================================
2025-12-22 22:40:13,250 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:13,250 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:13,251 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:13,252 - main - INFO - ================================================================================
2025-12-22 22:40:13,253 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:13,254 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:13,255 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:13,278 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:13,283 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:13,284 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:13,285 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:13,286 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:13,287 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:13,326 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:13,329 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:13,332 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:13,339 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:13,340 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:13,341 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:13,341 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:13,342 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:13,354 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:13,354 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:13,355 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:13,388 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:13,397 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:13,398 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:13,399 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:13,399 - main - INFO - 
2025-12-22 22:40:13,400 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:13,401 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:13,403 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:13,404 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:13,405 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:13,406 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:13,407 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:13,407 - main - INFO - 
2025-12-22 22:40:13,408 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:13,409 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:13,409 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:13,410 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:13,411 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:13,412 - main - INFO - 
2025-12-22 22:40:13,413 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:13,413 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:13,414 - main - INFO -        - No manual section generation
2025-12-22 22:40:13,414 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:13,415 - main - INFO - 
2025-12-22 22:40:13,416 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:13,417 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:13,418 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:13,420 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:13,420 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:13,421 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:13,422 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:13,423 - main - INFO - 
2025-12-22 22:40:13,424 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:13,424 - main - INFO -      Main:
2025-12-22 22:40:13,424 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:13,425 - main - INFO - 
2025-12-22 22:40:13,425 - main - INFO -      Retrieval:
2025-12-22 22:40:13,426 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:13,427 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:13,427 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:13,428 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:13,428 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:13,429 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:13,429 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:13,429 - main - INFO - 
2025-12-22 22:40:13,430 - main - INFO -      Management:
2025-12-22 22:40:13,430 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:13,430 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:13,431 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:13,431 - main - INFO - 
2025-12-22 22:40:13,432 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:13,432 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:13,432 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:13,433 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:13,433 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:13,435 - main - INFO - 
2025-12-22 22:40:13,436 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:13,437 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:13,438 - main - INFO - 
2025-12-22 22:40:13,439 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:13,439 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:13,440 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:13,440 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:13,441 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:13,442 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:13,442 - main - INFO - 
2025-12-22 22:40:13,442 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:13,442 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:13,443 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:13,443 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:13,443 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:13,444 - main - INFO - 
2025-12-22 22:40:13,444 - main - INFO - ================================================================================
2025-12-22 22:40:13,444 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:13,444 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:13,445 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:13,445 - main - INFO - ================================================================================
2025-12-22 22:40:13,445 - main - INFO - 
2025-12-22 22:40:13,446 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:23,404 - main - INFO - 
2025-12-22 22:40:23,404 - main - INFO - ================================================================================
2025-12-22 22:40:23,404 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:23,406 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:23,406 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:23,408 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:23,408 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:23,410 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:23,410 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:23,412 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:23,413 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:23,414 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:23,415 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:23,416 - main - INFO - ================================================================================
2025-12-22 22:40:23,419 - main - INFO - 
2025-12-22 22:40:27,418 - main - INFO - 
2025-12-22 22:40:27,419 - main - INFO - ================================================================================
2025-12-22 22:40:27,420 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:27,420 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:27,420 - main - INFO - ================================================================================
2025-12-22 22:40:27,421 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:27,421 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:27,421 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:27,421 - main - INFO - ================================================================================
2025-12-22 22:40:27,422 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:27,422 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:27,422 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:27,454 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:27,460 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:27,461 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:27,461 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:27,461 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:27,462 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:27,475 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:27,478 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:27,479 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:27,481 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:27,482 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:27,482 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:27,493 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:27,494 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:27,495 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:27,505 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:27,510 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:27,510 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:27,510 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:27,510 - main - INFO - 
2025-12-22 22:40:27,510 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:27,511 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:27,511 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:27,511 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:27,511 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:27,512 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:27,512 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:27,512 - main - INFO - 
2025-12-22 22:40:27,512 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:27,512 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:27,513 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:27,513 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:27,513 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:27,513 - main - INFO - 
2025-12-22 22:40:27,513 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:27,514 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:27,514 - main - INFO -        - No manual section generation
2025-12-22 22:40:27,514 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:27,514 - main - INFO - 
2025-12-22 22:40:27,514 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:27,515 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:27,515 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:27,515 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:27,515 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:27,515 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:27,516 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:27,516 - main - INFO - 
2025-12-22 22:40:27,516 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:27,516 - main - INFO -      Main:
2025-12-22 22:40:27,517 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:27,518 - main - INFO - 
2025-12-22 22:40:27,518 - main - INFO -      Retrieval:
2025-12-22 22:40:27,519 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:27,520 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:27,520 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:27,520 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:27,521 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:27,521 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:27,521 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:27,521 - main - INFO - 
2025-12-22 22:40:27,522 - main - INFO -      Management:
2025-12-22 22:40:27,522 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:27,523 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:27,523 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:27,523 - main - INFO - 
2025-12-22 22:40:27,524 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:27,524 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:27,525 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:27,525 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:27,525 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:27,526 - main - INFO - 
2025-12-22 22:40:27,526 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:27,526 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:27,526 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:27,527 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:27,527 - main - INFO - 
2025-12-22 22:40:27,527 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:27,527 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:27,527 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:27,528 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:27,529 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:27,529 - main - INFO - 
2025-12-22 22:40:27,529 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:27,529 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:27,529 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:27,530 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:27,530 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:27,530 - main - INFO - 
2025-12-22 22:40:27,530 - main - INFO - ================================================================================
2025-12-22 22:40:27,530 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:27,531 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:27,531 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:27,531 - main - INFO - ================================================================================
2025-12-22 22:40:27,531 - main - INFO - 
2025-12-22 22:40:27,532 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:40:49,924 - main - INFO - 
2025-12-22 22:40:49,929 - main - INFO - ================================================================================
2025-12-22 22:40:49,929 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:40:49,931 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:49,932 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:40:49,937 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:40:49,937 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:40:49,939 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:40:49,939 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:40:49,941 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:40:49,941 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:40:49,942 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:40:49,943 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:40:49,943 - main - INFO - ================================================================================
2025-12-22 22:40:49,943 - main - INFO - 
2025-12-22 22:40:53,446 - main - INFO - 
2025-12-22 22:40:53,446 - main - INFO - ================================================================================
2025-12-22 22:40:53,446 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:40:53,446 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:40:53,447 - main - INFO - ================================================================================
2025-12-22 22:40:53,447 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:40:53,447 - main - INFO -   Upload Directory: uploads
2025-12-22 22:40:53,447 - main - INFO -   Max File Size: 20MB
2025-12-22 22:40:53,448 - main - INFO - ================================================================================
2025-12-22 22:40:53,448 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:40:53,448 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:40:53,449 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:53,479 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:40:53,493 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:40:53,493 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:40:53,494 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:40:53,505 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:40:53,507 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:40:53,509 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:40:53,511 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:40:53,511 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:40:53,512 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:40:53,544 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:40:53,544 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:40:53,544 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:40:53,553 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:40:53,558 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:40:53,558 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:40:53,559 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:40:53,559 - main - INFO - 
2025-12-22 22:40:53,559 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:40:53,559 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:40:53,559 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:40:53,559 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:40:53,560 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:40:53,560 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:40:53,560 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:40:53,560 - main - INFO - 
2025-12-22 22:40:53,560 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:40:53,560 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:40:53,561 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:40:53,561 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:40:53,561 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:40:53,561 - main - INFO - 
2025-12-22 22:40:53,561 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:40:53,561 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:40:53,561 - main - INFO -        - No manual section generation
2025-12-22 22:40:53,562 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:40:53,562 - main - INFO - 
2025-12-22 22:40:53,562 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:40:53,562 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:40:53,562 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:40:53,562 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:40:53,563 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:40:53,563 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:40:53,563 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:40:53,563 - main - INFO - 
2025-12-22 22:40:53,563 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:40:53,563 - main - INFO -      Main:
2025-12-22 22:40:53,564 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:40:53,564 - main - INFO - 
2025-12-22 22:40:53,564 - main - INFO -      Retrieval:
2025-12-22 22:40:53,564 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:40:53,564 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:40:53,564 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:40:53,564 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:40:53,565 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:40:53,565 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:40:53,565 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:40:53,565 - main - INFO - 
2025-12-22 22:40:53,565 - main - INFO -      Management:
2025-12-22 22:40:53,565 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:40:53,566 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:40:53,566 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:40:53,566 - main - INFO - 
2025-12-22 22:40:53,566 - main - INFO -      Documents (MongoDB):
2025-12-22 22:40:53,566 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:40:53,567 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:40:53,567 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:40:53,568 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:40:53,569 - main - INFO - 
2025-12-22 22:40:53,569 - main - INFO -      Diagnostics & Health:
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:40:53,570 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:40:53,570 - main - INFO - 
2025-12-22 22:40:53,570 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:40:53,571 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:40:53,572 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:40:53,572 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:40:53,572 - main - INFO - 
2025-12-22 22:40:53,572 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:40:53,573 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:40:53,573 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:40:53,573 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:40:53,573 - main - INFO -      4. No re-upload needed!
2025-12-22 22:40:53,574 - main - INFO - 
2025-12-22 22:40:53,574 - main - INFO - ================================================================================
2025-12-22 22:40:53,574 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:40:53,574 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:40:53,574 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:40:53,575 - main - INFO - ================================================================================
2025-12-22 22:40:53,575 - main - INFO - 
2025-12-22 22:40:53,575 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:41:05,381 - main - INFO - 
2025-12-22 22:41:05,382 - main - INFO - ================================================================================
2025-12-22 22:41:05,382 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:41:05,383 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:41:05,384 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:41:05,386 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:41:05,386 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:41:05,387 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:41:05,387 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:41:05,388 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:41:05,388 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:41:05,388 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:41:05,389 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:41:05,389 - main - INFO - ================================================================================
2025-12-22 22:41:05,389 - main - INFO - 
2025-12-22 22:42:04,624 - main - INFO - 
2025-12-22 22:42:04,624 - main - INFO - ================================================================================
2025-12-22 22:42:04,624 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:42:04,624 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:42:04,625 - main - INFO - ================================================================================
2025-12-22 22:42:04,625 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:42:04,625 - main - INFO -   Upload Directory: uploads
2025-12-22 22:42:04,625 - main - INFO -   Max File Size: 20MB
2025-12-22 22:42:04,625 - main - INFO - ================================================================================
2025-12-22 22:42:04,626 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:42:04,626 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:42:04,626 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:04,644 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:42:04,649 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:42:04,650 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:42:04,650 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:42:04,661 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:42:04,662 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:42:04,663 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:42:04,664 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:42:04,665 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:04,665 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:42:04,674 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:42:04,675 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:42:04,676 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:42:04,700 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:42:04,702 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:42:04,703 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:42:04,703 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:42:04,703 - main - INFO - 
2025-12-22 22:42:04,703 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:42:04,704 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:42:04,704 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:42:04,704 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:42:04,704 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:42:04,705 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:42:04,705 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:42:04,705 - main - INFO - 
2025-12-22 22:42:04,705 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:42:04,705 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:42:04,706 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:42:04,706 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:42:04,707 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:42:04,707 - main - INFO - 
2025-12-22 22:42:04,708 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:42:04,708 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:42:04,708 - main - INFO -        - No manual section generation
2025-12-22 22:42:04,709 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:42:04,709 - main - INFO - 
2025-12-22 22:42:04,709 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:42:04,709 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:42:04,710 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:42:04,710 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:42:04,710 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:42:04,710 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:42:04,710 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:42:04,711 - main - INFO - 
2025-12-22 22:42:04,711 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:42:04,711 - main - INFO -      Main:
2025-12-22 22:42:04,711 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:42:04,711 - main - INFO - 
2025-12-22 22:42:04,711 - main - INFO -      Retrieval:
2025-12-22 22:42:04,712 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:42:04,712 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:42:04,712 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:42:04,712 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:42:04,712 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:42:04,713 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:42:04,713 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:42:04,713 - main - INFO - 
2025-12-22 22:42:04,713 - main - INFO -      Management:
2025-12-22 22:42:04,713 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:42:04,713 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:42:04,714 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:42:04,714 - main - INFO - 
2025-12-22 22:42:04,714 - main - INFO -      Documents (MongoDB):
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:42:04,714 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:42:04,715 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:42:04,715 - main - INFO - 
2025-12-22 22:42:04,715 - main - INFO -      Diagnostics & Health:
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:42:04,715 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:42:04,716 - main - INFO - 
2025-12-22 22:42:04,716 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:42:04,716 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:42:04,717 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:42:04,717 - main - INFO - 
2025-12-22 22:42:04,717 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:42:04,717 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:42:04,718 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:42:04,718 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:42:04,718 - main - INFO -      4. No re-upload needed!
2025-12-22 22:42:04,718 - main - INFO - 
2025-12-22 22:42:04,718 - main - INFO - ================================================================================
2025-12-22 22:42:04,718 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:42:04,718 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:42:04,719 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:42:04,719 - main - INFO - ================================================================================
2025-12-22 22:42:04,719 - main - INFO - 
2025-12-22 22:42:04,719 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:42:48,917 - main - INFO - 
2025-12-22 22:42:48,918 - main - INFO - ================================================================================
2025-12-22 22:42:48,919 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:42:48,921 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:42:48,922 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:42:48,923 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:42:48,923 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:42:48,925 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:42:48,925 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:42:48,926 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:42:48,926 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:42:48,927 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:42:48,927 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:42:48,927 - main - INFO - ================================================================================
2025-12-22 22:42:48,927 - main - INFO - 
2025-12-22 22:42:54,319 - main - INFO - 
2025-12-22 22:42:54,320 - main - INFO - ================================================================================
2025-12-22 22:42:54,322 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:42:54,322 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:42:54,322 - main - INFO - ================================================================================
2025-12-22 22:42:54,323 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:42:54,323 - main - INFO -   Upload Directory: uploads
2025-12-22 22:42:54,323 - main - INFO -   Max File Size: 20MB
2025-12-22 22:42:54,323 - main - INFO - ================================================================================
2025-12-22 22:42:54,324 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:42:54,324 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:42:54,324 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:54,365 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:42:54,377 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:42:54,377 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:42:54,377 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:42:54,378 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:42:54,378 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:42:54,390 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:42:54,391 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:42:54,392 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:42:54,394 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:42:54,394 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:42:54,395 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:42:54,426 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:42:54,426 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:42:54,426 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:42:54,470 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:42:54,475 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:42:54,475 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:42:54,475 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:42:54,475 - main - INFO - 
2025-12-22 22:42:54,476 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:42:54,476 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:42:54,476 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:42:54,476 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:42:54,477 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:42:54,477 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:42:54,477 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:42:54,477 - main - INFO - 
2025-12-22 22:42:54,478 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:42:54,478 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:42:54,478 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:42:54,478 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:42:54,478 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:42:54,478 - main - INFO - 
2025-12-22 22:42:54,479 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:42:54,479 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:42:54,479 - main - INFO -        - No manual section generation
2025-12-22 22:42:54,479 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:42:54,479 - main - INFO - 
2025-12-22 22:42:54,479 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:42:54,479 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:42:54,480 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:42:54,480 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:42:54,480 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:42:54,480 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:42:54,480 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:42:54,480 - main - INFO - 
2025-12-22 22:42:54,480 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:42:54,481 - main - INFO -      Main:
2025-12-22 22:42:54,481 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:42:54,481 - main - INFO - 
2025-12-22 22:42:54,481 - main - INFO -      Retrieval:
2025-12-22 22:42:54,481 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:42:54,481 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:42:54,481 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:42:54,482 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:42:54,482 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:42:54,482 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:42:54,482 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:42:54,482 - main - INFO - 
2025-12-22 22:42:54,482 - main - INFO -      Management:
2025-12-22 22:42:54,483 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:42:54,483 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:42:54,483 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:42:54,484 - main - INFO - 
2025-12-22 22:42:54,484 - main - INFO -      Documents (MongoDB):
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:42:54,484 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:42:54,485 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:42:54,485 - main - INFO - 
2025-12-22 22:42:54,485 - main - INFO -      Diagnostics & Health:
2025-12-22 22:42:54,485 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:42:54,485 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:42:54,486 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:42:54,486 - main - INFO - 
2025-12-22 22:42:54,486 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:42:54,486 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:42:54,486 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:42:54,487 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:42:54,487 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:42:54,488 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:42:54,489 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:42:54,489 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:42:54,489 - main - INFO - 
2025-12-22 22:42:54,490 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:42:54,490 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:42:54,490 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:42:54,490 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:42:54,491 - main - INFO -      4. No re-upload needed!
2025-12-22 22:42:54,491 - main - INFO - 
2025-12-22 22:42:54,491 - main - INFO - ================================================================================
2025-12-22 22:42:54,491 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:42:54,491 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:42:54,491 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:42:54,492 - main - INFO - ================================================================================
2025-12-22 22:42:54,492 - main - INFO - 
2025-12-22 22:42:54,492 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:44:01,286 - main - INFO - 
2025-12-22 22:44:01,287 - main - INFO - ================================================================================
2025-12-22 22:44:01,289 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:44:01,291 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:01,292 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:44:01,293 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:01,293 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:44:01,294 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:44:01,295 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:44:01,296 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:44:01,297 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:44:01,297 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:44:01,298 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:44:01,298 - main - INFO - ================================================================================
2025-12-22 22:44:01,299 - main - INFO - 
2025-12-22 22:44:05,393 - main - INFO - 
2025-12-22 22:44:05,393 - main - INFO - ================================================================================
2025-12-22 22:44:05,394 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:44:05,394 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:44:05,394 - main - INFO - ================================================================================
2025-12-22 22:44:05,394 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:44:05,395 - main - INFO -   Upload Directory: uploads
2025-12-22 22:44:05,395 - main - INFO -   Max File Size: 20MB
2025-12-22 22:44:05,395 - main - INFO - ================================================================================
2025-12-22 22:44:05,395 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:44:05,396 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:44:05,396 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:05,418 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:44:05,428 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:44:05,429 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:44:05,429 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:44:05,452 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:44:05,453 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:44:05,455 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:44:05,460 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:44:05,460 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:05,461 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:44:05,483 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:44:05,483 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:44:05,483 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:44:05,495 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:44:05,498 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:44:05,498 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:44:05,498 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:44:05,498 - main - INFO - 
2025-12-22 22:44:05,499 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:44:05,499 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:44:05,499 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:44:05,499 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:44:05,499 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:44:05,500 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:44:05,500 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:44:05,500 - main - INFO - 
2025-12-22 22:44:05,500 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:44:05,501 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:44:05,501 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:44:05,501 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:44:05,502 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:44:05,502 - main - INFO - 
2025-12-22 22:44:05,502 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:44:05,502 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:44:05,502 - main - INFO -        - No manual section generation
2025-12-22 22:44:05,503 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:44:05,503 - main - INFO - 
2025-12-22 22:44:05,503 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:44:05,503 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:44:05,504 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:44:05,504 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:44:05,504 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:44:05,505 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:44:05,505 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:44:05,506 - main - INFO - 
2025-12-22 22:44:05,506 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:44:05,507 - main - INFO -      Main:
2025-12-22 22:44:05,507 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:44:05,508 - main - INFO - 
2025-12-22 22:44:05,508 - main - INFO -      Retrieval:
2025-12-22 22:44:05,508 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:44:05,508 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:44:05,509 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:44:05,509 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:44:05,509 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:44:05,509 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:44:05,509 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:44:05,510 - main - INFO - 
2025-12-22 22:44:05,510 - main - INFO -      Management:
2025-12-22 22:44:05,510 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:44:05,510 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:44:05,510 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:44:05,511 - main - INFO - 
2025-12-22 22:44:05,511 - main - INFO -      Documents (MongoDB):
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:44:05,511 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:44:05,511 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:44:05,512 - main - INFO - 
2025-12-22 22:44:05,512 - main - INFO -      Diagnostics & Health:
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:44:05,512 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:44:05,513 - main - INFO - 
2025-12-22 22:44:05,513 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:44:05,513 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:44:05,514 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:44:05,514 - main - INFO - 
2025-12-22 22:44:05,514 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:44:05,514 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:44:05,515 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:44:05,515 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:44:05,515 - main - INFO -      4. No re-upload needed!
2025-12-22 22:44:05,515 - main - INFO - 
2025-12-22 22:44:05,515 - main - INFO - ================================================================================
2025-12-22 22:44:05,516 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:44:05,516 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:44:05,516 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:44:05,516 - main - INFO - ================================================================================
2025-12-22 22:44:05,516 - main - INFO - 
2025-12-22 22:44:05,517 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:44:22,680 - main - INFO - 
2025-12-22 22:44:22,680 - main - INFO - ================================================================================
2025-12-22 22:44:22,681 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:44:22,682 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:22,682 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:44:22,683 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:44:22,684 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:44:22,685 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:44:22,685 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:44:22,686 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:44:22,686 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:44:22,687 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:44:22,687 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:44:22,688 - main - INFO - ================================================================================
2025-12-22 22:44:22,688 - main - INFO - 
2025-12-22 22:44:25,533 - main - INFO - 
2025-12-22 22:44:25,534 - main - INFO - ================================================================================
2025-12-22 22:44:25,534 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:44:25,534 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:44:25,535 - main - INFO - ================================================================================
2025-12-22 22:44:25,535 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:44:25,535 - main - INFO -   Upload Directory: uploads
2025-12-22 22:44:25,535 - main - INFO -   Max File Size: 20MB
2025-12-22 22:44:25,536 - main - INFO - ================================================================================
2025-12-22 22:44:25,536 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:44:25,537 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:44:25,537 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:25,556 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:44:25,562 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:44:25,563 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:44:25,563 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:44:25,563 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:44:25,564 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:44:25,572 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:44:25,575 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:44:25,578 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:44:25,580 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:44:25,580 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:44:25,580 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:44:25,580 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:44:25,581 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:44:25,593 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:44:25,593 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:44:25,594 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:44:25,601 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:44:25,604 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:44:25,605 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:44:25,605 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:44:25,605 - main - INFO - 
2025-12-22 22:44:25,606 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:44:25,606 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:44:25,606 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:44:25,607 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:44:25,607 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:44:25,608 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:44:25,608 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:44:25,609 - main - INFO - 
2025-12-22 22:44:25,609 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:44:25,609 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:44:25,609 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:44:25,610 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:44:25,610 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:44:25,610 - main - INFO - 
2025-12-22 22:44:25,610 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:44:25,610 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:44:25,611 - main - INFO -        - No manual section generation
2025-12-22 22:44:25,611 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:44:25,611 - main - INFO - 
2025-12-22 22:44:25,611 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:44:25,611 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:44:25,611 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:44:25,611 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:44:25,612 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:44:25,612 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:44:25,612 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:44:25,612 - main - INFO - 
2025-12-22 22:44:25,612 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:44:25,612 - main - INFO -      Main:
2025-12-22 22:44:25,613 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:44:25,613 - main - INFO - 
2025-12-22 22:44:25,613 - main - INFO -      Retrieval:
2025-12-22 22:44:25,613 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:44:25,613 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:44:25,613 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:44:25,614 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:44:25,614 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:44:25,614 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:44:25,614 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:44:25,614 - main - INFO - 
2025-12-22 22:44:25,614 - main - INFO -      Management:
2025-12-22 22:44:25,614 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:44:25,615 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:44:25,615 - main - INFO - 
2025-12-22 22:44:25,615 - main - INFO -      Documents (MongoDB):
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:44:25,615 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:44:25,616 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:44:25,616 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:44:25,616 - main - INFO - 
2025-12-22 22:44:25,616 - main - INFO -      Diagnostics & Health:
2025-12-22 22:44:25,616 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:44:25,617 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:44:25,617 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:44:25,617 - main - INFO - 
2025-12-22 22:44:25,617 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:44:25,618 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:44:25,618 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:44:25,619 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:44:25,620 - main - INFO - 
2025-12-22 22:44:25,620 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:44:25,620 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:44:25,620 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:44:25,621 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:44:25,621 - main - INFO -      4. No re-upload needed!
2025-12-22 22:44:25,621 - main - INFO - 
2025-12-22 22:44:25,621 - main - INFO - ================================================================================
2025-12-22 22:44:25,621 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:44:25,622 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:44:25,622 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:44:25,622 - main - INFO - ================================================================================
2025-12-22 22:44:25,622 - main - INFO - 
2025-12-22 22:44:25,622 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:45:01,910 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 22:45:01,911 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 22:45:02,224 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 22:45:02,264 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.04s
2025-12-22 22:45:12,621 - main - INFO - ğŸ“¥ GET /docs
2025-12-22 22:45:12,622 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-22 22:45:13,135 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-22 22:45:13,138 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
2025-12-22 22:45:52,604 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:45:52,610 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 422 - 0.01s
2025-12-22 22:46:07,542 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:46:07,544 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 422 - 0.00s
2025-12-22 22:47:18,985 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:47:19,014 - app.services.hakim_score_service - INFO - âœ… Created Hakim score for gig
2025-12-22 22:47:19,021 - app.api.routes - ERROR - âŒ Error creating/updating Hakim score: Object of type datetime is not JSON serializable
2025-12-22 22:47:19,022 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 500 - 0.04s
2025-12-22 22:47:59,665 - main - INFO - 
2025-12-22 22:47:59,665 - main - INFO - ================================================================================
2025-12-22 22:47:59,665 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:47:59,666 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:47:59,667 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:47:59,668 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:47:59,669 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:47:59,671 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:47:59,672 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:47:59,674 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:47:59,674 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:47:59,674 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:47:59,675 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:47:59,675 - main - INFO - ================================================================================
2025-12-22 22:47:59,675 - main - INFO - 
2025-12-22 22:48:05,195 - main - INFO - 
2025-12-22 22:48:05,195 - main - INFO - ================================================================================
2025-12-22 22:48:05,195 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:05,196 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:05,196 - main - INFO - ================================================================================
2025-12-22 22:48:05,196 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:05,197 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:05,197 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:05,197 - main - INFO - ================================================================================
2025-12-22 22:48:05,198 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:05,198 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:05,198 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:05,228 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:05,235 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:05,236 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:05,238 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:05,239 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:05,240 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:05,251 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:05,254 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:05,257 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:05,260 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:05,261 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:05,261 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:05,275 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:05,276 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:05,276 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:05,308 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:05,311 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:05,311 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:05,311 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:05,312 - main - INFO - 
2025-12-22 22:48:05,312 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:05,312 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:05,312 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:05,312 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:05,313 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:05,313 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:05,313 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:05,313 - main - INFO - 
2025-12-22 22:48:05,313 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:05,314 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:05,314 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:05,314 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:05,314 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:05,314 - main - INFO - 
2025-12-22 22:48:05,314 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:05,315 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:05,315 - main - INFO -        - No manual section generation
2025-12-22 22:48:05,315 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:05,315 - main - INFO - 
2025-12-22 22:48:05,315 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:05,316 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:05,316 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:05,316 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:05,317 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:05,317 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:05,317 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:05,317 - main - INFO - 
2025-12-22 22:48:05,317 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:05,318 - main - INFO -      Main:
2025-12-22 22:48:05,318 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:05,318 - main - INFO - 
2025-12-22 22:48:05,318 - main - INFO -      Retrieval:
2025-12-22 22:48:05,319 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:05,319 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:05,320 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:05,322 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:05,322 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:05,323 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:05,323 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:05,323 - main - INFO - 
2025-12-22 22:48:05,324 - main - INFO -      Management:
2025-12-22 22:48:05,324 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:05,324 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:05,324 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:05,324 - main - INFO - 
2025-12-22 22:48:05,325 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:05,325 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:05,325 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:05,326 - main - INFO - 
2025-12-22 22:48:05,326 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:05,326 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:05,326 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:05,327 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:05,327 - main - INFO - 
2025-12-22 22:48:05,327 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:05,327 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:05,327 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:05,328 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:05,329 - main - INFO - 
2025-12-22 22:48:05,329 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:05,329 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:05,329 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:05,329 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:05,330 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:05,330 - main - INFO - 
2025-12-22 22:48:05,330 - main - INFO - ================================================================================
2025-12-22 22:48:05,330 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:05,330 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:05,331 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:05,331 - main - INFO - ================================================================================
2025-12-22 22:48:05,331 - main - INFO - 
2025-12-22 22:48:05,331 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:09,695 - main - INFO - 
2025-12-22 22:48:09,695 - main - INFO - ================================================================================
2025-12-22 22:48:09,696 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:09,696 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:09,696 - main - INFO - ================================================================================
2025-12-22 22:48:09,696 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:09,696 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:09,697 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:09,697 - main - INFO - ================================================================================
2025-12-22 22:48:09,697 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:09,697 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:09,698 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:09,733 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:09,745 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:09,745 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:09,745 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:09,746 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:09,747 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:09,760 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:09,762 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:09,763 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:09,766 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:09,766 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:09,767 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:09,768 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:09,769 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:09,784 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:09,785 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:09,786 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:09,800 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:09,809 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:09,809 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:09,810 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:09,810 - main - INFO - 
2025-12-22 22:48:09,810 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:09,810 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:09,811 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:09,811 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:09,811 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:09,812 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:09,812 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:09,812 - main - INFO - 
2025-12-22 22:48:09,813 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:09,813 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:09,813 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:09,813 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:09,814 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:09,814 - main - INFO - 
2025-12-22 22:48:09,814 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:09,815 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:09,815 - main - INFO -        - No manual section generation
2025-12-22 22:48:09,815 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:09,815 - main - INFO - 
2025-12-22 22:48:09,816 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:09,816 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:09,816 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:09,817 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:09,817 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:09,817 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:09,818 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:09,818 - main - INFO - 
2025-12-22 22:48:09,818 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:09,819 - main - INFO -      Main:
2025-12-22 22:48:09,819 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:09,821 - main - INFO - 
2025-12-22 22:48:09,823 - main - INFO -      Retrieval:
2025-12-22 22:48:09,824 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:09,824 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:09,825 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:09,825 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:09,825 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:09,825 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:09,826 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:09,826 - main - INFO - 
2025-12-22 22:48:09,826 - main - INFO -      Management:
2025-12-22 22:48:09,826 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:09,826 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:09,827 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:09,827 - main - INFO - 
2025-12-22 22:48:09,827 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:09,827 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:09,827 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:09,828 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:09,828 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:09,828 - main - INFO - 
2025-12-22 22:48:09,828 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:09,829 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:09,829 - main - INFO - 
2025-12-22 22:48:09,829 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:09,830 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:09,831 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:09,831 - main - INFO - 
2025-12-22 22:48:09,831 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:09,832 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:09,832 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:09,832 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:09,832 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:09,833 - main - INFO - 
2025-12-22 22:48:09,833 - main - INFO - ================================================================================
2025-12-22 22:48:09,834 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:09,834 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:09,834 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:09,835 - main - INFO - ================================================================================
2025-12-22 22:48:09,835 - main - INFO - 
2025-12-22 22:48:09,837 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:15,083 - main - INFO - 
2025-12-22 22:48:15,083 - main - INFO - ================================================================================
2025-12-22 22:48:15,083 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:15,084 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:15,084 - main - INFO - ================================================================================
2025-12-22 22:48:15,084 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:15,085 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:15,085 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:15,085 - main - INFO - ================================================================================
2025-12-22 22:48:15,086 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:15,087 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:15,087 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:15,117 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:15,128 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:15,129 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:15,129 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:15,129 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:15,130 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:15,144 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:15,145 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:15,146 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:15,150 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:15,151 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:15,151 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:15,152 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:15,152 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:15,165 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:15,165 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:15,166 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:15,201 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:15,208 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:15,209 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:15,209 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:15,209 - main - INFO - 
2025-12-22 22:48:15,209 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:15,210 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:15,210 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:15,210 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:15,210 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:15,210 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:15,211 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:15,211 - main - INFO - 
2025-12-22 22:48:15,211 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:15,211 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:15,211 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:15,212 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:15,212 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:15,212 - main - INFO - 
2025-12-22 22:48:15,212 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:15,212 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:15,212 - main - INFO -        - No manual section generation
2025-12-22 22:48:15,213 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:15,213 - main - INFO - 
2025-12-22 22:48:15,213 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:15,213 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:15,213 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:15,214 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:15,214 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:15,214 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:15,214 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:15,214 - main - INFO - 
2025-12-22 22:48:15,214 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:15,215 - main - INFO -      Main:
2025-12-22 22:48:15,215 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:15,215 - main - INFO - 
2025-12-22 22:48:15,215 - main - INFO -      Retrieval:
2025-12-22 22:48:15,215 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:15,215 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:15,216 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:15,216 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:15,216 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:15,216 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:15,216 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:15,217 - main - INFO - 
2025-12-22 22:48:15,217 - main - INFO -      Management:
2025-12-22 22:48:15,217 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:15,217 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:15,217 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:15,218 - main - INFO - 
2025-12-22 22:48:15,218 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:15,218 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:15,219 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:15,219 - main - INFO - 
2025-12-22 22:48:15,219 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:15,220 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:15,221 - main - INFO - 
2025-12-22 22:48:15,222 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:15,222 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:15,223 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:15,224 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:15,224 - main - INFO - 
2025-12-22 22:48:15,225 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:15,225 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:15,225 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:15,225 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:15,225 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:15,226 - main - INFO - 
2025-12-22 22:48:15,226 - main - INFO - ================================================================================
2025-12-22 22:48:15,226 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:15,226 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:15,226 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:15,227 - main - INFO - ================================================================================
2025-12-22 22:48:15,227 - main - INFO - 
2025-12-22 22:48:15,227 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:19,316 - main - INFO - 
2025-12-22 22:48:19,318 - main - INFO - ================================================================================
2025-12-22 22:48:19,319 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:19,319 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:19,320 - main - INFO - ================================================================================
2025-12-22 22:48:19,320 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:19,320 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:19,321 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:19,321 - main - INFO - ================================================================================
2025-12-22 22:48:19,321 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:19,322 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:19,322 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:19,351 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:19,358 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:19,358 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:19,359 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:19,387 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:19,389 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:19,390 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:19,392 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:19,392 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:19,393 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:19,404 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:19,404 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:19,405 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:19,441 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:19,447 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:19,448 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:19,448 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:19,449 - main - INFO - 
2025-12-22 22:48:19,449 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:19,450 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:19,450 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:19,451 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:19,451 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:19,451 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:19,452 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:19,452 - main - INFO - 
2025-12-22 22:48:19,452 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:19,453 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:19,453 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:19,453 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:19,454 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:19,455 - main - INFO - 
2025-12-22 22:48:19,456 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:19,457 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:19,457 - main - INFO -        - No manual section generation
2025-12-22 22:48:19,457 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:19,458 - main - INFO - 
2025-12-22 22:48:19,458 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:19,458 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:19,459 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:19,459 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:19,459 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:19,459 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:19,460 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:19,460 - main - INFO - 
2025-12-22 22:48:19,460 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:19,460 - main - INFO -      Main:
2025-12-22 22:48:19,461 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:19,461 - main - INFO - 
2025-12-22 22:48:19,461 - main - INFO -      Retrieval:
2025-12-22 22:48:19,461 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:19,461 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:19,462 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:19,462 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:19,462 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:19,462 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:19,462 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:19,462 - main - INFO - 
2025-12-22 22:48:19,463 - main - INFO -      Management:
2025-12-22 22:48:19,463 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:19,463 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:19,463 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:19,463 - main - INFO - 
2025-12-22 22:48:19,464 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:19,464 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:19,464 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:19,464 - main - INFO - 
2025-12-22 22:48:19,465 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:19,465 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:19,465 - main - INFO - 
2025-12-22 22:48:19,466 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:19,466 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:19,467 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:19,467 - main - INFO - 
2025-12-22 22:48:19,467 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:19,468 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:19,468 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:19,468 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:19,468 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:19,468 - main - INFO - 
2025-12-22 22:48:19,469 - main - INFO - ================================================================================
2025-12-22 22:48:19,469 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:19,469 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:19,469 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:19,469 - main - INFO - ================================================================================
2025-12-22 22:48:19,469 - main - INFO - 
2025-12-22 22:48:19,470 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:28,999 - main - INFO - 
2025-12-22 22:48:29,006 - main - INFO - ================================================================================
2025-12-22 22:48:29,010 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:48:29,011 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:29,013 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:48:29,015 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:29,015 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:48:29,017 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:48:29,018 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:48:29,021 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:48:29,023 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:48:29,025 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:48:29,025 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:48:29,025 - main - INFO - ================================================================================
2025-12-22 22:48:29,026 - main - INFO - 
2025-12-22 22:48:33,248 - main - INFO - 
2025-12-22 22:48:33,248 - main - INFO - ================================================================================
2025-12-22 22:48:33,248 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:33,248 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:33,249 - main - INFO - ================================================================================
2025-12-22 22:48:33,249 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:33,249 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:33,249 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:33,250 - main - INFO - ================================================================================
2025-12-22 22:48:33,251 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:33,253 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:33,253 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:33,294 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:33,298 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:33,298 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:33,299 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:33,325 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:33,326 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:33,327 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:33,329 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:33,329 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:33,329 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:33,329 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:33,330 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:33,341 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:33,341 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:33,342 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:33,374 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:33,377 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:33,377 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:33,377 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:33,378 - main - INFO - 
2025-12-22 22:48:33,378 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:33,378 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:33,378 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:33,379 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:33,379 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:33,379 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:33,379 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:33,379 - main - INFO - 
2025-12-22 22:48:33,380 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:33,380 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:33,380 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:33,380 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:33,380 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:33,381 - main - INFO - 
2025-12-22 22:48:33,381 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:33,381 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:33,381 - main - INFO -        - No manual section generation
2025-12-22 22:48:33,381 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:33,382 - main - INFO - 
2025-12-22 22:48:33,382 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:33,382 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:33,382 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:33,382 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:33,382 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:33,383 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:33,383 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:33,383 - main - INFO - 
2025-12-22 22:48:33,384 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:33,386 - main - INFO -      Main:
2025-12-22 22:48:33,386 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:33,387 - main - INFO - 
2025-12-22 22:48:33,387 - main - INFO -      Retrieval:
2025-12-22 22:48:33,387 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:33,388 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:33,388 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:33,389 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:33,389 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:33,389 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:33,389 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:33,389 - main - INFO - 
2025-12-22 22:48:33,390 - main - INFO -      Management:
2025-12-22 22:48:33,390 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:33,390 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:33,390 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:33,390 - main - INFO - 
2025-12-22 22:48:33,391 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:33,391 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:33,391 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:33,391 - main - INFO - 
2025-12-22 22:48:33,392 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:33,392 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:33,392 - main - INFO - 
2025-12-22 22:48:33,392 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:33,393 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:33,394 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:33,394 - main - INFO - 
2025-12-22 22:48:33,394 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:33,394 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:33,394 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:33,394 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:33,395 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:33,395 - main - INFO - 
2025-12-22 22:48:33,395 - main - INFO - ================================================================================
2025-12-22 22:48:33,395 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:33,395 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:33,395 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:33,396 - main - INFO - ================================================================================
2025-12-22 22:48:33,396 - main - INFO - 
2025-12-22 22:48:33,396 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:48:51,048 - main - INFO - 
2025-12-22 22:48:51,048 - main - INFO - ================================================================================
2025-12-22 22:48:51,048 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:48:51,049 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:51,049 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:48:51,050 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:48:51,050 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:48:51,051 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:48:51,052 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:48:51,053 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:48:51,053 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:48:51,054 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:48:51,054 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:48:51,054 - main - INFO - ================================================================================
2025-12-22 22:48:51,054 - main - INFO - 
2025-12-22 22:48:56,059 - main - INFO - 
2025-12-22 22:48:56,059 - main - INFO - ================================================================================
2025-12-22 22:48:56,060 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:48:56,060 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:48:56,060 - main - INFO - ================================================================================
2025-12-22 22:48:56,061 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:48:56,061 - main - INFO -   Upload Directory: uploads
2025-12-22 22:48:56,061 - main - INFO -   Max File Size: 20MB
2025-12-22 22:48:56,062 - main - INFO - ================================================================================
2025-12-22 22:48:56,062 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:48:56,063 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:48:56,063 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:56,098 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:48:56,108 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:48:56,108 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:48:56,109 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:48:56,116 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:48:56,117 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:48:56,121 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:48:56,126 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:48:56,126 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:48:56,127 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:48:56,142 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:48:56,143 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:48:56,143 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:48:56,153 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:48:56,160 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:48:56,160 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:48:56,160 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:48:56,161 - main - INFO - 
2025-12-22 22:48:56,161 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:48:56,161 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:48:56,161 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:48:56,162 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:48:56,162 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:48:56,162 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:48:56,163 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:48:56,163 - main - INFO - 
2025-12-22 22:48:56,163 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:48:56,163 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:48:56,163 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:48:56,164 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:48:56,164 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:48:56,164 - main - INFO - 
2025-12-22 22:48:56,164 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:48:56,165 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:48:56,165 - main - INFO -        - No manual section generation
2025-12-22 22:48:56,165 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:48:56,165 - main - INFO - 
2025-12-22 22:48:56,165 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:48:56,165 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:48:56,166 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:48:56,166 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:48:56,166 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:48:56,166 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:48:56,167 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:48:56,167 - main - INFO - 
2025-12-22 22:48:56,167 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:48:56,167 - main - INFO -      Main:
2025-12-22 22:48:56,168 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:48:56,168 - main - INFO - 
2025-12-22 22:48:56,168 - main - INFO -      Retrieval:
2025-12-22 22:48:56,168 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:48:56,168 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:48:56,169 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:48:56,169 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:48:56,169 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:48:56,170 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:48:56,170 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:48:56,171 - main - INFO - 
2025-12-22 22:48:56,172 - main - INFO -      Management:
2025-12-22 22:48:56,173 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:48:56,173 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:48:56,174 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:48:56,174 - main - INFO - 
2025-12-22 22:48:56,175 - main - INFO -      Documents (MongoDB):
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:48:56,175 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:48:56,176 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:48:56,176 - main - INFO - 
2025-12-22 22:48:56,176 - main - INFO -      Diagnostics & Health:
2025-12-22 22:48:56,176 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:48:56,177 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:48:56,177 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:48:56,177 - main - INFO - 
2025-12-22 22:48:56,177 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:48:56,178 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:48:56,179 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:48:56,180 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:48:56,180 - main - INFO - 
2025-12-22 22:48:56,180 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:48:56,180 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:48:56,181 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:48:56,181 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:48:56,181 - main - INFO -      4. No re-upload needed!
2025-12-22 22:48:56,181 - main - INFO - 
2025-12-22 22:48:56,181 - main - INFO - ================================================================================
2025-12-22 22:48:56,182 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:48:56,182 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:48:56,182 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:48:56,182 - main - INFO - ================================================================================
2025-12-22 22:48:56,182 - main - INFO - 
2025-12-22 22:48:56,183 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:49:25,599 - main - INFO - 
2025-12-22 22:49:25,599 - main - INFO - ================================================================================
2025-12-22 22:49:25,600 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 22:49:25,602 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:49:25,602 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 22:49:25,606 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 22:49:25,607 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 22:49:25,608 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 22:49:25,608 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 22:49:25,609 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 22:49:25,609 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 22:49:25,610 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 22:49:25,610 - main - INFO -   âœ… Application stopped successfully
2025-12-22 22:49:25,610 - main - INFO - ================================================================================
2025-12-22 22:49:25,610 - main - INFO - 
2025-12-22 22:49:29,355 - main - INFO - 
2025-12-22 22:49:29,355 - main - INFO - ================================================================================
2025-12-22 22:49:29,356 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 22:49:29,356 - main - INFO -   Production-Ready Complete Integration
2025-12-22 22:49:29,356 - main - INFO - ================================================================================
2025-12-22 22:49:29,356 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 22:49:29,357 - main - INFO -   Upload Directory: uploads
2025-12-22 22:49:29,357 - main - INFO -   Max File Size: 20MB
2025-12-22 22:49:29,357 - main - INFO - ================================================================================
2025-12-22 22:49:29,357 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 22:49:29,358 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 22:49:29,358 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 22:49:29,381 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 22:49:29,388 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 22:49:29,389 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 22:49:29,389 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 22:49:29,415 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 22:49:29,416 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 22:49:29,417 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 22:49:29,420 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 22:49:29,420 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 22:49:29,420 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 22:49:29,421 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 22:49:29,421 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 22:49:29,430 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 22:49:29,430 - main - INFO -   âœ… User Documents Service connected
2025-12-22 22:49:29,430 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 22:49:29,461 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 22:49:29,464 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 22:49:29,464 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 22:49:29,464 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 22:49:29,464 - main - INFO - 
2025-12-22 22:49:29,465 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 22:49:29,465 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 22:49:29,465 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 22:49:29,465 - main - INFO -        - Separates warranties from extensions
2025-12-22 22:49:29,465 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 22:49:29,466 - main - INFO -        - Correct deductible tier detection
2025-12-22 22:49:29,466 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 22:49:29,466 - main - INFO - 
2025-12-22 22:49:29,466 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 22:49:29,466 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 22:49:29,466 - main - INFO -        - Identifies unique items per provider
2025-12-22 22:49:29,467 - main - INFO -        - Transparent scoring methodology
2025-12-22 22:49:29,467 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 22:49:29,468 - main - INFO - 
2025-12-22 22:49:29,468 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 22:49:29,468 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 22:49:29,469 - main - INFO -        - No manual section generation
2025-12-22 22:49:29,469 - main - INFO -        - Complete MongoDB integration
2025-12-22 22:49:29,469 - main - INFO - 
2025-12-22 22:49:29,469 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 22:49:29,469 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 22:49:29,470 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 22:49:29,470 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 22:49:29,470 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 22:49:29,470 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 22:49:29,470 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 22:49:29,471 - main - INFO - 
2025-12-22 22:49:29,471 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 22:49:29,471 - main - INFO -      Main:
2025-12-22 22:49:29,471 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 22:49:29,471 - main - INFO - 
2025-12-22 22:49:29,472 - main - INFO -      Retrieval:
2025-12-22 22:49:29,472 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 22:49:29,472 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 22:49:29,472 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 22:49:29,472 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 22:49:29,473 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 22:49:29,473 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 22:49:29,473 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 22:49:29,473 - main - INFO - 
2025-12-22 22:49:29,473 - main - INFO -      Management:
2025-12-22 22:49:29,473 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 22:49:29,474 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 22:49:29,475 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 22:49:29,475 - main - INFO - 
2025-12-22 22:49:29,475 - main - INFO -      Documents (MongoDB):
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents                All documents
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 22:49:29,475 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 22:49:29,476 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 22:49:29,476 - main - INFO - 
2025-12-22 22:49:29,476 - main - INFO -      Diagnostics & Health:
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/health                   System health
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 22:49:29,476 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 22:49:29,476 - main - INFO - 
2025-12-22 22:49:29,477 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 22:49:29,477 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 22:49:29,478 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 22:49:29,478 - main - INFO - 
2025-12-22 22:49:29,478 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 22:49:29,478 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 22:49:29,479 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 22:49:29,479 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 22:49:29,479 - main - INFO -      4. No re-upload needed!
2025-12-22 22:49:29,479 - main - INFO - 
2025-12-22 22:49:29,479 - main - INFO - ================================================================================
2025-12-22 22:49:29,479 - main - INFO -   âœ… Application started successfully!
2025-12-22 22:49:29,480 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 22:49:29,480 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 22:49:29,480 - main - INFO - ================================================================================
2025-12-22 22:49:29,480 - main - INFO - 
2025-12-22 22:49:29,480 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 22:49:34,876 - main - INFO - ğŸ“¥ POST /api/admin/hakim-scores
2025-12-22 22:49:34,894 - app.services.hakim_score_service - INFO - âœ… Updated Hakim score for gig
2025-12-22 22:49:34,896 - main - INFO - ğŸ“¤ POST /api/admin/hakim-scores - 200 - 0.02s
2025-12-22 23:07:19,574 - main - INFO - 
2025-12-22 23:07:19,574 - main - INFO - ================================================================================
2025-12-22 23:07:19,575 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:07:19,577 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:19,578 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:07:19,580 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:19,580 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:07:19,582 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:07:19,583 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:07:19,587 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:07:19,589 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:07:19,593 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:07:19,594 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:07:19,594 - main - INFO - ================================================================================
2025-12-22 23:07:19,595 - main - INFO - 
2025-12-22 23:07:24,482 - main - INFO - 
2025-12-22 23:07:24,483 - main - INFO - ================================================================================
2025-12-22 23:07:24,483 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:07:24,483 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:07:24,483 - main - INFO - ================================================================================
2025-12-22 23:07:24,484 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:07:24,484 - main - INFO -   Upload Directory: uploads
2025-12-22 23:07:24,484 - main - INFO -   Max File Size: 20MB
2025-12-22 23:07:24,485 - main - INFO - ================================================================================
2025-12-22 23:07:24,486 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:07:24,488 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:07:24,489 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:24,512 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:07:24,519 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:07:24,521 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:07:24,522 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:07:24,522 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:07:24,523 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:07:24,557 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:07:24,558 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:07:24,559 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:07:24,561 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:07:24,561 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:07:24,561 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:07:24,562 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:24,562 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:07:24,585 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:07:24,586 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:07:24,587 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:07:24,630 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:07:24,633 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:07:24,633 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:07:24,633 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:07:24,633 - main - INFO - 
2025-12-22 23:07:24,634 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:07:24,634 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:07:24,634 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:07:24,634 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:07:24,635 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:07:24,635 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:07:24,635 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:07:24,636 - main - INFO - 
2025-12-22 23:07:24,636 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:07:24,637 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:07:24,638 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:07:24,639 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:07:24,639 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:07:24,639 - main - INFO - 
2025-12-22 23:07:24,640 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:07:24,640 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:07:24,640 - main - INFO -        - No manual section generation
2025-12-22 23:07:24,640 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:07:24,641 - main - INFO - 
2025-12-22 23:07:24,641 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:07:24,641 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:07:24,641 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:07:24,641 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:07:24,642 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:07:24,642 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:07:24,642 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:07:24,642 - main - INFO - 
2025-12-22 23:07:24,642 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:07:24,643 - main - INFO -      Main:
2025-12-22 23:07:24,643 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:07:24,643 - main - INFO - 
2025-12-22 23:07:24,643 - main - INFO -      Retrieval:
2025-12-22 23:07:24,643 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:07:24,644 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:07:24,644 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:07:24,644 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:07:24,644 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:07:24,645 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:07:24,645 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:07:24,645 - main - INFO - 
2025-12-22 23:07:24,645 - main - INFO -      Management:
2025-12-22 23:07:24,646 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:07:24,646 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:07:24,646 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:07:24,646 - main - INFO - 
2025-12-22 23:07:24,647 - main - INFO -      Documents (MongoDB):
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:07:24,647 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:07:24,647 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:07:24,648 - main - INFO - 
2025-12-22 23:07:24,648 - main - INFO -      Diagnostics & Health:
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:07:24,648 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:07:24,648 - main - INFO - 
2025-12-22 23:07:24,649 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:07:24,649 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:07:24,650 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:07:24,650 - main - INFO - 
2025-12-22 23:07:24,651 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:07:24,651 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:07:24,651 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:07:24,652 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:07:24,652 - main - INFO -      4. No re-upload needed!
2025-12-22 23:07:24,653 - main - INFO - 
2025-12-22 23:07:24,653 - main - INFO - ================================================================================
2025-12-22 23:07:24,654 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:07:24,655 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:07:24,655 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:07:24,656 - main - INFO - ================================================================================
2025-12-22 23:07:24,656 - main - INFO - 
2025-12-22 23:07:24,656 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:07:46,854 - main - INFO - 
2025-12-22 23:07:46,854 - main - INFO - ================================================================================
2025-12-22 23:07:46,854 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:07:46,856 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:46,857 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:07:46,858 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:07:46,858 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:07:46,859 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:07:46,860 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:07:46,861 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:07:46,861 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:07:46,862 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:07:46,862 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:07:46,863 - main - INFO - ================================================================================
2025-12-22 23:07:46,863 - main - INFO - 
2025-12-22 23:07:51,123 - main - INFO - 
2025-12-22 23:07:51,123 - main - INFO - ================================================================================
2025-12-22 23:07:51,123 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:07:51,123 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:07:51,124 - main - INFO - ================================================================================
2025-12-22 23:07:51,124 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:07:51,124 - main - INFO -   Upload Directory: uploads
2025-12-22 23:07:51,124 - main - INFO -   Max File Size: 20MB
2025-12-22 23:07:51,124 - main - INFO - ================================================================================
2025-12-22 23:07:51,125 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:07:51,125 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:07:51,125 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:51,147 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:07:51,157 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:07:51,158 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:07:51,158 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:07:51,170 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:07:51,172 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:07:51,174 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:07:51,177 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:07:51,177 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:07:51,177 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:07:51,177 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:07:51,178 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:07:51,189 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:07:51,190 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:07:51,190 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:07:51,230 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:07:51,238 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:07:51,239 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:07:51,240 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:07:51,241 - main - INFO - 
2025-12-22 23:07:51,241 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:07:51,242 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:07:51,243 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:07:51,243 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:07:51,244 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:07:51,244 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:07:51,245 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:07:51,245 - main - INFO - 
2025-12-22 23:07:51,246 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:07:51,246 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:07:51,247 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:07:51,247 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:07:51,248 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:07:51,248 - main - INFO - 
2025-12-22 23:07:51,249 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:07:51,249 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:07:51,250 - main - INFO -        - No manual section generation
2025-12-22 23:07:51,250 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:07:51,252 - main - INFO - 
2025-12-22 23:07:51,252 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:07:51,253 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:07:51,254 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:07:51,254 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:07:51,255 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:07:51,255 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:07:51,256 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:07:51,257 - main - INFO - 
2025-12-22 23:07:51,258 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:07:51,258 - main - INFO -      Main:
2025-12-22 23:07:51,259 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:07:51,259 - main - INFO - 
2025-12-22 23:07:51,260 - main - INFO -      Retrieval:
2025-12-22 23:07:51,260 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:07:51,261 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:07:51,262 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:07:51,262 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:07:51,263 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:07:51,263 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:07:51,264 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:07:51,264 - main - INFO - 
2025-12-22 23:07:51,265 - main - INFO -      Management:
2025-12-22 23:07:51,265 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:07:51,265 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:07:51,266 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:07:51,267 - main - INFO - 
2025-12-22 23:07:51,268 - main - INFO -      Documents (MongoDB):
2025-12-22 23:07:51,269 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:07:51,270 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:07:51,270 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:07:51,271 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:07:51,271 - main - INFO - 
2025-12-22 23:07:51,272 - main - INFO -      Diagnostics & Health:
2025-12-22 23:07:51,273 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:07:51,273 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:07:51,274 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:07:51,275 - main - INFO - 
2025-12-22 23:07:51,275 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:07:51,276 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:07:51,277 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:07:51,278 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:07:51,278 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:07:51,279 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:07:51,279 - main - INFO - 
2025-12-22 23:07:51,280 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:07:51,280 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:07:51,280 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:07:51,281 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:07:51,281 - main - INFO -      4. No re-upload needed!
2025-12-22 23:07:51,281 - main - INFO - 
2025-12-22 23:07:51,282 - main - INFO - ================================================================================
2025-12-22 23:07:51,282 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:07:51,283 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:07:51,283 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:07:51,284 - main - INFO - ================================================================================
2025-12-22 23:07:51,285 - main - INFO - 
2025-12-22 23:07:51,286 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:07,245 - main - INFO - 
2025-12-22 23:08:07,246 - main - INFO - ================================================================================
2025-12-22 23:08:07,246 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:07,248 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:07,248 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:07,249 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:07,252 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:07,254 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:07,254 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:07,255 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:07,256 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:07,256 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:07,256 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:07,257 - main - INFO - ================================================================================
2025-12-22 23:08:07,257 - main - INFO - 
2025-12-22 23:08:11,948 - main - INFO - 
2025-12-22 23:08:11,948 - main - INFO - ================================================================================
2025-12-22 23:08:11,948 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:11,949 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:11,949 - main - INFO - ================================================================================
2025-12-22 23:08:11,949 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:11,949 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:11,950 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:11,950 - main - INFO - ================================================================================
2025-12-22 23:08:11,950 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:11,951 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:11,951 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:12,110 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:12,115 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:12,117 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:12,118 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:12,120 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:12,120 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:12,131 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:12,133 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:12,137 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:12,140 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:12,141 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:12,141 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:12,154 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:12,154 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:12,155 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:12,164 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:12,182 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:12,183 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:12,184 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:12,189 - main - INFO - 
2025-12-22 23:08:12,191 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:12,191 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:12,192 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:12,192 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:12,192 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:12,193 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:12,193 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:12,193 - main - INFO - 
2025-12-22 23:08:12,194 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:12,194 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:12,194 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:12,194 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:12,195 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:12,200 - main - INFO - 
2025-12-22 23:08:12,201 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:12,202 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:12,202 - main - INFO -        - No manual section generation
2025-12-22 23:08:12,202 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:12,202 - main - INFO - 
2025-12-22 23:08:12,203 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:12,204 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:12,214 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:12,216 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:12,217 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:12,217 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:12,218 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:12,218 - main - INFO - 
2025-12-22 23:08:12,218 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:12,219 - main - INFO -      Main:
2025-12-22 23:08:12,220 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:12,220 - main - INFO - 
2025-12-22 23:08:12,221 - main - INFO -      Retrieval:
2025-12-22 23:08:12,221 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:12,221 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:12,222 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:12,222 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:12,222 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:12,223 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:12,223 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:12,223 - main - INFO - 
2025-12-22 23:08:12,223 - main - INFO -      Management:
2025-12-22 23:08:12,224 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:12,224 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:12,224 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:12,224 - main - INFO - 
2025-12-22 23:08:12,225 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:12,225 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:12,225 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:12,226 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:12,226 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:12,226 - main - INFO - 
2025-12-22 23:08:12,227 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:12,227 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:12,227 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:12,228 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:12,228 - main - INFO - 
2025-12-22 23:08:12,228 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:12,228 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:12,229 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:12,230 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:12,230 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:12,230 - main - INFO - 
2025-12-22 23:08:12,230 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:12,230 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:12,231 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:12,231 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:12,231 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:12,231 - main - INFO - 
2025-12-22 23:08:12,231 - main - INFO - ================================================================================
2025-12-22 23:08:12,232 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:12,232 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:12,232 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:12,233 - main - INFO - ================================================================================
2025-12-22 23:08:12,233 - main - INFO - 
2025-12-22 23:08:12,233 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:16,131 - main - INFO - 
2025-12-22 23:08:16,131 - main - INFO - ================================================================================
2025-12-22 23:08:16,131 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:16,131 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:16,132 - main - INFO - ================================================================================
2025-12-22 23:08:16,132 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:16,132 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:16,132 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:16,132 - main - INFO - ================================================================================
2025-12-22 23:08:16,133 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:16,135 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:16,136 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:16,162 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:16,174 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:16,174 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:16,174 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:16,175 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:16,175 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:16,208 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:16,209 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:16,210 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:16,212 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:16,212 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:16,212 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:16,224 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:16,225 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:16,225 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:16,231 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:16,238 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:16,238 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:16,238 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:16,238 - main - INFO - 
2025-12-22 23:08:16,239 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:16,239 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:16,240 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:16,240 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:16,240 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:16,240 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:16,240 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:16,240 - main - INFO - 
2025-12-22 23:08:16,241 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:16,241 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:16,241 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:16,241 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:16,241 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:16,241 - main - INFO - 
2025-12-22 23:08:16,242 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:16,242 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:16,242 - main - INFO -        - No manual section generation
2025-12-22 23:08:16,242 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:16,242 - main - INFO - 
2025-12-22 23:08:16,242 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:16,243 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:16,243 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:16,243 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:16,243 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:16,243 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:16,243 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:16,244 - main - INFO - 
2025-12-22 23:08:16,244 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:16,244 - main - INFO -      Main:
2025-12-22 23:08:16,244 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:16,244 - main - INFO - 
2025-12-22 23:08:16,244 - main - INFO -      Retrieval:
2025-12-22 23:08:16,245 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:16,245 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:16,245 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:16,245 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:16,245 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:16,245 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:16,245 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:16,246 - main - INFO - 
2025-12-22 23:08:16,246 - main - INFO -      Management:
2025-12-22 23:08:16,246 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:16,246 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:16,246 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:16,246 - main - INFO - 
2025-12-22 23:08:16,246 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:16,247 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:16,247 - main - INFO - 
2025-12-22 23:08:16,247 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:16,247 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:16,248 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:16,248 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:16,248 - main - INFO - 
2025-12-22 23:08:16,248 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:16,248 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:16,249 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:16,249 - main - INFO - 
2025-12-22 23:08:16,250 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:16,251 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:16,252 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:16,253 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:16,253 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:16,253 - main - INFO - 
2025-12-22 23:08:16,254 - main - INFO - ================================================================================
2025-12-22 23:08:16,254 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:16,254 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:16,254 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:16,255 - main - INFO - ================================================================================
2025-12-22 23:08:16,255 - main - INFO - 
2025-12-22 23:08:16,256 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:29,955 - main - INFO - 
2025-12-22 23:08:29,955 - main - INFO - ================================================================================
2025-12-22 23:08:29,955 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:29,956 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:29,957 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:29,958 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:29,958 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:29,959 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:29,960 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:29,960 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:29,961 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:29,961 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:29,962 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:29,963 - main - INFO - ================================================================================
2025-12-22 23:08:29,963 - main - INFO - 
2025-12-22 23:08:34,123 - main - INFO - 
2025-12-22 23:08:34,123 - main - INFO - ================================================================================
2025-12-22 23:08:34,123 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:34,123 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:34,124 - main - INFO - ================================================================================
2025-12-22 23:08:34,124 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:34,124 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:34,124 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:34,124 - main - INFO - ================================================================================
2025-12-22 23:08:34,125 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:34,125 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:34,125 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:34,146 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:34,157 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:34,158 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:34,158 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:34,158 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:34,159 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:34,169 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:34,173 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:34,175 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:34,177 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:34,177 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:34,178 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:34,203 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:34,204 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:34,205 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:34,212 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:34,215 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:34,215 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:34,215 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:34,216 - main - INFO - 
2025-12-22 23:08:34,216 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:34,216 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:34,216 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:34,217 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:34,217 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:34,217 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:34,217 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:34,218 - main - INFO - 
2025-12-22 23:08:34,218 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:34,218 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:34,218 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:34,219 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:34,219 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:34,219 - main - INFO - 
2025-12-22 23:08:34,219 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:34,220 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:34,220 - main - INFO -        - No manual section generation
2025-12-22 23:08:34,221 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:34,221 - main - INFO - 
2025-12-22 23:08:34,222 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:34,222 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:34,223 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:34,223 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:34,223 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:34,223 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:34,223 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:34,224 - main - INFO - 
2025-12-22 23:08:34,224 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:34,224 - main - INFO -      Main:
2025-12-22 23:08:34,224 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:34,224 - main - INFO - 
2025-12-22 23:08:34,225 - main - INFO -      Retrieval:
2025-12-22 23:08:34,225 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:34,225 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:34,225 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:34,225 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:34,226 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:34,226 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:34,226 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:34,226 - main - INFO - 
2025-12-22 23:08:34,226 - main - INFO -      Management:
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:34,227 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:34,227 - main - INFO - 
2025-12-22 23:08:34,227 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:34,227 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:34,228 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:34,228 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:34,228 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:34,228 - main - INFO - 
2025-12-22 23:08:34,228 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:34,229 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:34,229 - main - INFO - 
2025-12-22 23:08:34,229 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:34,229 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:34,230 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:34,231 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:34,231 - main - INFO - 
2025-12-22 23:08:34,231 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:34,231 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:34,231 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:34,231 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:34,231 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:34,232 - main - INFO - 
2025-12-22 23:08:34,232 - main - INFO - ================================================================================
2025-12-22 23:08:34,232 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:34,232 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:34,232 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:34,232 - main - INFO - ================================================================================
2025-12-22 23:08:34,233 - main - INFO - 
2025-12-22 23:08:34,233 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:41,605 - main - INFO - 
2025-12-22 23:08:41,606 - main - INFO - ================================================================================
2025-12-22 23:08:41,606 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:41,607 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:41,607 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:41,608 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:41,609 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:41,610 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:41,612 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:41,614 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:41,616 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:41,617 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:41,620 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:41,624 - main - INFO - ================================================================================
2025-12-22 23:08:41,625 - main - INFO - 
2025-12-22 23:08:45,907 - main - INFO - 
2025-12-22 23:08:45,907 - main - INFO - ================================================================================
2025-12-22 23:08:45,908 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:08:45,908 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:08:45,908 - main - INFO - ================================================================================
2025-12-22 23:08:45,908 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:08:45,908 - main - INFO -   Upload Directory: uploads
2025-12-22 23:08:45,909 - main - INFO -   Max File Size: 20MB
2025-12-22 23:08:45,909 - main - INFO - ================================================================================
2025-12-22 23:08:45,909 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:08:45,909 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:08:45,910 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:45,953 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:08:45,960 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:08:45,960 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:08:45,960 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:08:45,960 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:08:45,961 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:08:45,982 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:08:45,983 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:08:45,986 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:08:45,988 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:08:45,988 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:08:45,989 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:08:45,996 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:08:45,996 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:08:45,997 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:08:46,008 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:08:46,010 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:08:46,011 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:08:46,011 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:08:46,011 - main - INFO - 
2025-12-22 23:08:46,012 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:08:46,012 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:08:46,012 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:08:46,012 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:08:46,012 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:08:46,012 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:08:46,013 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:08:46,013 - main - INFO - 
2025-12-22 23:08:46,013 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:08:46,013 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:08:46,014 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:08:46,014 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:08:46,014 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:08:46,014 - main - INFO - 
2025-12-22 23:08:46,014 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:08:46,014 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:08:46,015 - main - INFO -        - No manual section generation
2025-12-22 23:08:46,015 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:08:46,015 - main - INFO - 
2025-12-22 23:08:46,015 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:08:46,015 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:08:46,015 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:08:46,016 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:08:46,016 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:08:46,016 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:08:46,016 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:08:46,017 - main - INFO - 
2025-12-22 23:08:46,018 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:08:46,018 - main - INFO -      Main:
2025-12-22 23:08:46,019 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:08:46,019 - main - INFO - 
2025-12-22 23:08:46,020 - main - INFO -      Retrieval:
2025-12-22 23:08:46,020 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:08:46,020 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:08:46,020 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:08:46,020 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:08:46,021 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:08:46,021 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:08:46,021 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:08:46,022 - main - INFO - 
2025-12-22 23:08:46,022 - main - INFO -      Management:
2025-12-22 23:08:46,022 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:08:46,022 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:08:46,022 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:08:46,023 - main - INFO - 
2025-12-22 23:08:46,023 - main - INFO -      Documents (MongoDB):
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:08:46,023 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:08:46,024 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:08:46,024 - main - INFO - 
2025-12-22 23:08:46,024 - main - INFO -      Diagnostics & Health:
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:08:46,024 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:08:46,025 - main - INFO - 
2025-12-22 23:08:46,025 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:08:46,025 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:08:46,026 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:08:46,026 - main - INFO - 
2025-12-22 23:08:46,027 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:08:46,027 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:08:46,027 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:08:46,027 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:08:46,027 - main - INFO -      4. No re-upload needed!
2025-12-22 23:08:46,027 - main - INFO - 
2025-12-22 23:08:46,028 - main - INFO - ================================================================================
2025-12-22 23:08:46,028 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:08:46,028 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:08:46,028 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:08:46,028 - main - INFO - ================================================================================
2025-12-22 23:08:46,028 - main - INFO - 
2025-12-22 23:08:46,029 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:08:57,197 - main - INFO - 
2025-12-22 23:08:57,198 - main - INFO - ================================================================================
2025-12-22 23:08:57,198 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:08:57,199 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:57,199 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:08:57,200 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:08:57,201 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:08:57,202 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:08:57,203 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:08:57,204 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:08:57,204 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:08:57,205 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:08:57,205 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:08:57,205 - main - INFO - ================================================================================
2025-12-22 23:08:57,206 - main - INFO - 
2025-12-22 23:09:01,924 - main - INFO - 
2025-12-22 23:09:01,924 - main - INFO - ================================================================================
2025-12-22 23:09:01,924 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:01,925 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:01,925 - main - INFO - ================================================================================
2025-12-22 23:09:01,925 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:01,925 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:01,925 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:01,925 - main - INFO - ================================================================================
2025-12-22 23:09:01,926 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:01,926 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:01,926 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:01,948 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:01,958 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:01,958 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:01,959 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:01,970 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:01,973 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:01,974 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:01,976 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:01,976 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:01,977 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:02,010 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:02,010 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:02,010 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:02,020 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:02,025 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:02,026 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:02,026 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:02,026 - main - INFO - 
2025-12-22 23:09:02,026 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:02,027 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:02,027 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:02,027 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:02,027 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:02,027 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:02,027 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:02,028 - main - INFO - 
2025-12-22 23:09:02,028 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:02,028 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:02,028 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:02,028 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:02,029 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:02,029 - main - INFO - 
2025-12-22 23:09:02,029 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:02,029 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:02,029 - main - INFO -        - No manual section generation
2025-12-22 23:09:02,029 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:02,030 - main - INFO - 
2025-12-22 23:09:02,030 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:02,030 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:02,030 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:02,030 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:02,030 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:02,030 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:02,031 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:02,031 - main - INFO - 
2025-12-22 23:09:02,031 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:02,031 - main - INFO -      Main:
2025-12-22 23:09:02,031 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:02,031 - main - INFO - 
2025-12-22 23:09:02,031 - main - INFO -      Retrieval:
2025-12-22 23:09:02,032 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:02,032 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:02,032 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:02,032 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:02,032 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:02,033 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:02,033 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:02,033 - main - INFO - 
2025-12-22 23:09:02,034 - main - INFO -      Management:
2025-12-22 23:09:02,035 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:02,036 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:02,036 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:02,037 - main - INFO - 
2025-12-22 23:09:02,037 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:02,038 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:02,039 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:02,039 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:02,039 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:02,039 - main - INFO - 
2025-12-22 23:09:02,039 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:02,040 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:02,040 - main - INFO - 
2025-12-22 23:09:02,040 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:02,041 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:02,042 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:02,042 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:02,042 - main - INFO - 
2025-12-22 23:09:02,042 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:02,042 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:02,043 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:02,043 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:02,043 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:02,043 - main - INFO - 
2025-12-22 23:09:02,043 - main - INFO - ================================================================================
2025-12-22 23:09:02,044 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:02,044 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:02,044 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:02,044 - main - INFO - ================================================================================
2025-12-22 23:09:02,044 - main - INFO - 
2025-12-22 23:09:02,045 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:09:14,187 - main - INFO - 
2025-12-22 23:09:14,187 - main - INFO - ================================================================================
2025-12-22 23:09:14,187 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:09:14,188 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:14,188 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:09:14,189 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:14,190 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:09:14,190 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:09:14,191 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:09:14,192 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:09:14,192 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:09:14,193 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:09:14,193 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:09:14,193 - main - INFO - ================================================================================
2025-12-22 23:09:14,193 - main - INFO - 
2025-12-22 23:09:17,790 - main - INFO - 
2025-12-22 23:09:17,791 - main - INFO - ================================================================================
2025-12-22 23:09:17,791 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:17,791 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:17,791 - main - INFO - ================================================================================
2025-12-22 23:09:17,792 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:17,792 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:17,792 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:17,792 - main - INFO - ================================================================================
2025-12-22 23:09:17,793 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:17,793 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:17,793 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:17,842 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:17,847 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:17,847 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:17,847 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:17,874 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:17,875 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:17,878 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:17,880 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:17,881 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:17,881 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:17,892 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:17,892 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:17,892 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:17,921 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:17,925 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:17,925 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:17,925 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:17,925 - main - INFO - 
2025-12-22 23:09:17,926 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:17,926 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:17,926 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:17,926 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:17,926 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:17,927 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:17,927 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:17,927 - main - INFO - 
2025-12-22 23:09:17,927 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:17,927 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:17,928 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:17,928 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:17,928 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:17,928 - main - INFO - 
2025-12-22 23:09:17,928 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:17,928 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:17,928 - main - INFO -        - No manual section generation
2025-12-22 23:09:17,929 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:17,929 - main - INFO - 
2025-12-22 23:09:17,929 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:17,929 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:17,929 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:17,929 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:17,929 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:17,930 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:17,930 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:17,930 - main - INFO - 
2025-12-22 23:09:17,930 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:17,930 - main - INFO -      Main:
2025-12-22 23:09:17,930 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:17,930 - main - INFO - 
2025-12-22 23:09:17,931 - main - INFO -      Retrieval:
2025-12-22 23:09:17,931 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:17,931 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:17,931 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:17,931 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:17,931 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:17,932 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:17,932 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:17,932 - main - INFO - 
2025-12-22 23:09:17,932 - main - INFO -      Management:
2025-12-22 23:09:17,932 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:17,932 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:17,933 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:17,933 - main - INFO - 
2025-12-22 23:09:17,933 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:17,934 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:17,935 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:17,936 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:17,936 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:17,937 - main - INFO - 
2025-12-22 23:09:17,937 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:17,938 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:17,939 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:17,939 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:17,939 - main - INFO - 
2025-12-22 23:09:17,940 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:17,940 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:17,941 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:17,941 - main - INFO - 
2025-12-22 23:09:17,942 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:17,942 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:17,942 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:17,942 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:17,943 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:17,943 - main - INFO - 
2025-12-22 23:09:17,943 - main - INFO - ================================================================================
2025-12-22 23:09:17,943 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:17,944 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:17,944 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:17,944 - main - INFO - ================================================================================
2025-12-22 23:09:17,944 - main - INFO - 
2025-12-22 23:09:17,945 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-22 23:09:40,679 - main - INFO - 
2025-12-22 23:09:40,679 - main - INFO - ================================================================================
2025-12-22 23:09:40,680 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-22 23:09:40,681 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:40,681 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-22 23:09:40,682 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-22 23:09:40,683 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-22 23:09:40,684 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-22 23:09:40,684 - main - INFO -   âœ… User Documents Service connection closed
2025-12-22 23:09:40,685 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-22 23:09:40,686 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-22 23:09:40,686 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-22 23:09:40,687 - main - INFO -   âœ… Application stopped successfully
2025-12-22 23:09:40,687 - main - INFO - ================================================================================
2025-12-22 23:09:40,687 - main - INFO - 
2025-12-22 23:09:43,688 - main - INFO - 
2025-12-22 23:09:43,689 - main - INFO - ================================================================================
2025-12-22 23:09:43,689 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-22 23:09:43,689 - main - INFO -   Production-Ready Complete Integration
2025-12-22 23:09:43,689 - main - INFO - ================================================================================
2025-12-22 23:09:43,690 - main - INFO -   AI Model: gpt-4o-mini
2025-12-22 23:09:43,690 - main - INFO -   Upload Directory: uploads
2025-12-22 23:09:43,690 - main - INFO -   Max File Size: 20MB
2025-12-22 23:09:43,690 - main - INFO - ================================================================================
2025-12-22 23:09:43,691 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-22 23:09:43,691 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-22 23:09:43,691 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:43,708 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-22 23:09:43,714 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-22 23:09:43,714 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-22 23:09:43,714 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-22 23:09:43,715 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-22 23:09:43,715 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-22 23:09:43,723 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-22 23:09:43,725 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-22 23:09:43,726 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-22 23:09:43,729 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-22 23:09:43,730 - main - INFO -   âœ… User Subscription Service connected
2025-12-22 23:09:43,731 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-22 23:09:43,731 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-22 23:09:43,732 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-22 23:09:43,755 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-22 23:09:43,756 - main - INFO -   âœ… User Documents Service connected
2025-12-22 23:09:43,756 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-22 23:09:43,783 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-22 23:09:43,788 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-22 23:09:43,788 - main - INFO -   âœ… Hakim Score Service connected
2025-12-22 23:09:43,789 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-22 23:09:43,789 - main - INFO - 
2025-12-22 23:09:43,789 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-22 23:09:43,789 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-22 23:09:43,790 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-22 23:09:43,790 - main - INFO -        - Separates warranties from extensions
2025-12-22 23:09:43,790 - main - INFO -        - Extracts subjectivities & operational details
2025-12-22 23:09:43,791 - main - INFO -        - Correct deductible tier detection
2025-12-22 23:09:43,791 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-22 23:09:43,791 - main - INFO - 
2025-12-22 23:09:43,791 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-22 23:09:43,792 - main - INFO -        - Generates ALL sections comprehensively
2025-12-22 23:09:43,792 - main - INFO -        - Identifies unique items per provider
2025-12-22 23:09:43,792 - main - INFO -        - Transparent scoring methodology
2025-12-22 23:09:43,793 - main - INFO -        - Uses full _extended_data from parser
2025-12-22 23:09:43,793 - main - INFO - 
2025-12-22 23:09:43,793 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-22 23:09:43,793 - main - INFO -        - Single endpoint auto-populates everything
2025-12-22 23:09:43,794 - main - INFO -        - No manual section generation
2025-12-22 23:09:43,794 - main - INFO -        - Complete MongoDB integration
2025-12-22 23:09:43,794 - main - INFO - 
2025-12-22 23:09:43,794 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-22 23:09:43,794 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-22 23:09:43,795 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-22 23:09:43,795 - main - INFO -      âœ… Subjectivities: Now included
2025-12-22 23:09:43,795 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-22 23:09:43,795 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-22 23:09:43,795 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-22 23:09:43,796 - main - INFO - 
2025-12-22 23:09:43,796 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-22 23:09:43,796 - main - INFO -      Main:
2025-12-22 23:09:43,796 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-22 23:09:43,796 - main - INFO - 
2025-12-22 23:09:43,797 - main - INFO -      Retrieval:
2025-12-22 23:09:43,797 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-22 23:09:43,797 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-22 23:09:43,797 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-22 23:09:43,797 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-22 23:09:43,798 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-22 23:09:43,798 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-22 23:09:43,798 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-22 23:09:43,798 - main - INFO - 
2025-12-22 23:09:43,798 - main - INFO -      Management:
2025-12-22 23:09:43,799 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-22 23:09:43,799 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-22 23:09:43,799 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-22 23:09:43,799 - main - INFO - 
2025-12-22 23:09:43,800 - main - INFO -      Documents (MongoDB):
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents                All documents
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-22 23:09:43,800 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-22 23:09:43,800 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-22 23:09:43,801 - main - INFO - 
2025-12-22 23:09:43,801 - main - INFO -      Diagnostics & Health:
2025-12-22 23:09:43,801 - main - INFO -        GET  /api/health                   System health
2025-12-22 23:09:43,801 - main - INFO -        GET  /api/status                   Detailed status
2025-12-22 23:09:43,802 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-22 23:09:43,802 - main - INFO - 
2025-12-22 23:09:43,802 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-22 23:09:43,803 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-22 23:09:43,804 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-22 23:09:43,804 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-22 23:09:43,804 - main - INFO - 
2025-12-22 23:09:43,804 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-22 23:09:43,804 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-22 23:09:43,804 - main - INFO -      2. Receive comparison_id + complete data
2025-12-22 23:09:43,805 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-22 23:09:43,805 - main - INFO -      4. No re-upload needed!
2025-12-22 23:09:43,805 - main - INFO - 
2025-12-22 23:09:43,805 - main - INFO - ================================================================================
2025-12-22 23:09:43,805 - main - INFO -   âœ… Application started successfully!
2025-12-22 23:09:43,805 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-22 23:09:43,806 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-22 23:09:43,806 - main - INFO - ================================================================================
2025-12-22 23:09:43,806 - main - INFO - 
2025-12-22 23:09:43,807 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 01:16:57,623 - main - INFO - ğŸ“¥ OPTIONS /api/scheduler/run
2025-12-23 01:16:57,626 - main - INFO - ğŸ“¤ OPTIONS /api/scheduler/run - 400 - 0.00s
2025-12-23 18:50:05,947 - main - INFO - 
2025-12-23 18:50:05,947 - main - INFO - ================================================================================
2025-12-23 18:50:05,948 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:50:05,948 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:50:05,948 - main - INFO - ================================================================================
2025-12-23 18:50:05,948 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:50:05,948 - main - INFO -   Upload Directory: uploads
2025-12-23 18:50:05,949 - main - INFO -   Max File Size: 20MB
2025-12-23 18:50:05,949 - main - INFO - ================================================================================
2025-12-23 18:50:05,949 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:50:05,950 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:50:05,950 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:50:06,251 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:50:06,259 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:50:06,259 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:50:06,259 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:50:06,260 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:50:06,260 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:50:06,268 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:50:06,269 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:50:06,271 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:50:06,278 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:50:06,279 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:50:06,279 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:50:06,299 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:50:06,300 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:50:06,300 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:50:06,346 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:50:06,351 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:50:06,352 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:50:06,352 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:50:06,353 - main - INFO - 
2025-12-23 18:50:06,354 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:50:06,354 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:50:06,355 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:50:06,355 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:50:06,356 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:50:06,356 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:50:06,356 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:50:06,357 - main - INFO - 
2025-12-23 18:50:06,357 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:50:06,358 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:50:06,358 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:50:06,359 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:50:06,360 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:50:06,360 - main - INFO - 
2025-12-23 18:50:06,361 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:50:06,361 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:50:06,362 - main - INFO -        - No manual section generation
2025-12-23 18:50:06,362 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:50:06,363 - main - INFO - 
2025-12-23 18:50:06,364 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:50:06,364 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:50:06,364 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:50:06,365 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:50:06,365 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:50:06,366 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:50:06,366 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:50:06,367 - main - INFO - 
2025-12-23 18:50:06,367 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:50:06,367 - main - INFO -      Main:
2025-12-23 18:50:06,368 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:50:06,368 - main - INFO - 
2025-12-23 18:50:06,369 - main - INFO -      Retrieval:
2025-12-23 18:50:06,369 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:50:06,369 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:50:06,370 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:50:06,370 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:50:06,370 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:50:06,371 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:50:06,371 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:50:06,371 - main - INFO - 
2025-12-23 18:50:06,372 - main - INFO -      Management:
2025-12-23 18:50:06,372 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:50:06,372 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:50:06,373 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:50:06,373 - main - INFO - 
2025-12-23 18:50:06,373 - main - INFO -      Documents (MongoDB):
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:50:06,374 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:50:06,374 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:50:06,375 - main - INFO - 
2025-12-23 18:50:06,375 - main - INFO -      Diagnostics & Health:
2025-12-23 18:50:06,375 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:50:06,376 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:50:06,376 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:50:06,376 - main - INFO - 
2025-12-23 18:50:06,377 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:50:06,377 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:50:06,378 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:50:06,379 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:50:06,379 - main - INFO - 
2025-12-23 18:50:06,379 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:50:06,380 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:50:06,380 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:50:06,380 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:50:06,380 - main - INFO -      4. No re-upload needed!
2025-12-23 18:50:06,381 - main - INFO - 
2025-12-23 18:50:06,381 - main - INFO - ================================================================================
2025-12-23 18:50:06,381 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:50:06,381 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:50:06,382 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:50:06,382 - main - INFO - ================================================================================
2025-12-23 18:50:06,382 - main - INFO - 
2025-12-23 18:50:06,382 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:54:09,659 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 18:54:09,660 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 18:54:09,661 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:54:09,663 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:54:09,665 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:54:09,673 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 1 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:54:09,674 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:54:09,677 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:54:09,680 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 1 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:54:09,681 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 18:56:09,100 - main - INFO - 
2025-12-23 18:56:09,101 - main - INFO - ================================================================================
2025-12-23 18:56:09,101 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:56:09,103 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:09,104 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:56:09,106 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:09,107 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:56:09,109 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:56:09,109 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:56:09,111 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:56:09,111 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:56:09,112 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:56:09,113 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:56:09,113 - main - INFO - ================================================================================
2025-12-23 18:56:09,114 - main - INFO - 
2025-12-23 18:56:12,628 - main - INFO - 
2025-12-23 18:56:12,628 - main - INFO - ================================================================================
2025-12-23 18:56:12,628 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:56:12,629 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:56:12,629 - main - INFO - ================================================================================
2025-12-23 18:56:12,629 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:56:12,629 - main - INFO -   Upload Directory: uploads
2025-12-23 18:56:12,629 - main - INFO -   Max File Size: 20MB
2025-12-23 18:56:12,630 - main - INFO - ================================================================================
2025-12-23 18:56:12,630 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:56:12,630 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:56:12,631 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:12,664 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:56:12,669 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:56:12,669 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:56:12,669 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:56:12,670 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:56:12,670 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:56:12,697 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:56:12,698 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:56:12,700 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:56:12,702 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:56:12,702 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:56:12,703 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:56:12,703 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:12,704 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:56:12,715 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:56:12,715 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:56:12,715 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:56:12,745 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:56:12,750 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:56:12,750 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:56:12,750 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:56:12,751 - main - INFO - 
2025-12-23 18:56:12,751 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:56:12,751 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:56:12,752 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:56:12,752 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:56:12,752 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:56:12,753 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:56:12,753 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:56:12,753 - main - INFO - 
2025-12-23 18:56:12,754 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:56:12,755 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:56:12,755 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:56:12,756 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:56:12,756 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:56:12,757 - main - INFO - 
2025-12-23 18:56:12,757 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:56:12,758 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:56:12,758 - main - INFO -        - No manual section generation
2025-12-23 18:56:12,759 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:56:12,759 - main - INFO - 
2025-12-23 18:56:12,759 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:56:12,760 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:56:12,760 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:56:12,760 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:56:12,761 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:56:12,761 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:56:12,761 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:56:12,762 - main - INFO - 
2025-12-23 18:56:12,762 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:56:12,762 - main - INFO -      Main:
2025-12-23 18:56:12,762 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:56:12,763 - main - INFO - 
2025-12-23 18:56:12,763 - main - INFO -      Retrieval:
2025-12-23 18:56:12,763 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:56:12,763 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:56:12,763 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:56:12,764 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:56:12,764 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:56:12,764 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:56:12,764 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:56:12,765 - main - INFO - 
2025-12-23 18:56:12,765 - main - INFO -      Management:
2025-12-23 18:56:12,765 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:56:12,765 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:56:12,766 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:56:12,766 - main - INFO - 
2025-12-23 18:56:12,766 - main - INFO -      Documents (MongoDB):
2025-12-23 18:56:12,766 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:56:12,766 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:56:12,767 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:56:12,767 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:56:12,767 - main - INFO - 
2025-12-23 18:56:12,767 - main - INFO -      Diagnostics & Health:
2025-12-23 18:56:12,767 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:56:12,768 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:56:12,768 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:56:12,768 - main - INFO - 
2025-12-23 18:56:12,768 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:56:12,769 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:56:12,770 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:56:12,771 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:56:12,772 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:56:12,773 - main - INFO - 
2025-12-23 18:56:12,773 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:56:12,773 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:56:12,774 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:56:12,774 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:56:12,774 - main - INFO -      4. No re-upload needed!
2025-12-23 18:56:12,774 - main - INFO - 
2025-12-23 18:56:12,774 - main - INFO - ================================================================================
2025-12-23 18:56:12,775 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:56:12,775 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:56:12,776 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:56:12,776 - main - INFO - ================================================================================
2025-12-23 18:56:12,776 - main - INFO - 
2025-12-23 18:56:12,776 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:56:44,177 - main - INFO - 
2025-12-23 18:56:44,177 - main - INFO - ================================================================================
2025-12-23 18:56:44,178 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:56:44,179 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:44,179 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:56:44,180 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:56:44,180 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:56:44,181 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:56:44,181 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:56:44,182 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:56:44,182 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:56:44,183 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:56:44,183 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:56:44,183 - main - INFO - ================================================================================
2025-12-23 18:56:44,183 - main - INFO - 
2025-12-23 18:56:47,335 - main - INFO - 
2025-12-23 18:56:47,335 - main - INFO - ================================================================================
2025-12-23 18:56:47,336 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:56:47,336 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:56:47,336 - main - INFO - ================================================================================
2025-12-23 18:56:47,336 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:56:47,337 - main - INFO -   Upload Directory: uploads
2025-12-23 18:56:47,337 - main - INFO -   Max File Size: 20MB
2025-12-23 18:56:47,337 - main - INFO - ================================================================================
2025-12-23 18:56:47,338 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:56:47,338 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:56:47,338 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:47,357 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:56:47,363 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:56:47,363 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:56:47,364 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:56:47,372 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:56:47,373 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:56:47,374 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:56:47,376 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:56:47,376 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:56:47,376 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:56:47,377 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:56:47,377 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:56:47,383 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:56:47,383 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:56:47,383 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:56:47,421 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:56:47,424 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:56:47,424 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:56:47,424 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:56:47,424 - main - INFO - 
2025-12-23 18:56:47,425 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:56:47,425 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:56:47,425 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:56:47,425 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:56:47,426 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:56:47,426 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:56:47,426 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:56:47,426 - main - INFO - 
2025-12-23 18:56:47,427 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:56:47,427 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:56:47,427 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:56:47,427 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:56:47,427 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:56:47,428 - main - INFO - 
2025-12-23 18:56:47,428 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:56:47,428 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:56:47,428 - main - INFO -        - No manual section generation
2025-12-23 18:56:47,428 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:56:47,429 - main - INFO - 
2025-12-23 18:56:47,429 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:56:47,429 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:56:47,429 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:56:47,429 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:56:47,430 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:56:47,430 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:56:47,430 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:56:47,430 - main - INFO - 
2025-12-23 18:56:47,430 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:56:47,430 - main - INFO -      Main:
2025-12-23 18:56:47,431 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:56:47,431 - main - INFO - 
2025-12-23 18:56:47,431 - main - INFO -      Retrieval:
2025-12-23 18:56:47,431 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:56:47,431 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:56:47,431 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:56:47,432 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:56:47,432 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:56:47,432 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:56:47,432 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:56:47,432 - main - INFO - 
2025-12-23 18:56:47,432 - main - INFO -      Management:
2025-12-23 18:56:47,432 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:56:47,433 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:56:47,433 - main - INFO - 
2025-12-23 18:56:47,433 - main - INFO -      Documents (MongoDB):
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:56:47,433 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:56:47,434 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:56:47,434 - main - INFO - 
2025-12-23 18:56:47,434 - main - INFO -      Diagnostics & Health:
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:56:47,434 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:56:47,434 - main - INFO - 
2025-12-23 18:56:47,435 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:56:47,435 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:56:47,436 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:56:47,436 - main - INFO - 
2025-12-23 18:56:47,436 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:56:47,436 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:56:47,437 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:56:47,437 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:56:47,437 - main - INFO -      4. No re-upload needed!
2025-12-23 18:56:47,437 - main - INFO - 
2025-12-23 18:56:47,437 - main - INFO - ================================================================================
2025-12-23 18:56:47,437 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:56:47,437 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:56:47,438 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:56:47,438 - main - INFO - ================================================================================
2025-12-23 18:56:47,438 - main - INFO - 
2025-12-23 18:56:47,438 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:56:59,958 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:56:59,965 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:56:59,968 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:56:59,975 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 18:56:59,984 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 18:56:59,988 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.01s
2025-12-23 18:58:18,249 - main - INFO - 
2025-12-23 18:58:18,249 - main - INFO - ================================================================================
2025-12-23 18:58:18,250 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:58:18,250 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:18,251 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:58:18,252 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:18,252 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:58:18,253 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:58:18,254 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:58:18,255 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:58:18,255 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:58:18,255 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:58:18,256 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:58:18,256 - main - INFO - ================================================================================
2025-12-23 18:58:18,256 - main - INFO - 
2025-12-23 18:58:22,462 - main - INFO - 
2025-12-23 18:58:22,462 - main - INFO - ================================================================================
2025-12-23 18:58:22,462 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:22,462 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:22,463 - main - INFO - ================================================================================
2025-12-23 18:58:22,463 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:22,463 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:22,463 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:22,463 - main - INFO - ================================================================================
2025-12-23 18:58:22,464 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:22,464 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:22,465 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:22,494 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:22,500 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:22,500 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:22,500 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:22,501 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:22,501 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:22,515 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:22,517 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:22,518 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:22,520 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:22,521 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:22,523 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:22,524 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:22,524 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:22,554 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:22,555 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:22,556 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:22,567 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:22,574 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:22,575 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:22,575 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:22,575 - main - INFO - 
2025-12-23 18:58:22,576 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:22,576 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:22,576 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:22,577 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:22,577 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:22,577 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:22,578 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:22,578 - main - INFO - 
2025-12-23 18:58:22,578 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:22,578 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:22,579 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:22,579 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:22,579 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:22,579 - main - INFO - 
2025-12-23 18:58:22,580 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:22,580 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:22,580 - main - INFO -        - No manual section generation
2025-12-23 18:58:22,581 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:22,581 - main - INFO - 
2025-12-23 18:58:22,581 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:22,582 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:22,582 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:22,583 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:22,583 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:22,583 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:22,583 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:22,584 - main - INFO - 
2025-12-23 18:58:22,584 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:22,584 - main - INFO -      Main:
2025-12-23 18:58:22,585 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:22,585 - main - INFO - 
2025-12-23 18:58:22,585 - main - INFO -      Retrieval:
2025-12-23 18:58:22,586 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:22,586 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:22,587 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:22,587 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:22,588 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:22,589 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:22,589 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:22,590 - main - INFO - 
2025-12-23 18:58:22,590 - main - INFO -      Management:
2025-12-23 18:58:22,590 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:22,591 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:22,592 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:22,593 - main - INFO - 
2025-12-23 18:58:22,593 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:22,593 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:22,593 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:22,594 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:22,594 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:22,594 - main - INFO - 
2025-12-23 18:58:22,594 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:22,595 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:22,595 - main - INFO - 
2025-12-23 18:58:22,596 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:22,596 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:22,597 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:22,597 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:22,598 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:22,599 - main - INFO - 
2025-12-23 18:58:22,599 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:22,599 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:22,600 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:22,600 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:22,600 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:22,600 - main - INFO - 
2025-12-23 18:58:22,601 - main - INFO - ================================================================================
2025-12-23 18:58:22,601 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:22,601 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:22,602 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:22,602 - main - INFO - ================================================================================
2025-12-23 18:58:22,602 - main - INFO - 
2025-12-23 18:58:22,602 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:26,640 - main - INFO - 
2025-12-23 18:58:26,641 - main - INFO - ================================================================================
2025-12-23 18:58:26,641 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:26,641 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:26,641 - main - INFO - ================================================================================
2025-12-23 18:58:26,642 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:26,642 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:26,642 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:26,642 - main - INFO - ================================================================================
2025-12-23 18:58:26,643 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:26,643 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:26,643 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:26,660 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:26,663 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:26,664 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:26,664 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:26,701 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:26,702 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:26,703 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:26,705 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:26,705 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:26,705 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:26,706 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:26,706 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:26,737 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:26,737 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:26,738 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:26,765 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:26,768 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:26,768 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:26,768 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:26,769 - main - INFO - 
2025-12-23 18:58:26,769 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:26,769 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:26,769 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:26,769 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:26,770 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:26,770 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:26,770 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:26,770 - main - INFO - 
2025-12-23 18:58:26,770 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:26,770 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:26,771 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:26,771 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:26,771 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:26,771 - main - INFO - 
2025-12-23 18:58:26,771 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:26,771 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:26,771 - main - INFO -        - No manual section generation
2025-12-23 18:58:26,772 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:26,772 - main - INFO - 
2025-12-23 18:58:26,772 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:26,772 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:26,772 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:26,772 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:26,772 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:26,773 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:26,773 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:26,773 - main - INFO - 
2025-12-23 18:58:26,773 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:26,773 - main - INFO -      Main:
2025-12-23 18:58:26,773 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:26,773 - main - INFO - 
2025-12-23 18:58:26,774 - main - INFO -      Retrieval:
2025-12-23 18:58:26,774 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:26,774 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:26,774 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:26,774 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:26,774 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:26,775 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:26,775 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:26,775 - main - INFO - 
2025-12-23 18:58:26,775 - main - INFO -      Management:
2025-12-23 18:58:26,775 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:26,775 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:26,775 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:26,776 - main - INFO - 
2025-12-23 18:58:26,776 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:26,776 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:26,776 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:26,777 - main - INFO - 
2025-12-23 18:58:26,777 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:26,777 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:26,777 - main - INFO - 
2025-12-23 18:58:26,778 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:26,778 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:26,779 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:26,779 - main - INFO - 
2025-12-23 18:58:26,779 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:26,779 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:26,779 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:26,780 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:26,780 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:26,780 - main - INFO - 
2025-12-23 18:58:26,780 - main - INFO - ================================================================================
2025-12-23 18:58:26,780 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:26,780 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:26,781 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:26,781 - main - INFO - ================================================================================
2025-12-23 18:58:26,781 - main - INFO - 
2025-12-23 18:58:26,781 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:29,815 - main - INFO - 
2025-12-23 18:58:29,815 - main - INFO - ================================================================================
2025-12-23 18:58:29,816 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:29,816 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:29,816 - main - INFO - ================================================================================
2025-12-23 18:58:29,817 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:29,817 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:29,818 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:29,818 - main - INFO - ================================================================================
2025-12-23 18:58:29,819 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:29,821 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:29,822 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:29,863 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:29,871 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:29,871 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:29,871 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:29,872 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:29,872 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:29,883 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:29,884 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:29,886 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:29,893 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:29,894 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:29,894 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:29,895 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:29,895 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:29,906 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:29,907 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:29,907 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:29,917 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:29,922 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:29,923 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:29,924 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:29,924 - main - INFO - 
2025-12-23 18:58:29,925 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:29,926 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:29,926 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:29,926 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:29,927 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:29,927 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:29,927 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:29,927 - main - INFO - 
2025-12-23 18:58:29,927 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:29,928 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:29,928 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:29,928 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:29,928 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:29,929 - main - INFO - 
2025-12-23 18:58:29,929 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:29,929 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:29,929 - main - INFO -        - No manual section generation
2025-12-23 18:58:29,930 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:29,930 - main - INFO - 
2025-12-23 18:58:29,930 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:29,930 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:29,931 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:29,931 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:29,931 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:29,931 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:29,932 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:29,932 - main - INFO - 
2025-12-23 18:58:29,932 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:29,934 - main - INFO -      Main:
2025-12-23 18:58:29,935 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:29,935 - main - INFO - 
2025-12-23 18:58:29,943 - main - INFO -      Retrieval:
2025-12-23 18:58:29,946 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:29,958 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:29,964 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:29,964 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:29,965 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:29,965 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:29,965 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:29,965 - main - INFO - 
2025-12-23 18:58:29,965 - main - INFO -      Management:
2025-12-23 18:58:29,966 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:29,966 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:29,966 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:29,966 - main - INFO - 
2025-12-23 18:58:29,966 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:29,967 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:29,967 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:29,967 - main - INFO - 
2025-12-23 18:58:29,968 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:29,968 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:29,968 - main - INFO - 
2025-12-23 18:58:29,968 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:29,969 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:29,970 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:29,970 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:29,971 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:29,972 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:29,973 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:29,974 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:29,974 - main - INFO - 
2025-12-23 18:58:29,976 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:29,976 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:29,976 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:29,977 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:29,977 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:29,977 - main - INFO - 
2025-12-23 18:58:29,977 - main - INFO - ================================================================================
2025-12-23 18:58:29,977 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:29,978 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:29,978 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:29,978 - main - INFO - ================================================================================
2025-12-23 18:58:29,978 - main - INFO - 
2025-12-23 18:58:29,979 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:35,609 - main - INFO - 
2025-12-23 18:58:35,609 - main - INFO - ================================================================================
2025-12-23 18:58:35,609 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:35,610 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:35,610 - main - INFO - ================================================================================
2025-12-23 18:58:35,610 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:35,610 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:35,610 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:35,610 - main - INFO - ================================================================================
2025-12-23 18:58:35,611 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:35,611 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:35,611 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:35,634 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:35,644 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:35,644 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:35,644 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:35,645 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:35,645 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:35,652 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:35,656 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:35,659 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:35,661 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:35,662 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:35,662 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:35,668 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:35,669 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:35,669 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:35,680 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:35,682 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:35,682 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:35,683 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:35,683 - main - INFO - 
2025-12-23 18:58:35,683 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:35,683 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:35,683 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:35,683 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:35,683 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:35,684 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:35,684 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:35,684 - main - INFO - 
2025-12-23 18:58:35,684 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:35,684 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:35,684 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:35,685 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:35,685 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:35,685 - main - INFO - 
2025-12-23 18:58:35,685 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:35,685 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:35,685 - main - INFO -        - No manual section generation
2025-12-23 18:58:35,685 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:35,686 - main - INFO - 
2025-12-23 18:58:35,686 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:35,686 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:35,686 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:35,686 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:35,686 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:35,687 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:35,689 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:35,690 - main - INFO - 
2025-12-23 18:58:35,690 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:35,691 - main - INFO -      Main:
2025-12-23 18:58:35,691 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:35,692 - main - INFO - 
2025-12-23 18:58:35,692 - main - INFO -      Retrieval:
2025-12-23 18:58:35,692 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:35,692 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:35,693 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:35,693 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:35,693 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:35,693 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:35,693 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:35,693 - main - INFO - 
2025-12-23 18:58:35,694 - main - INFO -      Management:
2025-12-23 18:58:35,694 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:35,694 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:35,694 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:35,694 - main - INFO - 
2025-12-23 18:58:35,694 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:35,695 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:35,695 - main - INFO - 
2025-12-23 18:58:35,695 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:35,695 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:35,696 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:35,696 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:35,696 - main - INFO - 
2025-12-23 18:58:35,696 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:35,696 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:35,697 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:35,697 - main - INFO - 
2025-12-23 18:58:35,697 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:35,698 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:35,698 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:35,698 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:35,698 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:35,698 - main - INFO - 
2025-12-23 18:58:35,698 - main - INFO - ================================================================================
2025-12-23 18:58:35,698 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:35,699 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:35,699 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:35,699 - main - INFO - ================================================================================
2025-12-23 18:58:35,699 - main - INFO - 
2025-12-23 18:58:35,699 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:58:50,689 - main - INFO - 
2025-12-23 18:58:50,689 - main - INFO - ================================================================================
2025-12-23 18:58:50,689 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:58:50,690 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:50,691 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:58:50,692 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:58:50,692 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:58:50,693 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:58:50,693 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:58:50,694 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:58:50,695 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:58:50,695 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:58:50,695 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:58:50,696 - main - INFO - ================================================================================
2025-12-23 18:58:50,696 - main - INFO - 
2025-12-23 18:58:54,796 - main - INFO - 
2025-12-23 18:58:54,797 - main - INFO - ================================================================================
2025-12-23 18:58:54,797 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:58:54,797 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:58:54,797 - main - INFO - ================================================================================
2025-12-23 18:58:54,797 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:58:54,798 - main - INFO -   Upload Directory: uploads
2025-12-23 18:58:54,798 - main - INFO -   Max File Size: 20MB
2025-12-23 18:58:54,798 - main - INFO - ================================================================================
2025-12-23 18:58:54,798 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:58:54,799 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:58:54,799 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:54,820 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:58:54,831 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:58:54,831 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:58:54,831 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:58:54,845 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:58:54,847 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:58:54,848 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:58:54,849 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:58:54,849 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:58:54,850 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:58:54,861 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:58:54,861 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:58:54,861 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:58:54,900 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:58:54,904 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:58:54,905 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:58:54,905 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:58:54,906 - main - INFO - 
2025-12-23 18:58:54,906 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:58:54,907 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:58:54,907 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:58:54,908 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:58:54,910 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:58:54,911 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:58:54,912 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:58:54,912 - main - INFO - 
2025-12-23 18:58:54,913 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:58:54,913 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:58:54,913 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:58:54,913 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:58:54,913 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:58:54,914 - main - INFO - 
2025-12-23 18:58:54,914 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:58:54,914 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:58:54,914 - main - INFO -        - No manual section generation
2025-12-23 18:58:54,915 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:58:54,915 - main - INFO - 
2025-12-23 18:58:54,915 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:58:54,915 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:58:54,916 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:58:54,916 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:58:54,916 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:58:54,916 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:58:54,917 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:58:54,917 - main - INFO - 
2025-12-23 18:58:54,917 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:58:54,917 - main - INFO -      Main:
2025-12-23 18:58:54,918 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:58:54,918 - main - INFO - 
2025-12-23 18:58:54,918 - main - INFO -      Retrieval:
2025-12-23 18:58:54,918 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:58:54,918 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:58:54,919 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:58:54,919 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:58:54,919 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:58:54,919 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:58:54,920 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:58:54,920 - main - INFO - 
2025-12-23 18:58:54,920 - main - INFO -      Management:
2025-12-23 18:58:54,920 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:58:54,921 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:58:54,921 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:58:54,921 - main - INFO - 
2025-12-23 18:58:54,921 - main - INFO -      Documents (MongoDB):
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:58:54,922 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:58:54,923 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:58:54,923 - main - INFO - 
2025-12-23 18:58:54,923 - main - INFO -      Diagnostics & Health:
2025-12-23 18:58:54,924 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:58:54,924 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:58:54,925 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:58:54,926 - main - INFO - 
2025-12-23 18:58:54,926 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:58:54,927 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:58:54,927 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:58:54,928 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:58:54,929 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:58:54,929 - main - INFO - 
2025-12-23 18:58:54,929 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:58:54,930 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:58:54,930 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:58:54,930 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:58:54,930 - main - INFO -      4. No re-upload needed!
2025-12-23 18:58:54,931 - main - INFO - 
2025-12-23 18:58:54,931 - main - INFO - ================================================================================
2025-12-23 18:58:54,931 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:58:54,931 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:58:54,932 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:58:54,932 - main - INFO - ================================================================================
2025-12-23 18:58:54,932 - main - INFO - 
2025-12-23 18:58:54,933 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:59:01,209 - main - INFO - 
2025-12-23 18:59:01,209 - main - INFO - ================================================================================
2025-12-23 18:59:01,210 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:59:01,211 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:01,212 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:59:01,213 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:01,213 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:59:01,214 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:59:01,215 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:59:01,216 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:59:01,217 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:59:01,217 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:59:01,218 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:59:01,218 - main - INFO - ================================================================================
2025-12-23 18:59:01,219 - main - INFO - 
2025-12-23 18:59:05,237 - main - INFO - 
2025-12-23 18:59:05,238 - main - INFO - ================================================================================
2025-12-23 18:59:05,238 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:59:05,239 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:59:05,239 - main - INFO - ================================================================================
2025-12-23 18:59:05,241 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:59:05,243 - main - INFO -   Upload Directory: uploads
2025-12-23 18:59:05,244 - main - INFO -   Max File Size: 20MB
2025-12-23 18:59:05,244 - main - INFO - ================================================================================
2025-12-23 18:59:05,244 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:59:05,245 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:59:05,245 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:05,268 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:59:05,278 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:59:05,278 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:59:05,279 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:59:05,288 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:59:05,293 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:59:05,294 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:59:05,297 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:59:05,297 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:59:05,297 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:59:05,297 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:05,298 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:59:05,304 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:59:05,305 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:59:05,305 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:59:05,315 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:59:05,318 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:59:05,318 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:59:05,319 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:59:05,319 - main - INFO - 
2025-12-23 18:59:05,319 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:59:05,319 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:59:05,320 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:59:05,320 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:59:05,320 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:59:05,320 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:59:05,321 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:59:05,321 - main - INFO - 
2025-12-23 18:59:05,321 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:59:05,322 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:59:05,322 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:59:05,323 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:59:05,324 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:59:05,325 - main - INFO - 
2025-12-23 18:59:05,325 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:59:05,326 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:59:05,326 - main - INFO -        - No manual section generation
2025-12-23 18:59:05,327 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:59:05,327 - main - INFO - 
2025-12-23 18:59:05,327 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:59:05,327 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:59:05,328 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:59:05,328 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:59:05,328 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:59:05,328 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:59:05,328 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:59:05,328 - main - INFO - 
2025-12-23 18:59:05,329 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:59:05,329 - main - INFO -      Main:
2025-12-23 18:59:05,329 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:59:05,329 - main - INFO - 
2025-12-23 18:59:05,330 - main - INFO -      Retrieval:
2025-12-23 18:59:05,330 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:59:05,330 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:59:05,330 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:59:05,330 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:59:05,331 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:59:05,331 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:59:05,331 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:59:05,331 - main - INFO - 
2025-12-23 18:59:05,331 - main - INFO -      Management:
2025-12-23 18:59:05,332 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:59:05,332 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:59:05,332 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:59:05,332 - main - INFO - 
2025-12-23 18:59:05,332 - main - INFO -      Documents (MongoDB):
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:59:05,333 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:59:05,333 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:59:05,333 - main - INFO - 
2025-12-23 18:59:05,334 - main - INFO -      Diagnostics & Health:
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:59:05,334 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:59:05,334 - main - INFO - 
2025-12-23 18:59:05,335 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:59:05,335 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:59:05,336 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:59:05,336 - main - INFO - 
2025-12-23 18:59:05,337 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:59:05,338 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:59:05,338 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:59:05,338 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:59:05,339 - main - INFO -      4. No re-upload needed!
2025-12-23 18:59:05,339 - main - INFO - 
2025-12-23 18:59:05,340 - main - INFO - ================================================================================
2025-12-23 18:59:05,341 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:59:05,342 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:59:05,343 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:59:05,344 - main - INFO - ================================================================================
2025-12-23 18:59:05,344 - main - INFO - 
2025-12-23 18:59:05,344 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 18:59:22,579 - main - INFO - 
2025-12-23 18:59:22,580 - main - INFO - ================================================================================
2025-12-23 18:59:22,580 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 18:59:22,581 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:22,581 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 18:59:22,582 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 18:59:22,582 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 18:59:22,583 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 18:59:22,583 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 18:59:22,584 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 18:59:22,585 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 18:59:22,585 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 18:59:22,586 - main - INFO -   âœ… Application stopped successfully
2025-12-23 18:59:22,586 - main - INFO - ================================================================================
2025-12-23 18:59:22,586 - main - INFO - 
2025-12-23 18:59:26,169 - main - INFO - 
2025-12-23 18:59:26,169 - main - INFO - ================================================================================
2025-12-23 18:59:26,170 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 18:59:26,170 - main - INFO -   Production-Ready Complete Integration
2025-12-23 18:59:26,171 - main - INFO - ================================================================================
2025-12-23 18:59:26,171 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 18:59:26,172 - main - INFO -   Upload Directory: uploads
2025-12-23 18:59:26,172 - main - INFO -   Max File Size: 20MB
2025-12-23 18:59:26,173 - main - INFO - ================================================================================
2025-12-23 18:59:26,173 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 18:59:26,174 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 18:59:26,174 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:26,215 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 18:59:26,219 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 18:59:26,219 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 18:59:26,220 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 18:59:26,220 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 18:59:26,221 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 18:59:26,246 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 18:59:26,247 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 18:59:26,248 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 18:59:26,249 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 18:59:26,249 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 18:59:26,250 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 18:59:26,278 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 18:59:26,279 - main - INFO -   âœ… User Documents Service connected
2025-12-23 18:59:26,279 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 18:59:26,307 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 18:59:26,310 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 18:59:26,311 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 18:59:26,311 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 18:59:26,311 - main - INFO - 
2025-12-23 18:59:26,311 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 18:59:26,312 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 18:59:26,312 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 18:59:26,312 - main - INFO -        - Separates warranties from extensions
2025-12-23 18:59:26,312 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 18:59:26,312 - main - INFO -        - Correct deductible tier detection
2025-12-23 18:59:26,313 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 18:59:26,313 - main - INFO - 
2025-12-23 18:59:26,313 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 18:59:26,313 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 18:59:26,313 - main - INFO -        - Identifies unique items per provider
2025-12-23 18:59:26,313 - main - INFO -        - Transparent scoring methodology
2025-12-23 18:59:26,313 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 18:59:26,314 - main - INFO - 
2025-12-23 18:59:26,314 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 18:59:26,314 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 18:59:26,314 - main - INFO -        - No manual section generation
2025-12-23 18:59:26,314 - main - INFO -        - Complete MongoDB integration
2025-12-23 18:59:26,314 - main - INFO - 
2025-12-23 18:59:26,315 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 18:59:26,315 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 18:59:26,315 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 18:59:26,315 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 18:59:26,315 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 18:59:26,315 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 18:59:26,315 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 18:59:26,316 - main - INFO - 
2025-12-23 18:59:26,316 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 18:59:26,316 - main - INFO -      Main:
2025-12-23 18:59:26,316 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 18:59:26,316 - main - INFO - 
2025-12-23 18:59:26,316 - main - INFO -      Retrieval:
2025-12-23 18:59:26,316 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 18:59:26,317 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 18:59:26,317 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 18:59:26,317 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 18:59:26,317 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 18:59:26,317 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 18:59:26,317 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 18:59:26,318 - main - INFO - 
2025-12-23 18:59:26,318 - main - INFO -      Management:
2025-12-23 18:59:26,318 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 18:59:26,318 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 18:59:26,318 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 18:59:26,318 - main - INFO - 
2025-12-23 18:59:26,318 - main - INFO -      Documents (MongoDB):
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents                All documents
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 18:59:26,319 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 18:59:26,319 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 18:59:26,319 - main - INFO - 
2025-12-23 18:59:26,320 - main - INFO -      Diagnostics & Health:
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/health                   System health
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 18:59:26,320 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 18:59:26,321 - main - INFO - 
2025-12-23 18:59:26,321 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 18:59:26,321 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 18:59:26,322 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 18:59:26,323 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 18:59:26,323 - main - INFO - 
2025-12-23 18:59:26,323 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 18:59:26,324 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 18:59:26,324 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 18:59:26,324 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 18:59:26,324 - main - INFO -      4. No re-upload needed!
2025-12-23 18:59:26,324 - main - INFO - 
2025-12-23 18:59:26,324 - main - INFO - ================================================================================
2025-12-23 18:59:26,324 - main - INFO -   âœ… Application started successfully!
2025-12-23 18:59:26,325 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 18:59:26,325 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 18:59:26,325 - main - INFO - ================================================================================
2025-12-23 18:59:26,325 - main - INFO - 
2025-12-23 18:59:26,325 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:24:52,015 - main - INFO - 
2025-12-23 19:24:52,016 - main - INFO - ================================================================================
2025-12-23 19:24:52,016 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:24:52,018 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:24:52,019 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:24:52,020 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:24:52,021 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:24:52,022 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:24:52,023 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:24:52,024 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:24:52,025 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:24:52,026 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:24:52,026 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:24:52,027 - main - INFO - ================================================================================
2025-12-23 19:24:52,027 - main - INFO - 
2025-12-23 19:24:54,903 - main - INFO - 
2025-12-23 19:24:54,903 - main - INFO - ================================================================================
2025-12-23 19:24:54,903 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:24:54,904 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:24:54,904 - main - INFO - ================================================================================
2025-12-23 19:24:54,904 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:24:54,904 - main - INFO -   Upload Directory: uploads
2025-12-23 19:24:54,905 - main - INFO -   Max File Size: 20MB
2025-12-23 19:24:54,905 - main - INFO - ================================================================================
2025-12-23 19:24:54,905 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:24:54,906 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:24:54,906 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:24:54,927 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:24:54,933 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:24:54,934 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:24:54,934 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:24:54,934 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:24:54,935 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:24:54,962 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:24:54,963 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:24:54,965 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:24:54,968 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:24:54,968 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:24:54,969 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:24:54,969 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:24:54,970 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:24:54,978 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:24:54,978 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:24:54,979 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:24:54,986 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:24:54,988 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:24:54,989 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:24:54,989 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:24:54,989 - main - INFO - 
2025-12-23 19:24:54,989 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:24:54,990 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:24:54,990 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:24:54,990 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:24:54,990 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:24:54,990 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:24:54,990 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:24:54,991 - main - INFO - 
2025-12-23 19:24:54,991 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:24:54,991 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:24:54,991 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:24:54,991 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:24:54,992 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:24:54,992 - main - INFO - 
2025-12-23 19:24:54,992 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:24:54,992 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:24:54,992 - main - INFO -        - No manual section generation
2025-12-23 19:24:54,993 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:24:54,993 - main - INFO - 
2025-12-23 19:24:54,993 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:24:54,993 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:24:54,993 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:24:54,993 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:24:54,994 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:24:54,994 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:24:54,994 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:24:54,994 - main - INFO - 
2025-12-23 19:24:54,994 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:24:54,994 - main - INFO -      Main:
2025-12-23 19:24:54,994 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:24:54,995 - main - INFO - 
2025-12-23 19:24:54,995 - main - INFO -      Retrieval:
2025-12-23 19:24:54,995 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:24:54,995 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:24:54,995 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:24:54,995 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:24:54,996 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:24:54,996 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:24:54,996 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:24:54,996 - main - INFO - 
2025-12-23 19:24:54,996 - main - INFO -      Management:
2025-12-23 19:24:54,997 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:24:54,997 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:24:54,997 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:24:54,997 - main - INFO - 
2025-12-23 19:24:54,997 - main - INFO -      Documents (MongoDB):
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:24:54,998 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:24:54,998 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:24:54,998 - main - INFO - 
2025-12-23 19:24:54,998 - main - INFO -      Diagnostics & Health:
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:24:54,999 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:24:54,999 - main - INFO - 
2025-12-23 19:24:54,999 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:24:54,999 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:24:54,999 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:24:55,000 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:24:55,000 - main - INFO - 
2025-12-23 19:24:55,001 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:24:55,001 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:24:55,001 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:24:55,001 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:24:55,001 - main - INFO -      4. No re-upload needed!
2025-12-23 19:24:55,001 - main - INFO - 
2025-12-23 19:24:55,002 - main - INFO - ================================================================================
2025-12-23 19:24:55,002 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:24:55,002 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:24:55,002 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:24:55,002 - main - INFO - ================================================================================
2025-12-23 19:24:55,003 - main - INFO - 
2025-12-23 19:24:55,003 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:26:12,160 - main - INFO - 
2025-12-23 19:26:12,160 - main - INFO - ================================================================================
2025-12-23 19:26:12,161 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:26:12,162 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:26:12,162 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:26:12,163 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:26:12,163 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:26:12,164 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:26:12,164 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:26:12,165 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:26:12,166 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:26:12,166 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:26:12,166 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:26:12,167 - main - INFO - ================================================================================
2025-12-23 19:26:12,167 - main - INFO - 
2025-12-23 19:26:15,762 - main - INFO - 
2025-12-23 19:26:15,762 - main - INFO - ================================================================================
2025-12-23 19:26:15,763 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:26:15,763 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:26:15,763 - main - INFO - ================================================================================
2025-12-23 19:26:15,763 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:26:15,764 - main - INFO -   Upload Directory: uploads
2025-12-23 19:26:15,764 - main - INFO -   Max File Size: 20MB
2025-12-23 19:26:15,764 - main - INFO - ================================================================================
2025-12-23 19:26:15,765 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:26:15,765 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:26:15,765 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:26:15,782 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:26:15,788 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:26:15,789 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:26:15,789 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:26:15,789 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:26:15,790 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:26:15,808 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:26:15,809 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:26:15,810 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:26:15,812 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:26:15,812 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:26:15,812 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:26:15,813 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:26:15,813 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:26:15,838 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:26:15,838 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:26:15,838 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:26:15,845 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:26:15,847 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:26:15,848 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:26:15,848 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:26:15,848 - main - INFO - 
2025-12-23 19:26:15,848 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:26:15,848 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:26:15,849 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:26:15,849 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:26:15,849 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:26:15,849 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:26:15,849 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:26:15,849 - main - INFO - 
2025-12-23 19:26:15,850 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:26:15,850 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:26:15,850 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:26:15,850 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:26:15,850 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:26:15,850 - main - INFO - 
2025-12-23 19:26:15,851 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:26:15,851 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:26:15,851 - main - INFO -        - No manual section generation
2025-12-23 19:26:15,851 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:26:15,851 - main - INFO - 
2025-12-23 19:26:15,852 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:26:15,852 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:26:15,852 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:26:15,852 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:26:15,852 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:26:15,852 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:26:15,853 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:26:15,853 - main - INFO - 
2025-12-23 19:26:15,853 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:26:15,853 - main - INFO -      Main:
2025-12-23 19:26:15,853 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:26:15,853 - main - INFO - 
2025-12-23 19:26:15,853 - main - INFO -      Retrieval:
2025-12-23 19:26:15,854 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:26:15,854 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:26:15,854 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:26:15,854 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:26:15,854 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:26:15,854 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:26:15,854 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:26:15,855 - main - INFO - 
2025-12-23 19:26:15,855 - main - INFO -      Management:
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:26:15,855 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:26:15,855 - main - INFO - 
2025-12-23 19:26:15,855 - main - INFO -      Documents (MongoDB):
2025-12-23 19:26:15,855 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:26:15,856 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:26:15,856 - main - INFO - 
2025-12-23 19:26:15,856 - main - INFO -      Diagnostics & Health:
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:26:15,856 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:26:15,857 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:26:15,857 - main - INFO - 
2025-12-23 19:26:15,857 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:26:15,857 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:26:15,858 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:26:15,858 - main - INFO - 
2025-12-23 19:26:15,858 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:26:15,858 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:26:15,858 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:26:15,859 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:26:15,859 - main - INFO -      4. No re-upload needed!
2025-12-23 19:26:15,859 - main - INFO - 
2025-12-23 19:26:15,859 - main - INFO - ================================================================================
2025-12-23 19:26:15,859 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:26:15,860 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:26:15,860 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:26:15,860 - main - INFO - ================================================================================
2025-12-23 19:26:15,860 - main - INFO - 
2025-12-23 19:26:15,860 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 19:31:25,244 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:31:25,246 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:31:25,246 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,248 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,250 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:31:25,253 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:31:25,254 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:31:25,257 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:31:25,260 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:31:25,261 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,084 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:42:14,084 - main - INFO - ğŸ“¥ OPTIONS /api/admin/hakim-scores
2025-12-23 19:42:14,085 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,086 - main - INFO - ğŸ“¤ OPTIONS /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,087 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:42:14,089 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:42:14,090 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:42:14,092 - main - INFO - ğŸ“¥ GET /api/admin/hakim-scores
2025-12-23 19:42:14,094 - app.services.hakim_score_service - INFO - ğŸ“Š Retrieved 27 Hakim scores (sorted by company_name, order: 1)
2025-12-23 19:42:14,095 - main - INFO - ğŸ“¤ GET /api/admin/hakim-scores - 200 - 0.00s
2025-12-23 19:43:11,069 - main - INFO - 
2025-12-23 19:43:11,069 - main - INFO - ================================================================================
2025-12-23 19:43:11,070 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 19:43:11,071 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:43:11,071 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 19:43:11,072 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 19:43:11,073 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 19:43:11,074 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 19:43:11,074 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 19:43:11,075 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 19:43:11,076 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 19:43:11,076 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 19:43:11,077 - main - INFO -   âœ… Application stopped successfully
2025-12-23 19:43:11,077 - main - INFO - ================================================================================
2025-12-23 19:43:11,077 - main - INFO - 
2025-12-23 19:43:14,163 - main - INFO - 
2025-12-23 19:43:14,163 - main - INFO - ================================================================================
2025-12-23 19:43:14,163 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 19:43:14,164 - main - INFO -   Production-Ready Complete Integration
2025-12-23 19:43:14,164 - main - INFO - ================================================================================
2025-12-23 19:43:14,164 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 19:43:14,164 - main - INFO -   Upload Directory: uploads
2025-12-23 19:43:14,165 - main - INFO -   Max File Size: 20MB
2025-12-23 19:43:14,165 - main - INFO - ================================================================================
2025-12-23 19:43:14,165 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 19:43:14,165 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 19:43:14,166 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 19:43:14,187 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 19:43:14,193 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 19:43:14,193 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 19:43:14,193 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 19:43:14,194 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 19:43:14,194 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 19:43:14,226 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 19:43:14,228 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 19:43:14,230 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 19:43:14,232 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 19:43:14,232 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 19:43:14,233 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 19:43:14,243 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 19:43:14,243 - main - INFO -   âœ… User Documents Service connected
2025-12-23 19:43:14,245 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 19:43:14,255 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 19:43:14,258 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 19:43:14,259 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 19:43:14,259 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 19:43:14,259 - main - INFO - 
2025-12-23 19:43:14,259 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 19:43:14,260 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 19:43:14,260 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 19:43:14,260 - main - INFO -        - Separates warranties from extensions
2025-12-23 19:43:14,260 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 19:43:14,261 - main - INFO -        - Correct deductible tier detection
2025-12-23 19:43:14,261 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 19:43:14,261 - main - INFO - 
2025-12-23 19:43:14,261 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 19:43:14,261 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 19:43:14,262 - main - INFO -        - Identifies unique items per provider
2025-12-23 19:43:14,262 - main - INFO -        - Transparent scoring methodology
2025-12-23 19:43:14,262 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 19:43:14,262 - main - INFO - 
2025-12-23 19:43:14,263 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 19:43:14,263 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 19:43:14,263 - main - INFO -        - No manual section generation
2025-12-23 19:43:14,263 - main - INFO -        - Complete MongoDB integration
2025-12-23 19:43:14,263 - main - INFO - 
2025-12-23 19:43:14,264 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 19:43:14,264 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 19:43:14,264 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 19:43:14,264 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 19:43:14,264 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 19:43:14,264 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 19:43:14,265 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 19:43:14,265 - main - INFO - 
2025-12-23 19:43:14,265 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 19:43:14,265 - main - INFO -      Main:
2025-12-23 19:43:14,265 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 19:43:14,266 - main - INFO - 
2025-12-23 19:43:14,266 - main - INFO -      Retrieval:
2025-12-23 19:43:14,266 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 19:43:14,266 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 19:43:14,267 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 19:43:14,267 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 19:43:14,267 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 19:43:14,267 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 19:43:14,267 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 19:43:14,268 - main - INFO - 
2025-12-23 19:43:14,268 - main - INFO -      Management:
2025-12-23 19:43:14,268 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 19:43:14,268 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 19:43:14,269 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 19:43:14,269 - main - INFO - 
2025-12-23 19:43:14,269 - main - INFO -      Documents (MongoDB):
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents                All documents
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 19:43:14,270 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 19:43:14,270 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 19:43:14,271 - main - INFO - 
2025-12-23 19:43:14,271 - main - INFO -      Diagnostics & Health:
2025-12-23 19:43:14,271 - main - INFO -        GET  /api/health                   System health
2025-12-23 19:43:14,271 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 19:43:14,272 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 19:43:14,272 - main - INFO - 
2025-12-23 19:43:14,272 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 19:43:14,272 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 19:43:14,273 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 19:43:14,274 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 19:43:14,274 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 19:43:14,274 - main - INFO - 
2025-12-23 19:43:14,274 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 19:43:14,274 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 19:43:14,275 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 19:43:14,275 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 19:43:14,275 - main - INFO -      4. No re-upload needed!
2025-12-23 19:43:14,275 - main - INFO - 
2025-12-23 19:43:14,276 - main - INFO - ================================================================================
2025-12-23 19:43:14,276 - main - INFO -   âœ… Application started successfully!
2025-12-23 19:43:14,276 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 19:43:14,276 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 19:43:14,277 - main - INFO - ================================================================================
2025-12-23 19:43:14,277 - main - INFO - 
2025-12-23 19:43:14,278 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 21:08:45,709 - main - INFO - 
2025-12-23 21:08:45,709 - main - INFO - ================================================================================
2025-12-23 21:08:45,709 - main - INFO -   ğŸ›‘ Shutting down application...
2025-12-23 21:08:45,711 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 21:08:45,711 - main - INFO -   âœ… Enhanced MongoDB connection closed
2025-12-23 21:08:45,712 - app.services.user_subscription_service - INFO - ğŸ”Œ Disconnected from MongoDB
2025-12-23 21:08:45,712 - main - INFO -   âœ… User Subscription Service connection closed
2025-12-23 21:08:45,713 - app.services.user_documents_service - INFO - ğŸ”Œ User Documents Service disconnected from MongoDB
2025-12-23 21:08:45,713 - main - INFO -   âœ… User Documents Service connection closed
2025-12-23 21:08:45,714 - app.services.hakim_score_service - INFO - ğŸ”Œ Hakim Score Service disconnected from MongoDB
2025-12-23 21:08:45,714 - main - INFO -   âœ… Hakim Score Service connection closed
2025-12-23 21:08:45,715 - main - INFO -   âœ… Cleaned up 0 temporary files
2025-12-23 21:08:45,715 - main - INFO -   âœ… Application stopped successfully
2025-12-23 21:08:45,715 - main - INFO - ================================================================================
2025-12-23 21:08:45,716 - main - INFO - 
2025-12-23 21:08:56,771 - main - INFO - 
2025-12-23 21:08:56,771 - main - INFO - ================================================================================
2025-12-23 21:08:56,771 - main - INFO -   INSURANCE QUOTE COMPARISON API v3.1
2025-12-23 21:08:56,772 - main - INFO -   Production-Ready Complete Integration
2025-12-23 21:08:56,772 - main - INFO - ================================================================================
2025-12-23 21:08:56,772 - main - INFO -   AI Model: gpt-4o-mini
2025-12-23 21:08:56,772 - main - INFO -   Upload Directory: uploads
2025-12-23 21:08:56,773 - main - INFO -   Max File Size: 20MB
2025-12-23 21:08:56,773 - main - INFO - ================================================================================
2025-12-23 21:08:56,773 - main - INFO -   âœ… Upload directory ready: uploads
2025-12-23 21:08:56,774 - main - INFO -   âœ… Logs directory ready: logs/
2025-12-23 21:08:56,774 - app.services.mongodb_service_enhanced - INFO - ğŸ”Œ Connecting to MongoDB: mongodb://localhost:27017/hakemAI
2025-12-23 21:08:57,027 - app.services.mongodb_service_enhanced - INFO - âœ… Successfully connected to MongoDB
2025-12-23 21:08:57,031 - app.services.mongodb_service_enhanced - INFO - âœ… Database indexes created successfully
2025-12-23 21:08:57,031 - main - INFO -   âœ… Enhanced MongoDB connected: mongodb://localhost:27017
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO - ğŸ”Œ Connecting to MongoDB for user subscription checks
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO -    URL: mongodb://localhost:...alhost:27017/hakemAI
2025-12-23 21:08:57,032 - app.services.user_subscription_service - INFO -    Database: hakemAI
2025-12-23 21:08:57,066 - app.services.user_subscription_service - INFO - âœ… Successfully connected to MongoDB for user subscription checks
2025-12-23 21:08:57,067 - app.services.user_subscription_service - INFO - ğŸ“‹ Available databases: ['admin', 'cms', 'cms_database', 'config', 'hakemAI', 'insurance_comparison', 'local']
2025-12-23 21:08:57,068 - app.services.user_subscription_service - INFO - ğŸ“‹ Collections in 'hakemAI': ['companyusers', 'user_documents', 'companies', 'hakim_scores', 'comparisons', 'users', 'individual_pdf_extractions', 'admins']
2025-12-23 21:08:57,070 - app.services.user_subscription_service - INFO - ğŸ“Š Users collection has 4 documents
2025-12-23 21:08:57,070 - main - INFO -   âœ… User Subscription Service connected
2025-12-23 21:08:57,070 - app.services.user_documents_service - INFO - ğŸ”Œ Connecting User Documents Service to MongoDB
2025-12-23 21:08:57,070 - app.services.user_documents_service - INFO -    URL: mongodb://localhost:27017/hakemAI
2025-12-23 21:08:57,071 - app.services.user_documents_service - INFO -    Database: hakemAI
2025-12-23 21:08:57,116 - app.services.user_documents_service - INFO - âœ… User Documents Service connected to MongoDB
2025-12-23 21:08:57,116 - main - INFO -   âœ… User Documents Service connected
2025-12-23 21:08:57,117 - app.services.hakim_score_service - INFO - ğŸ”Œ Connecting Hakim Score Service to MongoDB: mongodb://localhost:27017
2025-12-23 21:08:57,142 - app.services.hakim_score_service - INFO - âœ… Hakim Score Service connected to MongoDB
2025-12-23 21:08:57,146 - app.services.hakim_score_service - INFO - âœ… Hakim Score indexes created successfully
2025-12-23 21:08:57,146 - main - INFO -   âœ… Hakim Score Service connected
2025-12-23 21:08:57,146 - main - INFO -   âœ… Progress tracker cleanup task started
2025-12-23 21:08:57,146 - main - INFO - 
2025-12-23 21:08:57,147 - main - INFO -   ğŸ¯ INTEGRATED COMPONENTS:
2025-12-23 21:08:57,147 - main - INFO -      â€¢ AI Parser v6.0: 6-stage comprehensive extraction
2025-12-23 21:08:57,147 - main - INFO -        - Proper entity identification (insurer vs insured)
2025-12-23 21:08:57,147 - main - INFO -        - Separates warranties from extensions
2025-12-23 21:08:57,148 - main - INFO -        - Extracts subjectivities & operational details
2025-12-23 21:08:57,148 - main - INFO -        - Correct deductible tier detection
2025-12-23 21:08:57,148 - main - INFO -        - Full benefits extraction (30+, not 4)
2025-12-23 21:08:57,148 - main - INFO - 
2025-12-23 21:08:57,148 - main - INFO -      â€¢ AI Ranker v2.0: Complete comparison engine
2025-12-23 21:08:57,149 - main - INFO -        - Generates ALL sections comprehensively
2025-12-23 21:08:57,149 - main - INFO -        - Identifies unique items per provider
2025-12-23 21:08:57,149 - main - INFO -        - Transparent scoring methodology
2025-12-23 21:08:57,149 - main - INFO -        - Uses full _extended_data from parser
2025-12-23 21:08:57,150 - main - INFO - 
2025-12-23 21:08:57,150 - main - INFO -      â€¢ Routes v3.1: Simplified orchestration
2025-12-23 21:08:57,150 - main - INFO -        - Single endpoint auto-populates everything
2025-12-23 21:08:57,150 - main - INFO -        - No manual section generation
2025-12-23 21:08:57,151 - main - INFO -        - Complete MongoDB integration
2025-12-23 21:08:57,151 - main - INFO - 
2025-12-23 21:08:57,151 - main - INFO -   ğŸ”§ CRITICAL FIXES IN v3.1:
2025-12-23 21:08:57,152 - main - INFO -      âœ… Benefits count: 30+ (was 4)
2025-12-23 21:08:57,152 - main - INFO -      âœ… Warranty categorization: Proper separation
2025-12-23 21:08:57,153 - main - INFO -      âœ… Subjectivities: Now included
2025-12-23 21:08:57,153 - main - INFO -      âœ… Deductibles: Correct tier (SR 1M, not SR 50K)
2025-12-23 21:08:57,153 - main - INFO -      âœ… Operational details: Validity, payment, brokerage
2025-12-23 21:08:57,153 - main - INFO -      âœ… Scoring: Transparent methodology with breakdown
2025-12-23 21:08:57,154 - main - INFO - 
2025-12-23 21:08:57,154 - main - INFO -   ğŸ“¡ AVAILABLE ENDPOINTS:
2025-12-23 21:08:57,154 - main - INFO -      Main:
2025-12-23 21:08:57,154 - main - INFO -        POST /api/compare-quotes           Upload PDFs, get everything
2025-12-23 21:08:57,154 - main - INFO - 
2025-12-23 21:08:57,155 - main - INFO -      Retrieval:
2025-12-23 21:08:57,155 - main - INFO -        GET  /api/comparisons/{id}         Complete comparison
2025-12-23 21:08:57,155 - main - INFO -        POST /api/summary                  Rankings & analysis
2025-12-23 21:08:57,155 - main - INFO -        POST /api/key-differences          Unique items per provider
2025-12-23 21:08:57,155 - main - INFO -        POST /api/side-by-side             Top providers comparison
2025-12-23 21:08:57,155 - main - INFO -        POST /api/data-table               Sortable data grid
2025-12-23 21:08:57,156 - main - INFO -        POST /api/analytics                Charts & statistics
2025-12-23 21:08:57,156 - main - INFO -        POST /api/provider-cards           UI-ready summaries
2025-12-23 21:08:57,156 - main - INFO - 
2025-12-23 21:08:57,156 - main - INFO -      Management:
2025-12-23 21:08:57,156 - main - INFO -        GET  /api/comparisons/recent       Recent comparisons
2025-12-23 21:08:57,156 - main - INFO -        GET  /api/comparisons/search       Search by provider
2025-12-23 21:08:57,156 - main - INFO -        DELETE /api/comparisons/{id}       Delete comparison
2025-12-23 21:08:57,157 - main - INFO - 
2025-12-23 21:08:57,157 - main - INFO -      Documents (MongoDB):
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents                All documents
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents/{id}           Specific document
2025-12-23 21:08:57,157 - main - INFO -        GET  /api/documents/search/{q}     Search documents
2025-12-23 21:08:57,157 - main - INFO -        DELETE /api/documents/{id}         Delete document
2025-12-23 21:08:57,157 - main - INFO - 
2025-12-23 21:08:57,157 - main - INFO -      Diagnostics & Health:
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/health                   System health
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/status                   Detailed status
2025-12-23 21:08:57,158 - main - INFO -        GET  /api/diagnostics/comparison/{id}  Comparison diagnostics
2025-12-23 21:08:57,158 - main - INFO - 
2025-12-23 21:08:57,158 - main - INFO -   ğŸ“Š AUTO-GENERATED SECTIONS:
2025-12-23 21:08:57,158 - main - INFO -      âœ“ Summary with rankings & detailed analysis
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Key Differences (unique warranties, exclusions)
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Side-by-Side (top providers comparison matrix)
2025-12-23 21:08:57,159 - main - INFO -      âœ“ Data Table (sortable, filterable)
2025-12-23 21:08:57,160 - main - INFO -      âœ“ Analytics (premium charts, score charts, features)
2025-12-23 21:08:57,160 - main - INFO -      âœ“ Provider Cards (UI-ready summaries)
2025-12-23 21:08:57,161 - main - INFO -      âœ“ Extracted Quotes (full data with all benefits)
2025-12-23 21:08:57,161 - main - INFO - 
2025-12-23 21:08:57,161 - main - INFO -   ğŸ¯ WORKFLOW:
2025-12-23 21:08:57,161 - main - INFO -      1. Upload 1-10 PDFs â†’ POST /api/compare-quotes
2025-12-23 21:08:57,161 - main - INFO -      2. Receive comparison_id + complete data
2025-12-23 21:08:57,161 - main - INFO -      3. Retrieve sections using comparison_id
2025-12-23 21:08:57,162 - main - INFO -      4. No re-upload needed!
2025-12-23 21:08:57,162 - main - INFO - 
2025-12-23 21:08:57,162 - main - INFO - ================================================================================
2025-12-23 21:08:57,162 - main - INFO -   âœ… Application started successfully!
2025-12-23 21:08:57,162 - main - INFO -   ğŸ“š API Docs: http://localhost:8000/docs
2025-12-23 21:08:57,162 - main - INFO -   ğŸ“– ReDoc: http://localhost:8000/redoc
2025-12-23 21:08:57,162 - main - INFO - ================================================================================
2025-12-23 21:08:57,163 - main - INFO - 
2025-12-23 21:08:57,163 - app.services.progress_tracker - INFO - ğŸ”„ Starting progress cleanup task (interval: 300s)
2025-12-23 21:08:59,373 - main - INFO - ğŸ“¥ GET /docs
2025-12-23 21:08:59,375 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-23 21:09:00,021 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-23 21:09:00,063 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.04s
2025-12-23 21:09:07,943 - main - INFO - ğŸ“¥ GET /docs
2025-12-23 21:09:07,944 - main - INFO - ğŸ“¤ GET /docs - 200 - 0.00s
2025-12-23 21:09:08,134 - main - INFO - ğŸ“¥ GET /openapi.json
2025-12-23 21:09:08,135 - main - INFO - ğŸ“¤ GET /openapi.json - 200 - 0.00s
